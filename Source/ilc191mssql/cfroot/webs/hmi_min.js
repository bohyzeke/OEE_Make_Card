var _SCIntern=function(a){function k(a,d){this.element=null;this.name="";this.name=d;if(a)this.element=a.getElementById(d)}function e(a,d,g,c){this.eventId=a;this.cbFunction=d;this.cbArgument1=g;this.cbArgument2=c}a.drawRectShape=function(){var b=0,d=1,g="",d="",c=this.getOutlineWidth(),f=0;this.checkIfInterior()===!0&&(b=1);d=this.checkIfOutline()===!0?1:0;g="rgba("+this.getInteriorColor()+","+b+")";d="rgba("+this.getOutlineColor()+","+d+")";f=this.getOutlineStyle();if(this.frmElmnt!==null)a.removeSVG(this.frmElmnt),
this.frmElmnt=null;switch(f){case a.SOLID:this.frmElmnt=a.createSVGRect(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,g,d,c,this.getInnerFill());break;case a.DASHED:case a.DOTTED:this.frmElmnt=a.createSVGRectDashed(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,g,d,c,this.getInnerFill(),f);break;default:a.log_append_ln("Unknown outline style")}};a.InfoType=function(){this.textg=this.img=this.valuePrev=this.value=this.e=this.type=this.name=
null;this.h=this.w=this.y=this.x=0;this.fSz=this.fSt=this.fN=null};a.PainterType_MPainter=function(b){var d,g,c,f,q;function o(b,c,d,f,g,h,q){if(b.value!==null){var e=null,o=null,m=null,K=1,n=null,p=0,u=null,s=null,t=null,k=null,r={rValue:b.value.toString()};if(b.type!==a.INFO_T_FILE){if(d===!0&&(e=j.getTcrFormatSource(),e.value!==null)){if(typeof g!=="undefined"&&g!=null&&g==!0&&(m=j.getTcrGainSource())!=null&&m.value!=null&&!isNaN(m.value))K=m.value;if(typeof h!=="undefined"&&h!=null&&h==!0&&(n=
j.getTcrOffsetSource())!=null&&n.value!=null&&!isNaN(n.value))p=n.value;if(!isNaN(r.rValue))r.rValue=parseFloat(r.rValue)*parseFloat(K)+parseFloat(p);if(typeof f!=="undefined"&&f!=null&&f==!0){if((u=j.getTcrMinValueSource())!=null&&u.value!=null&&!isNaN(u.value))s=parseFloat(u.value);if((t=j.getTcrMaxValueSource())!=null&&t.value!=null&&!isNaN(t.value))k=parseFloat(t.value);if(s!==null&&r.rValue<s)a.MsgBoxErrorFlag=!0,a.err_append_ln("Invalid entry: "+r.rValue+" < "+s+"!");if(k!==null&&r.rValue>k)a.MsgBoxErrorFlag=
!0,a.err_append_ln("Invalid entry: "+r.rValue+" > "+k+"!")}a.TCR_convertToValueFormat(e.value,r)}if(c===!0&&(o=j.getTcrUnitSource())!=null&&o.value!=null&&o.value!=void 0)r.rValue=r.rValue+" "+o.value;if(c===!0){d=0;d=f=null;c=j.getFormatSource().value;if(c!==null){if(r.rValue.length===0)r.rValue=a.getTimestamp_ms()/1E3;c.indexOf("%t")!==-1?(d=r.rValue*1E3,f=new Date(0),c.indexOf("%tu")!==-1?(f.setTime(d),d=f,f=new Date(0),f.setMilliseconds(d.getUTCMilliseconds()),f.setSeconds(d.getUTCSeconds()),
f.setMinutes(d.getUTCMinutes()),f.setHours(d.getUTCHours()),f.setDate(d.getUTCDate()),f.setMonth(d.getUTCMonth()),f.setFullYear(d.getUTCFullYear()),d=f,c=c.replace("%tu",""),r.rValue=d.strftime(c)):(f.setTime(d),c=c.replace("%t",""),r.rValue=f.strftime(c))):r.rValue=a.sprintf(c,r.rValue)}if((b.type===a.INFO_T_PPO||b.type===a.INFO_T_PASSWORDPPO)&&q!==void 0&&q.ppo!==null&&q.ppo.unit.length>0)r.rValue=r.rValue+" "+q.ppo.unit}b.value=r.rValue}}}function h(b,c,d){b.type=c.type;b.name=c.name;if(b.type===
a.INFO_T_FILE){c.value=c.name;d=c.value.indexOf("|");if(d!=-1)c.value=c.value.substring(0,d);b.value=a.rl_resolveInfoName(c.value)}else b.value=a.RW_readSource(c.type,c.name,d)}var j=this;this.objId=0;this.objStr="";this.h=this.w=this.y=this.x=this.hOrg=this.wOrg=this.yOrg=this.xOrg=this.ptId=0;this.instanceValidUpAction=this.instanceValidDownAction=this.instanceDisabled=this.instanceDraw=this.painterGroupElement=this.shpElmnt=this.svgDoc=null;this.repaintElements=[];this.externEventListener=[];this.editModeFlag=
this.mouseInFlag=!1;this.editSource=new a.InfoType;this.paintSource=new a.InfoType;this.pressedSource=new a.InfoType;this.disabledSource=new a.InfoType;this.formatSource=new a.InfoType;this.tcrFormatSource=new a.InfoType;this.tcrUnitSource=new a.InfoType;this.tcrGainSource=new a.InfoType;this.tcrOffsetSource=new a.InfoType;this.tcrMinValueSource=new a.InfoType;this.tcrMaxValueSource=new a.InfoType;this.blendSources=[];this.blendSourcesPrevString=[];this.onLostActionFunc=this.onDrawActionFunc=this.onGainActionFunc=
this.executeActionMouseUp=this.executeActionMouseDown=null;this.isDisabledPrev=this.isDisabled=!1;this.isVisible=!0;this.notify=function(b,c){var d=0;switch(b){case a.VIEW_GAIN_FOCUS:if(this.instanceDisabled()===!1&&this.onGainActionFunc)this.onGainActionFunc();break;case a.VIEW_LOST_FOCUS:if(this.instanceDisabled()===!1&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();if(j.instanceDisabled&&(j.isDisabled=j.instanceDisabled(),j.isDisabled!==
j.isDisabledPrev))j.isDisabledPrev=j.isDisabled,j.scheduleFullRedrawPainter();this.genericDraw();if(this.instanceDisabled()===!1&&this.onDrawActionFunc)this.onDrawActionFunc();break;case a.MOUSE_DOWN:if(a.OB_checkMouseCoordinates(this,c)===!0)if(this.instanceDisabled()===!1){var f=this.anyMouseDownExternalEventListener(),g=this.anyMouseUpExternalEventListener(),h=this.instanceValidDownAction(),q=this.instanceValidUpAction();if(h===!0||q===!0||f===!0||g===!0){this.isPressed=!0;c.consumedFlag=!0;c.consumedPainter=
this;this.scheduleFullRedrawPainter();if(h===!0)this.executeActionMouseDown(),c.actionExecutedFlag=!0;if(f===!0)this.callExternalListener(b,c),c.actionExecutedFlag=!0;d=1}}else d=0;else d=0;break;case a.MOUSE_UP:if(a.g_MouseDownEventInfo.consumedFlag===!0&&a.g_MouseDownEventInfo.consumedPainter!==null)a.OB_checkMouseCoordinates(this,a.g_MouseDownEventInfo)===!0||a.g_MouseDownEventInfo.consumedPainter===this?this.instanceDisabled()===!1?(this.executeActionMouseUp&&this.executeActionMouseUp(),this.anyMouseUpExternalEventListener()&&
this.callExternalListener(b,c)):a.getDebugLevel()>=2&&a.log_append_ln("hmi_mpainter Disabled while down case"):a.getDebugLevel()>=2&&a.log_append_ln("hmi-mpainter Undo case"),this.isPressed=!1,this.scheduleFullRedrawPainter();break;case a.MOUSE_MOVE:if(a.OB_checkMouseCoordinates(this,c)===!0){if(this.instanceDisabled()===!1&&this.mouseInFlag===!1)this.mouseInFlag=!0,c.type=a.MOUSE_OVER,c.typeStr=a.MOUSE_OVER_STR,this.getNumExternEventListener()&&this.callExternalListener(a.MOUSE_OVER,c)}else if(this.mouseInFlag===
!0)this.mouseInFlag=!1,c.type=a.MOUSE_OUT,c.typeStr=a.MOUSE_OUT_STR,this.getNumExternEventListener()&&(d=this.callExternalListener(a.MOUSE_OUT,c))}return d};this.dragImpl=function(b,c){var d=0,f=0,g=0,h=0,q=0,e=0,h=!1,j=0,o=0,K=0,d=d=0,e=Date.now(),m=Date.now(),m=e-b.lastWriteTSmS;a.getDebugLevel()>=3&&a.log_append_ln("dragImpl(..., "+c+" ) dragInfoPtr.lastWriteTSmS "+b.lastWriteTSmS+" timeNowMs "+e+" dragInfoPtr.previousToWriteValue "+b.previousToWriteValue+" deltaMs "+m);d=b.lastWriteTSmS<=0||b.destType!==
a.INFO_T_PPO?a.RW_readSource(b.destType,b.destName):b.previousToWriteValue;isNaN(d)===!0&&(a.log_append_ln("WARNING this.dragImpl destPrevious value ["+d+"] is NaN so force to 0 "),d=0);a.toFixed(d,4);f=a.RW_readSource_parseFloat(b.typeValueMin,b.nameValueMin,1);g=a.RW_readSource_parseFloat(b.typeValueMax,b.nameValueMax,1);h=a.RW_readSource_parseInt(b.typeOptionFlag,b.nameOptionFlag);d=f;q=g;h=(h&2)==2;j=a.RW_readSource_parseFloat(b.typePxMin,b.namePxMin,1);o=a.RW_readSource_parseFloat(b.typePxMax,
b.namePxMax,1);isNaN(c)===!0&&(a.log_append_ln("WARNING this.dragImpl offset value ["+c+"] is NaN so force to 0 "),c=0);if(o!=j){K=0;o!=j?K=(q-d)*(c-j)/(o-j)+d:a.log_append_ln("ERROR in dragWritePPOFromDrag iOffsetMax == iOffsetMin = "+j);d=a.MIN(f,g);q=a.MAX(f,g);K<d&&(K=d);K>q&&(K=q);isNaN(K)===!0&&(a.log_append_ln("WARNING this.dragImpl destNow value ["+K+"] is NaN so force to 0 "),K=0);h==!0?(d=a.toFixed(K,0),a.getDebugLevel()>=3&&a.log_append_ln("this.dragImpl dragInfoPtr.sliderOptionInteger active so rounds to int before write value= "+
K+" destRounded = "+d)):d=a.toFixed(K,4);if(b.destType===a.INFO_T_PPO){if((b.lastWriteTSmS<=0||m>=a.DRAGINFO_WRITE_MIN_MS)&&b.previousToWriteValue!=d)a.getDebugLevel()>=3&&a.log_append_ln("dragImpl( "+c+" ) WRITE PPO destRounded: "+d+" dragInfoPtr.destName "+b.destName+" deltaMs "+m),a.writePPO(b.destName,d,!0),b.lastWriteTSmS=e}else if(b.previousToWriteValue!=d)a.RW_writeSource(b.destType,b.destName,d),a.getDebugLevel()>=3&&a.log_append_ln("dragImpl( "+c+" ) WRITE CO destRounded: "+d+" dragInfoPtr.destName "+
b.destName+" deltaMs "+m),b.lastWriteTSmS=e;b.previousToWriteValue=d;a.scheduleRepaint()}else h?(d=a.toFixed(K,0),a.getDebugLevel()>=3&&a.log_append_ln("this.dragImpl dragInfoPtr.sliderOptionInteger active so rounds to int before write value= "+K+" destRounded = "+d)):d=a.toFixed(K,4);return d};this.onDrag=function(){var b=this.getOffsetStruct();this.dragXInfo!==null&&(this.dragImpl(this.dragXInfo,a.g_MouseMoveEventInfo.x-this.xOrg-b.xOff-this.dragXInfo.relDownPos),a.getDebugLevel()>=3&&(a.log_append_ln("this.onDrag"),
a.log_append_ln("sc.g_MouseMoveEventInfo.x: "+a.g_MouseMoveEventInfo.x),a.log_append_ln("this.xOrg: "+this.xOrg),a.log_append_ln("offset.xOff: "+b.xOff),a.log_append_ln("this.dragXInfo.relDownPos: "+this.dragXInfo.relDownPos)));this.dragYInfo!==null&&(this.dragImpl(this.dragYInfo,a.g_MouseMoveEventInfo.y-this.yOrg-b.yOff-this.dragYInfo.relDownPos),a.getDebugLevel()>=3&&(a.log_append_ln("this.onDrag"),a.log_append_ln("sc.g_MouseMoveEventInfo.y: "+a.g_MouseMoveEventInfo.y),a.log_append_ln("this.yOrg: "+
this.yOrg),a.log_append_ln("offset.yOff: "+b.yOff),a.log_append_ln("this.dragYInfo.relDownPos: "+this.dragYInfo.relDownPos)));this.setOffset(b)};this.getDragXOffset=function(){var b=0;this.dragXInfo!==null&&(b=this.getDragOffset(this.dragXInfo));a.getDebugLevel()>=3&&a.log_append_ln("this.getDragXOffset: "+b);isNaN(b)===!0&&(a.log_append_ln("WARNING this.getDragXOffset dOffset value ["+b+"] is NaN so force to 0 "),b=0);return b};this.getDragYOffset=function(){var b=0;this.dragYInfo!==null&&(b=this.getDragOffset(this.dragYInfo));
isNaN(b)===!0&&(a.log_append_ln("WARNING this.getDragYOffset dOffset value ["+b+"] is NaN so force to 0 "),b=0);return b};this.getDragOffset=function(b){var c=0,d=0,f=c=0,g=f=0,h=0,c=0;b!==null&&(h=b.lastWriteTSmS<=0||b.destType!==a.INFO_T_PPO?a.RW_readSource(b.destType,b.destName):b.previousToWriteValue,isNaN(h)===!0&&(a.log_append_ln("WARNING this.getDragOffset destNow value ["+h+"] is NaN so force to 0 for "+b.destName),h=0));c=parseFloat(a.RW_readSource(b.typeValueMin,b.nameValueMin));d=f=parseFloat(a.RW_readSource(b.typeValueMax,
b.nameValueMax));f=parseFloat(a.RW_readSource(b.typePxMin,b.namePxMin));g=parseFloat(a.RW_readSource(b.typePxMax,b.namePxMax));b=0;d!=c?b=(h-c)*(g-f)/(d-c)+f:a.log_append_ln("ERROR in dragGetOffsetFromPPO iMaxPPO == iMinPPO = "+c);c=b;isNaN(c)===!0&&(a.log_append_ln("WARNING this.getDragOffset dOffset value ["+c+"] is NaN so force to 0 "),c=0);c<f&&(c=f);c>g&&(c=g);return c};this.dragYInfo=this.dragXInfo=null;var p="0, 0, 0",s=!0,n="0, 0, 0",u=!1,t=!1,m=!0,r=null,w=1,x=0,v=10,y="",z=0,L=10,P="",M=
0,E=!1,Q=!1,T=!1,S=0,C=0,F=!1,A={xOff:0,yOff:0,wOff:0,hOff:0},B=0,I=0;d=0;c=0;q=0;g="";f="";this.getOffsetStruct=function(){return A};this.hasAnyOffset=function(){var a=!1;if(A.xOff!=0||A.yOff!=0||A.wOff!=0||A.hOff!=0||B!=0||I!=0)a=!0;return a};this.scheduleFullRedrawPainter=function(){E=!0};this.isFullPainterRedrawRequired=function(){var b=!1;return b=a.getDebugLevel()>=4?!0:E};this.resetFullRedrawFlag=function(){E=!1};this.genericDraw=function(){if(this.isFullPainterRedrawRequired()===!0){j.getShapeElement()&&
(j.getShapeElement().setAttribute("stroke","rgb("+j.getOutlineColor()+")"),j.checkIfOutline()===!0?j.getShapeElement().setAttribute("stroke-width",j.getOutlineWidth()):j.getShapeElement().setAttribute("stroke-width","0"),j.ptId!==a.PT_NAME_BARGRAPH_ID&&(j.getShapeElement().setAttribute("fill","rgb("+j.getInteriorColor()+")"),j.checkIfInterior()===!0?j.getShapeElement().setAttribute("fill-opacity","1"):j.getShapeElement().setAttribute("fill-opacity","0")));var b="",h=0,e=0,o=0;d>0?(h=0,h-=Math.abs(d)):
d<0&&(h=Math.abs(d));h!==0&&(e=g===""||isNaN(g)===!0?j.x+j.w/2+c:g,o=f===""||isNaN(f)===!0?j.y+j.h/2+q:f,b="rotate("+h+","+e+","+o+")");h=j.getMainGroupElement();e=null;h!==null?(b.length>0&&h.setAttributeNS(null,"transform",b),b.length===0&&(e=h.getAttributeNS(null,"transform"),e!==null&&e.length>0&&h.setAttributeNS(null,"transform",""))):a.log_append_ln("getMainGroupElement returned null!")}this.typeDraw!==null&&this.typeDraw();this.resetFullRedrawFlag()};this.typeDraw=null;this.setTextHPos=function(a){S!=
a&&(S=a,this.scheduleFullRedrawPainter())};this.getTextHPos=function(){return S};this.setTextVPos=function(a){C!=a&&(C=a,this.scheduleFullRedrawPainter())};this.getTextVPos=function(){return C};this.setMultiline=function(a){Q!=a&&(Q=a,this.scheduleFullRedrawPainter())};this.getIsMultiline=function(){return Q};this.setAutoAdjust=function(a){T!=a&&(T=a,this.scheduleFullRedrawPainter())};this.getIsAutoAjust=function(){return T};this.setTextColor=function(a){r!=a&&(r=a,this.scheduleFullRedrawPainter())};
this.setOutlineColor=function(a){n!=a&&(n=a,this.scheduleFullRedrawPainter())};this.setInnerFill=function(a){u!=a&&(u=a,this.scheduleFullRedrawPainter())};this.setU3d=function(a){t!=a&&(t=a,this.scheduleFullRedrawPainter())};this.setInteriorColor=function(a){p!=a&&(p=a,this.scheduleFullRedrawPainter())};this.setHasOutline=function(a){m!=a&&(m=a,this.scheduleFullRedrawPainter())};this.setHasInterior=function(a){s!=a&&(s=a,this.scheduleFullRedrawPainter())};this.setPressedFlag=function(a){F!=a&&(F=
a,this.scheduleFullRedrawPainter())};this.setUseFont=function(b){var c={ppo:null},d="",f=0,d=0,g="",f="";if(b.type===null){if(v!=L&&(v!=L||y!=P||z!=M))v=L,y=P,z=M,this.scheduleFullRedrawPainter()}else if(b.type==a.INFO_T_FONT){if(v!=b.fSz||y!=b.fN||z!=b.fSt)v=b.fSz,y=b.fN,z=b.fSt,this.scheduleFullRedrawPainter()}else if(d=a.RW_readSource(b.type,b.name,c),f=d.split(","),f.length==3&&(g=f[0],d=parseInt(f[1],10),f=parseInt(f[2],10),!(isNaN(f)===!0||isNaN(d)===!0||f<=0||d<0||d>=5)))if(v!=f||y!=g||z!=
d)v=f,y=g,z=d,this.scheduleFullRedrawPainter()};this.getPressedFlag=function(){return F};this.getColorFromString=function(b){var c="",c=-1,b=b.toString(),c=b.indexOf("#");if(c!=-1)return b=parseInt(b.slice(1,b.length),16),c=a.getRValue(b)+","+a.getGValue(b)+","+a.getBValue(b);c=b.indexOf(",");return c!=-1?b:c=a.getRValue(b)+","+a.getGValue(b)+","+a.getBValue(b)};this.getInteriorColor=function(){return this.getColorFromString(p)};this.getOutlineColor=function(){return this.getColorFromString(n)};this.getTextColor=
function(){var a="0,0,0,";return a=r!==null?this.getColorFromString(r):this.getOutlineColor()};this.getOutlineStyle=function(){return x};this.getOutlineWidth=function(){return w};this.getInnerFill=function(){return u};this.getU3d=function(){return t};this.checkIfInterior=function(){return s};this.checkIfOutline=function(){return m};this.getFontSize=function(){return v};this.getFontName=function(){return y};this.getFontStyle=function(){return z};this.getSvgFontStyle=function(){var a="normal";switch(this.getFontStyle()){case 0:a=
"normal";break;case 1:a="normal";break;case 2:a="italic";break;case 3:a="italic";break;default:a="normal"}return a};this.getSvgFontWeight=function(){var a="lighter";switch(this.getFontStyle()){case 0:a="lighter";break;case 1:a="bold";break;case 2:a="lighter";break;case 3:a="bold";break;default:a="lighter"}return a};this._getRepaintElement=function(a){for(var b=0,c=!1,d=0,f=null,b=0;b<this.repaintElements.length&&c===!1;b++)this.repaintElements[b]&&this.repaintElements[b].name===a&&(c=!0,d=b);c===
!1&&(this.repaintElements.push(new k(this.svgDoc,a)),d=this.repaintElements.length-1,c=!0);if(c===!0)f=this.repaintElements[d].element;return f};this.getRepaintElementByIdx=function(a){return this.getRepaintElement("sc_obj_"+this.objId+"_rpn_"+a)};this.getRepaintElement=function(b){var c=this._getRepaintElement(b);c||a.getDebugLevel()>=3&&a.log_append_ln("getRepaintElement: "+b+" not found!");return c};this.getShapeElement=function(){return this.shpElmnt};this.getMainGroupElement=function(){return this.painterGroupElement};
this.getNumRepaints=function(){return this.repaintElements.length};this.changeRepaintVisibility=function(a,b){b?this.showRepaint(a):this.hideRepaint(a)};this.hideRepaint=function(b){var c=this.getRepaintElement(b);c===null?a.log_append_ln(b+" is null (hideRepaint)"):c.setAttributeNS(null,"visibility","hidden")};this.showRepaint=function(b){var c=this.getRepaintElement(b);c===null?a.log_append_ln(b+" is null (showRepaint)"):c.setAttributeNS(null,"visibility","")};this.setVisibility=function(a){this.isVisible=
a;var b=this.getMainGroupElement();b==null?console.log("setVisibility() domElmnt == null"):a?b.setAttributeNS(null,"visibility","visible"):b.setAttributeNS(null,"visibility","hidden")};this.setOffset=function(b){var c=this.getDragXOffset(),d=this.getDragYOffset();isNaN(c)===!0&&(a.log_append_ln("WARNING this.setOffset offsetDragx value ["+c+"] is NaN so force to 0 "),c=0);isNaN(d)===!0&&(a.log_append_ln("WARNING this.setOffset offsetDragy value ["+d+"] is NaN so force to 0 "),d=0);if(isNaN(b.xOff)===
!0)a.log_append_ln("WARNING this.setOffset offsetStruct.xOff value ["+b.xOff+"] is NaN so force to 0 "),b.xOff=0;if(isNaN(b.yOff)===!0)a.log_append_ln("WARNING this.setOffset offsetStruct.yOff value ["+b.yOff+"] is NaN so force to 0 "),b.yOff=0;if(isNaN(b.wOff)===!0)a.log_append_ln("WARNING this.setOffset offsetStruct.wOff value ["+b.wOff+"] is NaN so force to 0 "),b.wOff=0;if(isNaN(b.hOff)===!0)a.log_append_ln("WARNING this.setOffset offsetStruct.hOff value ["+b.hOff+"] is NaN so force to 0 "),b.hOff=
0;if(isNaN(A.xOff)===!0)a.log_append_ln("WARNING this.setOffset offsetStructPrev.xOff value ["+A.xOff+"] is NaN so force to 0 "),A.xOff=0;if(isNaN(A.yOff)===!0)a.log_append_ln("WARNING this.setOffset offsetStructPrev.yOff value ["+A.yOff+"] is NaN so force to 0 "),A.yOff=0;if(isNaN(A.wOff)===!0)a.log_append_ln("WARNING this.setOffset offsetStructPrev.wOff value ["+A.wOff+"] is NaN so force to 0 "),A.wOff=0;if(isNaN(A.hOff)===!0)a.log_append_ln("WARNING this.setOffset offsetStructPrev.hOff value ["+
A.hOff+"] is NaN so force to 0 "),A.hOff=0;isNaN(B)===!0&&(a.log_append_ln("WARNING this.setOffset offsetDragStructPrev.dragXOff value ["+B+"] is NaN so force to 0 "),B=0);isNaN(I)===!0&&(a.log_append_ln("WARNING this.setOffset offsetDragStructPrev.dragYOff value ["+I+"] is NaN so force to 0 "),I=0);if(A.xOff!==b.xOff||A.yOff!==b.yOff||A.wOff!==b.wOff||A.hOff!==b.hOff||B!==c||I!==d){this.x=this.xOrg+b.xOff+c;if(isNaN(this.x)===!0)a.log_append_ln("WARNING this.setOffset this.x value ["+this.x+"] is NaN so force to 0 "),
this.x=0;this.y=this.yOrg+b.yOff+d;if(isNaN(this.y)===!0)a.log_append_ln("WARNING this.setOffset this.y value ["+this.y+"] is NaN so force to 0 "),this.y=0;this.w=this.wOrg+b.wOff;if(isNaN(this.w)===!0)a.log_append_ln("WARNING this.setOffset this.w value ["+this.w+"] is NaN so force to 0 "),this.w=0;this.h=this.hOrg+b.hOff;if(isNaN(this.h)===!0)a.log_append_ln("WARNING this.setOffset this.h value ["+this.h+"] is NaN so force to 0 "),this.h=0;if(this.w<0){this.x+=this.w;if(this.x<0)this.x=0;this.w=
-this.w}if(this.h<0){this.y+=this.h;if(this.y<0)this.y=0;this.h=-this.h}a.getDebugLevel>=2&&a.log_append_ln("this.setOffset \nthis.x = "+this.x+" \nthis.y = "+this.y+" \nthis.w = "+this.w+" \nthis.h = "+this.h);A.xOff=b.xOff;A.yOff=b.yOff;A.wOff=b.wOff;A.hOff=b.hOff;B=c;I=d;this.scheduleFullRedrawPainter()}};this.setRotate=function(a){if(g!==a.cxAbs||f!==a.cyAbs||d!==a.angle||c!==a.cxOff||q!==a.cyOff)g=a.cxAbs,f=a.cyAbs,c=a.cxOff,q=a.cyOff,d=a.angle,this.scheduleFullRedrawPainter()};this.addExternListener=
function(b,c,d,f){typeof c==="function"?((b===a.MOUSE_OVER||b===a.MOUSE_OUT)&&a.g_MouseMoveNotificationList.push(this),this.externEventListener.push(new e(b,c,d,f))):a.log_append_ln("addExternListener error: Invalid callback function (painter x:"+this.x+" y:"+this.y+" w:"+this.w+" h:"+this.h+")")};this.getNumExternEventListener=function(){return this.externEventListener.length};this.anyMouseDownExternalEventListener=function(){for(var b=0,b=0;b<this.externEventListener.length;b++)if(this.externEventListener[b]&&
this.externEventListener[b].eventId===a.MOUSE_DOWN)return!0;return!1};this.anyMouseUpExternalEventListener=function(){for(var b=0,b=0;b<this.externEventListener.length;b++)if(this.externEventListener[b]&&this.externEventListener[b].eventId===a.MOUSE_UP)return!0;return!1};this.callExternalListener=function(a,b){for(var c=0,c=0;c<this.externEventListener.length;c++)this.externEventListener[c]&&this.externEventListener[c].eventId===a&&this.externEventListener[c].cbFunction(b,this.externEventListener[c].cbArgument1,
this.externEventListener[c].cbArgument2);return 0};this.setEditSource=function(b){var c={ppo:null};if(b!==void 0&&this.editModeFlag!==!0&&(h(this.editSource,b,c),this.editSource.type!==a.INFO_T_FILE&&o(this.editSource,!0,!0,!0,!0,!0,c),this.editSource.e=this.ptId!==a.PT_NAME_FILEVIEWER_ID&&this.ptId!==a.PT_NAME_BARGRAPH_ID&&this.ptId!==a.PT_NAME_IGRAPHIC_ID?this.getRepaintElement("sc_obj_"+this.objId+"_rpn_esrc"):null,this.editSource.value!==this.editSource.valuePrev))this.editSource.valuePrev=this.editSource.value,
this.scheduleFullRedrawPainter()};this.getEditSource=function(){return this.editSource};this.editSource_getValue_parseInt=function(){return parseInt(this.editSource.value,10)};this.editSource_getValue_TextField=function(){var b={value:""};b.value=a.RW_readSource(this.editSource.type,this.editSource.name);this.editSource.type!==a.INFO_T_FILE&&o(b,!1,!0,!0,!0,!0);return b.value};this.editSource_getValue_DropDown=function(){return a.RW_readSource(this.editSource.type,this.editSource.name)};this.editSource_getValue_parseInt_TextField=
function(){return parseInt(this.editSource_getValue_TextField(),10)};this.editSource_getValue_parseInt_DropDown=function(){return parseInt(this.editSource_getValue_DropDown(),10)};this.updateSrcExt=function(a,b,c){h(a,b,c)};this.setFormat=function(a){if(a!==void 0&&(h(this.formatSource,a),this.formatSource.value!==this.formatSource.valuePrev))this.formatSource.valuePrev=this.formatSource.value,this.scheduleFullRedrawPainter()};this.getFormatSource=function(){return this.formatSource};this.setTcrFormatSource=
function(a){if(a!==void 0&&(h(this.tcrFormatSource,a),this.tcrFormatSource.value!==this.tcrFormatSource.valuePrev))this.tcrFormatSource.valuePrev=this.tcrFormatSource.value,this.scheduleFullRedrawPainter()};this.getTcrFormatSource=function(){return this.tcrFormatSource};this.setTcrUnitSource=function(a){if(a!==void 0&&(h(this.tcrUnitSource,a),this.tcrUnitSource.value!==this.tcrUnitSource.valuePrev))this.tcrUnitSource.valuePrev=this.tcrUnitSource.value,this.scheduleFullRedrawPainter()};this.getTcrUnitSource=
function(){return this.tcrUnitSource};this.setTcrMinValueSource=function(a){if(a!==void 0&&(h(this.tcrMinValueSource,a),this.tcrMinValueSource.value!==this.tcrMinValueSource.valuePrev))this.tcrMinValueSource.valuePrev=this.tcrMinValueSource.value,this.scheduleFullRedrawPainter()};this.getTcrMinValueSource=function(){return this.tcrMinValueSource};this.setTcrMaxValueSource=function(a){if(a!==void 0&&(h(this.tcrMaxValueSource,a),this.tcrMaxValueSource.value!==this.tcrMaxValueSource.valuePrev))this.tcrMaxValueSource.valuePrev=
this.tcrMaxValueSource.value,this.scheduleFullRedrawPainter()};this.getTcrMaxValueSource=function(){return this.tcrMaxValueSource};this.setTcrGainSource=function(a){if(a!==void 0&&(h(this.tcrGainSource,a),this.tcrGainSource.value!==this.tcrGainSource.valuePrev))this.tcrGainSource.valuePrev=this.tcrGainSource.value,this.scheduleFullRedrawPainter()};this.getTcrGainSource=function(){return this.tcrGainSource};this.setTcrOffsetSource=function(a){if(a!==void 0&&(h(this.tcrOffsetSource,a),this.tcrOffsetSource.value!==
this.tcrOffsetSource.valuePrev))this.tcrOffsetSource.valuePrev=this.tcrOffsetSource.value,this.scheduleFullRedrawPainter()};this.getTcrOffsetSource=function(){return this.tcrOffsetSource};this.setPaintSource=function(b){var c={ppo:null};if(b!==void 0&&(h(this.paintSource,b,c),this.paintSource.type!==a.INFO_T_FILE&&o(this.paintSource,!0,!0,!0,!0,!0,c),this.paintSource.e=this.getRepaintElement("sc_obj_"+this.objId+"_rpn_psrc"),this.paintSource.value!==this.paintSource.valuePrev))this.paintSource.valuePrev=
this.paintSource.value,this.scheduleFullRedrawPainter()};this.getPaintSource=function(){return this.paintSource};this.setPressedSource=function(b){if(b!==void 0&&(h(this.pressedSource,b),this.pressedSource.type!==a.INFO_T_FILE&&o(this.pressedSource,!0,!0,!0,!0,!0),this.pressedSource.value!==this.pressedSource.valuePrev))this.pressedSource.valuePrev=this.pressedSource.value,this.scheduleFullRedrawPainter()};this.getPressedSource=function(){return this.pressedSource};this.setDisabledSource=function(b){if(b!==
void 0&&(h(this.disabledSource,b),this.disabledSource.type!==a.INFO_T_FILE&&o(this.disabledSource,!0,!0,!0,!0,!0),this.disabledSource.value!==this.disabledSource.valuePrev))this.disabledSource.valuePrev=b.value,this.scheduleFullRedrawPainter()};this.getDisabledSource=function(){return this.disabledSource};this.getBlendSources=function(){return this.blendSources};this.setBlendSources=function(b){if(b!==void 0){var c=b.length,d=0,f=0,g=this.blendSources.length,q=!1,e=null;if(g||c){for(f=0;f<g;f++)this.blendSources[f].visible=
!1;for(d=0;d<c;d++){for(f=0;f<g;f++)if(q=!1,e=null,this.blendSources[f].index==b[d].index)q=!0,e=this.blendSources[f],e.visible=!0;if(q===!1)e=new a.InfoType,e.index=b[d].index,e.e=this.getRepaintElement("sc_obj_"+this.objId+"_rpn_bsrc_"+e.index),e.visible=!0,this.blendSources.push(e);if(e!==null){h(e,b[d]);if(e.value!==e.valuePrev)e.valuePrev=e.value,this.scheduleFullRedrawPainter();e.type!==a.INFO_T_FILE&&o(e,!0,!0,!0,!0,!0)}}this.compareBlendSources()===!0&&this.scheduleFullRedrawPainter()}}};
this.compareBlendSources=function(){for(var a=this.blendSources.length,b="",c=0,c=0;c<a;c++)b+=this.blendSources[c].index+" "+this.blendSources[c].visible+"\n";return b!=this.blendSourcesPrevString?(this.blendSourcesPrevString=b,!0):!1};this.activateEditMode=function(){if(this.getEditSource()!==null){var b={},c=this.getFontSize(),b=c,d=this.editSource_getValue_TextField(),f;a.getDebugLevel()>=3&&(a.log_append_ln("hmi_mpainter activateEditMode editSource fSizeOrg: "+c),a.log_append_ln("hmi_mpainter activateEditMode editSource value: "+
d));var g=0;f=0;f=a.getLeftPos(a.g_MouseDownEventInfo.ViewItem.ClickableDiv.handle);g=a.getTopPos(a.g_MouseDownEventInfo.ViewItem.ClickableDiv.handle);b=a.getScreenCrds(this.x,this.y,this.w,this.h);g=b.y+g+"px";f=b.x+f+"px";var h=b.w+"px",q=b.h+"px";this.ptId===a.PT_NAME_FILEVIEWER_ID?($(a.g_HTMLControlTextareaElmnt).css("position","absolute"),$(a.g_HTMLControlTextareaElmnt).css("top",g),$(a.g_HTMLControlTextareaElmnt).css("left",f),$(a.g_HTMLControlTextareaElmnt).css("width",h),$(a.g_HTMLControlTextareaElmnt).css("height",
q),b=b.scaleFactor*c,$(a.g_HTMLControlTextareaElmnt).css("font-size",b+"px"),$(a.g_HTMLControlTextareaElmnt).css("font-family",this.getFontName()),$(a.g_HTMLControlTextareaElmnt).css("font-style",this.getSvgFontStyle()),$(a.g_HTMLControlTextareaElmnt).css("font-weight",this.getSvgFontWeight()),$(a.g_HTMLControlTextareaElmnt).val(d),$(a.g_HTMLControlTextareaElmnt).css("display","block"),$(a.g_HTMLControlTextareaElmnt).focus()):((f=this.svgDoc.getElementById(this.objStr))&&f.setAttribute("visibility",
"hidden"),g=this.editSource.type===a.INFO_T_PASSWORDPPO||this.editSource.type===a.INFO_T_PASSWORDCONTAINER?a.g_HTMLControlPwInputElement:a.g_HTMLControlInputElmnt,f=f.getBoundingClientRect(),$(g).css("position","absolute"),$(g).css("top",f.top.toString()+"px"),$(g).css("left",f.left.toString()+"px"),$(g).css("width",(f.width-2).toString()+"px"),$(g).css("height",(f.height-4).toString()+"px"),b=b.scaleFactor*c,$(g).css("font-size",b+"px"),$(g).css("font-family",this.getFontName()),$(g).css("font-style",
this.getSvgFontStyle()),$(g).css("font-weight",this.getSvgFontWeight()),$(g).val(d),$(g).css("color","black"),$(g).css("border-color","black"),$(g).css("border-width","1px"),$(g).css("outline","0"),$(g).css("box-shadow","inset 0 0px 0px rgb(0, 0, 0), 0 0 0px rgb(0, 0, 0)"),$(g).css("display","block"),$(g).focus(),$(g).select(),g.setSelectionRange(0,9999));this.editModeFlag=!0}};a.hideInputField=function(b){b===a.PT_NAME_FILEVIEWER_ID?$(a.g_HTMLControlTextareaElmnt).css("display","none").css("top",
"0px").css("left","0px").css("width","0px").css("height","0px").val(""):($(a.g_HTMLControlPwInputElement).css("display","none").css("top","0px").css("left","0px").css("width","0px").css("height","0px").val(""),$(a.g_HTMLControlInputElmnt).css("display","none").css("top","0px").css("left","0px").css("width","0px").css("height","0px").val(""))};this.leaveEditMode=function(b){var c=this.svgDoc.getElementById(this.objStr);a.getDebugLevel>=3&&a.log_append_ln("hmi_mpainter leaveEditMode");if(this.editModeFlag===
!0){if(b)if(b=this.getEditSource(),b!==null){b.value=this.editSource.type===a.INFO_T_PASSWORDPPO||this.editSource.type===a.INFO_T_PASSWORDCONTAINER?a.g_HTMLControlPwInputElement.value:a.g_HTMLControlInputElmnt.value;var d=null,f={rValue:b.value},d=j.getTcrFormatSource();d.value!==null&&a.TCR_convertToRawValueByFormat(d.value,f);b.value=f.rValue;this.ptId===a.PT_NAME_FILEVIEWER_ID?(d=a.g_HTMLControlTextareaElmnt.value,d=d.replace(/\n/gi,a.FVLINESEPTOKEN2),d=d.replace(/\t/gi,a.FVCOLSEPTOKEN2),a.getDebugLevel()>=
2&&a.log_append_ln(d),a.RW_writeSource(b.type,b.name,d)):b.type===a.INFO_T_PPO?a.writePPO(b.name,b.value,!0):a.RW_writeSource(b.type,b.name,b.value)}else a.log_append_ln("hmi_mpainter Leave edit mode error");a.hideInputField(this.ptId);this.editModeFlag=!1;c&&c.setAttribute("visibility","visible")}};if(b){if(b.cbDis)this.instanceDisabled=b.cbDis;if(b.cbHasDown)this.instanceValidDownAction=b.cbHasDown;if(b.cbHasUp)this.instanceValidUpAction=b.cbHasUp;if(b.cbD)this.instanceDraw=b.cbD;if(b.cbADown)this.executeActionMouseDown=
b.cbADown;if(b.cbAUp)this.executeActionMouseUp=b.cbAUp;if(b.cbAGain)this.onGainActionFunc=b.cbAGain;if(b.cbADraw)this.onDrawActionFunc=b.cbADraw;if(b.cbALost)this.onLostActionFunc=b.cbALost;if(b.dragX)this.dragXInfo=b.dragX,this.dragXInfo.relDownPos=0,this.dragXInfo.lastWriteTSmS=0;if(b.dragY)this.dragYInfo=b.dragY,this.dragYInfo.relDownPos=0,this.dragYInfo.lastWriteTSmS=0;this.objId=b.oId;this.objStr="sc_obj_"+this.objId;this.shpStr=this.objStr+"_shp";this.frmGroup="sc_obj_"+this.objId+"_frm";this.frmOuterGroup=
this.frmGroup+"_outer";this.frmInnerGroup=this.frmGroup+"_inner";this.olnGroup="sc_obj_"+this.objId+"_oln";this.bgElmnt=this.frm3dElmnt=this.frmElmnt=null;this.ptId=b.ptId;this.ptStr="sc_pty_"+this.ptId;this.xOrg=this.x=b.x;this.yOrg=this.y=b.y;this.wOrg=this.w=b.w;this.hOrg=this.h=b.h;p=b.iC;s=b.hI?!0:!1;n=b.oC;m=b.hO?!0:!1;w=b.oW;x=b.oS;y=b.fN;v=b.fSz;z=b.fSt;P=y;L=v;M=z;if(b.sDc)this.shpElmnt=(this.svgDoc=b.sDc)?this.svgDoc.getElementById(this.shpStr):null,this.painterGroupElement=this.svgDoc?
this.svgDoc.getElementById(this.objStr):null}this.scheduleFullRedrawPainter()};return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_Button=function(k){this.base=a.PainterType_MPainter;this.base(k);this.isPressed=!1;this.updateImage=a.updateImage;this.hideImages=a.hideImages;this.clearText=a.clearText;this.drawSourceText=a.drawSourceText;this.updateButtonSourceElement=function(e,b){var d=0;this.getU3d()===!0&&(d+=1);e.type!==a.INFO_T_FILE&&(d=this.getOutlineWidth());e.x=this.x+d;e.y=this.y+d;e.w=this.w-2*d;e.h=this.h-2*d;a.setSvgAttrC(e.e,"x",e.x);a.setSvgAttrC(e.e,"y",e.y);a.setSvgAttrC(e.e,
"width",e.w);a.setSvgAttrC(e.e,"height",e.h);e.type===a.INFO_T_FILE?(this.clearText(e),this.updateImage(e,b)):(this.hideImages(e),this.clearText(e),this.drawSourceText(e))};this.drawBackGroundShape=function(){var e=0,b=e="",d=this.getOutlineWidth(),g=this.getRepaintElement(this.frmOuterGroup),c=this.getRepaintElement(this.frmInnerGroup);if(this.checkIfInterior()===!0){for(e=1;g!=null&&g.hasChildNodes();)g.removeChild(g.firstChild);for(;c!=null&&c.hasChildNodes();)c.removeChild(c.firstChild);e="rgba("+
this.getInteriorColor()+","+e+")";b="rgba("+this.getOutlineColor()+",0)";this.bgElmnt=a.createSVGInOutRect(this.svgDoc,c,g,this.x,this.y,this.w,this.h,e,b,d,this.getInnerFill())}};this.drawOutLineShape=function(){for(var e=0,b="",e="",d=this.getOutlineWidth(),g=0,c=this.getRepaintElement(this.olnGroup),e=this.checkIfOutline()===!0?1:0;c!=null&&c.hasChildNodes();)c.removeChild(c.firstChild);b="rgba("+this.getInteriorColor()+",0)";e="rgba("+this.getOutlineColor()+","+e+")";g=this.getOutlineStyle();
switch(g){case a.SOLID:this.frmElmnt=a.createSVGOlnRect(this.svgDoc,c,this.x,this.y,this.w,this.h,b,e,d,this.getInnerFill());break;case a.DASHED:case a.DOTTED:this.frmElmnt=a.createSVGOlnRectDashed(this.svgDoc,c,this.x,this.y,this.w,this.h,b,e,d,this.getInnerFill(),g);break;default:a.log_append_ln("Unknown outline style")}};this.typeDraw=function(){var e=null,b=null,d=null,g=null,c=0,e=b=0;if(this.isFullPainterRedrawRequired()===!0){this.drawBackGroundShape();this.frm3dElmnt!==null&&a.removeSVG(this.frm3dElmnt);
if(this.getU3d()===!0)e=this.getOutlineWidth(),this.frm3dElmnt=this.isPressed===!1&&this.getPressedFlag()===!1?a.createSVGRect_3dFrame(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,e):a.createSVGRect(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x+e,this.y+e,this.w-2*e,this.h-2*e,"rgba(0,0,0,0.0)","rgba(0,0,0,1.0)",1);e=this.getPaintSource();b=this.getPressedSource();d=this.getDisabledSource();g=this.getBlendSources();c=g.length;if(this.isDisabled===!0&&d.name!==
null)e.type=d.type,e.name=d.name,e.value=d.value,e.valuePrev=d.valuePrev;else if((this.isPressed===!0||this.getPressedFlag()===!0)&&b.name!==null)e.type=b.type,e.name=b.name,e.value=b.value,e.valuePrev=b.valuePrev;e.name!==null?this.updateButtonSourceElement(e,b):(this.hideImages(e),this.clearText(e));for(b=0;b<c;b++)g[b].visible===!0&&e.name!==null?this.updateButtonSourceElement(g[b]):(this.hideImages(g[b]),this.clearText(g[b]));this.drawOutLineShape()}}};a.PainterType_Button.prototype=new a.PainterType_MPainter;
return a}(_SCIntern||{});/*
 (c) 2013 iniNet Solutions GmbH - hmi_min.js
*/
var _hmibuild=0,_SCIntern=function(a){function k(b){a.SpecialCO.lastPage.value=b+".teq";a.SpecialCO.currentPage.value=b+".teq";t(a.SpecialCO.lastPage.name,a.SpecialCO.lastPage.value,!1);t(a.SpecialCO.currentPage.name,a.SpecialCO.currentPage.value,!1)}function e(a){var b="",c="",b=encodeURIComponent(a.DestinationDiv.id),b='<iframe style="position: absolute;"  id="'+a.Embed.id.replace("#","")+'" width="'+a.Width+'" height="'+a.Height+'" src="'+a.ViewName+"_teq."+N+"#"+b+'" />',c='<div style="margin: 0px; padding: 0px; position: absolute; width: '+
a.Width+"px; height: "+a.Height+'px; background-color: rgba(128, 128, 128, 0.0);"  id='+a.ClickableDiv.id.replace("#","")+" />";a.DestinationDiv.handle=$(a.DestinationDiv.id)[0];a.DestinationDiv.jQHan=$(a.DestinationDiv.id);a.DestinationDiv.jQHan.html(b+c)}function b(a,b,c,d,f){c.ViewName=b;c.NotifyFunc=null;c.DestinationDiv.id=a;c.DestinationDiv.handle=null;c.ClickableDiv.id=a+"_clickableDiv";c.ClickableDiv.handle=null;c.Embed.id=a+"_embedSVG";c.Embed.handle=null;c.Width=d;c.Height=f;c.ViewJumpScheduledFlag=
!1;c.ViewJumpScheduledName="";c.callbackMouse=null;c.SVGRegisterMade=!1}function d(c,d,f,g){var h=new a.ViewInstanceType;u(c);b(c,d,h,f,g);a.ViewList.addView(h);e(h);a.getViewDOMHandles(h);a.ME_registerViewMouseEventHandler(h);a.ME_registerViewKeyDownEventListener(window);h.Embed.handle.onload=function(){h.unloadedFlag===!0?(a.scheduleMsgBoxOpen(),a.err_append_ln(a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledName+"_teq."+N+" not Found!"),a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledFlag=!0,
a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledName=a.SpecialCO.lastPage.value):a.g_MouseDownEventInfo.ViewItem=h;return!0};k(d);a.getDebugLevel()>=2&&$("#SC_CurrentPage").html(a.SpecialCO.currentPage.value)}function g(b){return a.RW_readSource(a.INFO_T_PPO,b)}function c(b){return a.RW_readSource(a.INFO_T_CONTAINER,b)}function f(){a.SVGNotifyFuncHandle!==null&&(a.getDebugLevel>=3&&a.log_append_ln("removeSelection()"),a.g_MouseDownEventInfo.ViewItem.NotifyFunc(a.REMOVE_SELECTION))}function q(){a.SVGNotifyFuncHandle!==
null&&a.g_MouseDownEventInfo.ViewItem.SVGWindow.g_ModalPainter!==null&&a.g_MouseDownEventInfo.ViewItem.SVGWindow.g_ModalPainter.notify(a.CHANGE_DDL_VALUE)}function o(b,c){var d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){d.readyState==d.DONE&&(d.status==200&&d.response?(a.getDebugLevel()>=2&&a.log_append_ln(" getServerCSVFileToArrayBuffer downloaded : "+b+"\n xhr.status "+d.status+"\n xhr.statusText "+d.statusText),c(d.response)):(a.log_append_ln(" getServerCSVFileToArrayBuffer Failed to download: "+
b+"\n xhr.status "+d.status+"\n xhr.statusText "+d.statusText),c(null)))};d.send()}function h(b,c){var d="";o(b,function(f){if(f==null||f==void 0)d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,a.g_FileEncodeStrList[b]=d;else{a.getDebugLevel()>=2&&a.log_append_ln("after getSrvCSVFileBOMEncodeStr2 "+b+" m.byteLength = "+f.byteLength);var g=new Uint8Array(f);for(i=0;i<f.byteLength&&i<4;i++)a.getDebugLevel()>=2&&a.log_append_ln("sc.getSrvCSVFileBOMEncodeStr2 bufView ["+i+"] = "+g[i]);f.byteLength>=
2&&((g[0]&255)==a.UNICODEFILE_UTF16LE_BOM0&&(g[1]&255)==a.UNICODEFILE_UTF16LE_BOM1?(d="text/csv;charset="+a.UNICODEFILE_UTF16LE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d):(g[0]&255)==a.UNICODEFILE_UTF16BE_BOM0&&(g[1]&255)==a.UNICODEFILE_UTF16BE_BOM1&&(d="text/csv;charset="+a.UNICODEFILE_UTF16BE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d));f.byteLength>=3&&(g[0]&255)==a.UNICODEFILE_UTF8_BOM0&&(g[1]&255)==a.UNICODEFILE_UTF8_BOM1&&(g[2]&255)==a.UNICODEFILE_UTF8_BOM2&&(d="text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR,
a.g_FileEncodeStrList[b]=d);d.length<=0&&(d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,a.g_FileEncodeStrList[b]=d);j(b,c)}});return d}function j(b,c){var d=null,f=null;a.getDebugLevel()>=2&&a.log_append_ln("Start loadLanguageCSV "+b);d=a.getSrvCSVFileBOMEncodeStr(b,c);d==void 0||d==null||d.length==0?a.getDebugLevel()>=1&&a.log_append_ln("loadLanguageCSV waits for encoding check ... for "+b):(a.getDebugLevel()>=1&&a.log_append_ln("loadLanguageCSV encoding found : "+d+" for "+b),$.ajax({type:"GET",
global:!1,async:!1,cache:!0,dataType:"text",beforeSend:function(a){a.overrideMimeType(d)},url:b,complete:function(){a.getDebugLevel()>=2&&a.log_append_ln("loadLanguageCSV load file completed. "+b)},success:function(c){a.getDebugLevel()>=2&&a.log_append_ln("loadLanguageCSV load file suceeded. "+b);f=c},error:function(){a.log_append_ln("ERROR loadLanguageCSV failed to load file! "+b)},statusCode:{404:function(){a.log_append_ln("ERROR File not found (404): "+b)}}}));f!=null&&(c?R=a.parseTwoColCSVContent(f):
J=a.parseTwoColCSVContent(f));a.getDebugLevel()>=1&&a.log_append_ln("End loadLanguageCSV "+b+" loadEncodingStr = "+d)}function p(b){var c=0;window.console&&window.console.log&&(window.console.log("HMI.js Visualisation Library Build: '"+a.HMI_BUILD_DT+"' Version: '"+a.HMI_VERSION+"' Target: '"+a.TARGET_TYPE_NR+"' (c) 2013 ... 2016 iniNet Solutions GmbH"),window.console.log("client Navigator.userAgent: "+navigator.userAgent),location?window.console.log("Server Hostname: "+location.hostname):window.console.log(" Server Hostname is not supported by this browser."));
J.PM_AM="0";if(b){if(b.Period)S=b.Period;if(b.Repaint)C=b.Repaint;if(b.DebugLevel)F=b.DebugLevel;if(b.PM_AM&&(c=parseInt(b.PM_AM,10),isNaN(c)===!1))J.PM_AM=b.PM_AM;if(b.ContainerInitVar){var c=b.ContainerInitVar,d;a.getDebugLevel()>=2&&a.log_append_ln("Start loadCoInitValues()");for(d in c)a.getDebugLevel()>=3&&a.log_append_ln("co_itq '"+d+"' = '"+c[d]+"'"),t(d,c[d],!0);a.getDebugLevel()>=2&&a.log_append_ln("End loadCoInitValues()")}if(b.staticCSV)d=b.staticCSV,a.getDebugLevel()>=2&&a.log_append_ln("Start loadStaticCSV()"),
j(d,!0),a.getDebugLevel()>=2&&a.log_append_ln("End loadStaticCSV()");if(b.languageCSV)d=b.languageCSV,a.getDebugLevel()>=2&&a.log_append_ln("Start loadInitialLanguageCSV()"),j(d,!1),a.getDebugLevel()>=2&&a.log_append_ln("End loadInitialLanguageCSV()");if(b.SVGViewExtension)N=b.SVGViewExtension;if(b.LocalPPORefresh)M=b.LocalPPORefresh;if(b.PPOInitFile)E=b.PPOInitFile;if(b.TargetTypeNr)a.TARGET_TYPE_NR=b.TargetTypeNr;if(b.MsgBox)a.MsgBox=b.MsgBox;if(b.FullRedraw)a.FullRedraw=b.FullRedraw;if(b.cgiFail&&
(a.Link.cgiFailMax=parseInt(b.cgiFail,10),isNaN(a.Link.cgiFailMax)===!0))a.Link.cgiFailMax=1;a.HMI_CGI_RELATIVTOROOT=b.CGI_RELATIVTOROOT?b.CGI_RELATIVTOROOT:a.CGI_RELATIVTOROOT_WEBROOT}a.getDebugLevel()>=1&&(b=a.GetBrowserInfos(),$("#SC_BrowserInfo").html(b.name+" "+b.fullVersion+"<br>HMI.js Version: "+a.HMI_VERSION+"<br> Build: "+a.HMI_BUILD_DT+"<br>Target: "+a.TARGET_TYPE_NR),$("#SC_UserAgent").html(navigator.userAgent.toLowerCase()));if(a.g_MouseDownEventInfo===void 0)return a.showCriticalErrorScreen(101,
"JavaScript Module hmi_mouse.js missing!"),!1;if(Date.prototype.strftime===void 0)return a.showCriticalErrorScreen(102,"JavaScript Module hmi_strftime.js missing!"),!1;if(a.PainterType_MPainter===void 0)return a.showCriticalErrorScreen(103,"JavaScript Module hmi_mpainter.js missing!"),!1;if(a.PainterType_Button===void 0)return a.showCriticalErrorScreen(104,"JavaScript Module hmi_button.js missing!"),!1;if(a.PainterType_TextField===void 0)return a.showCriticalErrorScreen(105,"JavaScript Module hmi_textfield.js missing!"),
!1;if(a.PainterType_Oval===void 0)return a.showCriticalErrorScreen(106,"JavaScript Module hmi_circle.js missing!"),!1;if(a.PainterType_Polygon===void 0)return a.showCriticalErrorScreen(107,"JavaScript Module hmi_polygon.js missing!"),!1;if(a.PainterType_Polyline===void 0)return a.showCriticalErrorScreen(108,"JavaScript Module hmi_polyline.js missing!"),!1;if(a.PainterType_IGraphic===void 0)return a.showCriticalErrorScreen(109,"JavaScript Module hmi_igraphic.js missing!"),!1;if(a.PainterType_Bargraph===
void 0)return a.showCriticalErrorScreen(110,"JavaScript Module hmi_bargraph.js missing!"),!1;if(a.PainterType_Rectangle===void 0)return a.showCriticalErrorScreen(111,"JavaScript Module hmi_rectangle.js missing!"),!1;a.initMsgBoxVars();a.VM_doRepaint();a.initSpiderLink();E.length>0&&a.loadAndParseTCRFile(E);$("body").append('<div id="SC_HTMLControlWrapper"><select id="SC_HTMLControlDropDown" size="10" style="margin: 0px;" ></select><input id="SC_HTMLControlInput" type="text" value="" /><input id="SC_HTMLControlInputPW" type="password" value="" /><textarea wrap="hard" id="SC_HTMLControlTextArea"></textarea></div>');
a.g_HTMLControlDropDownElmnt=document.getElementById("SC_HTMLControlDropDown");a.g_HTMLControlDropDownElmnt!==null?($(a.g_HTMLControlDropDownElmnt).css("display","none"),$(a.g_HTMLControlDropDownElmnt).css("z-index","2147483638"),$(a.g_HTMLControlDropDownElmnt).css("overflow","auto"),$(a.g_HTMLControlDropDownElmnt).on("height","100px"),$(a.g_HTMLControlDropDownElmnt).on("change",q)):a.err_append_ln("SC_HTMLControlDropDown not found!");a.g_HTMLControlInputElmnt=document.getElementById("SC_HTMLControlInput");
a.g_HTMLControlInputElmnt!==null?($(a.g_HTMLControlInputElmnt).css("display","none"),$(a.g_HTMLControlInputElmnt).css("z-index","2147483638"),$(a.g_HTMLControlInputElmnt).on("blur",f)):a.err_append_ln("SC_HTMLControlInput not found!");a.g_HTMLControlPwInputElement=document.getElementById("SC_HTMLControlInputPW");a.g_HTMLControlPwInputElement!==null?($(a.g_HTMLControlPwInputElement).css("display","none"),$(a.g_HTMLControlPwInputElement).css("z-index","2147483638"),$(a.g_HTMLControlPwInputElement).on("blur",
f)):a.err_append_ln("g_HTMLControlPwInputElement not found!");a.g_HTMLControlTextareaElmnt=document.getElementById("SC_HTMLControlTextArea");a.g_HTMLControlTextareaElmnt!==null?($(a.g_HTMLControlTextareaElmnt).css("display","none"),$(a.g_HTMLControlTextareaElmnt).css("z-index","2147483638")):a.err_append_ln("SC_HTMLControlTextArea not found!");a.lastActivityTs_ms=a.getTimestamp_ms();a.getDebugLevel()>=2&&a.log_append_ln("SpiderControl.init() End");return!0}function s(){$("body").append('<div id="SC_WebConsoleWrapper"><b>HMI.js Debug Console</b><br>Browser: <span id="SC_BrowserInfo"></span><br />\t\t\t<br />User Agent:<br /><span id="SC_UserAgent"></span><br /><br />\t\t\tCurrent Page: <span id="SC_CurrentPage"></span><br />\t\t\tRepaint Cnt: <span id="SC_RepaintCnt"></span><br />\t\t\tRefresh Cnt: <span id="SC_RefreshCnt"></span><br />\t\t\tMouse Move: <span id="SC_MouseMove"></span><br />\t\t\t<input type="button" id="SC_ClearWebConsole" value="Clear"/>\t\t\t<input type="button" id="SC_StopStartWebConsole" value="Stop" />\t\t\t<input type="button" id="SC_ConsoleLeftRight" value="Left" /><br />\t\t\t<div id="SC_WebConsoleContents"></div></div>');
$("#SC_ClearWebConsole").click(function(a){a.stopImmediatePropagation();$("#SC_WebConsoleContents").html("<br /><i><b>Cleared<b></i><br />")});$("#SC_StopStartWebConsole").click(function(b){b.stopImmediatePropagation();A&&($("#SC_StopStartWebConsole").attr("value","Start"),a.log_append_ln("Console Stoped"));if(A=!A)$("#SC_StopStartWebConsole").attr("value","Stop"),a.log_append_ln("Console Started")});$("#SC_WebConsoleWrapper").css({"font-family":"Courier New","font-size":"11px",position:"fixed",border:"solid 1px black",
"background-color":"white",top:"5px",right:"5px",width:"250px",height:"80%",padding:"10px",overflow:"scroll"});B=!1;$("#SC_ConsoleLeftRight").click(function(a){a.stopImmediatePropagation();B?($("#SC_ConsoleLeftRight").attr("value","Left"),$("#SC_WebConsoleWrapper").css({left:"",right:"5px"})):($("#SC_ConsoleLeftRight").attr("value","Right"),$("#SC_WebConsoleWrapper").css({left:"5px",right:""}));B=!B})}function n(b){a.getDebugLevel()>=3&&a.log_append_ln("unloadView");if(b!==null){if(b.unloadedFlag===
!1&&b.SVGWindow!==null){b.SVGWindow.onunload=null;b.SVGWindow.onbeforeunload=null;b.unloadedFlag=!0;b.LostFunc();b.LostFunc=null;b.RepaintFunc=null;var c=b.SVGPPOArray,d=0;if(c!==null)if(c)for(d=0;d<c.length;d++){var f=c[d];a.g_PPOList[f]!==void 0&&L===L&&a.g_PPOList[f].regView>0&&a.g_PPOList[f].regView--}else a.log_append_ln("ERROR hmi.js unloadViewPPOs() failed!");a.destroyMouseMoveNotifyList();a.getDebugLevel()>=3&&a.log_append_ln("Unloaded: ("+b.ViewName+")");b.MouseCircle=null}}else a.log_append_ln("unloadView() Error: viewItem not found!")}
function u(b){b=a.ViewList.getViewByDestinationDivId(b);b!==null&&(n(b),a.ME_destroyViewKeyEventListener(b.SVGDocument),a.ME_destroyMouseEventHandler(b),b.DestinationDiv.jQHan.html(""),a.ViewList.removeViewByDestinationDivId(b.DestinationDiv.id))}function t(b,c,d){var f=0,b=a.rl_resolveInfoName(b);if(b!==a.SpecialCO.dateTimeLocalNow.name&&b!==a.SpecialCO.dateLocalNow.name&&b!==a.SpecialCO.timeLocalNow.name&&b!==a.SpecialCO.mbRunningTime.name)if(b===a.SpecialCO.blink.name)a.directWriteContainer(b,
c);else if(b===a.SpecialCO.language.name){if(a.SpecialCO.language.value!=c)j(c,!1),a.SpecialCO.language.value=c}else if(b===a.SpecialCO.mbMsgBox.name&&d===!0)a.noop();else if(b==a.SpecialCO.polltime.name)m(c);else if(b==a.SpecialCO.skiprefresh.name){if(b=parseInt(c,10),isNaN(b)===!1)a.SpecialCO.skiprefresh.value=b}else if(b==a.SpecialCO.mbTmzEn.name){if(b=parseInt(c,10),isNaN(b)===!1)a.SpecialCO.mbTmzEn.value=b}else if(b==a.SpecialCO.mbInactivity.name||b==a.SpecialCO.mbInactivity.alias)c=="0"&&a.resetInactivity();
else if(b==a.SpecialCO.mbInactivityMin.name)c=="0"&&a.resetInactivity();else if(b==a.SpecialCO.mbMsgBox.name){if(a.SpecialCO.mbMsgBox.value=c,a.SpecialCO.mbMsgBox.value.length==0)a.SpecialCO.mbMsgBoxNr.value="0"}else if(b==a.SpecialCO.mbMsgBoxNr.name)a.SpecialCO.mbMsgBoxNr.value=c;else if(b==a.SpecialCO.autoincr.name)a.SpecialCO.autoincr.value=c;else if(a.prefixicmp(a.SpecialCO.MB_Calendar.name,b)===!0)f=a.mb_calendarWriteVal(b.substring(12,b.length),c),f===0&&a.directWriteContainer(b,c);else if(b==
a.SpecialCO.MB_ClearFileCache.name)c=="7"?(a.g_MouseDownEventInfo.ViewItem.Embed.handle.contentWindow.location.reload(!0),a.initial=!1):c!="0"&&console.log("MB_clearFileCache = "+c+" is not supported in HTML5");else if(!a.prefixcmp(a.SpecialCO.NOINITSESSCO.name,b)||!a.writeSessionContainer(b,c))(!a.prefixcmp(a.SpecialCO.MB_PERCO.name,b)||!a.writePersistentContainer(b,c))&&a.directWriteContainer(b,c)}function m(b){b=parseInt(b,10);if(isNaN(b)===!1)a.SpecialCO.polltime.value=b}function r(b,c){a.getDebugLevel()>=
2&&a.log_append_ln("registerPPO: "+c);if(a.g_PPOList[c]===void 0){var d=new a.PPOListItemType;d.name=c;d.address=c;a.g_PPOList[c]=d;a.PPOSize++}if(b===L)a.g_PPOList[c].regView++;else if(b===P)a.g_PPOList[c].regHMI=!0}function w(b){b=a.rl_resolveInfoName(b);return J[b]!==void 0?J[b]:R[b]!==void 0?R[b]:b}function x(a){return w(a)}function v(b,c,d,f,g){var h="",q=0,e=0,j="",o="",h=b,m=0,n={},p=f;n.operator="";n.nPosStart=0;n.baseAddr=0;do{q=h.indexOf(c);if(q>=0){e=h.indexOf(d,q+c.length);if(e===-1)e=
h.length;q+c.length===e&&(e=h.indexOf(d,q+c.length+1));e===-1&&(e=h.length+1);j=h.substring(q,e+d.length);if(f&&q>=2)if(h[q-1]=="+"||h[q-1]=="-"||h[q-1]=="*"||h[q-1]=="/"||h[q-1]=="%"){if(q-2>=0){var j=q-2,u=h,s=0,t="0",n=0,t=j,o={},k=!1;o.baseAddr=0;for(o.nPosStart=0;j>=0;){var r=u.charAt(j),v=!1;switch(r){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":v=!0;break;default:v=!1}if(v===!1&&(r!="-"||k))break;else s=j,o.nPosStart=j,j--,r=="-"&&(k=!0)}t=u.substring(s,
t+1);j=parseInt(t,10);isNaN(j)===!1&&(n=j);o.baseAddr=n;n=o;n.operator=h[q-1];j=h.substring(n.nPosStart,e+d.length)}}else p=!1;o=h.substring(q+c.length,e);if(p){p=j;j=n;u="";u=0;u="";s=0;u=g(o);o=parseInt(u,10);isNaN(o)===!1&&(s=o);switch(j.operator){case "+":u=j.baseAddr+s;break;case "-":u=j.baseAddr-s;break;case "*":u=j.baseAddr*s;break;case "/":u=s===0?0:j.baseAddr/s;break;case "%":u=s===0?0:j.baseAddr%s;break;default:u=0}u=u.toString();h=h.replace(p,u)}else p=j,j="",j=g(o),h=h.replace(p,j);p=
f}m++}while(q>=0&&e>=0&&m<100);m>=100&&a.log_append_ln("Resolve Loop aborted cycleCnt >= 100!",b);return h}function y(b,c){var d="No Message",f={rValue:d,pIdx:0};if(a.g_PPOList&&a.g_PPOList[b]!==void 0){if(a.g_PPOList[b].regView===0&&a.g_PPOList[b].regHMI===!1)a.g_PPOList[b].regHMI=!0;f.rValue=a.g_PPOList[b].value;a.TCR_readFormatedPPOValue(b,f,a.g_PPOList[b]);if(c!==void 0)c.ppo=a.g_PPOList[b];d=f.rValue}return d}function z(b){var c=a.CONTAINER_INITIAL_VALUE,c=null,b=a.rl_resolveInfoName(b);if(b==
a.SpecialCO.language.name)c=a.SpecialCO.language.value;else if(b==a.SpecialCO.polltime.name)c=a.SpecialCO.polltime.value;else if(b==a.SpecialCO.skiprefresh.name)c=a.co_readSkipRefreshCO();else if(b==a.SpecialCO.dateTimeLocalNow.name)c=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateTimeLocalNow.name,!1,null,null,!0);else if(b==a.SpecialCO.dateLocalNow.name)c=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,!1,null,null,!0);else if(b==a.SpecialCO.timeLocalNow.name)c=
a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!1,null,null,!0);else if(b==a.SpecialCO.mbTmzEn.name)c=a.SpecialCO.mbTmzEn.value;else if(b==a.SpecialCO.mbRunningTime.name){c=a.getTimestamp_ms();if(c-a.FirstRpntTs_ms!==0)a.SpecialCO.mbRunningTime.value=a.toFixedNotRound((c-a.FirstRpntTs_ms)/1E3,0);c=a.SpecialCO.mbRunningTime.value}else if(b==a.SpecialCO.mbInactivity.name||b==a.SpecialCO.mbInactivity.alias){c=a.getTimestamp_ms();if(c-a.lastActivityTs_ms!==0)a.SpecialCO.mbInactivity.value=
a.toFixedNotRound((c-a.lastActivityTs_ms)/1E3,0);c=a.SpecialCO.mbInactivity.value}else if(b==a.SpecialCO.mbInactivityMin.name){c=a.getTimestamp_ms();if(c-a.lastActivityTs_ms!==0)a.SpecialCO.mbInactivityMin.value=a.toFixedNotRound((c-a.lastActivityTs_ms)/6E4,0);c=a.SpecialCO.mbInactivityMin.value}else if(b==a.SpecialCO.mbMsgBox.name)c=a.SpecialCO.mbMsgBox.value;else if(b==a.SpecialCO.mbMsgBoxNr.name)c=a.SpecialCO.mbMsgBoxNr.value;else if(b==a.SpecialCO.autoincr.name)c=a.SpecialCO.autoincr.value;else if(a.prefixicmp(a.SpecialCO.MB_Calendar.name,
b)===!0)c=a.mb_calendarReadVal(b.substring(12,b.length),b);else if(b==a.SpecialCO.MB_BrowserTypeID.name)c=a.SpecialCO.MB_BrowserTypeID.value;else if(b==a.SpecialCO.IsWebBrowser.name)c=a.SpecialCO.IsWebBrowser.value;else if(b==a.SpecialCO.MB_IsApp.name)c=a.SpecialCO.MB_IsApp.value;else if(b==a.SpecialCO.MB_ClearFileCache.name)c=a.SpecialCO.MB_ClearFileCache.value;else if(b==a.SpecialCO.MB_SCREEN_WIDTH.name)c=a.SpecialCO.MB_SCREEN_WIDTH.value();else if(b==a.SpecialCO.MB_SCREEN_HEIGHT.name)c=a.SpecialCO.MB_SCREEN_HEIGHT.value();
else if(b==a.SpecialCO.MB_WND_INNER_WIDTH.name)c=a.SpecialCO.MB_WND_INNER_WIDTH.value();else if(b==a.SpecialCO.MB_WND_INNER_HEIGHT.name)c=a.SpecialCO.MB_WND_INNER_HEIGHT.value();else{if(a.prefixcmp(a.SpecialCO.NOINITSESSCO.name,b)&&(c=a.readSessionContainer(b),c!==!1))return c;if(a.prefixcmp(a.SpecialCO.MB_PERCO.name,b)&&(c=a.readPersistentContainer(b),c!==!1))return c;c=a.directReadContainer(b)}return c}a.HMI_VERSION="1.6.30.145.04b";a.CLIENT="hmi.js";a.ILR_VERSION="1.2";a.CntReadPPOSource=0;a.HMI_BUILD_DT=
_hmibuild;a.MsgBox="";a.FullRedraw=!1;a.HMI_CGI_RELATIVTOROOT=a.CGI_RELATIVTOROOT_WEBROOT;a.cgiHost="";a.SvgNs="http://www.w3.org/2000/svg";a.XmlNs="http://www.w3.org/XML/1998/namespace";a.TARGET_TYPE_STD_BASE=100;a.TARGET_TYPE_SAIA=a.TARGET_TYPE_STD_BASE+1;a.TARGET_TYPE_PHOENIX=a.TARGET_TYPE_STD_BASE+9;a.TARGET_TYPE_PANASONIC=a.TARGET_TYPE_STD_BASE+10;a.TARGET_TYPE_NR=a.TARGET_TYPE_STD_BASE;a.INFO_T_UNDEFINED=0;a.INFO_T_PPO=1;a.INFO_T_HTMLTAG=2;a.INFO_T_STRING=3;a.INFO_T_FILE=4;a.INFO_T_CONTAINER=
5;a.INFO_T_TEQINDEX=6;a.INFO_T_URL=7;a.INFO_T_SYMBOL=8;a.INFO_T_PASSWORDPPO=9;a.INFO_T_PASSWORDCONTAINER=10;a.INFO_T_COLOR=11;a.INFO_T_FONT=12;a.INFO_T_CGI=14;a.INFO_T_CYPH_STRING=15;a.MAXKEYCODE=1E3;a.ENTER=209;a.DRAW_OBJECT=200;a.ESCAPE=255;a.REMOVE_SELECTION=202;a.VIEW_GAIN_FOCUS=a.MAXKEYCODE+1;a.VIEW_LOST_FOCUS=a.MAXKEYCODE+2;a.CHANGE_DDL_VALUE=1E3;a.PT_NAME_UTFSTRINGSAVED_ID=0;a.PT_NAME_RECTANGLE_ID=1;a.PT_NAME_LINE_ID=2;a.PT_NAME_BUTTON_ID=3;a.PT_NAME_BARGRAPH_ID=4;a.PT_NAME_TEXTFIELD_ID=5;
a.PT_NAME_EVENT_ID=6;a.PT_NAME_OVAL_ID=7;a.PT_NAME_POLYGON_ID=8;a.PT_NAME_FILEVIEWER_ID=9;a.PT_NAME_IGRAPHIC_ID=10;a.PT_NAME_DEGRADEV_ID=11;a.PT_NAME_MOIRE_ID=12;a.PT_NAME_POLYLINE_ID=13;a.PT_NAME_SPHERE2_ID=14;a.PT_NAME_DROPDOWN_ID=15;a.PT_NAME_CIRCULARGAUGE_ID=16;a.UNICODEFILE_ISO8859_ENCODINGSTR="ISO-8859-1";a.UNICODEFILE_UTF8_ENCODINGSTR="UTF-8";a.UNICODEFILE_UTF8_BOM0=239;a.UNICODEFILE_UTF8_BOM1=187;a.UNICODEFILE_UTF8_BOM2=191;a.UNICODEFILE_UTF16BE_ENCODINGSTR="UTF-16BE";a.UNICODEFILE_UTF16BE_BOM0=
254;a.UNICODEFILE_UTF16BE_BOM1=255;a.UNICODEFILE_UTF16LE_ENCODINGSTR="UTF-16LE";a.UNICODEFILE_UTF16LE_BOM0=255;a.UNICODEFILE_UTF16LE_BOM1=254;a.CGI_RELATIVTOROOT_HTMLTAGNAME="CGI_RELATIVTOROOT";a.CGI_RELATIVTOROOT_WEBROOT="";a.CGI_RELATIVTOROOT_DOCBASE=".";a.JS_PT_ONLINE_TREND=100;a.JS_PT_OFFLINE_TREND=101;a.JS_PT_SAVED_TREND=102;a.CONTAINER_INITIAL_VALUE="";var L=1,P=2,M=!1,E="";a.FirstRpntTs_ms=0;a.lastActivityTs_ms=0;a.previousDrawDateTimeFormat=0;a.previousMBTmzEn=0;a.DRAGINFO_WRITE_MIN_MS=100;
a.SOLID=0;a.DASHED=1;a.DOTTED=2;a.DASHRECT_LENGTH_MULT=4;a.DDL_MAX_LN=50;a.SpecialCO={blink:{name:"@BLINKCO",value:"0"},autoincr:{name:"AUTOINCRCO",value:0},lastPage:{name:"@LAST_PAGE",value:""},currentPage:{name:"@CURRENT_PAGE",value:""},language:{name:"@LANGUAGE",value:""},polltime:{name:"MB_PollTimeSubstitute",value:0},skiprefresh:{name:"MB_SkipPPORefresh",value:0},dateTimeLocalNow:{name:"MB_LocalDateTime",value:0},dateLocalNow:{name:"MB_LocalDate",value:0},timeLocalNow:{name:"MB_LocalTime",value:0},
mbTmzEn:{name:"MB_tmz_en",value:0},mbRunningTime:{name:"MB_RunningTime",value:0},mbInactivity:{name:"MB_InactivityCounter",alias:"@MB_InactivityCounter",value:0},mbInactivityMin:{name:"MB_InactivityCounterMin",value:0},mbMsgBox:{name:"MessageBoxCO",value:0},mbMsgBoxNr:{name:"MSGBOX_NR",value:0},MB_Calendar:{name:"MB_Calendar",value:0},MB_BrowserTypeID:{name:"MB_BrowserTypeID",value:5},IsWebBrowser:{name:"IsWebBrowser",value:1},MB_IsApp:{name:"MB_IsApp",value:0},MB_ClearFileCache:{name:"MB_clearFileCache",
value:""},NOINITSESSCO:{name:"_NOINITSESSCO_",value:19},MB_PERCO:{name:"MB_PERCO_",value:19},MB_SCREEN_WIDTH:{name:"MB_SCREEN_WIDTH",value:function(){return screen.width.toString()}},MB_SCREEN_HEIGHT:{name:"MB_SCREEN_HEIGHT",value:function(){return screen.height.toString()}},MB_WND_INNER_WIDTH:{name:"MB_WND_INNER_WIDTH",value:function(){return window.innerWidth.toString()}},MB_WND_INNER_HEIGHT:{name:"MB_WND_INNER_HEIGHT",value:function(){return window.innerHeight.toString()}},userLevel:{name:"userLevel",
value:10}};a.COND={UNDEFINED:0,EQUAL:1,NO_CONDITION:2,NOT_EQUAL:3,GREATER:4,GREATER_EQUAL:5,LESSER:6,LESSER_EQUAL:7,AND_EQUAL:8,AND_EQUAL0:9,AND_NOTEQUAL0:10,EQUAL_IGNORECASE:11,NOT_EQUAL_IGNORECASE:12,IS_INT:13,IS_FLOAT:14,OR_EQUAL0:15,OR_NOT_EQUAL0:16};a.mP=function(b){var c=null;switch(b.ptId){case a.PT_NAME_UTFSTRINGSAVED_ID:c={};break;case a.PT_NAME_RECTANGLE_ID:c=new a.PainterType_Rectangle(b);break;case a.PT_NAME_LINE_ID:c=new a.PainterType_Line(b);break;case a.PT_NAME_BUTTON_ID:c=new a.PainterType_Button(b);
break;case a.PT_NAME_BARGRAPH_ID:c=new a.PainterType_Bargraph(b);break;case a.PT_NAME_TEXTFIELD_ID:c=new a.PainterType_TextField(b);break;case a.PT_NAME_EVENT_ID:c=new a.PainterType_EventP(b);break;case a.PT_NAME_OVAL_ID:c=new a.PainterType_Oval(b);break;case a.PT_NAME_POLYGON_ID:c=new a.PainterType_Polygon(b);break;case a.PT_NAME_FILEVIEWER_ID:c=new a.PainterType_FileViewer(b);break;case a.PT_NAME_IGRAPHIC_ID:c=new a.PainterType_IGraphic(b);break;case a.PT_NAME_DEGRADEV_ID:c={};break;case a.PT_NAME_MOIRE_ID:c=
{};break;case a.PT_NAME_POLYLINE_ID:c=new a.PainterType_Polyline(b);break;case a.PT_NAME_SPHERE2_ID:c={};break;case a.PT_NAME_DROPDOWN_ID:c=new a.PainterType_DropDown(b);break;case a.PT_NAME_CIRCULARGAUGE_ID:c={};break;case a.JS_PT_ONLINE_TREND:c=new a.PainterType_OnlineTrend(b);break;case a.JS_PT_OFFLINE_TREND:c=new a.PainterType_OfflineTrend(b);break;case a.JS_PT_SAVED_TREND:c=new a.PainterType_SavedTrend(b);break;default:c={}}return c};a.LPRItemType=function(a,b){this.address=a;this.value=b};var Q=
"",T="";a.LocalPPORefreshType=function(){this.cbWrite=this.cbUpdate=null;this.PPOList={};this.PPOSize=0;this.ListChanged=!1;this.getNumPPOs=function(){return this.PPOSize}};a.LocalPPORefresh=new a.LocalPPORefreshType;a.isFirstLoadViewCall=!0;a.fileLoaded=!1;a.fileEncoding="";a.onSvgWindowError=function(b,c,d){a.err_append_ln("Uncaught SVG Window Error! errorMsg:");a.err_append_ln(b);a.err_append_ln("url: "+c+" lineNumber: "+d)};a.onHtmlWindowError=function(b,c,d){a.err_append_ln("Uncaught HTML Window Error! errorMsg:");
a.err_append_ln(b);a.err_append_ln("url: "+c+" lineNumber: "+d)};a.SaveFileError="Saving files on the client side is not supported in the HTML5 client!";a.LoadFileError="Loading files on the client side is not supported in the HTML5 client!";a.SavedError="Saved Trending is not supported in the HTML5 client!";a.showCriticalErrorScreen=function(b,c){var d=a.GetBrowserInfos();$("body").html('<div><h1 style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">HMI.js Visualisation Error #'+
b+":</h1>");$("body").append('<big><span style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">'+c+"</span></big></big></big><br>");$("body").append('<h2 style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">Browser Info: </h2>');$("body").append('<big><span style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">'+d.name+" "+d.fullVersion+"<br>sc.HMI_VERSION: "+a.HMI_VERSION+"<br>sc.HMI_BUILD_DT: "+a.HMI_BUILD_DT+"<br>sc.TARGET_TYPE_NR: "+
a.TARGET_TYPE_NR+"<br></span></big></big></big><br><div>");$("body").css("background-color","rgb(0,0,102)")};a.getTopPos=function(a){for(var b=0;a!==null;)b+=a.offsetTop,a=a.offsetParent;return b};a.getLeftPos=function(a){for(var b=0;a!==null;)b+=a.offsetLeft,a=a.offsetParent;return b};a.registerModalPainter=function(b){a.g_MouseDownEventInfo!==null&&a.g_MouseDownEventInfo.ViewItem!==null&&a.g_MouseDownEventInfo.ViewItem.SVGWindow!==null&&a.g_MouseDownEventInfo.ViewItem.SVGWindow.g_ModalPainter===
null?a.g_MouseDownEventInfo.ViewItem.SVGWindow.g_ModalPainter=b:a.log_append_ln("ERROR registerModalPainter failed!")};a.removeModalPainter=function(){a.g_MouseDownEventInfo!==null&&a.g_MouseDownEventInfo.ViewItem!==null&&a.g_MouseDownEventInfo.ViewItem.SVGWindow!==null&&a.g_MouseDownEventInfo.ViewItem.SVGWindow.g_ModalPainter!==null?a.g_MouseDownEventInfo.ViewItem.SVGWindow.g_ModalPainter=null:a.log_append_ln("ERROR removeModalPainter failed!")};a.resetInactivity=function(){a.lastActivityTs_ms=a.getTimestamp_ms()};
a.ViewInstanceType=function(){this.unloadedFlag=!1;this.RepaintFunc=this.GainFunc=this.LostFunc=this.NotifyFunc=this.SVGPPOArray=this.SVGDocument=this.SVGWindow=this.SVGRootElmnt=null;this.mouseDisabled=this.locked=!1;this.DestinationDiv={id:"",handle:null,jQHan:null};this.ClickableDiv={id:"",handle:null,jQHan:null};this.Embed={id:"",handle:null,jQHan:null};this.ViewName="";this.Height=this.Width=0;this.ViewJumpScheduledFlag=!1;this.ViewJumpScheduledName="";this.MouseCircle=null;this.MouseEventDispatcher=
a.ME_mouseEventDispatcher;this.SVGRegisterMade=this.scheduleGainFocus=!1};a.ViewInstanceListType=function(){this.list=[];this.getNumViews=function(){return this.list.length};this.addView=function(a){this.list.push(a)};this.removeViewByDestinationDivId=function(b){for(var c=0,d=this.getNumViews(),f=!1,c=0;c<d&&f===!1;c++)if(this.list[c]&&this.list[c].DestinationDiv.id==b){f=!0;break}if(f===!0)this.list[c].SVGRootElmnt=null,this.list[c].NotifyFunc=null,this.list[c].NotifyFunc=null,this.list[c].RepaintFunc=
null,this.list[c].DestinationDiv.id="",this.list[c].ClickableDiv.id="",this.list[c].Embed.id="",this.list[c].DestinationDiv.handle=null,this.list[c].ClickableDiv.handle=null,this.list[c].Embed.handle=null,this.list[c].DestinationDiv.jQHan=null,this.list[c].ClickableDiv.jQHan=null,this.list[c].Embed.jQHan=null,a.removeFromArray(this.list,c)};this.getViewByIndex=function(a){var b=null;a!==void 0&&a<this.getNumViews()&&a>=0&&(b=this.list[a]);return b};this.getViewByDestinationDivId=function(a){for(var b=
0,c=this.getNumViews(),d=!1,f=null,b=0;b<c&&d===!1;b++)this.list[b]&&this.list[b].DestinationDiv.id==a&&(d=!0,f=this.list[b]);return f};this.doViewRepaints=function(){for(var a=0,b=this.getNumViews(),c=null,a=0;a<b;a++)this.list[a]&&(c=this.list[a],c.RepaintFunc!==null&&c.locked!==!0&&c.RepaintFunc())};this.doViewGainIfRequired=function(){for(var a=0,b=this.getNumViews(),c=null,a=0;a<b;a++)if(this.list[a]&&(c=this.list[a],c.GainFunc!==null&&c.locked!==!0&&c.scheduleGainFocus===!0))c.GainFunc(),c.scheduleGainFocus=
!1}};a.ViewList=new a.ViewInstanceListType;a.g_HTMLControlInputElmnt=null;a.g_HTMLControlPwInputElement=null;a.g_HTMLControlTextareaElmnt=null;a.g_HTMLControlDropDownElmnt=null;var S=1E3,C=5,F=0,A=!0,B=!0;a.g_PPOList={};a.g_PPOSize=0;var I={};a.g_OnlineTrendEmitter=[];var G=[],D=[],J={},R={};a.g_MouseMoveNotificationList=[];a.g_MouseDragObject=null;a.RepaintFlag=1;var O=0,H=0,N="svg",U=!1,V=!1,W=!1;a.g_FileEncodeStrList={};a.startDrag=function(b){a.g_MouseDragObject=b;if(b.dragXInfo!==null)b.dragXInfo.relDownPos=
a.g_MouseDownEventInfo.x-b.x,b.dragXInfo.lastWriteTSmS=0;if(b.dragYInfo!==null)b.dragYInfo.relDownPos=a.g_MouseDownEventInfo.y-b.y,b.dragYInfo.lastWriteTSmS=0;a.getDebugLevel()>=2&&(a.log_append_ln("startDrag"),a.log_append_ln("painter.x"+b.x),a.log_append_ln("sc.g_MouseDownEventInfo.x"+a.g_MouseDownEventInfo.x),a.log_append_ln("painter.dragXInfo.relDownPos"+b.dragXInfo.relDownPos))};a.releaseDragIfRequired=function(){if(a.g_MouseDragObject!==null){if(a.g_MouseDragObject.dragXInfo!==null)a.g_MouseDragObject.dragXInfo.lastWriteTSmS=
0;if(a.g_MouseDragObject.dragYInfo!==null)a.g_MouseDragObject.dragYInfo.lastWriteTSmS=0;var b=a.g_MouseDragObject.getOffsetStruct();a.g_MouseDragObject.dragXInfo!==null&&(a.g_MouseDragObject.dragImpl(a.g_MouseDragObject.dragXInfo,a.g_MouseMoveEventInfo.x-a.g_MouseDragObject.xOrg-b.xOff-a.g_MouseDragObject.dragXInfo.relDownPos),a.getDebugLevel()>=3&&(a.log_append_ln("releaseDragIfRequired"),a.log_append_ln("sc.g_MouseMoveEventInfo.x: "+a.g_MouseMoveEventInfo.x),a.log_append_ln("sc.g_MouseDragObject.xOrg: "+
a.g_MouseDragObject.xOrg),a.log_append_ln("offset.xOff: "+b.xOff),a.log_append_ln("sc.g_MouseDragObject.dragXInfo.relDownPos: "+a.g_MouseDragObject.dragXInfo.relDownPos)));a.g_MouseDragObject.dragYInfo!==null&&(a.g_MouseDragObject.dragImpl(a.g_MouseDragObject.dragYInfo,a.g_MouseMoveEventInfo.y-a.g_MouseDragObject.yOrg-b.yOff-a.g_MouseDragObject.dragYInfo.relDownPos),a.getDebugLevel()>=3&&(a.log_append_ln("releaseDragIfRequired"),a.log_append_ln("sc.g_MouseMoveEventInfo.y: "+a.g_MouseMoveEventInfo.y),
a.log_append_ln("sc.g_MouseDragObject.yOrg: "+a.g_MouseDragObject.yOrg),a.log_append_ln("offset.yOff: "+b.yOff),a.log_append_ln("sc.g_MouseDragObject.dragYInfo.relDownPos: "+a.g_MouseDragObject.dragYInfo.relDownPos)));a.g_MouseDragObject.setOffset(b);a.g_MouseDragObject=null;a.getDebugLevel()>=2&&a.log_append_ln("releaseDrag")}};a.getSrvCSVFileBOMEncodeStr=function(b,c){var d="";b!==null&&b!==void 0&&(a.g_FileEncodeStrList[b]===void 0&&h(b,c),a.g_FileEncodeStrList[b]!==void 0&&(d=a.g_FileEncodeStrList[b]));
return d};a.createMouseCircle=function(b){if(b!==null&&b.SVGDocument!==null)b.MouseCircle=b.SVGDocument.createElementNS(a.SvgNs,"circle"),b.MouseCircle!==null&&(b.MouseCircle.setAttributeNS(null,"visibility","hidden"),b.MouseCircle.setAttributeNS(null,"cx",25),b.MouseCircle.setAttributeNS(null,"cy",25),b.MouseCircle.setAttributeNS(null,"r",5),b.MouseCircle.setAttributeNS(null,"fill","red"),b.MouseCircle.setAttributeNS(null,"id","MouseCircle"),b.SVGRootElmnt.appendChild(b.MouseCircle))};a.showMouseCirlce=
function(a,b,c){a.MouseCircle!==null&&(a.MouseCircle.setAttributeNS(null,"visibility",""),a.MouseCircle.setAttributeNS(null,"cx",b),a.MouseCircle.setAttributeNS(null,"cy",c))};a.registerSVG=function(b,c,d,f,g,h,q,e,j,o,m,n){a.getDebugLevel()>=2&&a.log_append_ln("sc.registerSVG "+o);b=a.ViewList.getViewByDestinationDivId(decodeURIComponent(b));if(b!==null){b.ClickableDiv.jQHan.css("width",m);b.ClickableDiv.jQHan.css("height",n);b.Embed.jQHan.css("width",m);b.Embed.jQHan.css("height",n);b.width=m;b.height=
n;b.ViewJumpScheduledFlag=!1;b.ViewJumpScheduledName="";b.ViewName=o;b.SVGWindow=c;b.SVGDocument=d;b.SVGRootElmnt=f;b.SVGPPOArray=j;b.NotifyFunc=g;b.RepaintFunc=h;b.GainFunc=q;b.LostFunc=e;c=b.SVGPPOArray;d=0;if(c!==null&&a.g_PPOList)for(d=0;d<c.length;d++)r(L,c[d]);b.SVGPPOArray===null?b.GainFunc():b.scheduleGainFocus=!0;b.SVGPPOArray===null?b.RepaintFunc():a.scheduleRepaint();b.unloadedFlag=!1;b.SVGRegisterMade=!0;a.getDebugLevel()>=2&&a.log_append_ln("Registered: ("+b.ViewName+")");a.getDebugLevel()>=
1&&a.createMouseCircle(b)}else a.log_append_ln("registerSVG() Error: viewItem not found!")};a.destorySVG=function(b){var c=a.ViewList.getViewByDestinationDivId(decodeURIComponent(b));a.getDebugLevel()>=2&&a.log_append_ln("sc.destroySVG ("+b+")");n(c)};a.doInstanceRepaint=function(b){b=a.ViewList.getViewByDestinationDivId(b);b!==null&&b.RepaintFunc()};a.disableMouse=function(b){b=a.ViewList.getViewByDestinationDivId(b);if(b!==null)b.mouseDisabled=!0};a.enableMouse=function(b){b=a.ViewList.getViewByDestinationDivId(b);
if(b!==null)b.mouseDisabled=!1};a.lockInstance=function(b){b=a.ViewList.getViewByDestinationDivId(b);if(b!==null)b.locked=!0,b.ClickableDiv.jQHan.css("background-color","rgba(255, 255, 255, 1.0)")};a.unlockInstance=function(b){b=a.ViewList.getViewByDestinationDivId(b);if(b!==null)b.locked=!1,b.ClickableDiv.jQHan.css("background-color","rgba(255, 255, 255, 0.0)")};a.Init=function(b){b.DebugLevel>=2&&s();a.log_append_ln("SpiderControl.init()");b===null&&a.log_append_ln("Error SpiderControl.init() params is undefined ! ");
return p(b)};a.loadTEQFileBlocking=function(b){var c="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR;a.fileLoaded=!1;$.ajax({type:"GET",global:!1,beforeSend:function(a){a.overrideMimeType(c)},async:!1,cache:!0,url:b,timeout:a.AjaxTimeout,success:function(){a.fileLoaded=!0},error:function(){a.fileLoaded=!1},complete:function(){}});return a.fileLoaded};a.loadSvgzFileBlocking=function(b){a.fileLoaded=!1;$.ajax({type:"GET",global:!1,beforeSend:function(){},async:!1,cache:!0,url:b,timeout:a.AjaxTimeout,
complete:function(){},success:function(){a.fileLoaded=!0},error:function(){a.fileLoaded=!1}});return a.fileLoaded};a.checkIfBrowserIsSupportedAndTEQOnServer=function(b){var c=b+".teq",b="Loading "+b+" Failed !! <br><br>Please load all files with *.teq (Views) extension on the server/PLC! Then refresh this page.<br><br>Bitte laden Sie alle Dateien mit *.teq (Views) Erweiterung auf den Server/SPS! Dann diese Seite neu laden.";if(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")===!1)return a.showCriticalErrorScreen(2,"Your browser does not support SVG!<br>Ihr Browser unterstuetzt kein SVG!<br>\t\t\t        <br>\t\t\t        <b>Browser Compatibility<br>Browser Kompatibilitaet</b>\t\t\t        <br>\t\t\t        - Microsoft Internet Explorer 11 and above<br>\t\t\t        - Chrome<br>\t\t\t        - Firefox<br>\t\t\t        - Safari<br>"),!1;return a.isFirstLoadViewCall===!0&&a.loadTEQFileBlocking(c)===!1?(window.console&&window.console.log&&window.console.log(b),a.showCriticalErrorScreen(1,
b),!1):!0};a.isDefinedInJS=function(a){var b=!1;a!==void 0&&(b=!0);return b};a.checkWebserverSVGZSupport=function(){return"success"};a.CheckSpiderLoadView=function(b){var c="success",d=!1;if(b.length!==0){if(a.isFirstLoadViewCall===!0&&a.checkIfBrowserIsSupportedAndTEQOnServer(b)===!0)(c=a.checkWebserverSVGZSupport(b))==="success"?(a.isFirstLoadViewCall=!1,d=!0):c==="no_html5"?a.showCriticalErrorScreen(200,"Webserver does not support HTML5!<br>Couldn't load view: "+b+"_teq."+N):c==="no_file"?a.showCriticalErrorScreen(201,
"View doen't exist!<br>View: "+b+"_teq."+N):a.showCriticalErrorScreen(202,"CheckSpiderLoadView error 202 for view!<br>View: "+b+"_teq."+N);a.isFirstLoadViewCall===!1&&a.checkIfBrowserIsSupportedAndTEQOnServer(b)===!0&&(d=!0)}return d};a.LoadView=function(b,c,f,g){if(c.length!==0)if(a.CheckSpiderLoadView(c,f,g)===!0)if($("#destId")===null&&a.log_append_ln("sc.LoadView Error Destination Div Id Not Found!"),b===null)a.log_append_ln("sc.LoadView() destId is undefined");else{var h=c;a.TARGET_TYPE_NR===
a.TARGET_TYPE_PANASONIC&&(h="archivereader?"+c);d(b,h,f,g)}else a.log_append_ln("ERROR sc.LoadView check failed for "+c)};a.UnloadView=function(b){a.getDebugLevel()>=3&&a.log_append_ln("SpiderControl.UnloadView()");b===null?a.log_append_ln("SpiderControl.UnloadView() destId is undefined"):u(b)};a.EnableWebConsole=function(){s()};a.ReadPPO=function(b){a.getDebugLevel()>=4&&a.log_append_ln("SpiderControl.ReadPPO()");return g(b)};a.WritePPO=function(b,c){a.getDebugLevel()>=4&&a.log_append_ln("SpiderControl.WritePPO()");
a.writePPO(b,c,!1)};a.getDebugLevel=function(){return F};a.ReadContainer=function(b){a.getDebugLevel()>=4&&a.log_append_ln("SpiderControl.ReadContainer()");return c(b)};a.ScheduleViewJump=function(){a.getDebugLevel()>=3&&a.log_append_ln("SpiderControl.ScheduleViewJump()")};a.checkContainerRange=function(b,c,d,f){for(var g="",h=0,g=a.MIN(d,f),d=a.MAX(d,f),h=g;h<=d;h++)if(g=c+h,b===g)return!0;return!1};a.checkSessionContainerName=function(b){return a.checkContainerRange(b,a.SpecialCO.NOINITSESSCO.name,
0,a.SpecialCO.NOINITSESSCO.value)};a.checkPersistanContainer=function(b){return a.checkContainerRange(b,a.SpecialCO.MB_PERCO.name,0,a.SpecialCO.NOINITSESSCO.value)};a.writeSessionContainer=function(b,c){var d=!1;a.checkSessionContainerName(b)===!0&&(d=a.writeSessionStorage(b,c));return d};a.readSessionContainer=function(b){var c=!1;a.checkSessionContainerName(b)===!0&&(c=a.readSessionStorage(b));return c};a.writePersistentContainer=function(b,c){var d=!1;a.checkPersistanContainer(b)===!0&&(d=a.writeLocalStorage(b,
c));return d};a.readPersistentContainer=function(b){var c=!1;a.checkPersistanContainer(b)===!0&&(c=a.readLocalStorage(b));return c};a.writeSessionStorage=function(b,c){var d=!1;a.checkStorage()!==!1&&(sessionStorage.setItem(b,c),d=!0);return d};a.readSessionStorage=function(b){var c=!1;a.checkStorage()!==!1&&(c=sessionStorage.getItem(b),c===null&&(c=""));return c};a.writeLocalStorage=function(b,c){var d=!1;a.checkStorage()!==!1&&(localStorage.setItem(b,c),d=!0);return d};a.readLocalStorage=function(b){var c=
!1;a.checkStorage()!==!1&&(c=localStorage.getItem(b),c===null&&(c=""));return c};a.checkStorage=function(){var a=!1;Storage!==void 0&&(a=!0);return a};a.directReadContainer=function(b){return I[b]?I[b].mValue:a.CONTAINER_INITIAL_VALUE};a.directWriteContainer=function(b,c){if(c===void 0)a.getDebugLevel()>=2&&a.log_append_ln("directWriteContainer called with 'undefined' value (co name: '"+b+"'"),c=a.CONTAINER_INITIAL_VALUE;b===void 0&&a.getDebugLevel()>=2&&a.log_append_ln("directWriteContainer called with 'undefined' name");
I[b]={mName:b,mValue:c};a.updateUserLevelTimestamp()};a.SetRefresh=function(b){a.getDebugLevel()>=3&&a.log_append_ln("SpiderControl.SetRefreshRate()");m(b)};a.WriteContainer=function(b,c){a.getDebugLevel()>=3&&a.log_append_ln("sc.WriteContainer name = "+b+" , value = "+c);a.RW_writeSource(a.INFO_T_CONTAINER,b,c)};a.readDateTimeFormat=function(){return w("PM_AM")};a.localRefreshPPO=function(){a.LocalPPORefresh.cbUpdate!==null?(a.LocalPPORefresh.PPOList={},a.LocalPPORefresh.PPOSize=a.prepareLPRList(a.LocalPPORefresh.PPOList),
a.LocalPPORefresh.PPOSize&&(a.LocalPPORefresh.cbUpdate(a.LocalPPORefresh)?a.updateInternalPPOList(a.LocalPPORefresh.PPOList):a.getDebugLevel()>=2&&a.log_append_ln("sc.LocalPPORefresh.cbUpdate returned not true"))):a.getDebugLevel()>=2&&a.log_append_ln("LocalPPORefresh.cbUpdate not set")};a.VM_doRepaint=function(){for(var b=!1,c=S,d=0,d=a.getTimestamp_ms(),f=!1,g=0,h=null,q=!1,g=0;g<a.ViewList.getNumViews();g++)a.ViewList.getViewByIndex(g)&&a.stringcmp(a.ViewList.getViewByIndex(g).ViewName,a.MsgBox)===
!1&&(h=a.ViewList.getViewByIndex(g),h.scheduleGainFocus===!0&&(f=!0),h.SVGRegisterMade===!0&&(q=!0));if(a.FirstRpntTs_ms===0)a.FirstRpntTs_ms=d;a.SpecialCO.polltime.value!==0&&(c=a.SpecialCO.polltime.value);if(d-c>=H||V===!0){V=!1;H=d;a.SpecialCO.blink.value=a.SpecialCO.blink.value=="1"?"0":"1";t(a.SpecialCO.blink.name,a.SpecialCO.blink.value,!1);if(a.SpecialCO.autoincr.value>=a.SpecialCO.autoincr.value.MAX_VALUE)a.SpecialCO.autoincr.value=0;a.SpecialCO.autoincr.value++;a.getDebugLevel()>=2&&$("#SC_RefreshCnt").html(a.SpecialCO.autoincr.value);
M===!0?a.localRefreshPPO():a.SL_refreshPPO()}a.checkUserLevelTimestamp()===!1?a.WriteContainer(a.SpecialCO.userLevel.name,0):a.updateUserLevelTimestamp();if(W){W=!1;c=0;g=a.g_OnlineTrendEmitter.length;for(c=0;c<g;c++)a.g_OnlineTrendEmitter[c].refreshCurvePoints()}if(U&&!f&&q){U=!1;if(a.RepaintFlag){if(a.getDebugLevel()>=2)Dbg_RepaintStart_ms=a.getTimestamp_ms(),a.CntReadPPOSource=0;a.ViewList.doViewRepaints();a.getDebugLevel()>=3&&(Dbg_RepaintStop_ms=a.getTimestamp_ms(),Dbg_RepaintDuration_ms=Dbg_RepaintStop_ms-
Dbg_RepaintStart_ms,a.log_append_ln("RpnDur_ms: "+Dbg_RepaintDuration_ms+" (nPPO:"+a.CntReadPPOSource+")"))}a.isMsgBoxScheduled()===!0&&(a.resetMsgBoxScheduled(),a.openMsgBox());var e;if(a.g_MouseDownEventInfo.ViewItem!==null)e=a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledFlag;if(e===!0){a.getDebugLevel()>=2&&a.log_append_ln("vm_isViewJumpRequested() === true");e=a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledName;if(e!==""&&(f="",f=e.lastIndexOf(".teq"),f=f!=-1?e.substr(0,f):e,f!==""))if(a.TARGET_TYPE_NR===
a.TARGET_TYPE_PANASONIC&&f.lastIndexOf("archivereader?")<0&&(f="archivereader?"+f),f+="_teq."+N,q=encodeURIComponent(a.g_MouseDownEventInfo.ViewItem.DestinationDiv.id),a.loadSvgzFileBlocking(f)===!0){if(a.g_MouseDownEventInfo.ViewItem.Embed.handle.src!=f+"#"+q)n(a.g_MouseDownEventInfo.ViewItem),a.g_MouseDownEventInfo.ViewItem.Embed.handle.src=f+"#"+q,a.getDebugLevel()>=2&&a.log_append_ln("iframe: '"+a.g_MouseDownEventInfo.ViewItem.Embed.handle.src+"'");a.getDebugLevel()>=2&&$("#SC_CurrentPage").html(e);
b=!0}else a.err_append_ln("Page: "+f+" doesn't exist!");a.SpecialCO.lastPage.value=a.SpecialCO.currentPage.value;a.SpecialCO.currentPage.value=e;t(a.SpecialCO.lastPage.name,a.SpecialCO.lastPage.value,!1);t(a.SpecialCO.currentPage.name,a.SpecialCO.currentPage.value,!1);a.getDebugLevel()>=2&&a.log_append_ln("vm_viewJumpRequestDone()");a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledFlag=!1;a.scheduleRefresh()}O++;a.getDebugLevel()>=2&&$("#SC_RepaintCnt").html(O)}a.previousDrawDateTimeFormat=a.readDateTimeFormat();
a.previousMBTmzEn=a.SpecialCO.mbTmzEn.value;d=a.getTimestamp_ms()-d;b?(a.getDebugLevel()>=2&&a.log_append_ln("viewJmpFlag"),window.setTimeout("_SCIntern.VM_doRepaint()",0)):d>C?window.setTimeout("_SCIntern.VM_doRepaint()",5):window.setTimeout("_SCIntern.VM_doRepaint()",C-d)};a.getRefreshPeriod=function(){return S};a.getViewDOMHandles=function(a){a.ClickableDiv.handle=$(a.ClickableDiv.id)[0];a.ClickableDiv.jQHan=$(a.ClickableDiv.id);a.Embed.handle=$(a.Embed.id)[0];a.Embed.jQHan=$(a.Embed.id)};a.CMP=
function(b,c,d){var f=0,g=0,f=0;if(c!==null&&d!==null&&b!==null)switch(b){case a.COND.UNDEFINED:return 1;case a.COND.EQUAL:return a.isEqual(c,d);case a.COND.NO_CONDITION:return 1;case a.COND.NOT_EQUAL:return a.isNotEqual(c,d);case a.COND.GREATER:return a.isGreater(c,d);case a.COND.GREATER_EQUAL:return a.isGreaterOrEqual(c,d);case a.COND.LESSER:return a.isLesser(c,d);case a.COND.LESSER_EQUAL:return a.isLesserOrEqual(c,d);case a.COND.AND_EQUAL:return f=a.parseNumber(c),g=a.parseNumber(d),f=(f&g)===
g===!0?1:0,a.getDebugLevel()>=3&&a.log_append_ln("sc.COND.AND_EQUAL: res:"+f),f;case a.COND.AND_EQUAL0:return f=a.parseNumber(c),g=a.parseNumber(d),(f&g)===0;case a.COND.AND_NOTEQUAL0:return f=a.parseNumber(c),g=a.parseNumber(d),(f&g)!==0;case a.COND.IS_INT:return a.isInt(c);case a.COND.IS_FLOAT:return a.isFloat(c);case a.COND.EQUAL_IGNORECASE:return a.isEqualIgnoreCase(c,d);case a.COND.NOT_EQUAL_IGNORECASE:return a.isNotEqualIgnoreCase(c,d);case a.COND.OR_EQUAL0:return a.isOrEqual0(c,d);case a.COND.OR_NOT_EQUAL0:return a.isOrNotEqual0(c,
d);default:return!1}else return 0};a.isDecimalStr=function(a,b){var c=0,d="";if(a!==null&&a!==void 0&&(d=String(a).trim(),d.length>0)){c=d.match(/e/gi);if(c!==null&&c.length>1)return 0;c=c!==null&&c.length==1?d.match(/[+-]/g):d.match(/[+-]/g);if(c!==null&&c.length>2)return 0;c=d.match(/[.,]/g);if(c!==null&&c.length>1)return 0;c=d.match(/^[-+][0-9]+\.[0-9]+[eE][-+]?[0-9]+$/g);if(c!==null&&c.length>0)return 0;c=1;b===1&&(c=0,d=Number(d),isNaN(d)||d%1==0&&(c=1))}return c};a.isEqual=function(b,c){var d=
0,f=parseFloat(b),g=parseFloat(c);if(a.isDecimalStr(b,0)==0||a.isDecimalStr(c,0)==0||isNaN(g)||isNaN(f))return String(b)==String(c)&&(d=1),d;f==g&&(d=1);return d};a.isNotEqual=function(b,c){var d=0,f=parseFloat(b),g=parseFloat(c);if(a.isDecimalStr(b,0)==0||a.isDecimalStr(c,0)==0||isNaN(g)||isNaN(f))return String(b)!=String(c)&&(d=1),d;f!=g&&(d=1);return d};a.isGreater=function(a,b){var c=0,d=parseFloat(a),f=parseFloat(b);isNaN(d)&&(d=0);isNaN(f)&&(f=0);d>f&&(c=1);return c};a.isGreaterOrEqual=function(a,
b){var c=0,d=parseFloat(a),f=parseFloat(b);isNaN(d)&&(d=0);isNaN(f)&&(f=0);d>=f&&(c=1);return c};a.isLesser=function(a,b){var c=0,d=parseFloat(a),f=parseFloat(b);isNaN(d)&&(d=0);isNaN(f)&&(f=0);d<f&&(c=1);return c};a.isLesserOrEqual=function(a,b){var c=0,d=parseFloat(a),f=parseFloat(b);isNaN(d)&&(d=0);isNaN(f)&&(f=0);d<=f&&(c=1);return c};a.isEqualIgnoreCase=function(a,b){var c=a.toUpperCase(),d=b.toUpperCase();return c.localeCompare(d)==0?!0:!1};a.isNotEqualIgnoreCase=function(a,b){var c=a.toUpperCase(),
d=b.toUpperCase();return c.localeCompare(d)!=0?!0:!1};a.isOrEqual0=function(a,b){return(Number(a)|Number(b))==0};a.isOrNotEqual0=function(a,b){return(Number(a)|Number(b))!=0};a.isInt=function(a){var b=!1,c=Number(a);if(!isNaN(c)){if(a.indexOf(".")>=0)return!1;b=c%1==0}return b};a.isFloat=function(b){var c=!1;a.isDecimalStr(b,0)==1&&(c=!0);return c};a.DragInfoType=function(){this.nameOptionFlag=this.namePxMax=this.namePxMin=this.nameValueMax=this.nameValueMin=0;this.typePxMax=this.typePxMin=this.typeOptionFlag=
this.typeValueMax=this.typeValueMin=a.INFO_T_STRING;this.destType=a.INFO_T_PPO;this.destName="PPO"};a.PainterType_EventP=function(b){this.base=a.PainterType_MPainter;this.base(b);this.notify=function(b){switch(b){case a.VIEW_GAIN_FOCUS:if(this.instanceDisabled()===!1&&this.onGainActionFunc)this.onGainActionFunc();break;case a.VIEW_LOST_FOCUS:if(this.instanceDisabled()===!1&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:if(this.instanceDisabled()===!1&&this.onDrawActionFunc)this.onDrawActionFunc()}return 0}};
a.PainterType_EventP.prototype=new a.PainterType_MPainter;a.PainterType_Line=function(b){this.base=a.PainterType_MPainter;this.base(b);this.notify=function(b){switch(b){case a.VIEW_GAIN_FOCUS:if(this.instanceDisabled()===!1&&this.onGainActionFunc)this.onGainActionFunc();break;case a.VIEW_LOST_FOCUS:if(this.instanceDisabled()===!1&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw(),this.genericDraw()}return 0}};a.PainterType_Line.prototype=
new a.PainterType_MPainter;a.rl_resolveInfoName=function(a){a=v(a,"#PPO_","#",0,g);a=v(a,"#PPOFF","#",1,g);a=v(a,"@PPO_","@",0,g);a=v(a,"@PPOFF","@",1,g);a=v(a,"#HTML_","#",0,x);a=v(a,"#HTMLOFFSET_","#",1,x);a=v(a,"#CO_","#",0,c);a=v(a,"#COFF_","#",1,c);a=v(a,"@HTML_","@",0,x);a=v(a,"@HTMLOFFSET_","@",1,x);a=v(a,"@CO_","@",0,c);return a=v(a,"@COFF_","@",1,c)};a.registerHMI_PPO=function(a){r(P,a)};a.getMPainterScreenCrd=function(b){return a.getMPainterScreenCrdExt(a.g_MouseDownEventInfo.ViewItem.SVGRootElmnt,
b)};a.getMPainterScreenCrdExt=function(b,c){var d={},f=0,g=0,h=0,q=0,e=q=null;if(b===null)a.log_append_ln("Error: getMPainterScreenCrd(): svgRootElmnt== null");else return h=b.getScreenCTM(),e=b.createSVGPoint(),f=b.createSVGPoint(),f.x=c.x,f.y=c.y,q=f.matrixTransform(h),f=q.x,g=q.y,e.x=c.x+c.w,e.y=c.y+c.h,e=e.matrixTransform(h),h=e.x-q.x,q=e.y-q.y,d.x=f,d.y=g,d.w=h,d.h=q,d};a.getScreenCrds=function(b,c,d,f){var g={};if(a.g_MouseDownEventInfo.ViewItem.SVGRootElmnt===null)a.log_append_ln("Error: getScreenCrds(): sc.g_MouseDownEventInfo.ViewItem.SVGRootElmnt == null");
else{var h=a.g_MouseDownEventInfo.ViewItem.SVGRootElmnt.getScreenCTM(),q=a.g_MouseDownEventInfo.ViewItem.SVGRootElmnt.createSVGPoint();q.x=b;q.y=c;g.nw=q.matrixTransform(h);q.x+=d;g.ne=q.matrixTransform(h);q.y+=f;g.se=q.matrixTransform(h);q.x-=d;g.sw=q.matrixTransform(h);g.w=g.ne.x-g.nw.x;g.h=g.sw.y-g.ne.y;g.scaleFactor=g.w/d;g.x=g.nw.x;g.y=g.nw.y;return g}};a.OB_checkMouseCoordinates=function(b,c){var d=!1;if(b&&c)if(b.x!==null&&b.y!==null&&b.w!==null&&b.h!==null&&b.svgDoc!==null){var f=a.getMPainterScreenCrd(b);
c.x>=f.x&&c.y>=f.y&&c.x<f.x+f.w&&c.y<f.y+f.h&&(d=!0)}else a.log_append_ln("OB_checkMouseCoordinates error");return d};a.writePPO=function(b,c,d){b=a.g_PPOList[b];b.resolved=a.rl_resolveInfoName(b.address);var f={writeEnabled:!1,rValue:c};a.TCR_writeFormatedPPOValue(b,f);if(f.writeEnabled===!0){if(d===!0)b.value=c;M===!0?a.LocalPPORefresh.cbWrite!==null?a.LocalPPORefresh.cbWrite(b.resolved,f.rValue):a.log_append_ln("LocalPPORefresh.cbWrite not set"):a.sl_writeValue(b.resolved,f.rValue)}};a.getContainerList=
function(){return I};a.RW_readSource=function(b,c,d){var f=c;b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO?(a.CntReadPPOSource++,f=y(c,d)):b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER?f=z(c):b==a.INFO_T_HTMLTAG?f=w(c):b==a.INFO_T_FILE&&(f="File Not Found",b=a.loadFileSource(c),b!==null&&(f=b));return f};a.RW_readSource_parseFloat=function(b,c,d){var f=c,g=0;b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO?f=y(c):b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER?f=z(c):b==a.INFO_T_HTMLTAG?f=w(c):b==
a.INFO_T_STRING&&(f=c);d===1?isNaN(parseFloat(f,10))!==!0?g=parseFloat(f,10):a.getDebugLevel()>=1&&a.log_append_ln("WARNING sc.RW_readSource_parseFloat("+b+", "+c+") ! value ["+f+"] is NaN so returns 0 "):g=parseFloat(f,10);return g};a.RW_readSource_parseInt=function(b,c){var d=c,f=0;b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO?d=y(c):b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER?d=z(c):b==a.INFO_T_HTMLTAG?d=w(c):b==a.INFO_T_STRING&&(d=c);isNaN(parseInt(d,10))!==!0?f=parseInt(d,10):a.getDebugLevel()>=
1&&a.log_append_ln("WARNING sc.RW_readSource_parseInt("+b+", "+c+") ! value ["+d+"] is NaN so returns 0 ");return f};a.RW_writeSource=function(b,c,d){a.getDebugLevel()>=2&&a.log_append_ln("sc.RW_writeSource("+b+" , "+c+" , "+d+")");if(b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER)t(c,d,!1);else if(b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO)a.writePPO(c,d,!1);else if(b==a.INFO_T_TEQINDEX){if(b=c,b!==null)if(c=b=a.rl_resolveInfoName(b),d=b.lastIndexOf(".teq"),d!=-1&&(c=b.substr(0,d)),a.CheckSpiderLoadView(c,
0,0)===!0)if(a.stringcmp(c,a.MsgBox)===!0)a.MsgBox.length>0&&a.openMsgBox();else{if(a.stringcmp(a.g_MouseDownEventInfo.ViewItem.ViewName,c)!==!0)a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledFlag=!0,a.g_MouseDownEventInfo.ViewItem.ViewJumpScheduledName=b}else a.log_append_ln("ERROR vm_scheduleSVGPicture check failed for "+b)}else b==a.INFO_T_URL?window.open(d,c):b===a.INFO_T_CGI&&a.userCGIAction(d)};a.sl_isPPOScheduled=function(b){var c=!1;a.g_PPOList[b]&&(c=a.g_PPOList[b].regView>0||a.g_PPOList[b].regHMI===
!0);return c};a.sl_getPPOWriteAddress=function(b){var c="",d="";for(d in a.g_PPOList)if(a.g_PPOList[d].address==b)c=a.g_PPOList[d].writeAddr;return c};a.prepareLPRList=function(b){var c=0,d=0;if(a.g_PPOList){T=Q;Q="";for(d in a.g_PPOList)if(a.sl_isPPOScheduled(d))a.g_PPOList[d].resolved=a.rl_resolveInfoName(a.g_PPOList[d].address),b[a.g_PPOList[d].resolved]=new a.LPRItemType(a.g_PPOList[d].resolved,a.g_PPOList[d].value),Q+=a.g_PPOList[d].resolved,c++;a.LocalPPORefresh.ListChanged=!1;if(Q!==T)a.LocalPPORefresh.ListChanged=
!0}return c};a.getPPOValueBylprList=function(a,b){for(var c=0,c=0;c<a.length;c++)if(b==a[c].address)return a[c].value};a.updateInternalPPOList=function(b){var c=0,d=!1;for(c in b)a.sl_updatePPOList(b[c].address,b[c].value)===!0&&(d=!0);(d===!0||a.FullRedraw===!0)&&a.scheduleRepaint();a.ViewList.doViewGainIfRequired()};a.co_readSkipRefreshCO=function(){var b=parseInt(a.SpecialCO.skiprefresh.value,10);return isNaN(b)===!1?b:0};a.scheduleRepaint=function(){U=!0;if(a.getDebugLevel()>=2)a.Dbg_RpnSchedule_ms=
a.getTimestamp_ms()};a.scheduleRefresh=function(){V=!0};a.scheduleOnlineTrendRefresh=function(){W=!0};a.getTimestamp_s=function(){var a=(new Date).getTime();a/=1E3;return a=Math.round(a)};a.getTimestamp_ms=function(){return(new Date).getTime()};a.sl_updatePPOListByName=function(b,c){var d="",f=!1;if(a.g_PPOList)for(d in a.g_PPOList)if(a.g_PPOList[d].name==b&&a.g_PPOList[d].value!==c)a.g_PPOList[d].value=c,f=!0;return f};a.sl_updatePPOList=function(b,c){var d="",f=!1;if(a.g_PPOList){for(d in a.g_PPOList)if(a.g_PPOList[d].resolved==
b&&a.g_PPOList[d].value!==c)a.g_PPOList[d].value=c,f=!0;return f}};a.log_append_ln=function(b){if(a.getDebugLevel()>0){if(A){var c=b+"<br />";a.getDebugLevel()>0&&A&&$("#SC_WebConsoleContents").prepend(c)}window.console&&window.console.log(b)}};a.GetBrowserInfos=function(){var a=navigator.userAgent,b=navigator.appName,c=parseFloat(navigator.appVersion).toString(),d=parseInt(navigator.appVersion,10),f;if((f=a.indexOf("Opera"))!=-1){if(b="Opera",c=a.substring(f+6),(f=a.indexOf("Version"))!=-1)c=a.substring(f+
8)}else if((f=a.indexOf("MSIE"))!=-1)b="Microsoft Internet Explorer",c=a.substring(f+5);else if(a.indexOf("Trident")!=-1&&(f=a.indexOf("rv:"))!=-1)b="Microsoft Internet Explorer",c=a.substring(f+3);else if(a.indexOf("Edge")!=-1&&(f=a.indexOf("Edge"))!=-1)b="Edge",c=a.substring(f+5);else if((f=a.indexOf("Chrome"))!=-1)b="Chrome",c=a.substring(f+7);else if((f=a.indexOf("Safari"))!=-1){if(b="Safari",c=a.substring(f+7),(f=a.indexOf("Version"))!=-1)c=a.substring(f+8)}else if((f=a.indexOf("Firefox"))!=
-1)b="Firefox",c=a.substring(f+8);else if((d=a.lastIndexOf(" ")+1)<(f=a.lastIndexOf("/")))if(b=a.substring(d,f),c=a.substring(f+1),b.toLowerCase()==b.toUpperCase())b=navigator.appName;if((a=c.indexOf(";"))!=-1)c=c.substring(0,a);if((a=c.indexOf(" "))!=-1)c=c.substring(0,a);c.indexOf(")")!=-1&&c.indexOf("(")==-1&&(c=c.replace(")",""));d=parseInt(c,10);isNaN(d)&&(c=parseFloat(navigator.appVersion).toString(),d=parseInt(navigator.appVersion,10));return{name:b,version:d,fullVersion:c}};a.destroyMouseMoveNotifyList=
function(){a.g_MouseMoveNotificationList=[]};a.getOnlineTrendEmitterInstance=function(b){for(var c=0,d=a.g_OnlineTrendEmitter.length,c=0;c<d;c++)if(a.g_OnlineTrendEmitter[c].trendIndex===b)return a.g_OnlineTrendEmitter[c];return null};a.getOfflineTrendEmitterInstance=function(a){for(var b=0,c=G.length,b=0;b<c;b++)if(G[b].trendIndex===a)return G[b];return null};a.getSavedTrendEmitterInstance=function(a){for(var b=0,c=D.length,b=0;b<c;b++)if(D[b].trendIndex===a)return D[b];return null};a.registerOnlineTrendEmitter=
function(b){a.g_OnlineTrendEmitter.push(b);a.getDebugLevel()>=2&&a.log_append_ln("registerOnlineTrendEmitter "+b.trendIndex)};a.registerOfflineTrendEmitter=function(a){G.push(a)};a.registerSavedTrendEmitter=function(a){D.push(a)};a.updateUserLevelTimestamp=function(){var b=a.getTimestamp_s();a.writeLocalStorage(a.SpecialCO.userLevel.name,b)};a.checkUserLevelTimestamp=function(){var b=!1,c=0,d=0,c=0,f=a.SpecialCO.userLevel.value;if(a.checkStorage()===!1)return!0;c=a.readLocalStorage(a.SpecialCO.userLevel.name);
if(c===!1)return b;c=parseInt(c,10);d=a.getTimestamp_s();d-c<f&&(b=!0);return b};return a}(_SCIntern||{}),SpiderControl=function(a,k){a.Init=k.Init;a.LoadView=k.LoadView;a.UnloadView=k.UnloadView;a.EnableWebConsole=k.EnableWebConsole;a.Init=k.Init;a.ReadPPO=k.ReadPPO;a.WritePPO=k.WritePPO;a.ReadContainer=k.ReadContainer;a.WriteContainer=k.WriteContainer;a.SetRefresh=k.SetRefresh;a.log_append_ln=k.log_append_ln;a.GetBrowserInfos=k.GetBrowserInfos;a.LocalPPORefresh=k.LocalPPORefresh;a.LockInstance=
k.lockInstance;a.UnlockInstance=k.unlockInstance;a.DisableMouse=k.disableMouse;a.EnableMouse=k.enableMouse;a.SchedulePPORead=k.scheduleRefresh;return a}(SpiderControl||{},_SCIntern);_SCIntern=function(a){function k(a){return a.toString()}function e(b,d,g,c,f,q){b=a.createSVGElement(b,"rect");c<0&&(c=0);f<0&&(f=0);a.setSVGAttr(b,"x",d);a.setSVGAttr(b,"y",g);a.setSVGAttr(b,"width",c);a.setSVGAttr(b,"height",f);q!==null&&a.setSVGAttr(b,"fill",q);return b}a.pad=function(a,d){if(isNaN(d)===!0)return!0;for(a=a.toString();a.length<d;)a="0"+a;return a};a.getRValue=function(a){return isNaN(a)===!0?0:(a&16711680)>>16};a.getGValue=function(a){return isNaN(a)===!0?0:(a&65280)>>8};a.getBValue=
function(a){return isNaN(a)===!0?0:a&255};a.Sleep=function(a){var d=(new Date).getTime(),g=0;do g=(new Date).getTime();while(g-d<a)};a.clearText=function(b){if(b.textg!==null)a.removeSVG(b.textg),b.textg=null};a.parseSourceRowAsArray=function(b){b=b.toString();b=b.replace(/\n/gi,a.FVLINESEPTOKEN2);b=b.replace(/\t/gi,a.FVCOLSEPTOKEN2);return b.split(/\\n/)};a.drawSourceText=function(b){var d=[],g=0,c="start",f=[],q=0,e="%0",h=0,j=0,p=0,q=this.getTextHPos(),s=this.getTextVPos();if(b.e==null)console.log("drawSourceText() src.e == null");
else var n=b.e.getAttributeNS(null,"width");var n=parseInt(n,10),u=0;s===0?j=1:s===1?j=0.92:s===2&&(j=0.9);if(this.getIsMultiline()===!0)d=a.parseSourceRowAsArray(b.value),g=d.length;else{if(b.type==a.INFO_T_PASSWORDCONTAINER||b.type==a.INFO_T_PASSWORDPPO){for(var g="",t=0,t=0;t<b.value.length;t++)g+="*";d.push(g)}else d.push(b.value);g=1}b.textg=a.createSVGElement(document,"g");q===0?(c="start",e=0):q===1?(c="middle",e=n/2):q===2&&(c="end",e=n);for(q=0;q<g;q++)n=document.createElementNS(a.SvgNs,
"text"),n.setAttributeNS(a.XmlNs,"xml:space","preserve"),n.setAttributeNS(null,"text-anchor",c),n.setAttributeNS(null,"font-size",this.getFontSize()),n.setAttributeNS(null,"font-family",this.getFontName()),n.setAttributeNS(null,"font-style",this.getSvgFontStyle()),n.setAttributeNS(null,"font-weight",this.getSvgFontWeight()),t=document.createTextNode(d[q]),isNaN(e)?console.log("drawSourceText() x is NaN"):n.setAttributeNS(null,"x",e),p+=q===0?j:1.1,n.setAttributeNS(null,"y",p+"em"),n.setAttributeNS(null,
"fill","rgb("+this.getTextColor()+")"),n.appendChild(t),f.push(n),b.textg.appendChild(n),b.e==null?console.log("drawSourceText() src.e == null"):b.e.appendChild(b.textg);d=b.textg.getBBox();s===0?h=0:b.e==null?console.log("drawSourceText() src.e == null"):s===1?h=b.e.getAttributeNS(null,"height")/2-(d.height+2)/2:s===2&&(h=b.e.getAttributeNS(null,"height")-(d.height-2));this.isPressed===!0&&this.ptId===a.PT_NAME_BUTTON_ID&&(h+=1,u=1);b.textg.setAttribute("transform","translate("+u+", "+h+")")};a.ImageListItem=
function(){this.e=null;this.visible=!1;this.eTmp=null;this.fname=""};a.ImageList=function(){this.list=[]};a.hideImages=function(a){var d=0,g=0,c=null;if(a.img!==null){g=a.img.list.length;for(d=0;d<g;d++)c=a.img.list[d],c.visible=!1;for(d=0;d<g;d++)c=a.img.list[d],c.e.setAttributeNS(null,"visibility","hidden")}};a.createImage=function(b,d){var g=d.fname,c;a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&(g="archivereader?"+g);d.e=a.createSVGElement(document,"image");c=a.createSVGElement(document,"svg");
b.e==null?console.log("createImage(): src.e == null"):(c.setAttributeNS("http://www.w3.org/1999/xlink","width",b.e.getAttribute("width")),c.setAttributeNS(null,"height",b.e.getAttribute("height")));c.setAttributeNS(null,"preserveAspectRatio","none");c.appendChild(d.e);b.e==null?console.log("createImage() src.e == null"):b.e.appendChild(c);d.e.setAttributeNS("http://www.w3.org/1999/xlink","href",g);d.e.setAttributeNS(null,"x",0);d.e.setAttributeNS(null,"y",0);d.e.setAttributeNS(null,"width",b.w);d.e.setAttributeNS(null,
"height",b.h);d.e.setAttributeNS(null,"preserveAspectRatio","none");d.eTmp=new Image;d.eTmp.src=g;d.eTmp.onload=function(){var a="";d.eTmp.width!==0&&d.e.setAttribute("width",d.eTmp.width);d.eTmp.height!==0&&d.e.setAttribute("height",d.eTmp.height);d.eTmp.height!==0&&d.eTmp.width!==0&&(a="0 0 "+d.eTmp.width+" "+d.eTmp.height,c.setAttribute("viewBox",a))}};a.updateImage=function(b,d){var g=0,c=0,f=!1,q=null;if(b.img===null&&(b.img=new a.ImageList,d!==null&&d!==void 0&&d.value!==null&&d.type===a.INFO_T_FILE))q=
new a.ImageListItem,q.fname=d.value,q.visible=!1,a.createImage(b,q),b.img.list.push(q);c=b.img.list.length;for(g=0;g<c;g++)q=b.img.list[g],a.stringcmp(b.value,q.fname)===!0&&b.type===a.INFO_T_FILE?(f=!0,q.visible=!0):q.visible=!1;if(f===!1&&b.name!==null&&b.type===a.INFO_T_FILE)q=new a.ImageListItem,q.fname=b.value,q.visible=!0,a.createImage(b,q),b.img.list.push(q);c=b.img.list.length;for(g=0;g<c;g++)q=b.img.list[g],q.visible===!0?q.e.setAttributeNS(null,"visibility","true"):q.e.setAttributeNS(null,
"visibility","hidden")};a.changeSvgAttrDim=function(a,d,g,c,f,q){a.setAttributeNS(null,"x",d);a.setAttributeNS(null,"y",g);a.setAttributeNS(null,"width",c);a.setAttributeNS(null,"height",f);a.setAttributeNS(null,"viewBox",q)};a.setSvgAttrC=function(a,d,g){a==null?console.log("setSVGAttrC() argument SVG element -e- is null"):(g<0&&(g=0),a.setAttributeNS(null,d,g))};a.str_isLesser=function(a,d){var g=0;if(d===null)return 0;if(a===null)return 1;do{if(a[g]!=d[g])return a[g]<d[g];g++}while(g<a.length&&
g<d.length);return!1};a.str_isGreater=function(a,d){var g=0;if(a===null)return 0;if(d===null)return 1;do{if(a[g]!=d[g])return a[g]>d[g];g++}while(g<a.length&&g<d.length);return!1};a.cloneArray=function(a){return a.slice(0)};a.removeFromArray=function(a,d){return a.splice(d,1)};a.getDateTimeByHex=function(b){var b=parseInt(b,16),d=0;isNaN(b)===!1&&(b<=0?d="":(b*=1E3,b=new Date(b),d=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateTimeLocalNow.name,!a.SpecialCO.mbTmzEn.value,b,null,!0)));return d};
a.getTimeFormatInt=function(b,d,g){var b=parseInt(b,10),c=0;isNaN(b)===!1&&(g===!0&&(b*=1E3),c=new Date(0),c.setUTCMilliseconds(b),c=a.DateTime_ReadDT(d,a.SpecialCO.dateTimeLocalNow.name,!0,c,null,g));return c};a.util_insertChar=function(a,d){d.rValue=a+d.rValue};a.insertStr=function(a,d,g){g.rValue=a>0?g.rValue.substring(0,a)+d+g.rValue.substring(a,g.rValue.length):d+g.rValue};a.parseContentsAsMultiArray=function(b,d){for(var g=0,b=b.replace(/\n/gi,a.FVLINESEPTOKEN2),b=b.replace(/\t/gi,a.FVCOLSEPTOKEN2),
c=b.split(/\\n/),f=null,q=[],g=d.maxCol=0;g<c.length;g++)if(c[g]!==void 0)if(a.prefixicmp(a.FVLINESPECLINESTARTSTR,c[g])===!0){if(f=c[g].substring(4),f!==null&&(q[g]=f.split(",")),d!==null)d.hasColLayout=!0}else if(d.containsColumns=!0,q[g]=c[g].split(/\\t/),d.maxCol<q[g].length)d.maxCol=q[g].length;q.length>0&&q[q.length-1]&&q[q.length-1][0]===""&&q.pop();return q};a.parseTwoColCSVContent=function(b){for(var d=0,g={},c=0,b=b.split("\n"),f,c=b.length,d=0;d<c;d++)b[d].length>=3&&(f=b[d].split(";"),
f.length==2?g[f[0]]=f[1]:a.getDebugLevel()>=2&&a.log_append_ln("ERROR parseCSVContent item parse error"));return g};a.parseCSV=function(b){return a.parseCGI_CSV_Content(b)};a.parseCGI_CSV_Content=function(a){var d=0,g=[],c=0;a.length>0&&a.lastIndexOf("\n",a.length-1)!=a.length-1&&(a+="\n");a=a.split("\n").filter(k);c=a.length;for(d=0;d<c;d++)if(a[d].length>0){a[d].lastIndexOf(";",a[d].length-1)!=a[d].length-1&&(a[d]+=";");var f=a[d].replace(/;;/g,"; ;");g.push(f.split(";").filter(k))}return g};a.parse_CSV_Content=
function(a){for(var d=0,g=[],c=0,a=a.split("\n").filter(k),c=a.length,d=0;d<c;d++)a[d].length>=3&&g.push(a[d].split(";").filter(k));return g};a.noop=function(){};a.setSVGCordAttr=function(b,d,g){g=Math.round(g);g>1&&(g-=0.5);g<0.5&&(g=0.5);a.setSVGAttr(b,d,g)};a.createSVGElement=function(b,d){var g=b.createElementNS(a.SvgNs,d);g===null&&a.log_append_ln("ERROR sc.createSVGElement failed for name "+d);return g};a.setSVGAttr=function(a,d,g){a.setAttributeNS(null,d,g)};a.removeSVG=function(b){b===null||
b.parentNode===null?a.noop():b.parentNode.removeChild(b)};a.createInnerSVG=function(b,d,g,c,f,q){b=a.createSVGElement(b,"svg");b!==null&&(a.setSVGAttr(b,"x",g),a.setSVGAttr(b,"y",c),a.setSVGAttr(b,"width",f),a.setSVGAttr(b,"height",q),a.setSVGAttr(b,"viewBox","0 0 "+f+" "+q),a.setSVGAttr(b,"version","1.1"),d.appendChild(b));return b};a.createTriangle=function(b,d,g,c,f,q,e,h,j){b=b.createElementNS(a.SvgNs,"polygon");b.setAttributeNS(null,"points",g+","+c+" "+f+","+q+" "+e+","+h);b.setAttributeNS(null,
"fill",j);return d.appendChild(b)};a.createHorizontalLine=function(a,d,g,c,f,q){var o=null;g==f?o=e(a,d,g,c-d,1,q):d==c&&(o=e(a,d,g,1,f-g,q));return o};a.createSVGSimpleRect=function(a,d,g,c,f,q){return e(a,d,g,c,f,q)};a.createSVGTSpan=function(b,d,g,c,f){b=b.createElementNS(a.SvgNs,"tspan");g!==null&&b.setAttributeNS(null,"dx",g);c!==null&&b.setAttributeNS(null,"dy",c);if(f!==null)b.textContent=f;d.appendChild(b);return b};a.createClipRect=function(b,d,g,c,f,q,e){var h=b.createElementNS(a.SvgNs,
"clipPath");h.setAttributeNS(null,"id",e);d.appendChild(h);f<0&&(f=0);b=b.createElementNS(a.SvgNs,"rect");b.setAttributeNS(null,"x",g);b.setAttributeNS(null,"y",c);b.setAttributeNS(null,"width",f);b.setAttributeNS(null,"height",q);h.appendChild(b);return h};a.createSVGText=function(b,d,g,c,f,q,e,h,j,p){b=b.createElementNS(a.SvgNs,"text");b.setAttributeNS(a.XmlNs,"xml:space","preserve");b.setAttributeNS(null,"text-anchor",q);b.setAttributeNS(null,"x",g);b.setAttributeNS(null,"y",c);b.setAttributeNS(null,
"fill",f);b.setAttributeNS(null,"font-size",h);b.setAttributeNS(null,"font-family",e);b.setAttributeNS(null,"font-weight",p);b.setAttributeNS(null,"font-style",j);d.appendChild(b);return b};a.createSVGTextExt=function(b,d,g,c,f,q,e,h,j,p,s){var n=b.createElementNS(a.SvgNs,"text");n.setAttributeNS(a.XmlNs,"xml:space","preserve");n.setAttributeNS(null,"text-anchor",q);n.setAttributeNS(null,"x",g);n.setAttributeNS(null,"y",c);n.setAttributeNS(null,"fill","rgb("+f+")");n.setAttributeNS(null,"font-size",
h);n.setAttributeNS(null,"font-family",e);n.setAttributeNS(null,"font-weight",s);n.setAttributeNS(null,"font-style",p);d.appendChild(n);b=b.createTextNode(j);n.appendChild(b);return n};a.createSVGRectDashed=function(b,d,g,c,f,q,o,h,j,p,s){var n=null,n=null,u=0,t=0,m=0,k=0,w=0,x=w=0,j=parseInt(j,10),v=1,y=null;isNaN(j)===!0&&(j=0);if(b===null||d===null)return null;y=a.createSVGElement(b,"g");if(y!==null){o!==null&&(n=p===!0?e(b,g+j,c+j,f-j*2,q-j*2,o):e(b,g,c,f,q,o),y.appendChild(n));if(j>0){s===a.DOTTED?
v=1:s===a.DASHED&&(v=4);u=j*v;t=j;w=g+f;k=c;for(m=g+1,x=0,x=0;m+u<w;m+=u,x++)x%2===0&&(n=e(b,m,k,u,t,h),y.appendChild(n));x%2===0&&w-m<u&&(n=e(b,m,k,w-m,t,h),y.appendChild(n));u=j;t=j*v;m=g+f-j;w=c+q;for(k=c,x=0;k+t<w;k+=t,x++)x%2===0&&(n=e(b,m,k,u,t,h),y.appendChild(n));x%2===0&&w-k<t&&(n=e(b,m,k,u,w-k,h),y.appendChild(n));u=j*v;t=j;w=g+f;k=c+q-j;for(m=g,x=0;m+u<w;m+=u,x++)x%2===0&&(n=e(b,m,k,u,t,h),y.appendChild(n));x%2===0&&w-m<u&&(n=e(b,m,k,w-m,t,h),y.appendChild(n));u=j;t=j*v;m=g;w=c+q;for(k=
c,x=0;k+t<w;k+=t,x++)x%2===0&&(n=e(b,m,k,u,t,h),y.appendChild(n));x%2===0&&w-k<t&&(n=e(b,m,k,u,w-k,h),y.appendChild(n))}d.appendChild(y)}return y};a.createSVGOlnRectDashed=function(b,d,g,c,f,q,o,h,j,p,s){var o=null,n=p=0,u=0,k=0,m=0,r=m=0,j=parseInt(j,10),w=1,x=null;isNaN(j)===!0&&(j=0);if(b===null||d===null)return null;x=a.createSVGElement(b,"g");if(x!==null){if(j>0){s===a.DOTTED?w=1:s===a.DASHED&&(w=4);p=j*w;n=j;m=g+f;k=c;for(u=g+1,r=0,r=0;u+p<m;u+=p,r++)r%2===0&&(o=e(b,u,k,p,n,h),x.appendChild(o));
r%2===0&&m-u<p&&(o=e(b,u,k,m-u,n,h),x.appendChild(o));p=j;n=j*w;u=g+f-j;m=c+q;for(k=c,r=0;k+n<m;k+=n,r++)r%2===0&&(o=e(b,u,k,p,n,h),x.appendChild(o));r%2===0&&m-k<n&&(o=e(b,u,k,p,m-k,h),x.appendChild(o));p=j*w;n=j;m=g+f;k=c+q-j;for(u=g,r=0;u+p<m;u+=p,r++)r%2===0&&(o=e(b,u,k,p,n,h),x.appendChild(o));r%2===0&&m-u<p&&(o=e(b,u,k,m-u,n,h),x.appendChild(o));p=j;n=j*w;u=g;m=c+q;for(k=c,r=0;k+n<m;k+=n,r++)r%2===0&&(o=e(b,u,k,p,n,h),x.appendChild(o));r%2===0&&m-k<n&&(o=e(b,u,k,p,m-k,h),x.appendChild(o))}d.appendChild(x)}return x};
a.createSVGRect_3dFrame_TextField=function(b,d,g,c,f,q,o){var h=null;if(b===null||d===null)return null;var j=a.createSVGElement(b,"g");o--;j!==null&&(h=e(b,g+f-o-1,c+o,1,q-2*o,"rgb(255,255,255)"),j.appendChild(h),h=e(b,g+f-o-2,c+o,1,q-2*o,"rgb(192,192,192)"),j.appendChild(h),h=e(b,g+o,c+q-o-1,f-2*o-1,1,"rgb(255,255,255)"),j.appendChild(h),h=e(b,g+o,c+q-o-2,f-2*o-1,1,"rgb(192,192,192)"),j.appendChild(h),h=e(b,g+o,c+o,1,q-2*o-1,"rgb(128,128,128)"),j.appendChild(h),h=e(b,g+o+1,c+o,1,q-2*o-2,"rgb(0,0,0)"),
j.appendChild(h),h=e(b,g+o,c+o,f-2*o-1,1,"rgb(128,128,128)"),j.appendChild(h),d.appendChild(j),h=e(b,g+o+1,c+o+1,f-2*o-3,1,"rgb(0,0,0)"),j.appendChild(h),d.appendChild(j));return j};a.createSVGRect_3dFrame=function(b,d,g,c,f,q,o){var h=null;if(b===null||d===null)return null;var j=a.createSVGElement(b,"g");j!==null&&(h=e(b,g+f-o-1,c+o,1,q-2*o,"rgb(128,128,128)"),j.appendChild(h),h=e(b,g+o,c+q-o-1,f-2*o-1,1,"rgb(128,128,128)"),j.appendChild(h),h=e(b,g+o,c+o,1,q-2*o-1,"rgb(255,255,255)"),j.appendChild(h),
h=e(b,g+o,c+o,f-2*o-1,1,"rgb(255,255,255)"),j.appendChild(h),d.appendChild(j));return j};a.createSVGRect=function(b,d,g,c,f,q,o,h,j,p){var k=null,n=k=k=null,k=null,n=parseInt(j,10);isNaN(n)===!0&&(n=0);if(b===null||d===null)return null;j=a.createSVGElement(b,"g");j!==null&&(o!==null&&(k=p===!0?e(b,g+n,c+n,f-n*2,q-n*2,o):e(b,g,c,f,q,o),j.appendChild(k)),n>0&&(k=e(b,g,c,f,n,h),j.appendChild(k),k=e(b,g,c+q-n,f,n,h),j.appendChild(k),k=e(b,g,c,n,q,h),j.appendChild(k),n=e(b,g+f-n,c,n,q,h),j.appendChild(n)),
d.appendChild(j));return j};a.createSVGInOutRect=function(b,d,g,c,f,q,o,h,j,p,k){var n=null,u=n=n=null,n=null,u=parseInt(p,10);isNaN(u)===!0&&(u=0);if(b===null||d===null)return null;p=a.createSVGElement(b,"g");p!==null&&(h!==null&&(n=k===!0?e(b,c+u,f+u,q-u*2,o-u*2,h):e(b,c,f,q,o,h),p.appendChild(n)),d.appendChild(p));if(b===null||g===null)return null;p=a.createSVGElement(b,"g");p!==null&&(u>0&&(n=e(b,c,f,q,u,j),p.appendChild(n),n=e(b,c,f+o-u,q,u,j),p.appendChild(n),n=e(b,c,f,u,o,j),p.appendChild(n),
u=e(b,c+q-u,f,u,o,j),p.appendChild(u)),g.appendChild(p));return p};a.createSVGOlnRect=function(b,d,g,c,f,q,o,h,j){var p=null,o=p=p=null,o=parseInt(j,10);isNaN(o)===!0&&(o=0);if(b===null||d===null)return null;j=a.createSVGElement(b,"g");j!==null&&(o>0&&(p=e(b,g,c,f,o,h),j.appendChild(p),p=e(b,g,c+q-o,f,o,h),j.appendChild(p),p=e(b,g,c,o,q,h),j.appendChild(p),o=e(b,g+f-o,c,o,q,h),j.appendChild(o)),d.appendChild(j));return j};a.createSVGLine=function(b,d,g,c,f,q,e,h){if(b===null||d===null)return null;
b=a.createSVGElement(b,"line");a.setSVGAttr(b,"x1",g);a.setSVGAttr(b,"y1",c);a.setSVGAttr(b,"x2",f);a.setSVGAttr(b,"y2",q);a.setSVGAttr(b,"stroke",e);a.setSVGAttr(b,"stroke-width",h);d.appendChild(b);return b};a.createSVGEllipseExt=function(b,d,g,c,f,q,e,h,j,p){if(b===null||d===null)return null;b=a.createSVGElement(b,"ellipse");p===!0&&(g+=j,c+=j,f-=j*2,q-=j*2);a.setSvgAttrC(b,"cx",g+f/2);a.setSvgAttrC(b,"cy",c+q/2);a.setSvgAttrC(b,"rx",f/2);a.setSvgAttrC(b,"ry",q/2);a.setSVGAttr(b,"fill",e);j>0&&
h!==null&&(a.setSVGAttr(b,"stroke",h),a.setSVGAttr(b,"stroke-width",j));d.appendChild(b);return b};a.createSVGEllipse=function(b,d,g,c,f,e,o,h,j){if(b===null||d===null)return null;b=a.createSVGElement(b,"ellipse");a.setSVGAttr(b,"cx",g);a.setSVGAttr(b,"cy",c);a.setSVGAttr(b,"rx",f);a.setSVGAttr(b,"ry",e);j===null&&(j="none");a.setSVGAttr(b,"fill",j);h>0&&o!==null&&(a.setSVGAttr(b,"stroke",o),a.setSVGAttr(b,"stroke-width",h));d.appendChild(b);return b};a.createSVGPolygon=function(b,d,g,c,f,e,o){if(b===
null||d===null)return null;for(var b=a.createSVGElement(b,"polygon"),h=g.length,j=0,p="",j=0;j<h;j++)j!==0&&(p+=" "),p+=g[j]+","+c[j];a.setSVGAttr(b,"points",p);o===null&&(o="none");a.setSVGAttr(b,"fill",o);a.setSVGAttr(b,"fill-rule","evenodd");e>0&&f!==null&&(a.setSVGAttr(b,"stroke",f),a.setSVGAttr(b,"stroke-width",e));d.appendChild(b);return b};a.createSVGPolyline=function(b,d,g,c,f,e,o,h){if(b===null||d===null)return null;for(var b=a.createSVGElement(b,"polyline"),j="",p=0,p=0;p<f;p++)p!==0&&(j+=
" "),j+=g[p]+","+c[p],a.setSvgAttrC(b,"points",j);a.setSvgAttrC(b,"points",j);a.setSVGAttr(b,"fill",e);h>0&&o!==null&&(a.setSVGAttr(b,"stroke",o),a.setSVGAttr(b,"stroke-width",h));d.appendChild(b);return b};a.createSVGPie=function(b,d,g,c,f,e,o,h,j,p,k,n){if(b===null||d===null)return null;var b=a.createSVGElement(b,"path"),u=0,t=1;if(j)for(u=1;h>o;)h-=360;else for(;h<o;)h+=360;Math.abs(h-o)<180&&(t=0);var j=g+f*Math.cos(Math.PI*o/180),o=c-e*Math.sin(Math.PI*o/180),m=g+f*Math.cos(Math.PI*h/180),h=
c-e*Math.sin(Math.PI*h/180);a.setSVGAttr(b,"d","M"+g+","+c+" L"+j+","+o+" A"+f+","+e+" 0 "+t+","+u+" "+m+","+h+" z");n===null&&(n="none");a.setSVGAttr(b,"fill",n);k>0&&p!==null&&(a.setSVGAttr(b,"stroke",p),a.setSVGAttr(b,"stroke-width",k));d.appendChild(b);return b};a.toFixed=function(a,d){var g="",g=Math.pow(10,d||0);return g=g!=0?String(Math.round(a*g)/g):String(Math.round(a))};a.toFixedInt=function(a,d){var g="",g=Math.pow(10,d||0);return g=g!=0?Math.round(a*g)/g:Math.round(a)};a.toFixedNotRound=
function(a,d){var g="",g=1,g=a.toString(),c=g.indexOf("."),f=a,g=c!==-1?g.substr(0,1+c+d):g,g=parseFloat(g);isNaN(g)===!1&&(f=g.toString());return f};a.stringcmp=function(a,d){var g=!1;if(a===void 0||d===void 0)return g;if(a===null||d===null)return g;var c=d.toString();a.toString().toLowerCase()===c.toLowerCase()&&(g=!0);return g};a.prefixcmp=function(a,d){var g=!1;if(a===void 0||d===void 0)return g;if(a===null||d===null)return g;d.substring(0,a.length)===a&&(g=!0);return g};a.prefixicmp=function(a,
d){var g=!1;if(a===void 0||d===void 0||a===null||d===null)return g;var c=a.toLowerCase();d.toLowerCase().substring(0,c.length)===c&&(g=!0);return g};a.atoi=function(a){return parseInt(a,10)};a.BIT_clearBit=function(a,d){a&=~d;return a};a.BIT_setBit=function(a,d){a|=d;return a};a.parseNumber=function(b){var d=0,d=0,d=b.indexOf("0x");return d=d!==-1?a.ahextoi(b):a.atoi(b)};a.ahextoi=function(a){return parseInt(a,16)};a.atof=function(a){return parseFloat(a)};a.strstr=function(a,d){var g=a.indexOf(d,
0);return g===-1?null:a.slice(g,a.length)};a.strlen=function(a){var d=0;if(a!==null&&a.length!==null)d=a.length;return d};a.MAX=function(a,d){return Math.max(a,d)};a.MIN=function(a,d){return Math.min(a,d)};a.StrEndWith=function(a,d){return a.indexOf(d,a.length-d.length)!==-1};a.CircularBuffer=function(b){b=b.toFixed(0);this.pTail=this.pHeader=-1;this.size=b;this.newestTS=this.lastAddedIndex=this.level=0;this.yetAddedTSPints={};this.bufferArr=[];this.clear=function(){var a;this.pTail=this.pHeader=
-1;this.newestTS=this.lastAddedIndex=this.level=0;if(this.bufferArr!==null)for(;this.bufferArr.length>0;)this.bufferArr.pop();if(this.yetAddedTSPints!==null)for(a in this.yetAddedTSPints)delete this.yetAddedTSPints[a]};this.add=function(b){var g=-1,c=-1,f=0;this.size<0&&b!==null&&this.yetAddedTSPints[b.t_s]!=void 0&&(g=this.yetAddedTSPints[b.t_s]);if(g>=0)a.getDebugLevel()>=2&&a.log_append_ln("Trend Buffer yet contains a Point with the to add point's timestamp so no new add made! for TS "+b.t_s+" \n");
else{if(this.pTail==-1&&this.pHeader==-1)c=this.pTail=this.pHeader=0,this.bufferArr[c]=b,this.lastAddedIndex=this.yetAddedTSPints[b.t_s]=c,this.newestTS=b.t_s;else{if(this.size<0){if(this.pTail++,c=this.pTail,this.newestTS>b.t_s)if(b.t_s<this.bufferArr[0].t_s)c=0;else if(f=this.lastAddedIndex,f>=this.bufferArr.length&&(f=0),b.t_s<this.bufferArr[f].t_s)for(g=0;f>0&&g===0;f--)b.t_s<this.bufferArr[f].t_s&&b.t_s>=this.bufferArr[f-1].t_s&&(g=1,c=f);else if(b.t_s>this.bufferArr[f].t_s)for(g=0;f<this.bufferArr.length-
1&&g===0;f++)b.t_s>this.bufferArr[f].t_s&&b.t_s<=this.bufferArr[f+1].t_s&&(g=1,c=f+1)}else if(this.pHeader===0&&this.pTail===0)this.pTail++,c=this.pTail;else if(this.pHeader<this.pTail&&this.pTail<this.size-1)this.pTail++,c=this.pTail;else if(this.pHeader<this.pTail&&this.pTail==this.size-1)this.pHeader++,c=this.pTail=0;else if(this.pHeader>this.pTail&&this.pHeader<this.size-1)this.pTail++,this.pHeader++,c=this.pTail;else if(this.pHeader>this.pTail&&this.pHeader==this.size-1)this.pTail++,this.pHeader=
0,c=this.pTail;if(this.size<0&&c!==this.bufferArr.length)for(f=this.bufferArr.length-1;f>=c;f--)this.bufferArr[f+1]=this.bufferArr[f],this.yetAddedTSPints[this.bufferArr[f+1].t_s]=f+1;this.bufferArr[c]=b;this.lastAddedIndex=this.yetAddedTSPints[b.t_s]=c;if(this.newestTS<b.t_s)this.newestTS=b.t_s}this.size<0?this.level++:this.level<this.size&&this.level++}};this.get=function(a){var b=null;a<this.level&&this.level>0&&a>=0?this.pHeader==-1&&this.pTail==-1?b=null:this.pHeader+a<=this.pTail?b=this.bufferArr[this.pHeader+
a]:this.pHeader>this.pTail?this.pHeader+a<=this.size-1?b=this.bufferArr[this.pHeader+a]:this.pHeader+a>this.size-1&&(b=this.bufferArr[this.pHeader+a-this.size]):b=null:b=null;return b}};a.str_ascii2byte=function(a,d){var g="",c=g=0,c=c=0;if(a!==null&&d!==null){if(d.buffer!==null){c=a.length;if(c+1>>1!=c>>1)return-1;for(c=0;c<a.length;c++)g="0x"+a[c]+a[c+1],g=parseInt(g,10),d.buffer[d.nByte++]=String.fromCharCode(g);return 0}}else return-1};a.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
encode:function(b){for(var d="",g,c,f,e,o,h,j=0,b=a.Base64._utf8_encode(b);j<b.length;)g=b.charCodeAt(j++),c=b.charCodeAt(j++),f=b.charCodeAt(j++),e=g>>2,g=(g&3)<<4|c>>4,o=(c&15)<<2|f>>6,h=f&63,isNaN(c)?o=h=64:isNaN(f)&&(h=64),d=d+this._keyStr.charAt(e)+this._keyStr.charAt(g)+this._keyStr.charAt(o)+this._keyStr.charAt(h);return d},decode:function(b){for(var d="",g,c,f,e,o,h=0,b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<b.length;)g=this._keyStr.indexOf(b.charAt(h++)),c=this._keyStr.indexOf(b.charAt(h++)),
e=this._keyStr.indexOf(b.charAt(h++)),o=this._keyStr.indexOf(b.charAt(h++)),g=g<<2|c>>4,c=(c&15)<<4|e>>2,f=(e&3)<<6|o,d+=String.fromCharCode(g),e!=64&&(d+=String.fromCharCode(c)),o!=64&&(d+=String.fromCharCode(f));return d=a.Base64._utf8_decode(d)},_utf8_encode:function(a){for(var d=0,a=a.replace(/\r\n/g,"\n"),g="",d=0;d<a.length;d++){var c=a.charCodeAt(d);c<128?g+=String.fromCharCode(c):(c>127&&c<2048?g+=String.fromCharCode(c>>6|192):(g+=String.fromCharCode(c>>12|224),g+=String.fromCharCode(c>>6&
63|128)),g+=String.fromCharCode(c&63|128))}return g},_utf8_decode:function(a){for(var d="",g=0,c=0,f=0,e=0;g<a.length;)c=a.charCodeAt(g),c<128?(d+=String.fromCharCode(c),g++):c>191&&c<224?(f=a.charCodeAt(g+1),d+=String.fromCharCode((c&31)<<6|f&63),g+=2):(f=a.charCodeAt(g+1),e=a.charCodeAt(g+2),d+=String.fromCharCode((c&15)<<12|(f&63)<<6|e&63),g+=3);return d}};a.requestFullScreen=function(a){var d=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullScreen;d&&d.call(a)};
return a}(_SCIntern||{});_SCIntern=function(a){a.AlarmSrvConfigType=function(){this.response="";this.asynchUpdateCb=function(k){a.AlarmSrvConfig.response=k}};a.AlarmSrvConfig=new a.AlarmSrvConfigType;a.getAlarmDateTimeByIntSecUTC=function(k){return a.getAlarmDateTimeByIntSec_Flag(k,!1)};a.getAlarmDateTimeByIntSec=function(k){return a.getAlarmDateTimeByIntSec_Flag(k,!a.SpecialCO.mbTmzEn.value)};a.getAlarmDateTimeByIntSec_Flag=function(k,e){var b=parseInt(k,10),d=0;isNaN(b)===!1&&(b<=0?d="---":(b*=1E3,b=new Date(b),d=a.DateTime_ReadDT(a.readDateTimeFormat(),
a.SpecialCO.dateTimeLocalNow.name,e,b,null,!0)));return d};a.HisLineType=function(k,e,b){var d=!1;this.setStateColor=function(b){this.color=a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR+b+"#"};this.setStateColor(b.StateNoStateColor.value);this.itemId=parseInt(k[0],10);if(isNaN(this.itemId)===!0)this.itemId=k[0];this.typeId=parseInt(k[1],10);if(isNaN(this.typeId)===!0)this.typeId=k[1];this.htmlTag=e+"_"+this.typeId;this.on=parseInt(k[2],16);this.off=parseInt(k[3],16);this.on!==0&&this.off===0&&(d=!0);this.state=
parseInt(k[4],10);if(isNaN(this.state))this.state=k[4];if(this.state===0)this.state="NAK",d===!0?this.setStateColor(b.StateOnNackedColor.value):this.setStateColor(b.StateOffNackedColor.value);else if(this.state==1)this.state="ACK",d===!0?this.setStateColor(b.StateOnAckedColor.value):this.setStateColor(b.StateOffAckedColor.value)};a.DefLineType=function(k,e,b){var d=!1;this.setStateColor=function(b){this.color=a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR+b+"#"};this.setStateColor(b.StateNoStateColor.value);
this.typeId=parseInt(k[0],10);if(isNaN(this.typeId)===!0)this.typeId=k[0];this.htmlTag=e+"_"+this.typeId;this.counter=parseInt(k[1],10);if(isNaN(this.counter)===!0)this.counter=k[1];this.on=parseInt(k[2],16);this.off=parseInt(k[3],16);this.on!==0&&this.off===0&&(d=!0);this.state=parseInt(k[4],10);if(isNaN(this.state))this.state=k[4];if(this.counter===0)this.setStateColor(b.StateNoStateColor.value),this.state="--";else if(this.state===0)this.state="NAK",d===!0?this.setStateColor(b.StateOnNackedColor.value):
this.setStateColor(b.StateOffNackedColor.value);else if(this.state==1)this.state="ACK",d===!0?this.setStateColor(b.StateOnAckedColor.value):this.setStateColor(b.StateOffAckedColor.value)};a.AlarmBase=function(k,e,b,d){this.index=k;this.coPrefix=e;this.nRow=b;this.specific_update=null;this.previousConfigResponse="";this.fileViewer=d;this.rArrayOverview=this.rArrayHistory=null;this.sta=0;this.BACnet=null;this.isBACnet=function(){var a=!1;this.BACnet!==null&&(a=!0);return a};this.getDisplayedNumRow=
function(){return this.nRow};this.getMaxPage=null;this.loadHistoryCGI_psc=function(b,c){var d=0,e="",d="";a.getDebugLevel()>=2&&a.log_append_ln("loadHistoryCGI_psc() called; startLine = "+b+"; endline = "+c);d=a.loadGeneralCGI("plc?alarm1Alr");if(d!=void 0&&d.length>0&&d!=="")for(var o=d.split("\n"),d=0;d<o.length&&d<=c;d++){if(o[d].toUpperCase().indexOf("END")!=-1)break;e+=o[d]+"\n"}e+="Done\n";return e};this.loadHistoryCGI=function(b,c){var d=null;return d=a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?
this.loadHistoryCGI_psc(b,c):a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=loadHistory&startLine="+b+"&endLine="+c+"&sortTON="+this.co.SortMode.value+"&filterON="+this.co.FilterMode.value+"&filterTID="+this.co.FilterTIDs.value)};this.loadHistoryAlarmBlock=function(b,c){var d=this.loadHistoryCGI(b,c);return a.parseCGI_CSV_Content(d)};this.updateIndices=function(a,b){var d={start:0,stop:0,start:-1,end:-1};d.end=(a+1)*this.getDisplayedNumRow()-1;if(d.end>=b)d.end=
b-1;if(d.end<0)d.end=0;d.start=a*this.getDisplayedNumRow();if(d.start<0)d.start=0;return d};this.update_co=function(b){var c=!1;if(b){if(b=a.ReadContainer(this.name),b!=this.value)this.value=b,c=!0}else a.WriteContainer(this.name,this.value),c=!0;return c};this.config={version:0,overViewSize:0,maxHistorySize:0,actualHistorySize:0,blockSize:0,stateIndex:0};this.exec_deleteByType=function(){a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=delete&type="+typeId)};this.exec_deleteByItem=
function(b){a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=delete&item="+b)};this.exec_deleteList=function(){a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=delete&completList=1")};this.exec_acknowledgeByType=function(b){a.getDebugLevel()>=3&&a.log_append_ln("exec_acknowledgeByType alarm typeId: "+b);a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=acknowledge&type="+b)};this.exec_acknowledgeByItem=
function(b){a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=acknowledge&item="+b)};this.exec_acknowledgeList=function(){a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=acknowledge&completList=1")};this.exec_restartAlarmServer=function(){a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=reinitAlarming")};this.exec_clearAlarmServer=function(){a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+
"&action=clearLogFiles")};this.readAllSpecialAlarmContainers=function(){var a=this.co,b=[];Object.keys(a).forEach(function(d){a[d].update(!0)===!0&&b.push(a[d])});return b};this.loadAndParseSrvCfg=function(){var b=!1;a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?this.co.LoadAlrsRemoteMode.value==="1"?this.co.LoadAlrsRemoteFile.value.length>0?a.loadAsynchData("plc?"+this.co.LoadAlrsRemoteFile.value+"cfg",a.AlarmSrvConfig.asynchUpdateCb):(a.getDebugLevel()>=2&&a.log_append_ln("Warning during load cfg from Panasonic Alarming , LoadAlrsRemoteFile not right configured : ["+
this.co.LoadAlrsRemoteFile.value+"]"),a.loadAsynchData("plc?alarm1cfg",a.AlarmSrvConfig.asynchUpdateCb)):(a.getDebugLevel()>=2&&a.log_append_ln("Warning during load cfg from Panasonic Alarming , LoadAlrsRemoteMode not right configured : ["+this.co.LoadAlrsRemoteMode.value+"]"),a.loadAsynchData("plc?alarm1cfg",a.AlarmSrvConfig.asynchUpdateCb)):a.loadAsynchData("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=configNSta",a.AlarmSrvConfig.asynchUpdateCb);if(a.AlarmSrvConfig.response.length>
0&&a.stringcmp(a.AlarmSrvConfig.response,this.previousConfigResponse)===!1&&(b=!0,this.previousConfigResponse=a.AlarmSrvConfig.response,this.parseAlarmSrvConfig()===!0&&this.getMaxPage!==null))this.co.MaxPageNr.value=this.getMaxPage(),this.co.MaxPageNr.update(!1);return b};this.update=function(){var b=0,c=0,d=c=0,e=this.loadAndParseSrvCfg(),o=this.readAllSpecialAlarmContainers();if(this.co.AlarmsListNr.value==="")this.co.AlarmsListNr.value="ALRLIST0";if(o.length>0||e===!0||a.previousDrawDateTimeFormat!==
a.readDateTimeFormat()||a.previousMBTmzEn!==a.SpecialCO.mbTmzEn.value){for(b=0;b<o.length;b++)if(a.stringcmp(this.co.SelAlrsTypesAct.name,o[b].name)===!0){var h=this.fileViewer.getSelectedRow();if(a.stringcmp("ACKALRSDEFTYPES",o[b].value)===!0)if(this.fileViewer.checkIfMultiSelect()===!0)for(d=0;d<h.length;d++)c=this.fileViewer.getTableCell(h[d]+1,1),this.exec_acknowledgeByType(c);else c=this.fileViewer.getTableCell(h+1,1),this.exec_acknowledgeByType(c);else if(a.stringcmp("ACKALRSHISTYPES",o[b].value)===
!0)if(this.fileViewer.checkIfMultiSelect()===!0)for(d=0;d<h.length;d++)c=this.fileViewer.getTableCell(h[d]+1,2),this.exec_acknowledgeByType(c);else c=this.fileViewer.getTableCell(h+1,2),this.exec_acknowledgeByType(c);else if(a.stringcmp("ACKALRSHISITEMS",o[b].value)===!0)if(this.fileViewer.checkIfMultiSelect()===!0)for(d=0;d<h.length;d++)c=this.fileViewer.getTableCell(h[d]+1,1),this.exec_acknowledgeByItem(c);else c=this.fileViewer.getTableCell(h+1,1),this.exec_acknowledgeByItem(c);else if(a.stringcmp("DELALRSHISITEMS",
o[b].value)===!0)if(this.fileViewer.checkIfMultiSelect()===!0)for(d=0;d<h.length;d++)c=this.fileViewer.getTableCell(h[d]+1,1),this.exec_deleteByItem(c);else c=this.fileViewer.getTableCell(h+1,1),this.exec_deleteByItem(c);else a.stringcmp("ACKALRSDEFLIST",o[b].value)===!0?this.exec_acknowledgeList():a.stringcmp("ACKALRSHISLIST",o[b].value)===!0?this.exec_acknowledgeList():a.stringcmp("DELALRSHISLIST",o[b].value)===!0?this.exec_deleteList():a.stringcmp("RESTARTTRGTALARMING",o[b].value)===!0?this.exec_restartAlarmServer():
a.stringcmp("CLEARTRGTLOGFILES",o[b].value)===!0&&this.exec_clearAlarmServer()}else if(a.stringcmp(this.co.SelectMode.name,o[b].name)===!0)a.getDebugLevel()>=2&&a.log_append_ln(o[b].value),a.stringcmp("STOM",o[b].value)===!0?this.fileViewer.changeSelection(-1):a.stringcmp("MTOS",o[b].value)===!0&&this.fileViewer.changeSelection(-1);else if(a.stringcmp(this.co.AlarmMacroType.name,o[b].name)===!0&&(a.getDebugLevel()>=2&&a.log_append_ln(o[b].value),a.stringcmp("20",o[b].value)===!0)){if(this.BACnet===
null)this.BACnet=new a.BACnet_Alarming(this);a.getDebugLevel()>=2&&a.log_append_ln("this is a BACnet alarming macro")}if(e&&a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&(a.getDebugLevel()>=2&&a.log_append_ln(" Panasonic forces that alarm his reload since the alarmcfg request changed this.co.LoadAlrsAction.name = "+this.co.LoadAlrsAction.name+" this.co.LoadAlrsAction.value = "+this.co.LoadAlrsAction.value),this.co.LoadAlrsAction.value!=="STARTLOADDATAS"))this.co.LoadAlrsAction.value="STARTLOADDATAS",
this.co.LoadAlrsAction.update(!1),o.push(this.co.LoadAlrsAction);this.specific_update(o);this.fileViewer.removeSelection()}};this.specific_update=a.noop;this.parseAlarmSrvConfig=function(){var b=a.AlarmSrvConfig.response,c=null,d=!1;b!==null?c=a.parseCGI_CSV_Content(b):a.log_append_ln("Alarming ERROR: Failed to parseCGI_CSV_Content!");if(c!==null&&c[0]!==null){if(c[0][0]!==null)this.config.version=c[0][0];if(c[0][1]!==null&&(this.config.overViewSize=c[0][1],this.config.overViewSize=a.atoi(this.config.overViewSize),
isNaN(this.config.overViewSize)===!0))this.config.overViewSize=0;if(c[0][2]!==null&&(this.config.maxHistorySize=c[0][2],this.config.maxHistorySize=a.atoi(this.config.maxHistorySize),isNaN(this.config.maxHistorySize)===!0))this.config.maxHistorySize=0;if(c[0][3]!==null&&(this.config.actualHistorySize=c[0][3],this.config.actualHistorySize=a.atoi(this.config.actualHistorySize),isNaN(this.config.actualHistorySize)===!0))this.config.actualHistorySize=0;if(c[0][4]!==null&&(this.config.blockSize=c[0][4],
this.config.blockSize=a.atoi(this.config.blockSize),isNaN(this.config.blockSize)===!0))this.config.blockSize=0;if(c[0][5]!==null)this.config.stateIndex=c[0][5],this.config.stateIndex=a.atoi(this.config.stateIndex),isNaN(this.config.stateIndex)===!0?this.config.stateIndex=0:d=!0}return d};this.co={Language:{name:"@LANGUAGE",value:"0",update:this.update_co},AlarmList:{name:e+"AlarmsList."+k,value:"0",update:this.update_co},AlarmsListNr:{name:e+"AlarmsListNr."+k,value:"ALRLIST0",update:this.update_co},
LoadAlrsRemoteMode:{name:e+"LoadAlrsRemoteMode."+k,value:"1",update:this.update_co},LoadAlrsRemoteFile:{name:e+"LoadAlrsRemoteFile."+k,value:"",update:this.update_co},SelectMode:{name:e+"SelectMode."+k,value:"0",update:this.update_co},AlarmsListSize:{name:e+"AlarmsListSize."+k,value:"0",update:this.update_co},PageNr:{name:e+"PageNr."+k,value:"0",update:this.update_co},MaxPageNr:{name:e+"MaxPageNr."+k,value:"0",update:this.update_co},SelAlrsTypesAct:{name:e+"SelAlrsTypesAct."+k,value:"0",update:this.update_co},
AlarmsListHeaderSP:{name:e+"AlarmsListHeaderSP."+k,value:"0",update:this.update_co},FilterMode:{name:e+"FilterMode."+k,value:"0",update:this.update_co},SortMode:{name:e+"SortMode."+k,value:"0",update:this.update_co},FilterAckMode:{name:e+"FilterAckMode."+k,value:"0",update:this.update_co},FilterTIDs:{name:e+"FilterTIDs."+k,value:"0",update:this.update_co},AlarmsTxtFromCSV:{name:e+"AlarmsTxtFromCSV."+k,value:"0",update:this.update_co},AlarmListSizeCSV:{name:e+"AlarmListSizeCSV."+k,value:"0",update:this.update_co},
StateNoStateColor:{name:e+"StateNoStateColor."+k,value:"0",update:this.update_co},StateOnNackedColor:{name:e+"StateOnNackedColor."+k,value:"0",update:this.update_co},StateOnAckedColor:{name:e+"StateOnAckedColor."+k,value:"0",update:this.update_co},StateOffNackedColor:{name:e+"StateOffNackedColor."+k,value:"0",update:this.update_co},StateOffAckedColor:{name:e+"StateOffAckedColor."+k,value:"0",update:this.update_co},LoadAlrsAction:{name:e+"LoadAlrsAction."+k,value:"0",update:this.update_co},LoadAlrsBargVal:{name:e+
"LoadAlrsBargVal."+k,value:"0",update:this.update_co},SaveAlrsAction:{name:e+"SaveAlrsAction."+k,value:"0",update:this.update_co},SortAlrsColAction:{name:e+"SortAlrsColAction."+k,value:"0",update:this.update_co},SortAlrsColNr:{name:e+"SortAlrsColNr."+k,value:"0",update:this.update_co},AlarmMacroType:{name:e+"AlarmMacroType."+k,value:"0",update:this.update_co},AlarmTextExtraParam10:{name:e+"AlarmTextExtraParam1On."+k,value:"0",update:this.update_co},AlarmTextExtraParam20:{name:e+"AlarmTextExtraParam2On."+
k,value:"0",update:this.update_co},AlarmTextExtraParam30:{name:e+"AlarmTextExtraParam3On."+k,value:"0",update:this.update_co},AlarmTextExtraParam40:{name:e+"AlarmTextExtraParam4On."+k,value:"0",update:this.update_co},AlarmTextExtraParam50:{name:e+"AlarmTextExtraParam4On."+k,value:"0",update:this.update_co}};this.generateHistoryAlarmContainerValue=function(){var b=0,c="";if(this.rArrayHistory===null)return"";for(b=0;b<this.rArrayHistory.length;b++)c+=this.rArrayHistory[b].color,c+=a.FVCOLSEPTOKEN2,
c+=this.rArrayHistory[b].itemId,c+=a.FVCOLSEPTOKEN2,c+=this.rArrayHistory[b].typeId,c+=a.FVCOLSEPTOKEN2,c+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].htmlTag),c+=a.FVCOLSEPTOKEN2,c+=a.getAlarmDateTimeByIntSec(this.rArrayHistory[b].on),c+=a.FVCOLSEPTOKEN2,c+=a.getAlarmDateTimeByIntSec(this.rArrayHistory[b].off),c+=a.FVCOLSEPTOKEN2,c+=this.rArrayHistory[b].state,c+=a.FVLINESEPTOKEN2;return c};this.addPartialResponseToHistory=function(b,c){var d=0,e=b.length,o=null;c.rInt=-1;for(d=0;d<e;d++)if(a.stringcmp(b[d],
"Done")===!0)c.rInt=1;else if(a.stringcmp(b[d],"End")===!0)c.rInt=0;else if(b[d].length>=5&&this.isBACnet()===!0)b[5]!=="20"?(o=new a.BACnet_HisLineType(b[d],this.co.AlarmsListNr.value,this.co),c.rArray.push(o),c.rInt=1):(a.err_append_ln("Unexpected Extra params type (alarm his online errror"),c.rInt=-1);else if(b[d].length>=5)o=new a.HisLineType(b[d],this.co.AlarmsListNr.value,this.co),c.rArray.push(o),c.rInt=1;else{c.rInt=-1;break}};this.co.AlarmsListNr.update(!0);if(this.co.AlarmsListNr.value.length===
0)this.co.AlarmsListNr.value="ALRLIST0"};a.AlarmDefOnlineType=function(k,e,b){this.base=a.AlarmBase;this.base(k,"@MACROALRDEFON",e,b);this.specific_update=function(){this.rArrayOverview=null;var a=parseInt(this.co.PageNr.value,10);isNaN(a)===!0&&(a=0);this.rArrayOverview=this.loadOverviewByIndices(this.updateIndices(a,this.config.overViewSize),a,this.config.overViewSize);this.co.SelAlrsTypesAct.value="0";this.co.SelAlrsTypesAct.update(!1);this.co.AlarmList.value=this.co.AlarmsListHeaderSP.value+this.generateOverviewAlarmContainerValue();
this.co.AlarmList.update(!1);this.co.AlarmsListSize.value=this.config.overViewSize;this.co.AlarmsListSize.update(!1)};this.getMaxPage=function(){var a=0;this.config.overViewSize>0&&this.getDisplayedNumRow()>0&&(a=Math.ceil(this.config.overViewSize/this.getDisplayedNumRow()-1));return a};this.generateOverviewAlarmContainerValue=function(){for(var b=0,g=this.rArrayOverview.length,c="",b=0;b<g;b++)c+=this.rArrayOverview[b].color,c+=a.FVCOLSEPTOKEN2,c+=this.rArrayOverview[b].typeId,c+=a.FVCOLSEPTOKEN2,
c+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayOverview[b].htmlTag),c+=a.FVCOLSEPTOKEN2,c+=a.getAlarmDateTimeByIntSec(this.rArrayOverview[b].on),c+=a.FVCOLSEPTOKEN2,c+=a.getAlarmDateTimeByIntSec(this.rArrayOverview[b].off),c+=a.FVCOLSEPTOKEN2,c+=this.rArrayOverview[b].state,c+=a.FVCOLSEPTOKEN2,c+=this.rArrayOverview[b].counter,c+=a.FVLINESEPTOKEN2;return c};this.addPartialResponseToOverview=function(b,g){var c=0,f=b.length;g.rInt=-1;for(c=0;c<f;c++)if(a.stringcmp(b[c],"Done")===!0)g.rInt=0;else if(b[c].length===
5){var e=new a.DefLineType(b[c],this.co.AlarmsListNr.value,this.co);g.rArray.push(e);g.rInt=1}else{g.rInt=-1;break}};this.loadOverviewByIndices=function(a,b,c){var f={rArray:[],rInt:0},e=[],o=e=0;if(a.start>=0&&a.end>=0){f.rInt=1;if(a.end+1>=c)a.end=c-1;if(b>=0)for(;f.rInt>0&&f.rArray.length<a.end-a.start+1;)e=a.start+f.rArray.length,o=a.end-a.start-f.rArray.length+1<this.config.blockSize?a.end:a.start+f.rArray.length+this.config.blockSize-1,e=this.loadOverviewAlarmBlock(e,o,f),this.addPartialResponseToOverview(e,
f);return f.rArray}};this.loadOverviewAlarmBlock=function(b,g){var c=this.loadOverviewCGI(b,g);return a.parseCGI_CSV_Content(c)};this.loadOverviewCGI=function(b,g){return a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value.toString()+"&action=loadDefOverview&startLine="+b.toString()+"&endLine="+g.toString()+"&sortTON="+this.co.SortMode.value.toString()+"&filterON"+this.co.FilterMode.value.toString())}};a.AlarmDefOnlineType.prototype=new a.AlarmBase;a.AlarmHisOnlineType=function(k,
e,b){this.base=a.AlarmBase;this.base(k,"@MACROALRHISON",e,b);this.specific_update=function(){var b=parseInt(this.co.PageNr.value,10);isNaN(b)===!0&&(b=0);this.rArrayHistory=this.loadHistoryByIndices(this.updateIndices(b,this.config.actualHistorySize),b,this.config.actualHistorySize);this.co.SelAlrsTypesAct.value="0";this.co.SelAlrsTypesAct.update(!1);this.co.AlarmList.value=this.co.AlarmsListHeaderSP.value;this.co.AlarmList.value+=this.isBACnet()===!0?a.BACnet_generateHistoryAlarmContainerValue(this,
this.BACnet.TextFlags):this.generateHistoryAlarmContainerValue();this.co.AlarmList.update(!1);this.co.AlarmsListSize.value=this.config.actualHistorySize;this.co.AlarmsListSize.update(!1)};this.getMaxPage=function(){var a=0;this.config.actualHistorySize>0&&this.getDisplayedNumRow()>0&&(a=Math.ceil(this.config.actualHistorySize/this.getDisplayedNumRow()-1));return a};this.loadHistoryByIndices=function(a,b,c){var f={rArray:[],rInt:0},e=[],o=e=0;if(a.start>=0&&a.end>=0){f.rInt=1;if(a.end+1>=c)a.end=c-
1;if(b>=0)for(;f.rInt>0&&f.rArray.length<a.end-a.start+1;)e=a.start+f.rArray.length,o=a.end-a.start-f.rArray.length+1<this.config.blockSize?a.end:a.start+f.rArray.length+this.config.blockSize-1,e=this.loadHistoryAlarmBlock(e,o,f),this.addPartialResponseToHistory(e,f);return f.rArray}}};a.AlarmHisOnlineType.prototype=new a.AlarmBase;a.AlarmHisOfflineType=function(k,e,b){this.base=a.AlarmBase;this.base(k,"@MACROALRHISOFF",e,b);this.loadFullHistory=function(){var a={rArray:[],rInt:0},b=[],c=b=0;a.rInt=
1;b=0;for(c=this.config.blockSize<this.config.actualHistorySize?this.config.blockSize-1:this.config.actualHistorySize-1;a.rInt>0&&a.rArray.length<this.config.actualHistorySize;)b=this.loadHistoryAlarmBlock(b,c,a),this.addPartialResponseToHistory(b,a),b=c+1,c=b+this.config.blockSize-1,c>=this.config.actualHistorySize&&(c=this.config.actualHistorySize-1);return a.rArray};this.compareAlarms=function(b,g,c){var f=!1;if(c>0)switch(c){case 1:f=b.itemId<g.itemId;break;case 2:f=b.typeId<g.typeId;break;case 3:f=
a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.htmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,g.htmlTag));break;case 4:f=b.on<g.on;break;case 5:f=b.off<g.off;break;case 6:f=b.state<g.state}else switch(c){case -1:f=b.itemId>g.itemId;break;case -2:f=b.typeId>g.typeId;break;case -3:f=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.htmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,g.htmlTag));break;case -4:f=b.on>g.on;break;case -5:f=b.off>g.off;break;case -6:f=b.state>g.state}return f};this.sortHisByNr=function(a){var b=
!1;if(this.rArrayHistory){if(this.rArrayHistory.length>1)for(var c=!1,f=!0,e=0,o=this.rArrayHistory.length;f===!0;){f=!1;for(e=0;e+1<o;)c=this.compareAlarms(this.rArrayHistory[e],this.rArrayHistory[e+1],a),c===!0&&(b=this.rArrayHistory[e],this.rArrayHistory[e]=this.rArrayHistory[e+1],this.rArrayHistory[e+1]=b,f=b=!0),e++}return b}};this.specific_update=function(b){var g=0,g=parseInt(this.co.PageNr.value,10);isNaN(g);for(g=0;g<b.length;g++)if(a.stringcmp(this.co.LoadAlrsAction.name,b[g].name)===!0){if(a.stringcmp("STARTLOADDATAS",
b[g].value)===!0)this.rArrayHistory=this.loadFullHistory()}else if(a.stringcmp(this.co.SortAlrsColNr.name,b[g].name)===!0)a.getDebugLevel()>=2&&a.log_append_ln(b[g].value);else if(a.stringcmp(this.co.SortAlrsColAction.name,b[g].name)===!0){if(a.stringcmp("SORTHISSOFFALARMS",b[g].value)===!0){var c=parseInt(this.co.SortAlrsColNr.value,10);isNaN(c)===!1&&(this.sortHisByNr(c),this.fileViewer.resetScrollIndex())}}else a.stringcmp(this.co.SaveAlrsAction.name,b[g].name)===!0&&a.stringcmp("SAVEDATASTOFILE",
b[g].value)===!0&&a.err_append_ln(a.SaveFileError);this.co.AlarmList.value=this.co.AlarmsListHeaderSP.value+this.generateHistoryAlarmContainerValue();this.co.AlarmList.update(!1);this.co.AlarmsListSize.value=this.rArrayHistory!==null?this.rArrayHistory.length+" / "+this.config.actualHistorySize:"0 / "+this.config.actualHistorySize;this.co.AlarmsListSize.update(!1);this.co.SortAlrsColAction.value="0";this.co.SortAlrsColAction.update(!1);this.co.LoadAlrsAction.value="0";this.co.LoadAlrsAction.update(!1);
this.co.SaveAlrsAction.value="0";this.co.SaveAlrsAction.update(!1)}};a.AlarmHisOfflineType.prototype=new a.AlarmBase;return a}(_SCIntern||{});_SCIntern=function(a){function k(){var a=0;$("#SC_HTMLControlDropDown option:selected").each(function(){a=$(this).val()});return a}function e(){var a=0;$("#SC_HTMLControlDropDown option:selected").each(function(){a=$(this).text()});return a}a.PainterType_DropDown=function(b){this.base=a.PainterType_MPainter;this.base(b);var d=this;this.table=null;this.listInfoType=function(){this.srcType=0;this.srcPrevValue=this.srcValue=this.srcName=""};this.listInfoArray=[];this.editModeActionFlag=!1;this.frmElmntOut=
this.frmElmntInt=this.initDDLFunc=null;this.numRows=0;this.arrowSvg=null;var g=0;this.getTotalNrOfRows=function(){return this.numRows};a.DropDownMaxSize=15;this.activateEditMode=function(){a.registerModalPainter(this);if(this.listInfoArray[0].srcName){var b=0;d.table=d.getListTable();for(b=g=0;b<d.table.length;b++)d.table[b].length===0&&g++;d.numRows=d.table.length-g;var b="rgb("+this.getInteriorColor()+")",f="rgb("+this.getOutlineColor()+")",e={},o=d.getFontSize(),e=o,h=d.editSource_getValue_TextField();
a.getDebugLevel()>=3&&(a.log_append_ln("hmi-dropdown editSource_getFontSize(): "+o),a.log_append_ln("hmi-dropdown editSource_getValue(): "+h));var j=0,p=0,p=a.getLeftPos(a.g_MouseDownEventInfo.ViewItem.ClickableDiv.handle),j=a.getTopPos(a.g_MouseDownEventInfo.ViewItem.ClickableDiv.handle),e=a.getScreenCrds(d.x,d.y,d.w,d.h),j=e.h+e.y+j+"px",p=e.x+p+"px",k=e.w+"px";$(a.g_HTMLControlDropDownElmnt).css("position","absolute");$(a.g_HTMLControlDropDownElmnt).css("top",j);$(a.g_HTMLControlDropDownElmnt).css("left",
p);$(a.g_HTMLControlDropDownElmnt).css("width",k);e=e.scaleFactor*o;$(a.g_HTMLControlDropDownElmnt).css("background-color",b);$(a.g_HTMLControlDropDownElmnt).css("color",f);$(a.g_HTMLControlDropDownElmnt).css("font-size",e+"px");$(a.g_HTMLControlDropDownElmnt).css("font-family",d.getFontName());$(a.g_HTMLControlDropDownElmnt).css("font-style",d.getSvgFontStyle());$(a.g_HTMLControlDropDownElmnt).css("font-weight",d.getSvgFontWeight());$(a.g_HTMLControlDropDownElmnt).css("display","block");$(a.g_HTMLControlDropDownElmnt).val(h);
b=null;b=f=0;$(a.g_HTMLControlDropDownElmnt).empty();d.editSource_getValue_parseInt_DropDown();for(f=0;f<d.table.length;f++)d.table[f].length!==0&&(b=$('<option value="'+f+'">'+d.table[f]+"</option>"),b.appendTo(a.g_HTMLControlDropDownElmnt));b=d.numRows>a.DDL_MAX_LN?a.DDL_MAX_LN:d.numRows;b==1&&(b=2);f=b;if(b>a.DropDownMaxSize)f=a.DropDownMaxSize;$(a.g_HTMLControlDropDownElmnt).attr("size",f);this.editModeFlag=!0}};this.leaveEditMode=function(){a.removeModalPainter();if(this.editModeFlag===!0)$(a.g_HTMLControlDropDownElmnt).css("display",
"none"),$(a.g_HTMLControlDropDownElmnt).css("top","0px"),$(a.g_HTMLControlDropDownElmnt).css("left","0px"),this.editModeFlag=!1};this.execDropDownAction=function(b,d,g,o,h){if(b!==void 0)if(this.editModeFlag===!1)switch(b){case 8:this.activateEditMode(),a.getDebugLevel()>=2&&a.log_append_ln("hmi-dropdown this.editModeFlag")}else if(this.editModeActionFlag===!0&&this.editModeFlag===!0)switch(b){case 6:a.RW_writeSource(o,h,k());break;case 7:a.RW_writeSource(o,h,e())}};this.execScrollerAction=function(){};
this.execDDLAct=function(b,d,g,e,h){if(this.execDDLAct.onlyonce===void 0)a.SL_refreshPPO(),this.execDDLAct.onlyonce=!1;this.execDropDownAction(b,d,g,e,h)};this.addDDLInfo=function(a,b){var d=new this.listInfoType;d.srcType=a;d.srcName=b;this.listInfoArray.push(d);this.checkIfListChanged()};this.checkIfListChanged=function(){for(var a=0,b=!1,a=0;a<this.listInfoArray.length;a++)if(this.listInfoArray[a].srcValue=this.getListArray(a),this.listInfoArray[a].srcValue!==this.listInfoArray[a].srcPrevValue)this.listInfoArray[a].srcPrevValue=
this.listInfoArray[a].srcValue,b=!0;b===!0&&this.scheduleFullRedrawPainter()};this.parseSourceRowAsArray=a.parseSourceRowAsArray;this.getListArray=function(b){return b>this.listInfoArray.length?null:a.RW_readSource(this.listInfoArray[b].srcType,this.listInfoArray[b].srcName)};this.getTableRow=function(a){var b="";this.table.length>0&&(b=this.table[a]);b===void 0&&(b="");return b};this.getListTable=function(){for(var a="",b=0,b=0;b<this.listInfoArray.length;b++)b!==0&&(a+="\n"),a+=this.getListArray(b);
return this.parseSourceRowAsArray(a)};this.getItemByIndex=function(a){var b="";this.table=this.getListTable();return b=this.getTableRow(a)};this.getIndex=function(b,d){var g=a.RW_readSource(b,d);return g=parseInt(g,10)};this.getItemBySource=function(a,b){var d=0,g="",d=this.getIndex(a,b);isNaN(d)===!1&&(g=this.getItemByIndex(d));return g};this.updateImage=a.updateImage;this.hideImages=a.hideImages;this.clearText=a.clearText;this.drawSourceText=a.drawSourceText;this.updateDropDownArrowSourceElement=
function(b){var d=this.getOutlineWidth();a.setSvgAttrC(b.e,"x",this.x+this.w-this.h+d);a.setSvgAttrC(b.e,"y",this.y+d);a.setSvgAttrC(b.e,"width",this.h-2*d);a.setSvgAttrC(b.e,"height",this.h-2*d);b.type===a.INFO_T_FILE&&this.updateImage(b,null)};this.updateDropDownIndexSourceElement=function(b){var f=this.getOutlineWidth();this.getU3d()===!0&&(f+=1);a.setSvgAttrC(b.e,"x",this.x+f);a.setSvgAttrC(b.e,"y",this.y+f+2);var g=this.w-2*f,e=d.h;e<0&&(e=0);txtWidth=g-e;a.setSvgAttrC(b.e,"width",txtWidth);
a.setSvgAttrC(b.e,"height",this.h-2*f);this.clearText(b);b.value=this.getItemByIndex(this.getIndex(b.type,b.name));this.drawSourceText(b)};this.drawRectShapeInterior=function(){var b=this.getOutlineWidth(),d=0,g="",e="";this.checkIfInterior()===!0&&(d=1);g="rgba("+this.getInteriorColor()+","+d+")";e="rgba("+this.getOutlineColor()+",0)";this.frmElmntInt!==null&&a.removeSVG(this.frmElmntInt);this.frmElmntInt=a.createSVGRect(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,
g,e,b,this.getInnerFill())};this.drawRectShapeOutline=function(){var b=1,b="",d=this.getOutlineWidth(),g=0,b=this.checkIfOutline()===!0?1:0,b="rgba("+this.getOutlineColor()+","+b+")",g=this.getOutlineStyle();this.frmElmntOut!==null&&a.removeSVG(this.frmElmntOut);switch(g){case a.SOLID:this.frmElmntOut=a.createSVGRect(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,null,b,d,this.getInnerFill());break;case a.DASHED:case a.DOTTED:this.frmElmntOut=a.createSVGRectDashed(this.svgDoc,
this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,null,b,d,this.getInnerFill(),g);break;default:a.log_append_ln("hmi-dropdown Unknown outline style")}};this.typeDraw=function(){var b=null,d=null,g=0;if(this.isFullPainterRedrawRequired()===!0){b=this.getPaintSource();d=this.getEditSource();this.drawRectShapeInterior();this.frm3dElmnt!==null&&a.removeSVG(this.frm3dElmnt);if(this.getU3d()===!0)g=this.getOutlineWidth(),this.frm3dElmnt=a.createSVGRect_3dFrame_TextField(this.svgDoc,this.getRepaintElement(this.frmGroup),
this.x,this.y,this.w,this.h,g);this.drawRectShapeOutline();b.name!==null?this.updateDropDownArrowSourceElement(b):(this.hideImages(b),this.clearText(b));if(this.arrowSvg!==null)a.removeSVG(this.arrowSvg),this.arrowSvg=null;this.arrowSvg=a.createInnerSVG(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x+(this.w-this.h)+g,this.y+this.getOutlineWidth()+g,this.h-g*3-2,this.h-g*3-2);if(a.GetBrowserInfos().name==="Microsoft Internet Explorer"||b.type===null)a.setSVGAttr(this.arrowSvg,"viewBox","0 0 40 40"),
a.createSVGRect(this.svgDoc,this.arrowSvg,0,0,40,40,"#C0C0C0","",0,!1),this.arrowSymbol=a.createSVGPolygon(this.svgDoc,this.arrowSvg,[30,20,10],[15,28,15],"#1D1D1B",0,"#1D1D1B"),a.setSVGAttr(this.arrowSymbol,"stroke-miterlimit","10"),a.setSVGAttr(this.arrowSymbol,"shape-rendering","geometricPrecision"),a.setSVGAttr(this.arrowSymbol,"stroke-linecap","butt");d.name!==null&&this.updateDropDownIndexSourceElement(d)}};this.notify=function(b,d){var g=0;if(this.editModeFlag===!0&&b!==a.CHANGE_DDL_VALUE&&
b!==a.DRAW_OBJECT&&b!==a.MOUSE_UP)this.leaveEditMode(!1),g=1;else switch(b){case a.VIEW_GAIN_FOCUS:this.initDDLFunc&&this.initDDLFunc();if(this.instanceDisabled()===!1&&this.isVisible===!0&&this.onGainActionFunc)this.onGainActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.checkIfListChanged();this.genericDraw();break;case a.MOUSE_DOWN:if(a.OB_checkMouseCoordinates(this,d)===!0)if(this.instanceDisabled()===!1){if(this.isVisible===!0)this.executeActionMouseDown(),d.consumedFlag=
!0,d.consumedPainter=this,d.actionExecutedFlag=!0,g=1}else g=0;else g=0;break;case a.MOUSE_UP:if(d.consumedFlag===!0)a.OB_checkMouseCoordinates(this,a.g_MouseDownEventInfo)===!0?(this.isPressed=!1,this.instanceDisabled()===!1&&this.isVisible===!0&&this.executeActionMouseUp&&this.executeActionMouseUp(),this.isPressed=!1):(a.getDebugLevel()>=2&&a.log_append_ln("hmi-dropdown Undo case"),this.scheduleFullRedrawPainter());break;case a.REMOVE_SELECTION:case a.VIEW_LOST_FOCUS:this.editModeFlag&&(this.leaveEditMode(!1),
g=1);break;case a.CHANGE_DDL_VALUE:this.editModeActionFlag=!0,this.executeActionMouseDown(),this.leaveEditMode(!0),this.editModeActionFlag=!1,g=1}return g};if(b.initDDL)this.initDDLFunc=b.initDDL};a.PainterType_DropDown.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function k(){this.x=0;this.v=!1;this.index=this.p=this.w=0;this.clipId=""}a.DEFAULT_SCROLLER_WIDTH=20;a.DEFAULT_SCROLLER_WIDTH_TOUCH=50;a.FVCOMMENTLINESTARTSTR="#!";a.FVLINESPECLINESTARTSTR="#sp;";a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR="#sfc;";a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR="#sbc;";a.FVCOLUMNCOLORSPECENDSTR="#";a.FVCOLUMNCOLORSPECRGBTOKENSEPSTR=",";a.FVLINESEPTOKEN="\u00a2";a.FVLINESEPTOKEN2="\\n";a.FVLINESEPTOKENCHAR="\u00a2";a.FVCOLSEPTOKEN="\u00a7";a.FVCOLSEPTOKEN2=
"\\t";a.FVCOLSEPTOKENCHAR="\u00a7";a.FVINDEXESSEPTOKEN="+";a.FVINDEXESSEPCHAR="+";a.FVMUTLILINESTRSEPTOKEN="\\l";a.PainterType_FileViewer=function(e){function b(b,c,d,f,g,h,e,j,q){b=b.createElementNS(a.SvgNs,"polygon");b.setAttributeNS(null,"points",d+","+f+" "+g+","+h+" "+e+","+j);b.setAttributeNS(null,"fill",q);return c.appendChild(b)}function d(a,c,d,f){var g="rgb(0, 0, 0)";d===!0?(x+1>h.getTotalNrOfRows()-2&&(g="rgb(162, 162, 162)"),b(a,c,f,f+h.h-w,w-f,f+h.h-w,w/2,h.h-f,g)):(x-1<0&&(g="rgb(162, 162, 162)"),
b(a,c,f,w-f,w-f,w-f,w/2,f,g))}function g(){var b=document.createElementNS(a.SvgNs,"svg");b!==null&&(a.setSvgAttrC(b,"x",h.x+h.w-w),a.setSvgAttrC(b,"y",h.y),a.setSvgAttrC(b,"width",w),a.setSvgAttrC(b,"height",h.h),w<0&&(w=0),h.h<0&&a.log_append_ln("that.h < 0"),b.setAttributeNS(null,"viewBox","0 0 "+w+" "+h.h),b.setAttributeNS(null,"version","1.1"),a.createSVGRect(document,b,0,0,w,h.h,"rgb(255,255,255)","rgb(0,0,0)",1),a.createSVGRect(document,b,0,0,w,w,"rgb(192,192,192)","rgb(0,0,0)",1),a.createSVGRect(document,
b,0,h.h-w,w,w,"rgb(192,192,192)","rgb(0,0,0)",1),d(document,b,!1,4),d(document,b,!0,4),h.getMainGroupElement().appendChild(b));return b}function c(b){var c=null,d=c=null,c=b.substring(5);c!==null&&(c=c.split(","),c[2]=c[2].substr(0,c[2].length-1),isNaN(c[0])===!0&&(c[0]=0,a.log_append_ln("invalid #sbc;/#scf color syntax (column 1)")),isNaN(c[1])===!0&&(c[1]=0,a.log_append_ln("invalid #sbc;/#scf color syntax (column 2)")),isNaN(c[0])===!0&&(c[2]=0,a.log_append_ln("invalid #sbc;/#scf color syntax (column 3)")),
d=c);return d}function f(){for(var a=0,b=0,c=100,d=h.w-h.getScrollerWidth(),a=0;a<E.length;a++){lastIndex=0;c=100;for(b=0;b<E.length;b++)if(b!==a&&E[a].p<=E[b].p&&E[b].p<c)c=E[b].p,lastIndex=b;E[a].w=(c-E[a].p)*d/100}}function q(){var b,c=document.createElementNS(a.SvgNs,"svg");if(c!==null){b=h.w-(h.getScrollerWidth()+h.getOutlineWidth()*2);var d=h.h-h.getOutlineWidth()*2,f="";b<0&&(b=0);d<0&&(d=0);b="0 0 "+b+" "+d;a.setSvgAttrC(c,"x",h.x+h.getOutlineWidth());a.setSvgAttrC(c,"y",h.y+h.getOutlineWidth());
a.setSvgAttrC(c,"width",h.w-(h.getScrollerWidth()+h.getOutlineWidth()*2));a.setSvgAttrC(c,"height",h.h-h.getOutlineWidth()*2);c.setAttributeNS(null,"viewBox",b);c.setAttributeNS(null,"version","1.1");h.getMainGroupElement().appendChild(c)}return c}function o(){return h.getFontSize()+3}this.base=a.PainterType_MPainter;this.base(e);var h=this;this.alarmObj=null;this.useVScrollerT=this.useVScrollerM=!1;var j=null,p=null,s=null,n=null,u=0,t=0,m=-1,r=[],w=0,x=0,v=!1,y="",z=a.parseContentsAsMultiArray,
L=!1,P=!1,M=0,E=[];this.setGridRow=function(a){L=a};this.setGridCol=function(a){P=a};this.drawShape=a.drawRectShape;this.typeDraw=function(){var a=this.getEditSource();a!==null&&(this.drawShape(),this.showFile(a.type,a.name))};this.notify=function(b,c){var d=0;switch(b){case a.DRAW_OBJECT:this.editModeFlag===!1&&(this.instanceDraw&&this.instanceDraw(),this.genericDraw());break;case a.MOUSE_DOWN:if(this.editModeFlag===!0)a.OB_checkMouseCoordinates(this,c)===!1&&this.leaveEditMode(!0),d=1;else{if(a.OB_checkMouseCoordinates(this,
c)===!0&&this.instanceDisabled()===!1){var d=this.instanceValidDownAction(),f=this.instanceValidUpAction();if(d===!0||f===!0)if(c.consumedFlag=!0,c.consumedPainter=this,d===!0)a.g_MouseDownEventInfo.x>=this.x+(this.w-this.getScrollerWidth())?this.execScrollerAction():this.executeActionMouseDown&&this.executeActionMouseDown(),c.actionExecutedFlag=!0}d=0}break;case a.MOUSE_UP:c.consumedFlag===!0&&(a.OB_checkMouseCoordinates(this,a.g_MouseDownEventInfo)===!0?this.instanceDisabled()===!1?a.g_MouseDownEventInfo.x<
this.x+(this.w-this.getScrollerWidth())&&this.executeActionMouseUp&&this.executeActionMouseUp():a.getDebugLevel()>=2&&a.log_append_ln("hmi-fileviewer Disabled while down case"):a.getDebugLevel()>=2&&a.log_append_ln("hmi-fileviewer Undo case"),this.scheduleFullRedrawPainter());break;case a.ENTER:d=0;break;case a.ESCAPE:this.editModeFlag&&(this.leaveEditMode(!1),d=1);break;case a.REMOVE_SELECTION:this.editModeFlag&&(this.leaveEditMode(!0),d=1)}return d};this.resetScrollIndex=function(){x=0};this.execScrollerAction=
function(){this.scheduleFullRedrawPainter();if(a.g_MouseDownEventInfo.y-this.y>this.h/2){var b=x;b++;b>h.getTotalNrOfRows()-2&&(b=h.getTotalNrOfRows()-2)}else b=x,b--,b<0&&(b=0);x=b};this.getTableCell=function(a,b){return n[a][b]};this.showFile=function(b,d){var e=null;if(!(b===void 0||d===void 0))if(!(b===null||d===null)){e="INDEX";if(b===a.INFO_T_CONTAINER&&a.prefixicmp("@MACROALRDEFONAlarmsList.",d)===!0){if(h.alarmObj===null)e=d.substring(25),h.alarmObj=new a.AlarmDefOnlineType(e,h.getNrOfRowDisplayed(),
h);h.alarmObj.update()}else if(b===a.INFO_T_CONTAINER&&a.prefixicmp("@MACROALRHISONAlarmsList.",d)===!0){if(h.alarmObj===null)e=d.substring(25),h.alarmObj=new a.AlarmHisOnlineType(e,h.getNrOfRowDisplayed(),h);h.alarmObj.update()}else if(b===a.INFO_T_CONTAINER&&a.prefixicmp("@MACROALRHISOFFAlarmsList.",d)===!0){if(h.alarmObj===null)e=d.substring(26),h.alarmObj=new a.AlarmHisOfflineType(e,h.getNrOfRowDisplayed(),h);h.alarmObj.update()}e=a.RW_readSource(b,d);if(this.isFullPainterRedrawRequired()||e!=
y)if(y=e,e.length>0){if(j!==null&&j.parentNode.removeChild(j),p!==null&&p.parentNode.removeChild(p),j=q(),j!==null){var C=e,F=0,F={hasColLayout:!1,containsColumns:!1,height:0,width:0,fontFamily:"Arial",fontSize:10},A=e=0,B=0;F.width=h.w-(h.getScrollerWidth()+h.getOutlineWidth()*2);F.height=h.h-h.getOutlineWidth()*2;F.fontSize=h.getFontSize();F.fontFamily=h.getFontName();n=z(C,F);u=n.length;E=[];if(n[0]!==void 0){if(F.hasColLayout===!0){t=n[0].length;e=0;B=null;for(e=0;e<t;e++)if(C=parseInt(n[0][e],
10),isNaN(C)===!1)B=new k,B.x=C/100*(h.w-h.getScrollerWidth()),B.x=parseInt(B.x.toFixed(0),10),B.p=C,B.index=e,B.clipId="sc_obj_"+h.objId+"_clip_"+B.index,E.push(B);f();M=1}else M=0;if(F.hasColLayout===!1&&F.containsColumns===!0&&F.maxCol>0){t=F.maxCol;var e=0,B=null,F=1,C=0,I=h.w-h.getScrollerWidth(),A=parseInt(I,10);t!=0&&(F=parseInt(100/t,10),A=parseInt(I/t,10));for(e=0;e<t;e++)B=new k,B.x=C/100*I,B.x=parseInt(B.x.toFixed(0),10),B.p=C,B.w=A,B.index=e,B.clipId="sc_obj_"+h.objId+"_clip_"+B.index,
E.push(B),C+=F;f()}if(t>0)for(e=e=0;e<t;e++)a.createClipRect(document,j,E[e].x,0,E[e].w,h.h,E[e].clipId);F=h.getTotalNrOfRows()-(M+x);F>h.getNrOfRowDisplayed()&&(F=h.getNrOfRowDisplayed());B=M+x;for(A=0,e=B;e-B<F;e++,A++)b:{var C=e,I=E,G=null,D=null,J=G="",R=null,O=0,H="";if(n[C]!==void 0&&n[C][0]!==void 0&&(G=n[C][0],D=null,a.prefixicmp(a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR,G)===!0&&(D=c(G)),n[C][0]!==void 0)){G=n[C][0];J=null;a.prefixicmp(a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR,G)===!0&&(J=c(G));
G=J;J=!1;if(v===!0){if(r.length!==0)for(H=H=0;H<r.length&&J===!1;H++)r[H]===A&&(J=!0)}else m===A&&m!=-1&&(J=!0);J===!0?(G=A,D=document.createElementNS(a.SvgNs,"rect"),D.setAttributeNS(null,"x",0),D.setAttributeNS(null,"y",o()*G),D.setAttributeNS(null,"width",h.w-w),D.setAttributeNS(null,"height",o()),D.setAttributeNS(null,"fill","rgb(0,0,0)"),j.appendChild(D),G="255,255,255",a.getDebugLevel()>2&&a.log_append_ln("hmi-fileviewer isSelected: "+A)):(J=D!==null&&D.length===3?"rgb("+D[0]+","+D[1]+","+D[2]+
")":"rgb("+h.getInteriorColor()+")",h.checkIfInterior()===!0&&D!==null&&D.length===3&&(D=A,H=document.createElementNS(a.SvgNs,"rect"),H.setAttributeNS(null,"x",0),H.setAttributeNS(null,"y",o()*D),H.setAttributeNS(null,"width",h.w-w),H.setAttributeNS(null,"height",o()),H.setAttributeNS(null,"fill",J),j.appendChild(H)),G=G!==null&&G.length===3?String(G[0])+","+G[1]+","+G[2]:h.getTextColor());if(t===0)a.createSVGTextExt(document,j,3,o()*(A+1)-3,G,"start",h.getFontName(),h.getFontSize(),n[C],h.getSvgFontStyle(),
h.getSvgFontWeight());else if(t===1)for(var H=[],N=0,D="",J=h.w-(h.getScrollerWidth()+h.getOutlineWidth()*2),H=n[C][0],H=H.split(" "),N=0;N<H.length;N++)N===0?(D=H[N],R=a.createSVGTextExt(document,j,I[O].x+3,o()*(A+1)-3,G,"start",h.getFontName(),h.getFontSize(),D,h.getSvgFontStyle(),h.getSvgFontWeight())):(R.textContent=D+" "+H[N],R.getComputedTextLength()<J?D+=" "+H[N]:(R.textContent=D,D=H[N],A++,R=a.createSVGTextExt(document,j,I[O].x+3,o()*(A+1)-3,G,"start",h.getFontName(),h.getFontSize(),D,h.getSvgFontStyle(),
h.getSvgFontWeight())));else for(O=0;O<t;O++)I[O].p<100&&(H=n[C][O]===void 0?"":n[C][O],R=a.createSVGTextExt(document,j,I[O].x+3,o()*(A+1)-3,G,"start",h.getFontName(),h.getFontSize(),H,h.getSvgFontStyle(),h.getSvgFontWeight())),I[O].p<100&&R!==null&&R.setAttribute("clip-path","url(#"+I[O].clipId+")");break b}A=void 0}e=e=0;B=B=null;s=document.createElementNS(a.SvgNs,"g");if(s!==null){j.appendChild(s);if(h.getNrOfRowDisplayed()>1&&L===!0)for(e=0;e<h.getNrOfRowDisplayed();e++)B=a.createSVGSimpleRect(document,
0,e*o(),h.w-w,1,"rgb("+h.getOutlineColor()+")"),s.appendChild(B);if(h.geNrOfColumns()>1&&P===!0&&h.getTotalNrOfRows()>1)for(e=0;e<h.geNrOfColumns();e++)B=a.createSVGSimpleRect(document,E[e].x,0,1,h.h,"rgb("+h.getOutlineColor()+")"),s.appendChild(B)}}if(this.useVScrollerM||this.useVScrollerT)p=g()}}else if(j!==null&&j.parentNode.removeChild(j),p!==null&&p.parentNode.removeChild(p),j=q(),j!==null&&(this.useVScrollerM||this.useVScrollerT))p=g()}};this.execFVAct=function(b,c,d,f,g){var e=-1,c=a.RW_readSource(c,
d),c=parseInt(c,10),e=a.g_MouseDownEventInfo.y-h.y,d=o(),j=h.getTotalNrOfRows(),q=1;e+=x*d;d!=0?(q=e/d-e/d%1,q>j&&(q=-1)):q=-1;e=q;h.changeSelection(e);M==1&&(e+=1);if(b!==void 0){switch(b){case 6:a.RW_writeSource(f,g,m);break;case 7:n!==null&&n[e]!==void 0&&n[e][0]!==void 0&&a.RW_writeSource(f,g,n[e][0]);break;case 10:n!==null&&isNaN(c)===!1&&n[e]!==void 0&&n[e][0]!==void 0&&a.RW_writeSource(f,g,n[e][c])}h.scheduleFullRedrawPainter()}};this.changeSelection=function(a){v===!0?r.push(a):m=a;this.scheduleFullRedrawPainter()};
this.removeSelection=function(){r=[];m=-1};this.checkIfMultiSelect=function(){return v};this.getSelectedRow=function(){var a=m;v===!0&&(a=r);return a};this.setSelectMode=function(a){a!=v&&(m=-1,r=[]);v=a===!0?!0:!1};this.getNrOfRowDisplayed=function(){var b=0;return b=o()!=0?parseInt(a.toFixedNotRound(this.h/o(),0),10):parseInt(a.toFixedNotRound(this.h,0),10)};this.getTotalNrOfRows=function(){return u};this.geNrOfColumns=function(){return t};this.showVScrollerM=function(b){this.useVScrollerM=b;w=
a.DEFAULT_SCROLLER_WIDTH};this.showVScrollerT=function(b){this.useVScrollerT=b;w=a.DEFAULT_SCROLLER_WIDTH_TOUCH};this.getScrollerWidth=function(){return w}};a.PainterType_FileViewer.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function k(a){a=a.replace("e","E");return a.indexOf("E")!==-1?!0:!1}a.TrendValueType=function(){this.t_s=this.y=0};a.TREND_LABEL_WIDTH=36;a.TREND_LABEL_HEIGHT=26;a.trendBaseInitSvgHandlesIfRequired=function(){if(this.TrendControl_eGroup===null)this.TrendControl_eGroup=this.getRepaintElement("sc_obj_trend_control_"+this.objId+"_group");if(this.TrendCurves_eGroup===null)this.TrendCurves_eGroup=this.getRepaintElement("trend_"+this.objId+"_curves_group");if(this.TrendCurves_eSvg===
null)this.TrendCurves_eSvg=this.getRepaintElement("trend_"+this.objId+"_curves_svg");if(this.TrendControl_eSvg===null)this.TrendControl_eSvg=this.getRepaintElement("trend_"+this.objId+"_control_svg");this.TrendControl_eGroup===null&&a.err_append_ln("ERROR: Failed to create Online Trend's TrendControl_eGroup!");this.TrendControl_eSvg===null&&a.err_append_ln("ERROR: Failed to create Online Trend's TrendControl_eSvg!");this.TrendCurves_eGroup===null&&a.err_append_ln("ERROR: Failed to create Online Trend's TrendCurves_eGroup!")};
a.trendBaseRectangle=function(){var e=0,b=0,d="",g="",c=0,f=0;this.checkIfInterior()===!0&&(e=1);this.checkIfOutline()===!0&&(b=1);this.getOutlineWidth();d="rgba("+this.getInteriorColor()+","+e+")";g="rgba("+this.getOutlineColor()+","+b+")";c=this.checkIfOutline()===!0?this.getOutlineWidth():this.getInnerFill()===!0?this.getOutlineWidth():0;f=this.getOutlineStyle();if(this.frmElmnt!==null)a.removeSVG(this.frmElmnt),this.frmElmnt=null;switch(f){case a.SOLID:this.frmElmnt=a.createSVGRect(this.svgDoc,
this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,d,g,c);break;case a.DASHED:case a.DOTTED:this.frmElmnt=a.createSVGRectDashed(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,d,g,c,this.getInnerFill(),f);break;default:a.log_append_ln("ERROR sc.trendBaseRectangle Unknown outline style")}};a.trendBaseParseActiveTrends=function(){var e=0,e=0,b=null,d=null,g=null,c=0,f=!1,e=d=0,d=a.ReadContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex);if(a.stringcmp(this.activePrevious,
d)===!1){f=!0;for(e=0;e<this.trendCurveListActive.length;e++)if(this.trendCurveListActive[e]!=null)this.trendCurveListActive[e].activeFlag=!1;b=d.split(a.FVLINESEPTOKEN2);if(b.length>0)this.FileViewerColumns=b[0];if(b.length>1){for(e=1;e<b.length;e++)if(g=b[e].split(/\\t/),g.length>=5){var q=this.getActiveTrendCurve(g[1]),q=this.updateActiveList(q,g);c++;if(q!==null&&q!==void 0)q.activeFlag=!0}c=this.trendCurveListActive.length;for(e=1;e<b.length;e++)if(q=e-1,g=b[e].split(/\\t/),g.length>=5)if(g=
this.getActiveTrendCurveIndex(g[1]),g!=null)if(q<c){if(g!==q){var o=this.trendCurveListActive[q];this.trendCurveListActive[q]=this.trendCurveListActive[g];this.trendCurveListActive[g]=o}}else a.log_append_ln("ERROR sc.trendBaseParseActiveTrends active trend size not OK [ activeSize "+c+" <= userClickIndex "+q+" ] !");else a.log_append_ln("ERROR sc.trendBaseParseActiveTrends curveIndex not OK !")}this.activePrevious=d;for(d=e=0;d<this.trendCurveListActive.length;d++)this.trendCurveListActive[d].activeFlag===
!0&&e++;this.setNumActiveCrv(e)}return f};a.trendBaseUpdateDimensions=function(){var e=this.getNumActiveCrv(),b=2,d=0,g=this.w-4,c=this.h,f=0;if(this.config.AutoyAxisLegend===1){e=this.getNumActiveCrv();b=2;d=a.TREND_LABEL_HEIGHT/2;g=this.w-4;c=this.h-a.TREND_LABEL_HEIGHT;for(e>0&&(b+=a.TREND_LABEL_WIDTH);f<e;)g-=a.TREND_LABEL_WIDTH,f++}this.relPosSvg={rX:b,rY:d,rW:g,rH:c};this.updateYProp_AllCurves();if(this.xRange!==0)this.xProportionalityFactor=this.relPosSvg.rW/this.xRange;if(this.xProportionalityFactor!=
0)this.xPxRate=1/this.xProportionalityFactor};a.trendBaseDrawYAxisLabels=function(){for(var e=this.getNumActiveCrv(),b=0,d=0,g=0,c=0,f=0,q=0,o="",h=this.relPosSvg.rH/10,c=0,j={numDec:0,isExponential:!1},b=0;b<this.trendCurveListActive.length;b++)if(this.trendCurveListActive[b].label_e!==null&&this.trendCurveListActive[b].activeFlag===!1)a.removeSVG(this.trendCurveListActive[b].label_e),this.trendCurveListActive[b].label_e=null;for(b=0;b<e;b++){d=10*(this.trendCurveListActive[b].yMax-this.trendCurveListActive[b].yMin)/
100;this.trendCurveListActive[b].label_e!==null&&a.removeSVG(this.trendCurveListActive[b].label_e);this.trendCurveListActive[b].label_e=a.createSVGElement(document,"g");a.setSVGAttr(this.trendCurveListActive[b].label_e,"id","trend_"+this.objId+"_curve_"+b+"_labels");this.TrendCurves_eGroup!==null&&this.TrendCurves_eGroup.appendChild(this.trendCurveListActive[b].label_e);b>0&&(f=1+this.relPosSvg.rX+this.relPosSvg.rW+(b-1)*a.TREND_LABEL_WIDTH);g=j;c=0;q=String(d);o=[];o=q.split("e");o.length>0&&(q=
o[0]);o=q.split(".");if(o.length>1&&o[1])c=o[1].length;g.numDec=c;g=this.trendCurveListActive[b].yMax;j.isExponential=k(this.trendCurveListActive[b].yMin)||k(g)?!0:!1;for(g=0;g<11;g++)c=this.trendCurveListActive[b].yMax-d*g,j.isExponential===!0?(c=c.toExponential(j.numDec),c=c.replace("e","E"),c=c.replace("+","")):c=c.toFixed(j.numDec),q=a.TREND_LABEL_HEIGHT/2-this.getFontSize()/2+this.getFontSize()+h*g,o=this.trendCurveListActive[b].colorRGB,a.createSVGTextExt(document,this.trendCurveListActive[b].label_e,
f,q,o,"start",this.getFontName(),this.getFontSize(),c,this.getSvgFontStyle(),this.getSvgFontWeight())}};a.trendBaseDrawGrid=function(e){var b=null,d=0;this.gridYSpacing=this.relPosSvg.rH/10;this.gridXSpacing=this.relPosSvg.rW/10;this.eGrpGrid!==null&&a.removeSVG(this.eGrpGrid);this.eGrpGrid=null;if(e===!0&&this.eGrpGrid===null)if(this.eGrpGrid=document.createElementNS(a.SvgNs,"g"),this.eGrpGrid!==null){this.eGrpGrid.setAttribute("visibility","visible");this.TrendControl_eSvg.appendChild(this.eGrpGrid);
this.eGrpGrid.setAttributeNS(null,"id","grid_"+this.trendIndex);for(d=0;d<=10;d++)b=a.createSVGSimpleRect(document,this.relPosSvg.rX,this.relPosSvg.rY+this.gridYSpacing*d,this.relPosSvg.rW,1,"rgb("+this.getOutlineColor()+")"),this.eGrpGrid.appendChild(b);for(d=0;d<=10;d++)b=a.createSVGSimpleRect(document,this.relPosSvg.rX+this.gridXSpacing*d,this.relPosSvg.rY,1,this.relPosSvg.rH,"rgb("+this.getOutlineColor()+")"),this.eGrpGrid.appendChild(b)}else a.log_append_ln("ERROR drawGrid(),  this.eGrpGrid === null");
else e===!0&&this.eGrpGrid!==null?this.eGrpGrid.setAttributeNS(null,"visibility",""):e===!1&&this.eGrpGrid!==null&&this.eGrpGrid.setAttributeNS(null,"visibility","hidden")};a.trendBaseDrawAllActiveCurves=function(){var e=0,b=0,d=0,g=this.trendCurveListActive.length,c=null,f="M 0 0",c=null,q=0,o=!1;if(this.emitter.stopLog===!1)for(e=0;e<g;e++){if(this.trendCurveListActive[e].valuesCBuffer!==null){d=this.trendCurveListActive[e].valuesCBuffer.level;q=0;o=!1;if(this.config.xAutoScroll===!0&&this.config.FirstAutoSrollDraw===
!0)a.getDebugLevel()>=2&&a.log_append_ln("this.config.FirstAutoSrollDraw: "+this.config.FirstAutoSrollDraw),o=!0,this.config.FirstAutoSrollDraw=!1;for(b=0;b<d;b++)if(c=this.trendCurveListActive[e].valuesCBuffer.get(b),c!==null){if(this.ptId==a.JS_PT_ONLINE_TREND){if(this.timeWindowInitialised===!1)this.setXTimeRange(c.t_s,c.t_s+this.config.displayedTime_s),this.timeWindowInitialised=!0;if(c.t_s>this.xMaxTime_s&&(this.config.xAutoScroll===!0&&b===d-1||o===!0)){var h=c.t_s-this.xMaxTime_s;this.setXTimeRange(this.xMinTime_s+
h,this.xMaxTime_s+h)}}c=this.computePointsInRange(this.trendCurveListActive[e].yMax,this.trendCurveListActive[e].yMin,this.trendCurveListActive[e].yProportionalityFactor,c.t_s,c.y);c.xPx<=this.relPosSvg.rX+this.relPosSvg.rW&&c.yPx<=this.relPosSvg.rY+this.relPosSvg.rH&&this.relPosSvg.rX<=c.xPx&&this.relPosSvg.rY<=c.yPx&&(q===0&&(f="M"+c.xPx+" "+c.yPx+" "),f+="L"+c.xPx+" "+c.yPx+" ",q++)}q===0&&(f="M0 0 ",f+="L0 0 ")}this.trendCurveListActive[e].activeFlag===!1?this.remove_ePath(e):(this.trendCurveListActive[e].curve_ePath===
null&&this.initialise_ePath(e),this.trendCurveListActive[e].curve_ePath!==null&&(this.trendCurveListActive[e].curve_ePath.setAttributeNS(null,"stroke","rgb("+this.trendCurveListActive[e].colorRGB+")"),this.trendCurveListActive[e].curve_ePath.setAttributeNS(null,"stroke-width",this.getOutlineWidth()),this.trendCurveListActive[e].curve_ePath.setAttributeNS(null,"fill","none")),this.trendCurveListActive[e].curve_ePath!==null&&this.trendCurveListActive[e].curve_ePath.setAttributeNS(null,"d",f))}};a.trendBaseUpdateScrollAction=
function(){var a=0,b=this.config.scroll;Math.abs(b)>0&&Math.abs(b)<=100&&this.displayedTime_s>0&&(a=this.displayedTime_s<1E4?this.displayedTime_s*b/100:this.displayedTime_s/100*b,a===0&&(a=b>0?1:-1),this.xMaxTime_s+a<0?a-=this.xMaxTime_s:this.xMaxTime_s+a>2147483647&&(a=2147483647-this.xMaxTime_s),a!==0&&this.setXTimeRange(this.xMinTime_s+a,this.xMaxTime_s+a));this.config.scroll=0};a.trendBaseUpdateZoomAction=function(){var e=0,e=0,e=this.config.zoom;if(Math.abs(e)>0&&Math.abs(e)<=100)this.displayedTime_s>
0&&(e=this.displayedTime_s<1E4?this.displayedTime_s*e/200:this.displayedTime_s/200*e,e>0?this.displayedTime_s-2*e<10&&(a.MAX(0,(this.displayedTime_s-10)/2),e=2147483647-this.displayedTime_s,e/=2,e=a.MIN(0,-e)):e<0&&this.displayedTime>=2147483647+2*e&&(e=2147483647-this.displayedTime_s,e/=2,e=a.MIN(0,-e)),e!==0&&(this.xMinTime_s+e<0?this.setXTimeRange(this.xMaxTime_s-e):this.xMaxTime_s-e>2147483647?this.setXTimeRange(this.xMinTime_s+e,2147483647):this.setXTimeRange(this.xMinTime_s+e,this.xMaxTime_s-
e))),this.config.zoom=0};a.trendBaseSetXTimeRange=function(a,b){if(b>a){this.xMinTime_s=a;this.xMaxTime_s=b;this.displayedTime_s=this.xMaxTime_s-this.xMinTime_s;this.xRange=this.xMaxTime_s-this.xMinTime_s;if(this.xRange!==0)this.xProportionalityFactor=this.relPosSvg.rW/this.xRange;if(this.xProportionalityFactor!=0)this.xPxRate=1/this.xProportionalityFactor;this.xStep_s=this.xRange/10;this.updateXTimeLabels()}};a.trendBaseUpdateYProp_AllCurves=function(){for(var a=0,a=0;a<this.trendCurveListActive.length;a++)if(this.trendCurveListActive[a].yMax!==
this.trendCurveListActive[a].yMin)this.trendCurveListActive[a].yRange=this.trendCurveListActive[a].yMax-this.trendCurveListActive[a].yMin,this.trendCurveListActive[a].yProportionalityFactor=this.relPosSvg.rH/this.trendCurveListActive[a].yRange};a.trendBaseComputePointsInRange=function(a,b,d,g,c){var f={xPx:0,yPx:0},q=0,a=parseInt(a,0),b=parseInt(b,0),q=a-b;f.xPx=Math.round((g-this.xOffsetTime_s-this.xMinTime_s)*this.xProportionalityFactor);f.yPx=Math.round((c<b?q:c>a?0:c>=0?a-c:q+b-c)*d);f.yPx+=this.relPosSvg.rY;
f.xPx+=this.relPosSvg.rX;return f};a.trendBaseClear=function(){var e=0;this.clearActiveCurveRingBuffersOffline();for(var b=this.trendCurveListActive.length,e=0;e<b;e++)this.TrendCurves_eGroup!==null?(this.trendCurveListActive[e].curve_ePath!==null&&this.TrendCurves_eGroup.removeChild(this.trendCurveListActive[e].curve_ePath),this.trendCurveListActive[e].curve_ePath=null,this.initialise_ePath(e)):a.log_append_ln("Error TrendCurves_eGroup not found")};a.trendBaseClearActiveCurveRingBuffersOffline=function(){for(var a=
0,b=this.trendCurveListActive.length,a=0;a<b;a++)this.trendCurveListActive[a].valuesCBuffer.clear()};a.trendBaseInitialise_ePath=function(e){if(this.trendCurveListActive[e].curve_ePath===null)this.trendCurveListActive[e].curve_ePath=document.createElementNS(a.SvgNs,"path"),this.trendCurveListActive[e].curve_ePath!==null?this.TrendCurves_eGroup!==null?this.TrendCurves_eGroup.appendChild(this.trendCurveListActive[e].curve_ePath):a.log_append_ln("Error TrendCurves_eGroup not found"):a.log_append_ln("Error could not create this.trendCurveListActive[c].curve_ePath")};
a.trendBaseRemove_ePath=function(e){if(this.trendCurveListActive[e].curve_ePath!==null)a.removeSVG(this.trendCurveListActive[e].curve_ePath),this.trendCurveListActive[e].curve_ePath=null};a.trendBaseGetPointAt=function(e,b){var d=0,g=null,c=null,f=0;if(this.trendCurveListActive[e].valuesCBuffer!==null&&b>0){d=this.trendCurveListActive[e].valuesCBuffer.level;for(f=0;f<d;f++)if(g=this.trendCurveListActive[e].valuesCBuffer.get(f),g!==null){if(g.t_s>b)break;c=g}a.getDebugLevel()>=2&&(a.log_append_ln("Trend get mouse click value point for click ts["+
b+"]= "+a.getAlarmDateTimeByIntSec(b)+" "+a.FVLINESEPTOKEN2),c!==null&&a.log_append_ln("Trend get mouse click value point found nearestPoint ts["+c.t_s+"]= "+a.getAlarmDateTimeByIntSec(c.t_s)+" "+a.FVLINESEPTOKEN2))}return c};a.trendBaseGetRgb=function(a){return this.trendCurveListActive[a].colorRGB};a.trendBaseGetFViewerClicked=function(){var e="",b=0,d=null,b=this.mouseDownHeader.split(a.FVLINESEPTOKEN2),g=this.trendCurveListActive.length;b.length>0&&(e+=b[0]);e+=a.FVLINESEPTOKEN2;e+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+
"0,204,0#\\t";if(this.sClicked>=0){e+=this.ptId===a.JS_PT_ONLINE_TREND?a.getAlarmDateTimeByIntSecUTC(this.sClicked):a.getAlarmDateTimeByIntSec(this.sClicked);e+=a.FVCOLSEPTOKEN2;e+="USER !";e+=a.FVLINESEPTOKEN2;for(b=0;b<g;b++)d=this.getPointAt(b,this.sClicked),d!==null&&(e+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+this.getRgb(b)+"#\\t",e+=this.ptId===a.JS_PT_ONLINE_TREND?a.getAlarmDateTimeByIntSecUTC(d.t_s):a.getAlarmDateTimeByIntSec(d.t_s),e+=a.FVCOLSEPTOKEN2,e+=d.y,e+=a.FVLINESEPTOKEN2)}return e};
a.trendBaseUpdateActiveList=function(e,b){var d=null;if(this.ptId===a.JS_PT_ONLINE_TREND){if(e===null)e=new a.TrendCurveType,e.PPOName="0",e.colorRGB="0,0,0",e.yMin=0,e.yMax=0,this.trendCurveListActive.push(e);if(e!==null&&b!==null&&b.length>4)e.PPOName=b[1],e.yMin=b[2],e.yMax=b[3],e.colorRGB=b[4];d=this.emitter.getAvailableCurve(e.PPOName)}else if(this.ptId===a.JS_PT_OFFLINE_TREND){if(e===null)e=new a.TrendOfflineCurveType,e.curveNr="0",e.colorRGB="0,0,0",e.yMin=0,e.yMax=0,e.firstPoint=0,e.lastPoint=
0,e.beginDate="1970.01.01",e.beginTime="00:00:00 AM",e.endDate="1970.01.01",e.endTime="00:00:00 AM",this.trendCurveListActive.push(e);if(e!==null&&b!==null&&b.length>10)e.curveNr=b[1],e.yMin=b[2],e.yMax=b[3],e.colorRGB=b[4],e.firstPoint=b[5],e.lastPoint=b[6],e.beginDate=b[7],e.beginTime=b[8],e.endDate=b[9],e.endTime=b[10];d=this.emitter.getAvailableCurve(e.curveNr)}else if(this.ptId===a.JS_PT_SAVED_TREND){if(e===null)e=new a.TrendSavedCurveType,e.curveNr="0",e.colorRGB="0,0,0",e.yMin=0,e.yMax=0,e.firstPoint=
0,e.lastPoint=0,e.beginDate="1970.01.01",e.beginTime="00:00:00 AM",e.endDate="1970.01.01",e.endTime="00:00:00 AM",this.trendCurveListActive.push(e);if(e!==null&&b!==null&&b.length>4)e.curveNr=b[1],e.yMin=b[2],e.yMax=b[3],e.colorRGB=b[4];d=this.emitter.getAvailableCurve(e.curveNr)}if(d!==null&&e!==null)e.valuesCBuffer=d.valuesCBuffer;if(e!==null)e.activeFlag=!0;return e};a.trendBaseDrawVerticalClicked=function(){if(a.stringcmp(this.mouseDownAction,"DISABLE")===!1&&this.sClicked>=0)this.eClicked!==
null&&a.removeSVG(this.eClicked),this.xClicked=(this.sClicked-this.xMinTime_s)*this.xProportionalityFactor+this.relPosSvg.rX,this.eClicked=a.createSVGSimpleRect(document,this.xClicked,0,this.getOutlineWidth(),this.h,"rgb(0, 204, 0)"),this.TrendCurves_eGroup!==null&&this.TrendCurves_eGroup.appendChild(this.eClicked)};a.trendBaseMouseDownActionFunc=function(){a.stringcmp(this.mouseDownAction,"DISABLE")===!1&&this.xProportionalityFactor!=0?(this.sClicked=Math.round((a.g_MouseDownEventInfo.x-this.x-this.relPosSvg.rX)/
this.xProportionalityFactor),this.sClicked+=this.xMinTime_s):this.sClicked=-1};a.trendBaseNotify=function(e,b){var d=0;switch(e){case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();break;case a.MOUSE_DOWN:a.OB_checkMouseCoordinates(this,b)===!0?(this.trendMouseDown(),d=1):d=0;break;case a.MOUSE_UP:a.OB_checkMouseCoordinates(this,a.g_MouseDownEventInfo)===!0?(d=1,this.isPressed=!1):d=0}return d};a.trendBaseUpdateXTimeLabels=function(){var e=0,b="04.03.2013",b=0,d=this.macroPrefix,g=!0,c=new Date(0);
if(c){g=this.ptId===a.JS_PT_ONLINE_TREND?!1:!a.SpecialCO.mbTmzEn.value;d=this.macroPrefix;c=new Date(0);c.setUTCSeconds(this.xMinTime_s);b=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,g,c,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMinDate."+this.trendIndex,b);c=new Date(0);c.setUTCSeconds(this.xMaxTime_s);b=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,g,c,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMaxDate."+this.trendIndex,b);c=new Date(0);
c.setUTCSeconds(this.xMinTime_s);b=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,g,c,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMinTime."+this.trendIndex,b);c=new Date(0);c.setUTCSeconds(this.xMaxTime_s);b=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,g,c,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMaxTime."+this.trendIndex,b);this.ptId===a.JS_PT_ONLINE_TREND&&(d="@MACROONT");for(e=0;e<10;e++)b=e*(this.xMaxTime_s-this.xMinTime_s)/10,c=new Date(0),
c.setUTCSeconds(this.xMinTime_s+b),b=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,g,c,null,!0),a.RW_writeSource(a.INFO_T_CONTAINER,d+"XDate["+e+"]."+this.trendIndex,b);for(e=0;e<10;e++)b=e*(this.xMaxTime_s-this.xMinTime_s)/10,c=new Date(0),c.setUTCSeconds(this.xMinTime_s+b),b=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,g,c,null,!0),a.RW_writeSource(a.INFO_T_CONTAINER,d+"XTime["+e+"]."+this.trendIndex,b)}};return a}(_SCIntern||{});_SCIntern=function(a){a.OnlineTrendEmitterType=function(k){this.trendIndex=k;this.lastLogged_s=0;this.trendCurveListAvailable=[];this.stopLog=!1;this.getAvailableCurve=function(a){for(var b=0,d=this.trendCurveListAvailable.length,b=0;b<d;b++)if(this.trendCurveListAvailable[b].PPOName===a)return this.trendCurveListAvailable[b];return null};this.refreshCurvePoints=function(){var e=0,b=this.trendCurveListAvailable.length,d=0,g=0,c=null;if(this.stopLog===!1&&(g=a.getTimestamp_s(),this.lastLogged_s!=g)){this.lastLogged_s=
g;for(e=0;e<b;e++)d=a.RW_readSource_parseFloat(a.INFO_T_PPO,this.trendCurveListAvailable[e].PPOName,0),isNaN(d)===!1?(c=new a.TrendValueType,c.t_s=g,c.y=d,this.trendCurveListAvailable[e].valuesCBuffer.add(c)):a.log_append_ln("ERROR refreshCurvePoints: value isNaN() so not added")}}};a.TrendCurveType=function(){this.PPOName="0";this.colorRGB="0,0,0";this.yRange=this.yProportionalityFactor=this.yMax=this.yMin=0;this.curve_ePath=this.valuesCBuffer=null;this.activeFlag=!1;this.label_e=null};a.PainterType_OnlineTrend=
function(k){this.base=a.PainterType_MPainter;this.base(k);this.trendIndex="";this.firstRedrawDone=!1;this.emitter=this.eGrpGrid=null;this.trendCurveListActive=[];this.config={gridFlag:!1,displayedTime_s:60,storedTime_s:3600,xAutoScroll:!0,FirstAutoSrollDraw:!1,AutoyAxisLegend:0,zoom:0,action:"0",scroll:0,trendArrayUpdate:"0"};this.displayedTime_s=this.xOffsetTime_s=this.xMaxTime_s=this.xMinTime_s=this.maxPoints=0;this.gridYSpacing=this.gridXSpacing=10;this.xRange=this.xPxRate=this.xProportionalityFactor=
0;this.yStep=this.xStep_s=10;this.FileViewerColumns="";this.TrendCurves_eGroup=this.TrendCurves_eSvg=this.TrendControl_eSvg=this.TrendControl_eGroup=null;this.timeWindowInitialised=!1;this.lastLogged_s=0;this.valuePickerName=this.mouseDownAction="";this.drawGrid=a.trendBaseDrawGrid;this.notify=a.trendBaseNotify;this.xClicked=0;this.sClicked=-1;this.eClicked=null;this.trendMouseDown=a.trendBaseMouseDownActionFunc;this.drawVerticalClicked=a.trendBaseDrawVerticalClicked;this.activePrevious=this.mouseDownHeader=
"";this.macroPrefix="@MACRO";this.updateActiveList=a.trendBaseUpdateActiveList;this.parseActiveTrends=a.trendBaseParseActiveTrends;this.drawAllActiveCurves=a.trendBaseDrawAllActiveCurves;this.getRgb=a.trendBaseGetRgb;this.getFViewerClicked=a.trendBaseGetFViewerClicked;this.getPointAt=a.trendBaseGetPointAt;this.initialise_ePath=a.trendBaseInitialise_ePath;this.remove_ePath=a.trendBaseRemove_ePath;this.relPosSvg={rX:0,rY:0,rW:0,rH:0};this.clear=a.trendBaseClear;this.clearActiveCurveRingBuffersOffline=
a.trendBaseClearActiveCurveRingBuffersOffline;this.drawYAxisLabels=a.trendBaseDrawYAxisLabels;this.initSvgHandlesIfRequired=a.trendBaseInitSvgHandlesIfRequired;this.updateXTimeLabels=a.trendBaseUpdateXTimeLabels;this.updateDimensions=a.trendBaseUpdateDimensions;this.computePointsInRange=a.trendBaseComputePointsInRange;this.updateYProp_AllCurves=a.trendBaseUpdateYProp_AllCurves;this.updateScrollAction=a.trendBaseUpdateScrollAction;this.updateZoomAction=a.trendBaseUpdateZoomAction;this.setXTimeRange=
a.trendBaseSetXTimeRange;this.drawTrendRectShape=a.trendBaseRectangle;var e=0;this.getNumActiveCrv=function(){return e};this.setNumActiveCrv=function(a){e=a};this.getActiveTrendCurve=function(a){for(var d=0,g=this.trendCurveListActive.length,d=0;d<g;d++)if(this.trendCurveListActive[d].PPOName===a)return this.trendCurveListActive[d];return null};this.getActiveTrendCurveIndex=function(a){for(var d=0,g=this.trendCurveListActive.length,d=0;d<g;d++)if(this.trendCurveListActive[d].PPOName===a)return d;
return null};this.viewChangedUpdate=function(){this.resetDOMHandles()};this.OnRedraw=function(b){var d=!1;this.trendIndex=b;b=!1;this.initSvgHandlesIfRequired();this.drawTrendRectShape();if(this.emitter===null&&(this.emitter=a.getOnlineTrendEmitterInstance(this.trendIndex),this.emitter===null))this.emitter=new a.OnlineTrendEmitterType(this.trendIndex),a.registerOnlineTrendEmitter(this.emitter),d=!0;this.emitter!==null?(this.readConfigContainerVars(),d===!0&&this.calculateMaxPoints(),this.parseAvailableTrends(),
b=this.parseActiveTrends(),(a.previousDrawDateTimeFormat!==a.readDateTimeFormat()||a.previousMBTmzEn!==a.SpecialCO.mbTmzEn.value)&&this.setXTimeRange(this.xMinTime_s,this.xMaxTime_s),b===!0&&this.writeActiveTrendsContainerArray(),this.updateDimensions(),this.config.AutoyAxisLegend===1&&this.drawYAxisLabels(),this.config.gridFlag?this.drawGrid(!0,b):this.drawGrid(!1,b),this.drawAllActiveCurves(),this.drawVerticalClicked(),a.WriteContainer(this.valuePickerName,this.getFViewerClicked())):a.err_append_ln("ERROR: Failed to create Online Trend's emitter!")};
this.readConfigContainerVars=function(){var b="SETAUTO";this.mouseDownAction=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownAction."+this.trendIndex);this.valuePickerName=this.macroPrefix+"ActiveTrendsMouseDownVal."+this.trendIndex;this.mouseDownHeader=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownHeader."+this.trendIndex);this.config.gridFlag=parseInt(a.ReadContainer("@MACROShowGrid."+this.trendIndex),10);this.config.displayedTime_s=parseInt(a.ReadContainer("@MACRODisplayedTime."+
this.trendIndex),10);this.config.storedTime_s=parseInt(a.ReadContainer("@MACROMaxStoreTime."+this.trendIndex),10);b=a.ReadContainer("@MACROXAutoUpdate."+this.trendIndex);if(b=="SETAUTO")this.config.FirstAutoSrollDraw=!0,a.getDebugLevel()>=2&&a.log_append_ln("this.config.FirstAutoSrollDraw: "+this.config.FirstAutoSrollDraw),a.WriteContainer("@MACROXAutoUpdate."+this.trendIndex,"1");b=="SETAUTO"||b=="1"?this.config.xAutoScroll=!0:b.length===0?this.config.xAutoScroll=!0:(this.config.xAutoScroll=!1,b=
0,b=a.ReadContainer("@MACROXMinTime."+this.trendIndex),b=a.ReadContainer("@MACROXMinDate."+this.trendIndex)+" "+b,b=parseInt(a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!1,null,b,!0),10),isNaN(b)===!1&&this.setXTimeRange(b,b+this.displayedTime_s));this.config.AutoyAxisLegend=parseInt(a.ReadContainer(this.macroPrefix+"AutoYAxeDescr."+this.trendIndex),10);this.config.action=a.ReadContainer("@MACROAvailableTrendsAction."+this.trendIndex);if(this.config.action=="CLEARNSTOPLOGS")this.emitter.stopLog=
!0,this.clear(),this.config.action="LOGSWAITING";else if(this.config.action=="STARTLOGGING")this.timeWindowInitialised=!1,this.emitter.stopLog=!1,this.config.action="0";else if(this.config.action=="SAVELOGSTOFILE")a.err_append_ln(a.SaveFileError),this.config.action="0";else if(this.config.action=="CLEARLOGS")this.clear(),this.config.action="0";a.WriteContainer("@MACROAvailableTrendsAction."+this.trendIndex,this.config.action);this.config.scroll=a.ReadContainer("@MACROScroll."+this.trendIndex);this.updateScrollAction();
a.WriteContainer("@MACROScroll."+this.trendIndex,this.config.scroll);this.config.zoom=parseInt(a.ReadContainer("@MACROZoom."+this.trendIndex),10);isNaN(this.config.zoom)?this.config.zoom=0:this.updateZoomAction();a.WriteContainer("@MACROZoom."+this.trendIndex,this.config.zoom);this.config.trendArrayUpdate=a.ReadContainer("@MACROActiveTrends[][]Update."+this.trendIndex);if(this.config.trendArrayUpdate=="UPDATE")this.readActiveTrendsContainerArray(),this.config.trendArrayUpdate="0",a.WriteContainer("@MACROActiveTrends[][]Update."+
this.trendIndex,this.config.trendArrayUpdate)};this.writeActiveTrendsContainerArray=function(){for(var b=0,d=this.trendCurveListActive.length,b=1;b<=d;b++)a.WriteContainer("@MACROActiveTrends["+b+"][0]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer("@MACROActiveTrends["+b+"][1]."+this.trendIndex,this.trendCurveListActive[b-1].PPOName),a.WriteContainer("@MACROActiveTrends["+b+"][2]."+this.trendIndex,this.trendCurveListActive[b-1].yMin),a.WriteContainer("@MACROActiveTrends["+
b+"][3]."+this.trendIndex,this.trendCurveListActive[b-1].yMax),a.WriteContainer("@MACROActiveTrends["+b+"][4]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB)};this.readActiveTrendsContainerArray=function(){for(var b=0,d=this.trendCurveListActive.length,b=1;b<=d;b++)this.trendCurveListActive[b-1].colorRGB=a.ReadContainer("@MACROActiveTrends["+b+"][0]."+this.trendIndex),this.trendCurveListActive[b-1].curveNr=a.ReadContainer("@MACROActiveTrends["+b+"][1]."+this.trendIndex),this.trendCurveListActive[b-
1].yMin=a.ReadContainer("@MACROActiveTrends["+b+"][2]."+this.trendIndex),this.trendCurveListActive[b-1].yMax=a.ReadContainer("@MACROActiveTrends["+b+"][3]."+this.trendIndex),this.trendCurveListActive[b-1].colorRGB=a.ReadContainer("@MACROActiveTrends["+b+"][4]."+this.trendIndex)};this.calculateMaxPoints=function(){var b=(a.getRefreshPeriod()+999)/1E3,b=a.toFixedNotRound(b,0);b===0&&(b=1);this.maxPoints=1+this.config.storedTime_s/b;a.getDebugLevel()>=2&&(a.log_append_ln("OT getRefreshPeriod: "+a.getRefreshPeriod()),
a.log_append_ln("OT storedTime_s: "+this.config.storedTime_s),a.log_append_ln("OT Max Points: "+this.maxPoints))};this.parseAvailableTrends=function(){var b=0,d=null,g=b=null,b=a.ReadContainer("@MACROAvailableTrends."+this.trendIndex),d=b.split(a.FVLINESEPTOKEN2);if(d.length>1)for(b=0;b<d.length;b++){var c=new a.TrendCurveType,f=null;c.PPOName="0";c.colorRGB="0,0,0";c.yMin=0;c.yMax=0;g=d[b].split(/\\t/);if(g.length>3&&(c.PPOName=g[0],f=this.emitter.getAvailableCurve(c.PPOName),f===null))a.registerHMI_PPO(c.PPOName),
c.yMin=g[1],c.yMax=g[2],c.colorRGB=g[3],c.valuesCBuffer=new a.CircularBuffer(this.maxPoints),this.emitter.trendCurveListAvailable.push(c)}}};a.PainterType_OnlineTrend.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.OfflineTrendEmitterType=function(a){this.trendIndex=a||0;this.lastLogged_s=0;this.trendCurveListAvailable=[];this.stopLog=!1;this.getAvailableCurve=function(a){for(var b=0,d=this.trendCurveListAvailable.length,b=0;b<d;b++)if(this.trendCurveListAvailable[b].curveNr===a)return this.trendCurveListAvailable[b];return null};this.refreshCurvePoints=function(){}};a.TrendOfflineCurveType=function(){this.curveNr="0";this.yMax=this.yMin=0;this.colorRGB="0,0,0";this.numPoints=this.lastPoint=
this.firstPoint=0;this.beginDate="1970.01.01";this.beginTime="00:00:00 AM";this.beginTs_ms=0;this.endDate="1970.01.01";this.endTime="00:00:00 AM";this.endTs_ms=0;this.PPOName="0";this.yRange=this.yProportionalityFactor=0;this.curve_ePath=this.valuesCBuffer=null;this.activeFlag=!1;this.label_e=null};a.PainterType_OfflineTrend=function(k){function e(){var c=b.loadCurveInfos();b.writeActiveTrendsContainerArray();a.WriteContainer("@MACROOFTActiveTrendsTotalSamples."+b.trendIndex,c);return c}this.base=
a.PainterType_MPainter;this.base(k);var b=this;this.trendIndex="";this.firstRedrawDone=!1;this.emitter=this.eGrpGrid=null;this.trendCurveListActive=[];this.config={gridFlag:!1,displayedTime_s:60,storedTime_s:3600,xAutoScroll:"SETAUTO",AutoyAxisLegend:0,zoom:0,action:"0",loadDataState:"",scroll:0,version:"Version",listName:"ListName",maxBlockSize:1024,numCurves:1,trendArrayUpdate:"0"};this.displayedTime_s=this.xOffsetTime_s=this.xMaxTime_s=this.xMinTime_s=0;this.gridYSpacing=this.gridXSpacing=10;this.xRange=
this.xPxRate=this.xProportionalityFactor=0;this.yStep=this.xStep_s=10;this.FileViewerColumns="";this.TrendCurves_eGroup=this.TrendCurves_eSvg=this.TrendControl_eSvg=this.TrendControl_eGroup=null;this.timeWindowInitialised=!1;this.lastLogged_s=0;this.valuePickerName=this.mouseDownAction="";this.drawGrid=a.trendBaseDrawGrid;this.notify=a.trendBaseNotify;this.xClicked=0;this.sClicked=-1;this.eClicked=null;this.trendMouseDown=a.trendBaseMouseDownActionFunc;this.drawVerticalClicked=a.trendBaseDrawVerticalClicked;
this.activePrevious=this.mouseDownHeader="";this.macroPrefix="@MACROOFT";this.updateActiveList=a.trendBaseUpdateActiveList;this.parseActiveTrends=a.trendBaseParseActiveTrends;this.drawAllActiveCurves=a.trendBaseDrawAllActiveCurves;this.getRgb=a.trendBaseGetRgb;this.getFViewerClicked=a.trendBaseGetFViewerClicked;this.getPointAt=a.trendBaseGetPointAt;this.initialise_ePath=a.trendBaseInitialise_ePath;this.remove_ePath=a.trendBaseRemove_ePath;this.relPosSvg={rX:0,rY:0,rW:0,rH:0};this.rcvdSrvCfgFlag=!1;
this.clear=a.trendBaseClear;this.clearActiveCurveRingBuffersOffline=a.trendBaseClearActiveCurveRingBuffersOffline;this.drawYAxisLabels=a.trendBaseDrawYAxisLabels;this.initSvgHandlesIfRequired=a.trendBaseInitSvgHandlesIfRequired;this.updateXTimeLabels=a.trendBaseUpdateXTimeLabels;this.updateDimensions=a.trendBaseUpdateDimensions;this.computePointsInRange=a.trendBaseComputePointsInRange;this.updateYProp_AllCurves=a.trendBaseUpdateYProp_AllCurves;this.updateScrollAction=a.trendBaseUpdateScrollAction;
this.updateZoomAction=a.trendBaseUpdateZoomAction;this.setXTimeRange=a.trendBaseSetXTimeRange;this.drawTrendRectShape=a.trendBaseRectangle;var d=!1,g=0;this.getNumActiveCrv=function(){return g};this.setNumActiveCrv=function(a){g=a};this.getActiveTrendCurve=function(a){for(var b=0,d=this.trendCurveListActive.length,b=0;b<d;b++)if(this.trendCurveListActive[b].curveNr===a)return this.trendCurveListActive[b];return null};this.getActiveTrendCurveIndex=function(a){for(var b=0,d=this.trendCurveListActive.length,
b=0;b<d;b++)if(this.trendCurveListActive[b].curveNr===a)return b;return null};this.viewChangedUpdate=function(){this.resetDOMHandles()};this.OnRedraw=function(b){this.trendIndex=b;b=!1;this.initSvgHandlesIfRequired();this.drawTrendRectShape();if(this.emitter===null&&(this.emitter=a.getOfflineTrendEmitterInstance(this.trendIndex),this.emitter===null))this.emitter=new a.OfflineTrendEmitterType(this.trendIndex),a.registerOfflineTrendEmitter(this.emitter);if(this.emitter!==null){this.readConfigContainerVars();
if(this.rcvdSrvCfgFlag===!1&&this.loadTrendSrvConfig()===!0)this.rcvdSrvCfgFlag=!0;this.parseAvailableTrends();b=this.parseActiveTrends();(b===!0||d===!1||a.previousDrawDateTimeFormat!==a.readDateTimeFormat()||a.previousMBTmzEn!==a.SpecialCO.mbTmzEn.value)&&e();this.updateDimensions();this.config.AutoyAxisLegend===1&&this.drawYAxisLabels();this.config.gridFlag?this.drawGrid(!0,b):this.drawGrid(!1,b);this.drawAllActiveCurves();this.drawVerticalClicked();a.WriteContainer(this.valuePickerName,this.getFViewerClicked())}else a.err_append_ln("ERROR: Failed to create Offline Trend's emitter!");
d=!0};this.readConfigContainerVars=function(){var b="SETAUTO",b=0;this.mouseDownAction=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownAction."+this.trendIndex);this.valuePickerName=this.macroPrefix+"ActiveTrendsMouseDownVal."+this.trendIndex;this.mouseDownHeader=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownHeader."+this.trendIndex);this.config.gridFlag=parseInt(a.ReadContainer("@MACROOFTShowGrid."+this.trendIndex),10);this.config.displayedTime_s=parseInt(a.ReadContainer("@MACROOFTDisplayedTime."+
this.trendIndex),10);this.config.storedTime_s=parseInt(a.ReadContainer("@MACROOFTMaxStoreTime."+this.trendIndex),10);b=a.ReadContainer("@MACROOFTXAutoUpdate."+this.trendIndex);b=="SETAUTO"&&a.WriteContainer("@MACROOFTXAutoUpdate."+this.trendIndex,"1");b=="SETAUTO"||b=="1"?this.config.xAutoScroll=!0:b.length===0?this.config.xAutoScroll=!0:(this.config.xAutoScroll=!1,b=0,b=a.ReadContainer("@MACROOFTXMinTime."+this.trendIndex),b=a.ReadContainer("@MACROOFTXMinDate."+this.trendIndex)+" "+b,b=parseInt(a.DateTime_ReadDT(a.readDateTimeFormat(),
a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,b,!0),10),this.setXTimeRange(b,b+this.displayedTime_s));this.config.AutoyAxisLegend=parseInt(a.ReadContainer(this.macroPrefix+"AutoYAxeDescr."+this.trendIndex),10);this.config.action=a.ReadContainer("@MACROOFTAvailableTrendsAction."+this.trendIndex);if(this.config.action=="CLEARNSTOPLOGS")this.emitter.stopLog=!0,this.clear(),this.config.action="LOGSWAITING";else if(this.config.action=="STARTLOGGING")this.timeWindowInitialised=!1,this.emitter.stopLog=
!1,this.config.action="0";else if(this.config.action=="SAVELOGSTOFILE")a.err_append_ln(a.SaveFileError),this.config.action="0";else if(this.config.action=="CLEARLOGS")this.clear(),this.config.action="0";else if(this.config.action=="RESTARTTRGTRENDING")a.loadGeneralCGI("trend"+a.getSrvExt()+"?action=reinitTrending"),this.config.action="0";else if(this.config.action=="CLEARTRGLOGFILES")a.loadGeneralCGI("trend"+a.getSrvExt()+"?action=clearTrdLogFiles"),this.config.action="0";a.WriteContainer("@MACROOFTAvailableTrendsAction."+
this.trendIndex,this.config.action);this.config.scroll=a.ReadContainer("@MACROOFTScroll."+this.trendIndex);this.updateScrollAction();a.WriteContainer("@MACROOFTScroll."+this.trendIndex,this.config.scroll);this.config.zoom=parseInt(a.ReadContainer("@MACROOFTZoom."+this.trendIndex),10);isNaN(this.config.zoom)?this.config.zoom=0:this.updateZoomAction();a.WriteContainer("@MACROOFTZoom."+this.trendIndex,this.config.zoom);this.config.loadDataState=a.ReadContainer("@MACROOFTActiveTrendsLoadDatas."+this.trendIndex);
if(this.config.loadDataState=="STARTLOADDATAS")this.config.loadDataState="LOADINGDATAS",a.WriteContainer("@MACROOFTActiveTrendsLoadDatas."+this.trendIndex,this.config.loadDataState),this.loadActiveCurveData(),this.config.loadDataState="0";a.WriteContainer("@MACROOFTActiveTrendsLoadDatas."+this.trendIndex,this.config.loadDataState);this.clearBusyFlag();this.config.action=a.ReadContainer("@MACROOFTActiveTrendsLoadInfos."+this.trendIndex);if(this.config.action=="LOADINFOS")e(),this.config.action="0";
else if(this.config.action=="LOADINFONSTARTDATA")this.config.action="STARTLOADDATAS",b=this.loadCurveInfos(),a.getDebugLevel()>=2&&a.log_append_ln("LOADINFONSTARTDATA/activePts: "+b),a.WriteContainer("@MACROOFTActiveTrendsTotalSamples."+this.trendIndex,b),this.loadActiveCurveData(),this.config.action="0";a.WriteContainer("@MACROOFTActiveTrendsLoadInfos."+this.trendIndex,this.config.action);this.clearBusyFlag();this.config.trendArrayUpdate=a.ReadContainer("@MACROOFTActiveTrends[][]Update."+this.trendIndex);
if(this.config.trendArrayUpdate=="UPDATE")this.readActiveTrendsContainerArray(),this.config.trendArrayUpdate="0",a.WriteContainer("@MACROOFTActiveTrends[][]Update."+this.trendIndex,this.config.trendArrayUpdate)};this.clearBusyFlag=function(){a.WriteContainer("_TREND_BUSY","0")};this.parseAvailableTrends=function(){var b=0,d=null,g=b=null,b=a.ReadContainer("@MACROOFTAvailableTrendsColored."+this.trendIndex),d=b.split(a.FVLINESEPTOKEN2);if(d.length>1)for(b=0;b<d.length;b++){var e=new a.TrendOfflineCurveType,
h=null;e.curveNr="0";e.yMin=0;e.yMax=0;e.colorRGB="0,0,0";e.firstPoint=0;e.lastPoint=0;e.beginDate="1970.01.01";e.beginTime="00:00:00 AM";e.endDate="1970.01.01";e.endTime="00:00:00 AM";g=d[b].split(/\\t/);if(g.length>10&&(e.curveNr=g[1],h=this.emitter.getAvailableCurve(e.curveNr),h===null))e.curveNr=g[1],e.yMin=g[2],e.yMax=g[3],e.colorRGB=g[4],e.firstPoint=g[5],e.lastPoint=g[6],e.beginDate=g[7],e.beginTime=g[8],e.endDate=g[9],e.endTime=g[10],e.valuesCBuffer=new a.CircularBuffer(-1),this.emitter.trendCurveListAvailable.push(e)}};
this.writeActiveTrendsContainerArray=function(){for(var b=0,d=this.trendCurveListActive.length,b=1;b<=d;b++)a.WriteContainer("@MACROOFTActiveTrends["+b+"][0]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer("@MACROOFTActiveTrends["+b+"][1]."+this.trendIndex,this.trendCurveListActive[b-1].curveNr),a.WriteContainer("@MACROOFTActiveTrends["+b+"][2]."+this.trendIndex,this.trendCurveListActive[b-1].yMin),a.WriteContainer("@MACROOFTActiveTrends["+b+"][3]."+this.trendIndex,this.trendCurveListActive[b-
1].yMax),a.WriteContainer("@MACROOFTActiveTrends["+b+"][4]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer("@MACROOFTActiveTrends["+b+"][5]."+this.trendIndex,this.trendCurveListActive[b-1].firstPoint),a.WriteContainer("@MACROOFTActiveTrends["+b+"][6]."+this.trendIndex,this.trendCurveListActive[b-1].lastPoint),a.WriteContainer("@MACROOFTActiveTrends["+b+"][7]."+this.trendIndex,this.trendCurveListActive[b-1].beginDate),a.WriteContainer("@MACROOFTActiveTrends["+b+"][8]."+
this.trendIndex,this.trendCurveListActive[b-1].beginTime),a.WriteContainer("@MACROOFTActiveTrends["+b+"][9]."+this.trendIndex,this.trendCurveListActive[b-1].endDate),a.WriteContainer("@MACROOFTActiveTrends["+b+"][10]."+this.trendIndex,this.trendCurveListActive[b-1].endTime),a.WriteContainer("@MACROOFTActiveTrends["+b+"][11]."+this.trendIndex,this.trendCurveListActive[b-1].numPoints)};this.readActiveTrendsContainerArray=function(){for(var b=0,d=this.trendCurveListActive.length,b=1;b<=d;b++){this.trendCurveListActive[b-
1].colorRGB=a.ReadContainer("@MACROOFTActiveTrends["+b+"][0]."+this.trendIndex);this.trendCurveListActive[b-1].curveNr=a.ReadContainer("@MACROOFTActiveTrends["+b+"][1]."+this.trendIndex);this.trendCurveListActive[b-1].yMin=a.ReadContainer("@MACROOFTActiveTrends["+b+"][2]."+this.trendIndex);this.trendCurveListActive[b-1].yMax=a.ReadContainer("@MACROOFTActiveTrends["+b+"][3]."+this.trendIndex);this.trendCurveListActive[b-1].colorRGB=a.ReadContainer("@MACROOFTActiveTrends["+b+"][4]."+this.trendIndex);
this.trendCurveListActive[b-1].firstPoint=a.ReadContainer("@MACROOFTActiveTrends["+b+"][5]."+this.trendIndex);this.trendCurveListActive[b-1].lastPoint=a.ReadContainer("@MACROOFTActiveTrends["+b+"][6]."+this.trendIndex);this.trendCurveListActive[b-1].beginDate=a.ReadContainer("@MACROOFTActiveTrends["+b+"][7]."+this.trendIndex);this.trendCurveListActive[b-1].beginTime=a.ReadContainer("@MACROOFTActiveTrends["+b+"][8]."+this.trendIndex);this.trendCurveListActive[b-1].endDate=a.ReadContainer("@MACROOFTActiveTrends["+
b+"][9]."+this.trendIndex);this.trendCurveListActive[b-1].endTime=a.ReadContainer("@MACROOFTActiveTrends["+b+"][10]."+this.trendIndex);var g=this.trendCurveListActive[b-1].beginDate+" "+this.trendCurveListActive[b-1].beginTime;this.trendCurveListActive[b-1].beginTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,g,!0);this.trendCurveListActive[b-1].beginTs_ms*=1E3;g=this.trendCurveListActive[b-1].endDate+" "+this.trendCurveListActive[b-1].endTime;
this.trendCurveListActive[b-1].endTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,g,!0);this.trendCurveListActive[b-1].endTs_ms*=1E3}};this.loadTrendSrvConfig=function(){var b=a.loadGeneralCGI("trend"+a.getSrvExt()+"?trendsList=TrendsListName&action=config"),d=null,g=!1;b!==null?d=a.parseCGI_CSV_Content(b):a.log_append_ln("ERROR Offline Trend : Failed to load trend info from server!");if(d!==null&&d[0]!==null){if(d[0][0]!==null)this.config.version=
d[0][0];if(d[0][1]!==null)this.config.listName=d[0][1];if(d[0][2]!==null)this.config.maxBlockSize=d[0][2];d[0][3]!==null?(this.config.numCurves=a.atoi(this.config.numCurves),isNaN(this.config.numCurves)===!1?g=!0:(a.log_append_ln("ERROR Offline Trend : Failed to parse trend info from server (syntax error: Number of curves)!"),this.config.numCurves=0)):a.log_append_ln("ERROR Offline Trend : Failed to parse trend info from server (syntax error)!")}return g};this.loadCurveInfos=function(){for(var b=
0,d=this.trendCurveListActive.length,g="",g=0,g=null,e=0,h=0,j=0,p=0,b=0;b<d;b++)if(this.trendCurveListActive[b].activeFlag===!0)if(g=this.trendCurveListActive[b].curveNr,g=a.loadGeneralCGI("trend"+a.getSrvExt()+"?trendNr="+g+"&action=configNSta"),g!==null){if(g=a.parseCGI_CSV_Content(g),g[0][3]!==null){h=parseInt(g[0][6],10);isNaN(h)===!1?(this.trendCurveListActive[b].numPoints=h,e+=h):this.trendCurveListActive[b].numPoints=0;this.trendCurveListActive[b].beginTs_ms=parseInt(g[0][7],16);if(isNaN(this.trendCurveListActive[b].beginTs_ms)===
!0)this.trendCurveListActive[b].beginTs_ms=0;else if(this.trendCurveListActive[b].beginTs_ms*=1E3,h=this.trendCurveListActive[b].beginTs_ms,isNaN(h)===!1)h=new Date(h),this.trendCurveListActive[b].beginTime=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,h,null,!0),this.trendCurveListActive[b].beginDate=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,!a.SpecialCO.mbTmzEn.value,h,null,!0);this.trendCurveListActive[b].endTs_ms=
parseInt(g[0][8],16);if(isNaN(this.trendCurveListActive[b].endTs_ms)===!0)this.trendCurveListActive[b].endTs_ms=0;else if(this.trendCurveListActive[b].endTs_ms*=1E3,g=this.trendCurveListActive[b].endTs_ms,isNaN(g)===!1)g=new Date(g),this.trendCurveListActive[b].endTime=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,g,null,!0),this.trendCurveListActive[b].endDate=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,!a.SpecialCO.mbTmzEn.value,
g,null,!0);if(b===0)j=this.trendCurveListActive[b].beginTs_ms,p=this.trendCurveListActive[b].endTs_ms;else{if(this.trendCurveListActive[b].beginTs_ms<j)j=this.trendCurveListActive[b].beginTs_ms;if(this.trendCurveListActive[b].endTs_ms>p)p=this.trendCurveListActive[b].endTs_ms}}}else a.log_append_ln("Offline Trend Error: Failed to load trend info from server!");j/=1E3;p/=1E3;this.setXTimeRange(j,p);return e};this.parseTrendData=function(b,d,g){var e=0,h=0,j=0,p=null,k=!1;d.cnt=0;d.newesTs_s=0;d.oldesTs_s=
0;d.doneFlag=!1;var n=d.endFlag=!1;if(b.length>0){if(d!==null){p=a.parseCGI_CSV_Content(b);for(e=0;p[e]!==null&&p[e]!==void 0&&d.endFlag!==!0&&d.doneFlag!==!0;)if(a.prefixicmp("End",p[e][0])===!1&&a.prefixicmp("Done",p[e][0])===!1){var b=new a.TrendValueType,u=parseInt(p[e][0],16);if(isNaN(u)===!1&&(b.t_s=u,u=parseFloat(p[e][1],10),isNaN(u)===!1)){b.y=u;this.trendCurveListActive[g].valuesCBuffer.add(b);if(j===0||j>b.t_s)j=b.t_s;if(h<b.t_s)h=b.t_s}e++}else if(a.prefixicmp("End",p[e][0])===!0)d.endFlag=
!0,a.getDebugLevel()>=2&&a.log_append_ln("End");else if(a.prefixicmp("Done",p[e][0])===!0)d.doneFlag=!0,a.getDebugLevel()>=2&&a.log_append_ln("Done")}else a.log_append_ln("EROOR parseTrendData byRef === null"),k=!0;d.cnt=e;d.newesTs_s=h;d.oldesTs_s=j}else a.log_append_ln("ERROR Offline Trend parseTrendData error: no data"),k=!0;k!==!0&&(n=!0);return n};this.loadTrendData=function(b,d,g,e,h){return a.loadGeneralCGI("trend"+a.getSrvExt()+"?trendNr="+b+"&action=loadTrend&loadType=0&startTimestamp="+
d+"&endTimestamp="+g+"&nbrOfPoints="+this.config.maxBlockSize+"&lastLoadedTimestamp="+e,h)};this.loadActiveCurveData=function(){for(var b=0,d=this.trendCurveListActive.length,g="",e=0,h=!1,j=0,p=0,k={cnt:0,oldesTs_s:0,newesTs_s:0,doneFlag:!1,endFlag:!1},n=0,u=0,t=0,m=0,g=g=g=0,t=a.ReadContainer("@MACROOFTLoadStartTimestampSet."+this.trendIndex),m=a.ReadContainer("@MACROOFTLoadEndTimestampSet."+this.trendIndex),b=0;b<d;b++){k.cnt=0;k.oldesTs_s=0;k.newesTs_s=0;k.doneFlag=!1;h=k.endFlag=!1;e=this.trendCurveListActive[b].curveNr;
j=this.trendCurveListActive[b].beginTs_ms/1E3;p=this.trendCurveListActive[b].endTs_ms/1E3;t!==""&&(a.prefixcmp("START+",t)?(g=t.substring(6,t.length),j+=g):a.prefixcmp("END-",t)?(g=t.substring(4,t.length),j=p-g):(g=parseInt(t,10),isNaN(g)===!1&&(j=g)));m!==""&&(a.prefixcmp("START+",m)?(g=m.substring(6,t.length),p=j+g):a.prefixcmp("END-",m)?(g=m.substring(4,t.length),p-=g):(g=parseInt(m,10),isNaN(g)===!1&&(p=g)));a.getDebugLevel()>=2&&(a.log_append_ln(j),a.log_append_ln(p),a.log_append_ln("Diff.: "+
(p-j)/60));if(this.trendCurveListActive[b].valuesCBuffer===null)this.trendCurveListActive[b].valuesCBuffer=new a.CircularBuffer(-1);if(this.trendCurveListActive[b].numPoints!==0)for(;k.endFlag===!1&&h===!1;)if(g=this.loadTrendData(e,j.toString(16),p.toString(16),k.newesTs_s.toString(16)),g!==null){this.parseTrendData(g,k,b);a.getDebugLevel()>=2&&a.log_append_ln("byRef.cnt: "+k.cnt);if(k.oldesTs_s<n||n===0)n=k.oldesTs_s;if(k.newesTs_s>u)u=k.newesTs_s}else h=!0,a.err_append_ln("ERROR Offline Trend : Failed to load trend data from server!")}this.setXTimeRange(n,
u);a.getDebugLevel()>=2&&(a.log_append_ln("loadActiveCurveData activeSize: "+d),a.log_append_ln("loadActiveCurveData cnt (total): "+k.cnt))}};a.PainterType_OfflineTrend.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.SavedTrendEmitterType=function(a){this.trendIndex=a||0;this.lastLogged_s=0;this.trendCurveListAvailable=[];this.stopLog=!1;this.getAvailableCurve=function(a){for(var b=0,d=this.trendCurveListAvailable.length,b=0;b<d;b++)if(this.trendCurveListAvailable[b].curveNr===a)return this.trendCurveListAvailable[b];return null};this.refreshCurvePoints=function(){}};a.TrendSavedCurveType=function(){this.curveNr="0";this.yMax=this.yMin=0;this.colorRGB="0,0,0";this.numPoints=this.lastPoint=
this.firstPoint=0;this.beginDate="1970.01.01";this.beginTime="00:00:00 AM";this.beginTs_ms=0;this.endDate="1970.01.01";this.endTime="00:00:00 AM";this.endTs_ms=0;this.PPOName="0";this.yRange=this.yProportionalityFactor=0;this.curve_ePath=this.valuesCBuffer=null;this.activeFlag=!1;this.label_e=null};a.PainterType_SavedTrend=function(k){this.base=a.PainterType_MPainter;this.base(k);this.trendIndex="";this.firstRedrawDone=!1;this.emitter=this.eGrpGrid=null;this.trendCurveListActive=[];this.config={gridFlag:!1,
displayedTime_s:60,storedTime_s:3600,xAutoScroll:"SETAUTO",AutoyAxisLegend:0,zoom:0,action:"0",loadDataState:"",scroll:0,numCurves:1,trendArrayUpdate:"0",loadIsRemote:"0",remoteFileName:"",availableTrendsHeaderStr:"",activeTrendsHeaderStr:"",lastReadRemoteFileContent:""};this.displayedTime_s=this.xOffsetTime_s=this.xMaxTime_s=this.xMinTime_s=0;this.gridYSpacing=this.gridXSpacing=10;this.xRange=this.xPxRate=this.xProportionalityFactor=0;this.yStep=this.xStep_s=10;this.FileViewerColumns="";this.TrendCurves_eGroup=
this.TrendCurves_eSvg=this.TrendControl_eSvg=this.TrendControl_eGroup=null;this.timeWindowInitialised=!1;this.lastLogged_s=0;this.valuePickerName=this.mouseDownAction="";this.drawGrid=a.trendBaseDrawGrid;this.notify=a.trendBaseNotify;this.xClicked=0;this.sClicked=-1;this.eClicked=null;this.trendMouseDown=a.trendBaseMouseDownActionFunc;this.drawVerticalClicked=a.trendBaseDrawVerticalClicked;this.activePrevious=this.mouseDownHeader="";this.macroPrefix="@MACROOFST";this.updateActiveList=a.trendBaseUpdateActiveList;
this.parseActiveTrends=a.trendBaseParseActiveTrends;this.drawAllActiveCurves=a.trendBaseDrawAllActiveCurves;this.getRgb=a.trendBaseGetRgb;this.getFViewerClicked=a.trendBaseGetFViewerClicked;this.getPointAt=a.trendBaseGetPointAt;this.initialise_ePath=a.trendBaseInitialise_ePath;this.remove_ePath=a.trendBaseRemove_ePath;this.relPosSvg={rX:0,rY:0,rW:0,rH:0};this.clear=a.trendBaseClear;this.clearActiveCurveRingBuffersOffline=a.trendBaseClearActiveCurveRingBuffersOffline;this.drawYAxisLabels=a.trendBaseDrawYAxisLabels;
this.initSvgHandlesIfRequired=a.trendBaseInitSvgHandlesIfRequired;this.updateXTimeLabels=a.trendBaseUpdateXTimeLabels;this.updateDimensions=a.trendBaseUpdateDimensions;this.computePointsInRange=a.trendBaseComputePointsInRange;this.updateYProp_AllCurves=a.trendBaseUpdateYProp_AllCurves;this.updateScrollAction=a.trendBaseUpdateScrollAction;this.updateZoomAction=a.trendBaseUpdateZoomAction;this.setXTimeRange=a.trendBaseSetXTimeRange;this.drawTrendRectShape=a.trendBaseRectangle;var e=0;this.getNumActiveCrv=
function(){return e};this.setNumActiveCrv=function(a){e=a};this.getActiveTrendCurve=function(a){for(var d=0,g=this.trendCurveListActive.length,d=0;d<g;d++)if(this.trendCurveListActive[d].curveNr===a)return this.trendCurveListActive[d];return null};this.getActiveTrendCurveIndex=function(a){for(var d=0,g=this.trendCurveListActive.length,d=0;d<g;d++)if(this.trendCurveListActive[d].curveNr===a)return d;return null};this.viewChangedUpdate=function(){this.resetDOMHandles()};this.OnRedraw=function(b){this.trendIndex=
b;b=!1;this.initSvgHandlesIfRequired();this.drawTrendRectShape();if(this.emitter===null&&(this.emitter=a.getSavedTrendEmitterInstance(this.trendIndex),this.emitter===null))this.emitter=new a.SavedTrendEmitterType(this.trendIndex),a.registerSavedTrendEmitter(this.emitter);this.emitter!==null?(this.readConfigContainerVarsNLoadSavedTrendIfNeeded(),b=this.parseActiveTrends(),(a.previousDrawDateTimeFormat!==a.readDateTimeFormat()||a.previousMBTmzEn!==a.SpecialCO.mbTmzEn.value)&&this.setXTimeRange(this.xMinTime_s,
this.xMaxTime_s),b===!0&&this.writeActiveTrendsContainerArray(),this.updateDimensions(),this.config.AutoyAxisLegend===1&&this.drawYAxisLabels(),this.config.gridFlag?this.drawGrid(!0,b):this.drawGrid(!1,b),this.drawAllActiveCurves(),this.drawVerticalClicked(),a.WriteContainer(this.valuePickerName,this.getFViewerClicked())):a.err_append_ln("ERROR: Failed to create Saved Trend's emitter!")};this.readConfigContainerVarsNLoadSavedTrendIfNeeded=function(){var b="SETAUTO";this.config.activeTrendsHeaderStr=
a.ReadContainer(this.macroPrefix+"ActiveTrendsHeaderSP."+this.trendIndex);this.config.availableTrendsHeaderStr=a.ReadContainer(this.macroPrefix+"AvailableTrendsHeadered."+this.trendIndex);if(this.config.availableTrendsHeaderStr.length>0&&(b=this.config.availableTrendsHeaderStr.split(a.FVLINESEPTOKEN2),b.length>0))this.config.availableTrendsHeaderStr=b[0],!a.StrEndWith(this.config.availableTrendsHeaderStr,a.FVLINESEPTOKEN)&&!a.StrEndWith(this.config.availableTrendsHeaderStr,a.FVLINESEPTOKEN2)&&(this.config.availableTrendsHeaderStr+=
a.FVLINESEPTOKEN2);if(this.config.activeTrendsHeaderStr.length<=0||!a.prefixicmp(a.FVLINESPECLINESTARTSTR,this.config.activeTrendsHeaderStr))this.config.activeTrendsHeaderStr="#sp;120,0,120,120,120,120,120"+a.FVLINESEPTOKEN2;if(this.config.availableTrendsHeaderStr.length<=0||!a.prefixicmp(a.FVLINESPECLINESTARTSTR,this.config.availableTrendsHeaderStr))this.config.activeTrendsHeaderStr="#sp;0,120,120,120,120"+a.FVLINESEPTOKEN2;this.config.loadDataState=a.ReadContainer(this.macroPrefix+"ActiveTrendsLoadDatas."+
this.trendIndex);if(this.config.loadDataState=="STARTLOADDATAS")this.config.loadIsRemote="",this.config.remoteFileName="",this.config.loadIsRemote=a.ReadContainer(this.macroPrefix+"ActiveTrendsLoadRemoteMode."+this.trendIndex),this.config.remoteFileName=a.ReadContainer(this.macroPrefix+"ActiveTrendsLoadRemoteFile."+this.trendIndex),this.config.loadIsRemote==="1"&&this.config.remoteFileName.length>0?(this.config.loadDataState="LOADINGDATAS",this.loadActiveCurvesDataNUpdateInfos(),this.config.loadDataState=
"0",this.clearBusyFlag()):a.err_append_ln(a.LoadFileError),action="0",a.WriteContainer(this.macroPrefix+"ActiveTrendsLoadDatas."+this.trendIndex,"0");this.mouseDownAction=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownAction."+this.trendIndex);this.valuePickerName=this.macroPrefix+"ActiveTrendsMouseDownVal."+this.trendIndex;this.mouseDownHeader=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownHeader."+this.trendIndex);this.config.gridFlag=parseInt(a.ReadContainer(this.macroPrefix+"ShowGrid."+
this.trendIndex),10);this.config.displayedTime_s=parseInt(a.ReadContainer(this.macroPrefix+"DisplayedTime."+this.trendIndex),10);this.config.storedTime_s=parseInt(a.ReadContainer(this.macroPrefix+"MaxStoreTime."+this.trendIndex),10);b=a.ReadContainer(this.macroPrefix+"XAutoUpdate."+this.trendIndex);b=="SETAUTO"&&a.WriteContainer(this.macroPrefix+"XAutoUpdate."+this.trendIndex,"1");b=="SETAUTO"||b=="1"?this.config.xAutoScroll=!0:b.length===0?this.config.xAutoScroll=!0:(this.config.xAutoScroll=!1,b=
0,b=a.ReadContainer(this.macroPrefix+"XMinTime."+this.trendIndex),b=a.ReadContainer(this.macroPrefix+"XMinDate."+this.trendIndex)+" "+b,b=parseInt(a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,b,!0),10),this.setXTimeRange(b,b+this.displayedTime_s));this.config.AutoyAxisLegend=parseInt(a.ReadContainer(this.macroPrefix+"AutoYAxeDescr."+this.trendIndex),10);this.config.action=a.ReadContainer(this.macroPrefix+"AvailableTrendsAction."+this.trendIndex);
if(this.config.action=="SAVELOGSTOFILE")a.err_append_ln(a.SaveFileError),this.config.action="0";else if(this.config.action=="CLEARLOGS")this.clear(),this.config.action="0";else if(this.config.action!=void 0&&this.config.action.length>0&&this.config.action!=="0")a.err_append_ln("offline Saved Trend Action ["+this.config.action+"] not supported in the HTML5 client !"),this.config.action="0";a.WriteContainer(this.macroPrefix+"AvailableTrendsAction."+this.trendIndex,this.config.action);this.config.scroll=
a.ReadContainer(this.macroPrefix+"Scroll."+this.trendIndex);this.updateScrollAction();a.WriteContainer(this.macroPrefix+"Scroll."+this.trendIndex,this.config.scroll);this.config.zoom=parseInt(a.ReadContainer(this.macroPrefix+"Zoom."+this.trendIndex),10);isNaN(this.config.zoom)?this.config.zoom=0:this.updateZoomAction();a.WriteContainer(this.macroPrefix+"Zoom."+this.trendIndex,this.config.zoom);this.config.trendArrayUpdate=a.ReadContainer(this.macroPrefix+"ActiveTrends[][]Update."+this.trendIndex);
if(this.config.trendArrayUpdate=="UPDATE")this.readActiveTrendsContainerArray(),this.config.trendArrayUpdate="0",a.WriteContainer(this.macroPrefix+"ActiveTrends[][]Update."+this.trendIndex,this.config.trendArrayUpdate)};this.loadActiveCurvesDataNUpdateInfos=function(){for(var b="",d=0,g=0,c=0,f=c=d=0,e=0,o=0,h="",j="",d=0;d<this.trendCurveListActive.length;d++)if(this.trendCurveListActive[d].valuesCBuffer!==null&&(b=this.trendCurveListActive[d].valuesCBuffer.level,b>0)){var p=this.trendCurveListActive[d].valuesCBuffer.get(0);
if(p!==null){if(o===0||o>p.t_s)o=p.t_s;if(e<p.t_s)e=p.t_s}p=this.trendCurveListActive[d].valuesCBuffer.get(b-1);if(p!==null){if(o===0||o>p.t_s)o=p.t_s;if(e<p.t_s)e=p.t_s}}if(this.config.loadIsRemote==="1"&&this.config.remoteFileName.length>0){a.getDebugLevel()>=2&&a.log_append_ln("SavedTrend loadActiveCurvesDataNUpdateInfos for file "+this.config.remoteFileName);b=a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?a.loadFileSource("plc?"+this.config.remoteFileName):a.loadFileSource(this.config.remoteFileName);
if(b!==null&&b.length>0&&b!==""){a.getDebugLevel()>=2&&a.log_append_ln("SavedTrend loadActiveCurvesDataNUpdateInfos for file "+this.config.remoteFileName+" returned "+b);for(var k=b.split("\n"),g=d=0;g<k.length&&d==0;g++)k[g].indexOf(a.FVCOMMENTLINESTARTSTR)!=0&&(d=1,c=k[g].split(";"),c.length>0&&(c=parseInt(c[0],10),isNaN(c)===!1&&(f=c)));if(d==1&&f>0){if(f!=this.emitter.trendCurveListAvailable.length){if(this.emitter.trendCurveListAvailable.length>0)for(a.log_append_ln("while parsing header part of SavedTrend file "+
this.config.remoteFileName+" nbrOfCurves = "+f+" is defferent from this.trendCurveListAvailable.length [ "+this.emitter.trendCurveListAvailable.length+" ] so clear the trendCurveListAvailable current list and updates with file's one ");this.emitter.trendCurveListAvailable.length>0;)this.emitter.trendCurveListAvailable.pop();if(this.trendCurveListActive.length>0)for(a.log_append_ln("while parsing header part of SavedTrend file "+this.config.remoteFileName+" nbrOfCurves = "+f+" is defferent from this.trendCurveListAvailable.length [ "+
this.emitter.trendCurveListAvailable.length+" ] so clear the trendCurveListActive current list and updates with file's one ");this.trendCurveListActive.length>0;)this.trendCurveListActive.pop()}else{for(c=d=j=0;g+c<k.length&&c<f&&d==0;c++)if(k[g+c].indexOf(a.FVCOMMENTLINESTARTSTR)==0)a.log_append_ln("ERROR while parsing header part of SavedTrend file "+this.config.remoteFileName+" should find "+f+" curves but found comment line at index "+c),d=1;else{var n=k[g+c].split(";"),u="",t=null;n.length>0&&
(n=n[0].split("\t"),n.length>0&&(u=n[0],u.length>0?(t=this.emitter.trendCurveListAvailable[c],t===null||t.curveNr!==u?(a.log_append_ln("ERROR while parsing header part of SavedTrend file "+this.config.remoteFileName+" could not find the available curve from list for curveNrStr  "+u+" at the right index "+c),d=1):j++):d=1))}if(j!=f){if(this.emitter.trendCurveListAvailable.length>0)for(a.log_append_ln("while parsing header part of SavedTrend file "+this.config.remoteFileName+" foundAvailableCurves = "+
j+" is different nbrOfCurves to find [ "+f+" ] so clear the trendCurveListAvailable current list and updates with file's one ");this.emitter.trendCurveListAvailable.length>0;)this.emitter.trendCurveListAvailable.pop();if(this.trendCurveListActive.length>0)for(a.log_append_ln("while parsing header part of SavedTrend file "+this.config.remoteFileName+" foundAvailableCurves = "+j+" is different nbrOfCurves to find [ "+f+" ] so clear the trendCurveListActive current list and updates with file's one ");this.trendCurveListActive.length>
0;)this.trendCurveListActive.pop()}}for(c=d=0;g+c<k.length&&c<f&&d==0;c++)if(k[g+c].indexOf(a.FVCOMMENTLINESTARTSTR)==0)a.log_append_ln("ERROR while parsing header part of SavedTrend file "+this.config.remoteFileName+" should find "+f+" curves but found comment line at index "+c),d=1;else{var n=k[g+c].split(";"),m=p=j="";if(n.length>0&&(n=n[0].split("\t"),n.length>3&&(u=n[0],j=n[1],p=n[2],m=n[3],u.length>0))){t=this.emitter.getAvailableCurve(u);if(t===null)t=new a.TrendSavedCurveType,t.curveNr=u,
t.yMin=0,t.yMax=0,t.colorRGB="0,0,0",t.firstPoint=0,t.lastPoint=0,t.beginDate="1970.01.01",t.beginTime="00:00:00 AM",t.endDate="1970.01.01",t.endTime="00:00:00 AM",t.valuesCBuffer=new a.CircularBuffer(-1),this.emitter.trendCurveListAvailable.push(t);t=this.emitter.getAvailableCurve(u);if(t!==null)t.curveNr=u,t.yMin=j,t.yMax=p,t.colorRGB=m}}j="";for(l=0;l<this.emitter.trendCurveListAvailable.length;l++)n=this.emitter.trendCurveListAvailable[l],n!=void 0&&n.curveNr.length>0&&n.yMin.length>0&&n.yMax.length>
0&&n.colorRGB.length>0&&(j+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+n.colorRGB+a.FVCOLUMNCOLORSPECENDSTR+a.FVCOLSEPTOKEN2+n.curveNr+a.FVCOLSEPTOKEN2+n.yMin+a.FVCOLSEPTOKEN2+n.yMax+a.FVCOLSEPTOKEN2+n.colorRGB+a.FVLINESEPTOKEN2);a.WriteContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex,this.config.activeTrendsHeaderStr+j);j="";for(this.parseActiveTrends();g+c<k.length;){if(k[g+c].indexOf(a.FVCOMMENTLINESTARTSTR)==0)a.getDebugLevel()>=2&&a.log_append_ln("skips comment line while parsing curves points part of SavedTrend file "+
this.config.remoteFileName);else if(a.prefixicmp("End",k[g+c])===!1&&a.prefixicmp("Done",k[g+c])===!1&&k[g+c].length>0)if(n=k[g+c].split(";"),m=-1,n.length>3)if(m=parseInt(n[0],10),isNaN(m)===!1&&m>=0)for(d=0;d<this.emitter.trendCurveListAvailable.length&&d+3<n.length;d++){if(u=parseFloat(n[3+d],10),isNaN(u)===!1){p=new a.TrendValueType;p.t_s=m;p.y=u;u=this.emitter.trendCurveListAvailable[d].curveNr;u!==null&&u.length>0&&(t=this.getActiveTrendCurve(u),t!==null&&t.valuesCBuffer.add(p));if(o===0||o>
p.t_s)o=p.t_s;if(e<p.t_s)e=p.t_s}}else a.log_append_ln("ERROR while parsing curve's points part of SavedTrend file "+this.config.remoteFileName+" error in timestamp for index ["+(g+c)+"]lineStr = ["+k[g+c]+"] ");else a.log_append_ln("ERROR while parsing curve's points part of SavedTrend file "+this.config.remoteFileName+" error for index ["+(g+c)+"]lineStr = ["+k[g+c]+"] for contents = \n["+b+"]");c++}}}for(g=0;g<this.emitter.trendCurveListAvailable.length;g++)n=this.emitter.trendCurveListAvailable[g],
n!=void 0&&n.curveNr.length>0&&n.yMin.length>0&&n.yMax.length>0&&n.colorRGB.length>0&&(h+=n.curveNr+a.FVCOLSEPTOKEN2+n.yMin+a.FVCOLSEPTOKEN2+n.yMax+a.FVCOLSEPTOKEN2+n.colorRGB+a.FVLINESEPTOKEN2,j+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+n.colorRGB+a.FVCOLUMNCOLORSPECENDSTR+a.FVCOLSEPTOKEN2+n.curveNr+a.FVCOLSEPTOKEN2+n.yMin+a.FVCOLSEPTOKEN2+n.yMax+a.FVCOLSEPTOKEN2+n.colorRGB+a.FVLINESEPTOKEN2);a.WriteContainer(this.macroPrefix+"AvailableTrends."+this.trendIndex,h);a.WriteContainer(this.macroPrefix+"AvailableTrendsHeadered."+
this.trendIndex,this.config.availableTrendsHeaderStr+h);a.WriteContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex,this.config.activeTrendsHeaderStr+j)}this.setXTimeRange(o,e);a.getDebugLevel()>=2&&a.log_append_ln("SavedTrend loadActiveCurvesDataNUpdateInfos nbrOfCurves: "+f)};this.clearBusyFlag=function(){a.WriteContainer("_TREND_BUSY","0")};this.writeActiveTrendsContainerArray=function(){for(var b=0,d=this.trendCurveListActive.length,b=1;b<=d;b++)a.WriteContainer(this.macroPrefix+"ActiveTrends["+
b+"][0]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][1]."+this.trendIndex,this.trendCurveListActive[b-1].curveNr),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][2]."+this.trendIndex,this.trendCurveListActive[b-1].yMin),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][3]."+this.trendIndex,this.trendCurveListActive[b-1].yMax),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][4]."+this.trendIndex,this.trendCurveListActive[b-
1].colorRGB),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][5]."+this.trendIndex,this.trendCurveListActive[b-1].firstPoint),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][6]."+this.trendIndex,this.trendCurveListActive[b-1].lastPoint),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][7]."+this.trendIndex,this.trendCurveListActive[b-1].beginDate),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][8]."+this.trendIndex,this.trendCurveListActive[b-1].beginTime),a.WriteContainer(this.macroPrefix+
"ActiveTrends["+b+"][9]."+this.trendIndex,this.trendCurveListActive[b-1].endDate),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][10]."+this.trendIndex,this.trendCurveListActive[b-1].endTime),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][11]."+this.trendIndex,this.trendCurveListActive[b-1].numPoints)};this.readActiveTrendsContainerArray=function(){for(var b=0,d=this.trendCurveListActive.length,g="",b=1;b<=d;b++){this.trendCurveListActive[b-1].colorRGB=a.ReadContainer(this.macroPrefix+
"ActiveTrends["+b+"][0]."+this.trendIndex);this.trendCurveListActive[b-1].curveNr=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][1]."+this.trendIndex);this.trendCurveListActive[b-1].yMin=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][2]."+this.trendIndex);this.trendCurveListActive[b-1].yMax=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][3]."+this.trendIndex);this.trendCurveListActive[b-1].colorRGB=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][4]."+this.trendIndex);this.trendCurveListActive[b-
1].firstPoint=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][5]."+this.trendIndex);this.trendCurveListActive[b-1].lastPoint=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][6]."+this.trendIndex);this.trendCurveListActive[b-1].beginDate=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][7]."+this.trendIndex);this.trendCurveListActive[b-1].beginTime=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][8]."+this.trendIndex);this.trendCurveListActive[b-1].endDate=a.ReadContainer(this.macroPrefix+
"ActiveTrends["+b+"][9]."+this.trendIndex);this.trendCurveListActive[b-1].endTime=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][10]."+this.trendIndex);var c=this.trendCurveListActive[b-1].beginDate+" "+this.trendCurveListActive[b-1].beginTime;this.trendCurveListActive[b-1].beginTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,c,!0);this.trendCurveListActive[b-1].beginTs_ms*=1E3;c=this.trendCurveListActive[b-1].endDate+" "+this.trendCurveListActive[b-
1].endTime;this.trendCurveListActive[b-1].endTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,c,!0);this.trendCurveListActive[b-1].endTs_ms*=1E3;g+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+this.trendCurveListActive[b-1].colorRGB+a.FVCOLUMNCOLORSPECENDSTR+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-1].curveNr+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-1].yMin+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-1].yMax+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-
1].colorRGB+a.FVLINESEPTOKEN2}a.WriteContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex,this.config.activeTrendsHeaderStr+g)}};a.PainterType_SavedTrend.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function k(a,b,d,c,f){var g=-1,e=-1;f.content="";b=a.indexOf(d,b);if(b==-1)return-1;g=b+d.length;if(g>=a.length)return-1;e=a.indexOf(c,g);if(e==-1)return-1;f.content=a.substring(g,e);e+=c.length;return e>=a.length?-1:e}function e(b){a.getDebugLevel()>=3&&(q=a.getTimestamp_ms(),o=q-f,a.log_append_ln("ILRStop: "+o));if(b!==a.PreviousILR||a.FullRedraw===!0){var d={content:""},c="",g=0,e="",c="";do if(g=k(b,g,"<i>","</i>",d),d.content!==""&&(c=d.content,k(c,0,"<n>","</n>",d),d.content!==
""))e=d.content,k(c,0,"<v>","</v>",d),c=d.content,a.sl_updatePPOList(e,c);while(g!==-1);a.scheduleRepaint();a.scheduleOnlineTrendRefresh()}a.ViewList.doViewGainIfRequired();a.PreviousILR=b;a.RefreshCGIPending=!1;a.Link.cgiFailConsecutive=0}function b(b){var c="cgi-bin/ILRReadValues"+a.getSrvExt();a.cgiHost.length>0&&(c=a.cgiHost+"cgi-bin/ILRReadValues"+a.getSrvExt());a.RefreshCGIPending=!0;a.getDebugLevel()>=2&&a.log_append_ln(" send_AsynchILRReadValues url = "+c);$.ajax({url:c,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?
b.overrideMimeType("text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR):a.Link.cgiOverrideMimetypeFlag===!0&&a.Link.cgiOverrideMimeTypeFunction(b)},global:!1,cache:!1,type:"POST",contentType:"text/xml",data:b,dataType:"text",timeout:a.AjaxTimeout,async:!0,complete:d,success:e,error:g})}function d(){a.RefreshCGIPending=!1}function g(){a.scheduleRepaint();a.Link.cgiFailConsecutive++;if(a.Link.cgiFailConsecutive>=a.Link.cgiFailMax)a.err_append_ln("ERROR Failed to update PPOs!"),a.Link.cgiFailConsecutive=
0;a.RefreshCGIPending=!1}function c(b){var d="",c="",f=0,g=0,e=0;if(b.length>0){for(var q=b.split("\n"),e=0;e<q.length;e++)if(a.prefixicmp("#",q[e]))d=q[e].search("N ="),d>-1&&(d=q[e].substring(d,q[e].length).split(" = "),d.length>1&&(d=parseInt(d[1],10),!isNaN(d)&&d!==void 0&&(f=d)));else if(c=q[e].split("="),c.length==2&&(d=c[0],c=c[1].trim(),d!==""||c!==void 0))(a.sl_updatePPOListByName(d,c)||a.FullRedraw===!0)&&a.scheduleRepaint(),g++;(b!==a.PreviousILR||a.FullRedraw===!0)&&a.scheduleOnlineTrendRefresh()}f!=
g&&a.err_append_ln("Shoud have "+f+" PPO's on server but found "+g+"!");a.ViewList.doViewGainIfRequired();a.PreviousILR=b}a.GETSRVINFO_CGISTR="cgi-bin/GetSrvInfo.exe";a.LSWEBSERVERINFONAMESTARTSTR="Server:";a.LSWEBSERVERINFOLSSRVACTIVSTARTSTR="LSWEBSERVER=1";a.LSWEBSERVERINFOCGIACTIVSTARTSTR="CGI=1";a.LSWEBSERVERINFOILRACTIVSTARTSTR="ILR=1";a.LSWEBSERVERINFOTRDACTIVSTARTSTR="TRD=1";a.LSWEBSERVERINFOALRACTIVSTARTSTR="ALR=1";a.LSWEBSERVERINFOALR2ACTIVSTARTSTR="ALR2=1";a.LSWEBSERVERINFOTRD2ACTIVSTARTSTR=
"TRD2=1";a.LSWEBSERVERINFOSEPSTR=",";a.LSWEBSERVERINFOVERSIONSTARTSTR="V.";a.LSWEBSERVERINFOILR2ACTIVSTARTSTR="ILR2=1";a.LSWEBSERVERINFOILR3ACTIVSTARTSTR="ILR3=1";a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR="charset=utf-8";a.RefreshCGIPending=!1;a.AjaxTimeout=1E4;a.PreviousILR=null;a.Link={xmlsrvinfo:!1,SrvInfo_Name:"",SrvInfo_LSSrvActiv:!1,SrvInfo_LSSrvVersion:0,SrvInfo_UTF8Activ:!1,SrvInfo_CGIActiv:!0,SrvInfo_CGIVersion:1,SrvInfo_ILRActiv:!1,SrvInfo_ILRVersion:0,SrvInfo_ILR2Activ:!1,SrvInfo_ILR2Version:0,
SrvInfo_ILR3Activ:!1,SrvInfo_ILR3Version:0,SrvInfo_TRDActiv:!1,SrvInfo_TRDVersion:0,SrvInfo_ALRActiv:!1,SrvInfo_ALRVersion:0,SrvInfo_ALR2Activ:!1,SrvInfo_ALR2Version:0,SrvInfo_TRD2Activ:!1,SrvInfo_TRD2Version:0,cgibinsrvinfo:!1,cgiArr:null,cgiFailMax:1,cgiFailConsecutive:0,cgiOverrideMimetypeFlag:!0,cgiOverrideMimeTypeFunction:function(a){a.overrideMimeType("text/csv;charset=ISO-8859-1")}};var f=0,q=0,o=0;a.getSrvExt=function(){var b=".exe";a.Link.SrvInfo_ILR3Activ===!0&&(b=".cgi");return b};a.loadSrvXML=
function(){$.ajax({type:"GET",global:!1,async:!1,cache:!0,beforeSend:function(b){a.Link.cgiOverrideMimetypeFlag===!0&&a.Link.cgiOverrideMimeTypeFunction(b)},url:"getsrvinfo.xml",dataType:"xml",timeout:a.AjaxTimeout,complete:function(){},success:function(b){a.Link.cgibinsrvinfo=!0;$(b).find("websrv > servicelist > service").each(function(){a.log_append_ln($(this).attr("name"));$(this).find("url").each(function(){a.log_append_ln($(this).text())})})},error:function(){a.Link.cgibinsrvinfo=!0}});return a.Link.xmlsrvinfo};
a.dontNeedEncoding=function(a){a=parseInt(a,10);return"a".charCodeAt(0)<=a&&a<="z".charCodeAt(0)?!0:"A".charCodeAt(0)<=a&&a<="Z".charCodeAt(0)?!0:"0".charCodeAt(0)<=a&&a<="9".charCodeAt(0)?!0:"-".charCodeAt(0)==a?!0:"_".charCodeAt(0)==a?!0:".".charCodeAt(0)==a?!0:"*".charCodeAt(0)==a?!0:!1};a.encode=function(b){var d="",b=String(b);a.Link.SrvInfo_UTF8Activ&&(b=unescape(encodeURIComponent(b)));return d=a.urlEncode(b)};a.urlEncode=function(b){for(var d="",c=0,f=0,g=!0,b=String(b),c=0;c<b.length;c++)f=
parseInt(b.charCodeAt(c),10),g=f<0?!0:a.dontNeedEncoding(f)?!1:!0,g===!1?d+=b.charAt(c):(d+="%",d+=f.toString(16));return d};a.loadAsynchData=function(b,d){var c="";a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?(c=b,a.cgiHost.length>0&&(c=a.cgiHost+b)):(c="cgi-bin/"+b,a.cgiHost.length>0&&(c=a.cgiHost+"cgi-bin/"+b));b!==null&&(a.getDebugLevel()>=2&&a.log_append_ln(" sc.loadAsynchData cgi call url = "+c),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.cgiOverrideMimetypeFlag===!0&&a.Link.cgiOverrideMimeTypeFunction(b)},
async:!0,cache:!0,url:c,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(a){d!==void 0&&d!==null&&d(a)},error:function(d,c,f){a.err_append_ln("HTTP CGI error (loadAsynchData, "+b+"): "+d.status+" "+c+" "+f)}}))};a.userCGIAction=function(b){var d=null,c=b;a.cgiHost.length>0&&(c=a.cgiHost+b);b!==null&&(a.getDebugLevel()>=2&&a.log_append_ln(" sc.userCGIAction cgi call url = "+c),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.cgiOverrideMimetypeFlag===!0&&a.Link.cgiOverrideMimeTypeFunction(b)},
async:!1,cache:!0,url:c,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(a){d=a},error:function(c,f,g){a.err_append_ln("HTTP CGI error (loadGeneralCGI, "+b+"): "+c.status+" "+f+" "+g);d=null}}));return d};a.loadGeneralCGI=function(b){var d="";a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?(d=b,a.cgiHost.length>0&&(d=a.cgiHost+b)):(d="cgi-bin/"+b,a.cgiHost.length>0&&(d=a.cgiHost+"cgi-bin/"+b));var c=null;b!==null&&(a.getDebugLevel()>=2&&a.log_append_ln(" sc.loadGeneralCGI cgi call url = "+
d),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.cgiOverrideMimetypeFlag===!0&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,cache:!0,url:d,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(a){c=a},error:function(d,f,g){a.err_append_ln("HTTP CGI error (loadGeneralCGI, "+b+"): "+d.status+" "+f+" "+g);c=null}}));return c};a.loadFileSource=function(b){var d=null;b!==null&&$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.cgiOverrideMimetypeFlag===!0&&
a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,cache:!0,url:b,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(a){d=a},error:function(c){a.err_append_ln("File Not Found! '"+b+"' (HTTP Status Code: '"+c.status+"')");d=null}});return d};a.loadSrvInfoCGI=function(){try{var b=a.GETSRVINFO_CGISTR;a.cgiHost.length>0&&(b=a.cgiHost+a.GETSRVINFO_CGISTR);a.getDebugLevel()>=2&&a.log_append_ln("sc.loadSrvInfoCGI  cgi call url = "+b);$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.cgiOverrideMimetypeFlag===
!0&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,cache:!0,url:b,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(b){a.getDebugLevel()>=2&&a.log_append_ln("loadSrvInfoCGI() GetSrvInfo cgi returned = "+b);a.Link.cgiArr=a.parseCGI_CSV_Content(b);var d=b=0,c="",f=0,g="";try{if(a.Link.cgiArr!==null){d=a.Link.cgiArr.length;for(b=0;b<d;b++)if(f=0,g="",c=a.Link.cgiArr[b][0],c.indexOf(a.LSWEBSERVERINFONAMESTARTSTR)>=0)try{a.Link.SrvInfo_Name=c.substring(a.LSWEBSERVERINFONAMESTARTSTR.length),
a.Link.SrvInfo_Name=a.Link.SrvInfo_Name.trim()}catch(e){a.log_append_ln("Error in parseGetSrvInfo() while gets Server name Info : "+e)}else if(c.indexOf(a.LSWEBSERVERINFOLSSRVACTIVSTARTSTR)>=0){a.Link.SrvInfo_LSSrvActiv=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOLSSRVACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_LSSrvVersion=parseFloat(g),isNaN(a.Link.SrvInfo_LSSrvVersion))))a.Link.SrvInfo_LSSrvVersion=
0}catch(h){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_LSSrvVersion Info : "+h)}}else if(c.indexOf(a.LSWEBSERVERINFOCGIACTIVSTARTSTR)>=0){a.Link.SrvInfo_CGIActiv=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOCGIACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_CGIVersion=parseFloat(g),isNaN(a.Link.SrvInfo_CGIVersion))))a.Link.SrvInfo_CGIVersion=0}catch(j){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_CGIVersion Info : "+
j)}}else if(c.indexOf(a.LSWEBSERVERINFOILRACTIVSTARTSTR)>=0){a.Link.SrvInfo_ILRActiv=!0;if(c.indexOf(a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR)>0)a.Link.SrvInfo_UTF8Activ=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOILRACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_ILRVersion=parseFloat(g),isNaN(a.Link.SrvInfo_ILRVersion))))a.Link.SrvInfo_ILRVersion=0}catch(q){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ILRVersion Info : "+
q)}}else if(c.indexOf(a.LSWEBSERVERINFOILR2ACTIVSTARTSTR)>=0){a.Link.SrvInfo_ILR2Activ=!0;if(c.indexOf(a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR)>0)a.Link.SrvInfo_UTF8Activ=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOILR2ACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_ILR2Version=parseFloat(g),isNaN(a.Link.SrvInfo_ILR2Version))))a.Link.SrvInfo_ILR2Version=0}catch(o){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ILR2Version Info : "+
o)}}else if(c.indexOf(a.LSWEBSERVERINFOILR3ACTIVSTARTSTR)>=0){a.Link.SrvInfo_ILR3Activ=!0;if(c.indexOf(a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR)>0)a.Link.SrvInfo_UTF8Activ=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOILR3ACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_ILR3Version=parseFloat(g),isNaN(a.Link.SrvInfo_ILR3Version))))a.Link.SrvInfo_ILR3Version=0}catch(k){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ILR3Version Info : "+
k)}}else if(c.indexOf(a.LSWEBSERVERINFOALRACTIVSTARTSTR)>=0){a.Link.SrvInfo_ALRActiv=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOALRACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_ALRVersion=parseFloat(g),isNaN(a.Link.SrvInfo_ALRVersion))))a.Link.SrvInfo_ALRVersion=0}catch(z){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ALRVersion Info : "+z)}}else if(c.indexOf(a.LSWEBSERVERINFOALR2ACTIVSTARTSTR)>=
0){a.Link.SrvInfo_ALR2Activ=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOALR2ACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_ALR2Version=parseFloat(g),isNaN(a.Link.SrvInfo_ALR2Version))))a.Link.SrvInfo_ALR2Version=0}catch(L){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ALR2Version Info : "+L)}}else if(c.indexOf(a.LSWEBSERVERINFOTRDACTIVSTARTSTR)>=0){a.Link.SrvInfo_TRDActiv=!0;try{if(f=
c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOTRDACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_TRDVersion=parseFloat(g),isNaN(a.Link.SrvInfo_TRDVersion))))a.Link.SrvInfo_TRDVersion=0}catch(P){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_TRDVersion Info : "+P)}}else if(c.indexOf(a.LSWEBSERVERINFOTRD2ACTIVSTARTSTR)>=0){a.Link.SrvInfo_TRD2Activ=!0;try{if(f=c.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,
a.LSWEBSERVERINFOTRD2ACTIVSTARTSTR.length),f>0&&(g=c.substring(f+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),g=g.trim(),g.length>0&&(a.Link.SrvInfo_TRD2Version=parseFloat(g),isNaN(a.Link.SrvInfo_TRD2Version))))a.Link.SrvInfo_TRD2Version=0}catch(M){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_TRD2Version Info : "+M)}}}}catch(E){a.log_append_ln("Error in parseGetSrvInfo() : "+E)}a.Link.cgibinsrvinfo=!0},error:function(){a.Link.cgibinsrvinfo=!1}})}catch(d){a.log_append_ln("Error in loadSrvInfoCGI(): "+
d)}a.getDebugLevel()>=2&&(a.log_append_ln("After loadSrvInfoCGI(): sc.Link.xmlsrvinfo = "+a.Link.xmlsrvinfo),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.cgibinsrvinfo = "+a.Link.cgibinsrvinfo),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_Name = "+a.Link.SrvInfo_Name),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_LSSrvActiv = "+a.Link.SrvInfo_LSSrvActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_LSSrvVersion = "+a.Link.SrvInfo_LSSrvVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_UTF8Activ = "+
a.Link.SrvInfo_UTF8Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_CGIActiv = "+a.Link.SrvInfo_CGIActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_CGIVersion = "+a.Link.SrvInfo_CGIVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILRActiv = "+a.Link.SrvInfo_ILRActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILRVersion = "+a.Link.SrvInfo_ILRVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR2Activ = "+a.Link.SrvInfo_ILR2Activ),
a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR2Version = "+a.Link.SrvInfo_ILR2Version),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR3Activ = "+a.Link.SrvInfo_ILR3Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR3Version = "+a.Link.SrvInfo_ILR3Version),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRDActiv = "+a.Link.SrvInfo_TRDActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRDVersion = "+a.Link.SrvInfo_TRDVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALRActiv = "+
a.Link.SrvInfo_ALRActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALRVersion = "+a.Link.SrvInfo_ALRVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALR2Activ = "+a.Link.SrvInfo_ALR2Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALR2Version = "+a.Link.SrvInfo_ALR2Version),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRD2Activ = "+a.Link.SrvInfo_TRD2Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRD2Version = "+a.Link.SrvInfo_TRD2Version));
return a.Link.cgibinsrvinfo};a.getServerInfo=function(){a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC&&(a.Link.xmlsrvinfo===!1?(a.loadSrvInfoCGI(),a.Link.cgibinsrvinfo===!1?a.log_append_ln("ERROR getServerInfo CGI failed."):a.log_append_ln("getServerInfo CGI made.")):a.log_append_ln("getServerInfo XML OK."))};a.initSpiderLink=function(){var b=null;location?b=location.origin:a.log_append_ln(" location urlOrigin is not supported by this browser.");if(a.TARGET_TYPE_NR!=a.TARGET_TYPE_SAIA&&a.TARGET_TYPE_NR!=
a.TARGET_TYPE_WAGO&&a.HMI_CGI_RELATIVTOROOT!=void 0&&a.HMI_CGI_RELATIVTOROOT!=a.CGI_RELATIVTOROOT_DOCBASE&&b!=null&&b!=void 0)a.cgiHost=b,a.cgiHost.lastIndexOf("/",a.cgiHost.length-1)!=a.cgiHost.length-1&&a.cgiHost.lastIndexOf("\\",a.cgiHost.length-1)!=a.cgiHost.length-1&&(a.cgiHost+="/"),a.HMI_CGI_RELATIVTOROOT!=a.CGI_RELATIVTOROOT_WEBROOT&&(a.cgiHost+=a.HMI_CGI_RELATIVTOROOT),a.cgiHost.lastIndexOf("/",a.cgiHost.length-1)!=a.cgiHost.length-1&&a.cgiHost.lastIndexOf("\\",a.cgiHost.length-1)!=a.cgiHost.length-
1&&(a.cgiHost+="/");a.getDebugLevel()>=2&&(a.log_append_ln("sc.initSpiderLink  urlOrigin = "+b),a.log_append_ln("sc.initSpiderLink  sc.HMI_CGI_RELATIVTOROOT = "+a.HMI_CGI_RELATIVTOROOT),a.log_append_ln("sc.initSpiderLink  sc.cgiHost = "+a.cgiHost));a.getServerInfo()};a.sl_psc_writeValue=function(b,c){var d=a.sl_getPPOWriteAddress(b),f=-1,f=0,f="",f=d.indexOf("_4109_%s");if(f>=-1)f=c.length,d=d.replace("_4109_%s","_"+(4096+f)+"_%s");$.ajax({type:"POST",url:"plcpost",contentType:"text/xml",dataType:"text/xml",
data:d+"="+c})};a.sl_writeValue=function(b,c){var d="";a.getDebugLevel()>=2&&(f=a.getTimestamp_ms());a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?a.sl_psc_writeValue(b,c):(a.Link.SrvInfo_ILR3Activ===!0?(d="cgi-bin/writeVal.cgi?"+a.encode(b)+"="+a.encode(c),a.cgiHost.length>0&&(d=a.cgiHost+"cgi-bin/writeVal.cgi?"+a.encode(b)+"="+a.encode(c))):(d="cgi-bin/writeVal.exe?"+a.encode(b)+"+"+a.encode(c),a.cgiHost.length>0&&(d=a.cgiHost+"cgi-bin/writeVal.exe?"+a.encode(b)+"+"+a.encode(c))),a.getDebugLevel()>=
2&&a.log_append_ln("sc.sl_writeValue( "+b+" , "+c+" ) \nrequestURLWriteVal =  "+d),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.cgiOverrideMimetypeFlag===!0&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,timeout:a.AjaxTimeout,cache:!0,url:d,dataType:"text",complete:function(){},success:function(d){a.getDebugLevel()>=2&&a.log_append_ln("Ajax succes for sc.sl_writeValue( "+b+" , "+c+" ) \ncgi returned = "+d)},error:function(){a.log_append_ln("Ajax Error for sc.sl_writeValue( "+b+" , "+
c+" ) ")}}))};a.SL_refreshPPO=function(){var f=0,f="";if(a.co_readSkipRefreshCO()===1||a.RefreshCGIPending===!0)a.FullRedraw===!0&&a.scheduleRepaint();else if(a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC){var e=!1;a.RefreshCGIPending=!0;for(f=0;f<a.ViewList.getNumViews();f++)if(a.ViewList.getViewByIndex(f).SVGPPOArray!==null||a.g_OnlineTrendEmitter.length>0&&a.stringcmp(a.ViewList.getViewByIndex(f).ViewName,a.MsgBox)===!1)e=a.ViewList.getViewByIndex(f).ViewName,$.ajax({url:"/plc?"+e,type:"GET",cache:!0,
global:!1,contentType:"text",dataType:"text",timeout:a.AjaxTimeout,async:!0,complete:d,success:c,error:g}),e=!0;if(!e)a.RefreshCGIPending=!1,a.FullRedraw===!0&&a.scheduleRepaint()}else{var q=e=f="",e="</item_list></body",o=0,q="";if(a.g_PPOList){e="";for(q in a.g_PPOList)if(a.sl_isPPOScheduled(q))a.g_PPOList[q].resolved=a.rl_resolveInfoName(a.g_PPOList[q].address),e+="<i><n>"+a.g_PPOList[q].resolved+"</n></i>",o++;o>0&&(q="<body><version>"+a.ILR_VERSION+"</version>",q+="<client>"+a.CLIENT+"</client><client_ver>"+
a.HMI_VERSION+"</client_ver>",q+="<file_name>vRhz1</file_name>",q+="<action>Read</action>",q+="<item_list_size>"+o+"</item_list_size><item_list>",f=q,f+=e,f+="</item_list></body>")}f===""?a.FullRedraw===!0&&a.scheduleRepaint():b(f)}};return a}(_SCIntern||{});_SCIntern=function(a){a.Sha256_hash=function(k){var k=k.utf8Encode(),e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,
2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];k+=String.fromCharCode(128);for(var d=Math.ceil((k.length/4+2)/16),g=Array(d),c=0;c<d;c++){g[c]=Array(16);for(var f=0;f<16;f++)g[c][f]=k.charCodeAt(c*64+
f*4)<<24|k.charCodeAt(c*64+f*4+1)<<16|k.charCodeAt(c*64+f*4+2)<<8|k.charCodeAt(c*64+f*4+3)}g[d-1][14]=(k.length-1)*8/Math.pow(2,32);g[d-1][14]=Math.floor(g[d-1][14]);g[d-1][15]=(k.length-1)*8&4294967295;for(var k=Array(64),q,o,h,j,p,s,n,c=0;c<d;c++){for(var u=0;u<16;u++)k[u]=g[c][u];for(u=16;u<64;u++)k[u]=a.Sha256_sigma1(k[u-2])+k[u-7]+a.Sha256_sigma0(k[u-15])+k[u-16]&4294967295;f=b[0];q=b[1];o=b[2];h=b[3];j=b[4];p=b[5];s=b[6];n=b[7];for(u=0;u<64;u++){var t=n+a.Sha256_Sigma1(j)+a.Sha256_Ch(j,p,s)+
e[u]+k[u],m=a.Sha256_Sigma0(f)+a.Sha256_Maj(f,q,o);n=s;s=p;p=j;j=h+t&4294967295;h=o;o=q;q=f;f=t+m&4294967295}b[0]=b[0]+f&4294967295;b[1]=b[1]+q&4294967295;b[2]=b[2]+o&4294967295;b[3]=b[3]+h&4294967295;b[4]=b[4]+j&4294967295;b[5]=b[5]+p&4294967295;b[6]=b[6]+s&4294967295;b[7]=b[7]+n&4294967295}e=a.Sha256_toHexStr(b[0]);d=a.Sha256_toHexStr(b[1]);g=a.Sha256_toHexStr(b[2]);c=a.Sha256_toHexStr(b[3]);k=a.Sha256_toHexStr(b[4]);f=a.Sha256_toHexStr(b[5]);q=a.Sha256_toHexStr(b[6]);b=a.Sha256_toHexStr(b[7]);
return e+d+g+c+k+f+q+b};a.Sha256_ROTR=function(a,e){return e>>>a|e<<32-a};a.Sha256_Sigma0=function(k){var e=a.Sha256_ROTR(2,k),b=a.Sha256_ROTR(13,k),k=a.Sha256_ROTR(22,k);return e^b^k};a.Sha256_Sigma1=function(k){var e=a.Sha256_ROTR(6,k),b=a.Sha256_ROTR(11,k),k=a.Sha256_ROTR(25,k);return e^b^k};a.Sha256_sigma0=function(k){var e=a.Sha256_ROTR(7,k),b=a.Sha256_ROTR(18,k);return e^b^k>>>3};a.Sha256_sigma1=function(k){var e=a.Sha256_ROTR(17,k),b=a.Sha256_ROTR(19,k);return e^b^k>>>10};a.Sha256_Ch=function(a,
e,b){return a&e^~a&b};a.Sha256_Maj=function(a,e,b){return a&e^a&b^e&b};a.Sha256_toHexStr=function(a){for(var e="",b,d=7;d>=0;d--)b=a>>>d*4&15,e+=b.toString(16);return e=e.toUpperCase()};if(typeof String.prototype.utf8Encode=="undefined")String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))};if(typeof String.prototype.utf8Decode=="undefined")String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(a){return this}};a.ACT_executeAction=function(k,
e,b,d,g){var c=0,c=0,f="",q="",o=0;e!==null&&b!==null&&(c=a.RW_readSource(e,b));switch(k){case 14:o=function(a){for(var b=0;a%1;)a*=10,b++;return b};c=parseFloat(c);isNaN(c)===!0&&(c=0);d!==null&&g!==null&&(q=a.RW_readSource(d,g),q=parseFloat(q));isNaN(q)===!0&&(q=0);f=o(q);o=o(c);f=(q+c).toFixed(f>o?f:o);a.RW_writeSource(d,g,f.toString());break;case 17:a.log_append_ln("todo REMOVESOURCEFROMDEST");break;case 18:c=parseInt(c,10);if(isNaN(c)!==!0){q=String(a.RW_readSource(d,g));q=q.split(/\\n/);for(o=
0;o<q.length;o++)a.prefixicmp(a.FVLINESPECLINESTARTSTR,q[o])===!0&&c++,c!==o&&(f+=q[o],o<q.length-1&&(f+=a.FVLINESEPTOKEN2))}a.RW_writeSource(d,g,f);break;case 40:c=a.atoi(c);isNaN(c)===!0&&(c=0);a.Sleep(c);break;case 202:a.closeMsgBox();break;default:a.log_append_ln("Unkown action id: "+k)}};a.ACT_executeOperation=function(k,e,b,d,g,c,f,q,o,h){var j=null,p=null,s=null,n=null,u=!1,t=0,m=0;try{var r=null;if(!(k===void 0||k===null))if(!(e===void 0||e===null))if(s=a.RW_readSource(k,e),!(b===void 0||
b===null))if(!(d===void 0||d===null)){d=="var6"&&a.noop();g!==void 0&&g!==null&&c!==void 0&&c!==null&&(j=a.RW_readSource(g,c));f!==void 0&&f!==null&&q!==void 0&&q!==null&&(p=a.RW_readSource(f,q));o!==void 0&&o!==null&&h!==void 0&&h!==null&&a.RW_readSource(o,h);if(s=="+"&&j!==null&&p!==null)n=parseFloat(j)+parseFloat(p);else if(s=="-"&&j!==null&&p!==null)n=parseFloat(j)-parseFloat(p);else if(s=="*"&&p!==null)n=parseFloat(j)*parseFloat(p);else if(s=="/"&&j!==null&&p!==null)parseFloat(p)!==0&&(n=parseFloat(j)/
parseFloat(p));else if(s=="%"&&j!==null&&p!==null)parseFloat(p)!==0&&(n=parseFloat(j)%parseFloat(p));else if(a.stringcmp("ADD",s)&&j!==null&&p!==null)u=!0,n=parseInt(j,10)+parseInt(p,10);else if(a.stringcmp("SUB",s)&&j!==null&&p!==null)u=!0,n=parseInt(j,10)-parseInt(p,10);else if(a.stringcmp("MULT",s)&&j!==null&&p!==null)u=!0,n=parseInt(j,10)*parseInt(p,10);else if(a.stringcmp("DIV",s)&&j!==null&&p!==null)u=!0,parseInt(p,10)!==0&&(n=parseInt(j,10)/parseInt(p,10));else if(a.stringcmp("AND",s)&&j!==
null&&p!==null)n=j&p;else if(a.stringcmp("OR",s)&&j!==null&&p!==null)n=j|p;else if(a.stringcmp("XOR",s)&&j!==null&&p!==null)n=j^p;else if(a.stringcmp("NAND",s)&&j!==null&&p!==null)n=!(j&p);else if(a.stringcmp("NOR",s)&&j!==null&&p!==null)n=!(j|p);else if(a.stringcmp("XNOR",s)&&j!==null&&p!==null)n=!(j^p);else if(a.stringcmp("NOT",s)&&j!==null)n=~j;else if(a.stringcmp("LSL",s)&&j!==null&&p!==null)n=j>>>0<<(p>>>0),n>>>=0;else if(a.stringcmp("LSR",s)&&j!==null&&p!==null)a.log_append_ln("ERROR LSR Operation not implemented in HTML5 !");
else if(a.stringcmp("ASR",s)&&j!==null&&p!==null)n=j>>(p>>>0);else if(a.stringcmp(s,"STRLEN")&&j!==null)n=j.length;else if(a.stringcmp(s,"GETCHAR2STR")&&j!==null&&p!==null)n=j[parseInt(p,10)];else if(a.stringcmp(s,"GETCHAR2INT")&&j!==null&&p!==null)u=!0,n=j[parseInt(p,10)].charCodeAt(0);else if(a.stringcmp(s,"GETINDEXOF")&&j!==null&&p!==null)u=!0,n=j.indexOf(p);else if(a.stringcmp(s,"SIN")&&j!==null)n=Math.sin(j);else if(a.stringcmp(s,"COS")&&j!==null)n=Math.cos(j);else if(a.stringcmp(s,"TAN")&&j!==
null)n=Math.tan(j);else if(a.stringcmp(s,"ASIN")&&j!==null)n=Math.asin(j);else if(a.stringcmp(s,"ACOS")&&j!==null)n=Math.acos(j);else if(a.stringcmp(s,"ATAN")&&j!==null)n=Math.atan(j);else if(a.stringcmp(s,"SINH")&&j!==null)n=Math.sinh(j);else if(a.stringcmp(s,"COSH")&&j!==null)n=Math.cosh(j);else if(a.stringcmp(s,"TANH")&&j!==null)n=Math.tanh(j);else if(a.stringcmp(s,"ASINH")&&j!==null)n=Math.asinh(j);else if(a.stringcmp(s,"ACOSH")&&j!==null)n=Math.acosh(j);else if(a.stringcmp(s,"ATANH")&&j!==null)n=
Math.atanh(j);else if(a.stringcmp(s,"SQRT")&&j!==null)n=Math.sqrt(j);else if(a.stringcmp(s,"EXP")&&j!==null)n=Math.exp(j);else if(a.stringcmp(s,"LOG")&&j!==null)n=Math.log(j);else if(a.stringcmp(s,"LOG10")&&j!==null)n=Math.log10(j);else if(a.stringcmp("POW",s)&&j!==null&&p!==null)n=Math.pow(j,p);else if(a.stringcmp("CONVERT_UTS2TXT",s)&&p!==null)n="";else if(a.stringcmp("CONVERT_TXT2UTS",s)&&p!==null)n="";else if(a.stringcmp("UTS2TXT",s)&&j!==null){p===null&&(p=a.readDateTimeFormat());var w=parseInt(j,
10);isNaN(w)===!1&&(w*=1E3,n=a.DateTime_ReadDT(p,a.SpecialCO.dateTimeLocalNow.name,!a.SpecialCO.mbTmzEn.value,new Date(w),null,!0))}else a.stringcmp("TXT2UTS",s)&&j!==null?(p===null&&(p=a.readDateTimeFormat()),n=a.DateTime_ReadDT(p,a.SpecialCO.dateTimeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,j,!0)):a.stringcmp("SHA256",s)&&j!==null?n=a.Sha256_hash(j):a.stringcmp("BASE64ENC",s)&&j!==null?n=a.Base64.encode(j):a.stringcmp("BASE64HENC",s)&&j!==null?(k={buffer:"",nByte:0,buffer:"",nByte:0},a.str_ascii2byte(j,
k),k.nByte>0&&(n=a.Base64.encode(k.Buffer))):a.stringcmp("BASE64DEC",s)&&j!==null?n=a.Base64.decode(j):a.stringcmp("BSET",s)&&j!==null?(n="",m=a.parseNumber(j),t=a.RW_readSource(b,d),t=parseInt(t,10),n=a.BIT_setBit(t,m)):a.stringcmp("BCLR",s)&&j!==null&&(n="",m=a.parseNumber(j),t=a.RW_readSource(b,d),t=parseInt(t,10),n=a.BIT_clearBit(t,m));n!==null&&isNaN(n)===!1?u===!0?(n=parseInt(n,10),a.RW_writeSource(b,d,n)):isNaN(n)===!1&&(r=parseFloat(n),isNaN(r)||(n=a.toFixed(r,6)),a.RW_writeSource(b,d,n)):
n!==null&&isNaN(n)===!0&&a.RW_writeSource(b,d,n)}}catch(x){b="hmi.js/sc.ACT_executeOperation",b+="There was an error on this page.\n\n",b+="Error description: "+x.message+"\n\n",b+="Click OK to continue.\n\n",a.getDebugLevel()>=1&&window.alert(b)}};return a}(_SCIntern||{});_SCIntern=function(a){function k(b,d){var g=new XMLHttpRequest;g.open("GET",b,!0);g.responseType="arraybuffer";g.onreadystatechange=function(){g.readyState==g.DONE&&(g.status==200&&g.response?(a.getDebugLevel()>=2&&a.log_append_ln(" getServerTCRFileToArrayBuffer downloaded : "+b+"\n xhr.status "+g.status+"\n xhr.statusText "+g.statusText),d(g.response)):(a.log_append_ln(" getServerTCRFileToArrayBuffer Failed to download: "+b+"\n xhr.status "+g.status+"\n xhr.statusText "+g.statusText),d(null)))};
g.send()}function e(b){var d="";k(b,function(g){if(g==null||g==void 0)d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,a.g_FileEncodeStrList[b]=d;else{a.getDebugLevel()>=2&&a.log_append_ln("after getSrvTCRFileBOMEncodeStr2 "+b+" m.byteLength = "+g.byteLength);var c=new Uint8Array(g);for(i=0;i<g.byteLength&&i<4;i++)a.getDebugLevel()>=2&&a.log_append_ln("sc.getSrvTCRFileBOMEncodeStr2 bufView ["+i+"] = "+c[i]);g.byteLength>=2&&((c[0]&255)==a.UNICODEFILE_UTF16LE_BOM0&&(c[1]&255)==a.UNICODEFILE_UTF16LE_BOM1?
(d="text/csv;charset="+a.UNICODEFILE_UTF16LE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d):(c[0]&255)==a.UNICODEFILE_UTF16BE_BOM0&&(c[1]&255)==a.UNICODEFILE_UTF16BE_BOM1&&(d="text/csv;charset="+a.UNICODEFILE_UTF16BE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d));g.byteLength>=3&&(c[0]&255)==a.UNICODEFILE_UTF8_BOM0&&(c[1]&255)==a.UNICODEFILE_UTF8_BOM1&&(c[2]&255)==a.UNICODEFILE_UTF8_BOM2&&(d="text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR,a.g_FileEncodeStrList[b]=d);d.length<=0&&(d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,
a.g_FileEncodeStrList[b]=d);a.loadAndParseTCRFile(b)}});return d}a.MsgBoxErrorFlag=!1;a.MsgBoxScheduled=!1;a.TCR_outOfRange=function(b,d,g){a.MsgBoxErrorFlag=!0;a.err_append_ln("Value is out of Range!\n- Value: "+b+"\n- Min: "+d+"\n- Max: "+g)};a.VM_getAndResetMsgBoxErrorFlag=function(){var b=!1;if(a.MsgBoxErrorFlag===!0)a.scheduleMsgBoxOpen(),a.MsgBoxErrorFlag=!1,b=!0;return b};a.scheduleMsgBoxOpen=function(){a.MsgBoxScheduled=!0};a.isMsgBoxScheduled=function(){return a.MsgBoxScheduled};a.resetMsgBoxScheduled=
function(){a.MsgBoxScheduled=!1};a.openMsgBox=function(){a.hideInputField();if(a.MsgBox.length<=0){var b="",b=a.RW_readSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name);window.alert(b);a.initMsgBoxVars()}else $("#SC_MsgBox").css("z-index","1"),a.unlockInstance("#SC_MsgBox"),a.lockInstance("#SC_View_001"),a.doInstanceRepaint("#SC_MsgBox")};a.initMsgBoxVars=function(){a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name,"");a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBoxNr.name,
"0")};a.closeMsgBox=function(){a.initMsgBoxVars();a.MsgBox.length>0&&($("#SC_MsgBox").css("z-index","-1"),a.lockInstance("#SC_MsgBox"),a.unlockInstance("#SC_View_001"),a.doInstanceRepaint("#SC_View_001"))};a.err_append_ln=function(b){var d="",d="",d=0;a.log_append_ln(b+"\n");d=a.RW_readSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name);d.length>0||d.length>100?d+=a.FVLINESEPTOKEN2+b:d=b;a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name,d);d=a.RW_readSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBoxNr.name);
d=parseInt(d,10);isNaN(d)===!0?(a.log_append_ln("ERROR in sc.err_append_ln invalid read sc.SpecialCO.mbMsgBoxNr.value = "+d),d=1):d++;d=d.toString();a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBoxNr.name,d)};a.getSrvTCRFileBOMEncodeStr=function(b){var d="";b!==null&&b!==void 0&&(a.g_FileEncodeStrList[b]===void 0&&e(b),a.g_FileEncodeStrList[b]!==void 0&&(d=a.g_FileEncodeStrList[b]));return d};a.loadTCRFileBlocking=function(b){var d=null,g="";a.getDebugLevel()>=2&&a.log_append_ln("Start loadTCRFileBlocking "+
b);d=a.getSrvTCRFileBOMEncodeStr(b);d==void 0||d==null||d.length==0?a.getDebugLevel()>=1&&a.log_append_ln("loadTCRFileBlocking waits for encoding check ... for "+b):(a.getDebugLevel()>=1&&a.log_append_ln("loadTCRFileBlocking encoding found : "+d+" for "+b),$.ajax({type:"GET",global:!1,beforeSend:function(a){a.overrideMimeType(d)},async:!1,cache:!0,url:b,complete:function(){},success:function(a){g=a},error:function(){g=""}}));return g};a.parse_TCR_CSV_File=function(b){for(var b=b.split(/\n/),d=0,g=
null,c=0,f=!1,e=!1,o=0,h=0,j=0,k=0,d=b.length,c=0;c<d;c++){g=b[c].split(";");k=g.length;for(j=0;j<k;j++)g[j]===" "&&(g[j]="");if(g!==null)if(a.prefixicmp("#!--",g[0])===!0){a.prefixicmp("#!-- PPO FILE",g[0])===!0&&(f=!0);if(a.prefixicmp("#!-- Start PPO",g[0])||a.prefixicmp("#!-- TYPE = 1",g[0])===!0)e=f=!0;a.prefixicmp("#!-- N = ",g[0])===!0&&(o=parseInt(g[0].substr(8),10),a.getDebugLevel()>=2&&a.log_append_ln("nPPO: "+o))}else if(f===!0&&e===!0)if(a.TARGET_TYPE_NR>=99&&a.TARGET_TYPE_NR<200){if(h<
o&&g[0].length>0){j=new a.PPOListItemType;if(j!==null){j.regView=0;j.regHMI=!1;j.resolved="";j.value="";if(g[0])j.name=g[0];if(g[1])j.address=g[1];if(g[2])j.min=g[2];if(g[3])j.max=g[3];if(g[4])j.format=g[4];if(g[5])j.unit=g[5];if(g[6])j.writeAddr=g[6];if(g[7])j.scale_Fact=g[7];if(g[8])j.scale_Offset=g[8];if(g[9])j.scale_Min=g[9];if(g[10])j.scale_Max=g[10];a.g_PPOList[j.name]=j}h++}}else{a.showCriticalErrorScreen(3,"Unsupported *.tcr file type (PPO Initialisation File)<br>Unbekannter *.tcr Dateityp (PPO Initialisierung)");
break}}};a.loadAndParseTCRFile=function(b){var d="",d=a.loadTCRFileBlocking(b);d.length>0?a.parse_TCR_CSV_File(d):a.getDebugLevel()>=2&&a.log_append_ln("Warning Empty or missing or to reload(due to encoding) TCR file")};a.PPOListItemType=function(){this.offset=this.gain=this.maxvalue=this.minvalue=this.unit=this.scale_Max=this.scale_Min=this.scale_Offset=this.scale_Fact=this.writeAddr=this.format=this.max=this.min=this.address=this.resolved=this.name=this.value="";this.regView=0;this.regHMI=!1};a.TCR_convertToValueFormat=
function(b,d){var g=0,c=0,f=0,e=-1,e=0,f=!1,e=0,g=null,c=g=e=0;if(a.prefixicmp("dec.",b)){d.rValue=d.rValue.toString();e=d.rValue.indexOf(".");if(e!=-1)d.rValue=d.rValue.substring(0,e);e=parseInt(b.substring(4,b.len),10);if(e>0){if(d.rValue[0]=="-"||d.rValue[0]=="+")d.rValue[0]=="-"&&(f=!0),d.rValue=d.rValue.substring(1,d.rValue.len);g=a.strlen(d.rValue);if(g<=e){c=e-g+1;for(g=e+1;c--;)a.util_insertChar("0",d)}a.insertStr(g-e,".",d);f===!0&&a.insertStr(0,"-",d)}}else if(a.prefixicmp("flt2dec",b)){e=
parseInt(b.substring(7,b.len),10);if(f=isNaN(e)===!1){f=e;e=0;e="";g=!1;e=parseFloat(d.rValue);if(f<7&&isNaN(e)===!1){var g=1,c=0,g="",o=c=c=0;if(f<0||f>7)e=e.toString();else{g=Math.pow(10,f);g==0&&(g=1);c=Math.floor(e*g);c/=g;g=c.toString();c=g.indexOf(".");if(f!==0&&c===-1){g+=".";for(c=0;c<f;c++)g+="0"}else if(f!==0&&c>=0&&(o=f-(g.length-(c+1)),o>0))for(c=0;c<o;c++)g+="0";e=g}d.rValue=e;g=!0}f=g===!1}if(f)return!1}else if(a.prefixicmp("int2hex",b)){if(f=a.atoi(d.rValue),isNaN(f)===!1)d.rValue=
"H "+f.toString(16).toUpperCase()}else if(a.prefixicmp("M_INT",b)){if(f=a.atoi(d.rValue),isNaN(f)===!1)isNaN(f)===!1&&f>32767&&(f-=65536),d.rValue=f}else if(a.prefixicmp("M_DINT",b)){if(f=a.atoi(d.rValue),isNaN(f)===!1)isNaN(f)===!1&&f>2147483647&&(f-=4294967296),d.rValue=f}else if(a.prefixicmp("time_",b)){if(e=b.substring(5,b.length),e=a.atoi(e),isNaN(e)===!1)d.rValue=a.getTimeFormatInt(d.rValue,e,!1)}else if(a.prefixicmp("date_",b)){if(e=b.substring(5,b.length),e=a.atoi(e),isNaN(e)===!1)d.rValue=
a.getTimeFormatInt(d.rValue,e,!0)}else if(a.prefixicmp("ADD",b)&&(g=/^ADD(\d*):GAIN(\d*)/.exec(b),g!==null&&(e=parseFloat(g[1]),g=parseFloat(g[2]),c=parseFloat(d.rValue),isNaN(e)===!1&&isNaN(g)===!1&&isNaN(c)===!1)))d.rValue=c*g+e};a.TCR_convertToRawValueByFormat=function(b,d){a.TCR_getUnFormatedValueAndCheckMinMax(d,b,"","",0)};a.TCR_readFormatedPPO=function(b,d){var g=b.format,c=1,f=0,e=0;b.scale_Fact!==" "&&isNaN(a.atof(b.scale_Fact))===!1&&(c=a.atof(b.scale_Fact));b.scale_Offset!==" "&&isNaN(a.atof(b.scale_Offset))===
!1&&(f=a.atof(b.scale_Offset));if(c!=1||f!==0)if(e=parseFloat(d.rValue),isNaN(e)===!1)d.rValue=e*c+f;a.TCR_convertToValueFormat(g,d)};a.TCR_readFormatedPPOValue=function(b,d,g){a.TCR_readFormatedPPO(g,d)};a.TCR_invalidEntry=function(){a.MsgBoxErrorFlag=!0;a.err_append_ln("Invalid entry ! ")};a.TCR_getPPOStruct=function(b){return a.g_PPOList[b]};a.TCR_getUnformatedValue=function(b,d,g){var c=0,f=c=0,c=0;if(d&&b.rValue)if(a.prefixicmp("dec.",d)){if(c=a.atoi(d.substring(4,d.length)),c>0&&c<10&&(f=a.atof(b.rValue),
isNaN(f)===!1)){for(;c-- >0;)f*=10;b.rValue=f.toString()}}else if(g&&(a.prefixicmp("int2hex",d)||a.prefixicmp("hex",d)))c=0,a.prefixicmp("h ",b.rValue)&&(c=2),b.rValue=b.rValue.substring(c,c.len),c=a.ahextoi(b.rValue),isNaN(c)===!0?a.TCR_invalidEntry():b.rValue=c};a.TCR_getUnFormatedValueAndCheckMinMax=function(b,d,g,c,f){var e=0,o=0,h=0,e=e=h=h=h=e=0,h=null,j=h=e=0;if(a.prefixicmp("string",d)){if(e=parseInt(g,10),o=a.atoi(c),e>=0&&o>=e&&(f=a.strlen(b.rValue),f>o?(a.TCR_outOfRange(b.rValue,g,c),b.rValue=
b.rValue.substring(0,o)):f<e&&a.TCR_outOfRange(b.rValue,g,c),a.VM_getAndResetMsgBoxErrorFlag()))return!1}else if(a.prefixicmp("dec",d)||a.prefixicmp("hex",d)||a.prefixicmp("int2hex",d)){if(a.prefixicmp("dec.",d)){if(h=a.atoi(d.substring(4,d.length)),h>0&&h<10)if(e=a.atof(b.rValue),isNaN(e)===!1){for(;h-- >0;)e*=10;b.rValue=e.toString()}else a.TCR_invalidEntry()}else if(a.prefixicmp("int2hex",d))e=0,a.prefixicmp("h ",b.rValue)&&(e=2),b.rValue=b.rValue.substring(e,e.len),h=a.ahextoi(b.rValue),isNaN(h)===
!0?a.TCR_invalidEntry():b.rValue=h;else if(a.prefixicmp("hex2int",d))for(o=0;o<b.rValue.length;o++)if(b.rValue[o]=="h"&&o+1<b.rValue.length&&(b.rValue[o]="0",b.rValue[o+1]="x"),e=parseInt(b.rValue.substr(o),10),!isNaN(e)){b.rValue=e;break}if(!f&&(h=a.atof(b.rValue),isNaN(h)===!1?(e=a.atof(g),isNaN(e)===!1&&h<e&&a.TCR_outOfRange(b.rValue,g,c),o=a.atof(c),isNaN(o)===!1&&h>o&&a.TCR_outOfRange(b.rValue,g,c)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag()))return!1}else if(a.prefixicmp("int",d)||
a.prefixicmp("unsignedint",d)||a.prefixicmp("UDINT",d)||a.prefixicmp("DWORD",d)||a.prefixicmp("short",d)||a.prefixicmp("unsignedshort",d)||a.prefixicmp("UINT",d)||a.prefixicmp("WORD",d)||a.prefixicmp("byte",d)){if(h=a.atof(b.rValue),isNaN(h)===!1?(e=a.atof(g),isNaN(e)===!1&&h<e&&a.TCR_outOfRange(b.rValue,g,c),o=a.atof(c),isNaN(o)===!1&&h>o&&a.TCR_outOfRange(b.rValue,g,c)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("long",d)){if(h=a.atof(b.rValue),isNaN(h)===
!1?(e=a.atof(g),isNaN(e)===!1&&h<e&&a.TCR_outOfRange(b.rValue,g,c),o=a.atof(c),isNaN(o)===!1&&h>o&&a.TCR_outOfRange(b.rValue,g,c)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("unsignedlong",d)){if(h=a.atof(b.rValue),isNaN(h)===!1?(e=a.atof(g),isNaN(e)===!1&&h<e&&a.TCR_outOfRange(b.rValue,g,c),o=a.atof(c),isNaN(o)===!1&&h>o&&a.TCR_outOfRange(b.rValue,g,c)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("float",d)||a.prefixicmp("double",
d)||a.prefixicmp("flt2dec",d)){if(e=a.atof(b.rValue),isNaN(e)===!1?(h=a.atof(g),isNaN(h)===!1&&e<h&&a.TCR_outOfRange(b.rValue,g,c),h=a.atof(c),isNaN(o)===!1&&e>h&&a.TCR_outOfRange(b.rValue,g,c)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("M_DINT",d))if(h=a.atoi(b.rValue),isNaN(h)===!1)g=h,isNaN(g)===!1&&g<0&&(g+=4294967296),b.rValue=g;else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("M_INT",d))if(h=a.atoi(b.rValue),
isNaN(h)===!1)g=h,isNaN(g)===!1&&g<0&&(g+=65536),b.rValue=g;else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("time_",d))if(e=d.substring(5,d.length),e=a.atoi(e),isNaN(e)===!1)b.rValue=a.DateTime_ReadDT(e,a.SpecialCO.dateTimeLocalNow.name,!0,null,b.rValue,!1);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("date_",d))if(e=d.substring(5,d.length),e=a.atoi(e),isNaN(e)===!1)b.rValue=a.DateTime_ReadDT(e,a.SpecialCO.dateTimeLocalNow.name,
!0,null,b.rValue,!0);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("ADD",d)&&(h=/^ADD(\d*):GAIN(\d*)/.exec(d),h!==null&&(e=parseFloat(h[1]),h=parseFloat(h[2]),j=parseFloat(b.rValue),isNaN(e)===!1&&isNaN(h)===!1&&isNaN(j)===!1)))j-=e,h!=0&&(j/=h),b.rValue=j;return!0};a.TCR_writeFormatedPPOValue=function(b,d){var g=0,c=1,f=0,e=g=0,o=0,h=0,j=null;d.writeEnabled=!0;if(b!==null){if(h=b.scale_Min)g=parseFloat(h),isNaN(g)&&(h=null);if(o=b.scale_Max)e=parseFloat(o),
isNaN(e)&&(o=null);if(h!==null||o!==null)if(h.length>0||o.length>0)if(a.TCR_getUnformatedValue(d,b.format,1),j=parseFloat(d.rValue),isNaN(j)===!1){if(h&&j<g)a.TCR_outOfRange(d.rValue,h,o),d.writeEnabled=!1;if(o&&j>e)a.TCR_outOfRange(d.rValue,h,o),d.writeEnabled=!1}else d.writeEnabled=!1,a.TCR_invalidEntry();if(d.writeEnabled===!1)return a.VM_getAndResetMsgBoxErrorFlag(),1;b.scale_Fact!==" "&&isNaN(a.atof(b.scale_Fact))===!1&&(c=a.atof(b.scale_Fact));b.scale_Offset!==" "&&isNaN(a.atof(b.scale_Offset))===
!1&&(f=a.atof(b.scale_Offset));if(c!==1||f!==0)if(g=parseFloat(d.rValue),isNaN(0)===!1)g-=f,c!==0&&(g/=c),d.rValue=g;if(b.format)h=b.min,h!==" "&&(g=parseFloat(h),isNaN(g)&&(h=null)),o=b.max,o!==" "&&(e=parseFloat(o),isNaN(e)&&(o=null)),d.writeEnabled=a.TCR_getUnFormatedValueAndCheckMinMax(d,b.format,h,o,0);return 1}return 0};return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_Bargraph=function(k){function e(){var a=f.stopAngle-f.startAngle;if(f.invertGrowing===!0){for(;a>0;)a-=360;a===0&&(a=-360)}else{for(;a<0;)a+=360;a===0&&(a=360)}return a}function b(a,b,c){if(b>=c)a=f.baseValue;a<b&&(a=b);a>c&&(a=c);if(b>f.baseValue)f.baseValue=b;if(c<f.baseValue)f.baseValue=c;return a}function d(b,c,d,f,g,e,h){var c=c*Math.PI/180,j=d+g*Math.cos(c),c=f-g*Math.sin(c);a.createSVGLine(document,b,d,f,j,c,"rgb("+e+")",h).setAttributeNS(null,"shape-rendering",
"geometricPrecision")}function g(c,d,g,e){var h=0,h=0,o,q,k,n=0;o=f.minValue;q=f.maxValue;f.invertGrowing===!0&&(h=q,q=-o,o=-h,d=-d);h=q-o;if(h!=0)d=b(d,o,q),f.horizontal===!0?(f.h-e-(j+p)*2>0?(q=j+p,f.invertScalePos===!0&&(q=e+j+p+1),e=f.h-e-(j+p)*2):(q=0,e=f.h),n=(f.w-j*2)/h,h=(f.baseValue-o)*n,o=Math.abs((d-o)*n),o=Math.min(o,h),k=Math.abs((d-f.baseValue)*n),o+=j):(f.w-e-(j+p)*2>0?(o=j+p,f.invertScalePos===!0&&(o=e+j+p+1),k=f.w-e-(j+p)*2):(o=0,k=f.w),n=(f.h-j*2)/h,h=(q-f.baseValue)*n,q=Math.abs((q-
d)*n),q=Math.min(q,h),e=Math.abs((d-f.baseValue)*n),q+=j),d=Math.round(k),e=Math.round(e),d>0&&e>0&&a.createSVGRect(document,c,Math.round(o),Math.round(q),d,e,"rgb("+g+")",null,0,!1)}function c(b,c,d,g,e,h,j,o){b=a.createSVGText(document,b,d,g,"rgb("+o+")",j===1?"middle":j===2?"end":"start",f.getFontName(),f.getFontSize(),f.getSvgFontStyle(),f.getSvgFontWeight());a.createSVGTSpan(document,b,null,"0.9em",c)}this.base=a.PainterType_MPainter;this.base(k);this.minValue=0;this.rangeValue=this.maxValue=
100;this.stopAngle=this.startAngle=this.baseValue=0;this.maxValue=100;this.showScale=this.isGauge=this.invertGrowing=this.horizontal=!1;this.spacement=10;this.nScaleText=0;this.invertScalePos=!1;var f=this,q=null,o=!1,h=null,j=0;this.getUseBarColor=function(){return h};this.setUseBarColor=function(a){a===null?(o===!0&&this.scheduleFullRedrawPainter(),o=!1):(h!==a&&this.scheduleFullRedrawPainter(),o=!0);h=a};this.typeDraw=function(){if(this.isFullPainterRedrawRequired()){var a=this.getEditSource();
a!==null&&this.updateBar(a)}};this.notify=function(b){switch(b){case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw(),this.genericDraw()}return 0};this.updateMinMaxRangeBase=function(){if(this.minValue>this.maxValue){var a=this.maxValue;this.maxValue=this.minValue;this.minValue=a}this.rangeValue=this.maxValue-this.minValue};this.changeMin=function(b){var c=parseFloat(b);if(isNaN(c))a.log_append_ln("Bargraph min. value not valid:'"+b+"' (Object ID: '"+this.objId+"')");else if(this.minValue!==c)this.minValue=
c,this.updateMinMaxRangeBase(),this.scheduleFullRedrawPainter()};this.changeMax=function(b){var c=parseFloat(b);if(isNaN(c))a.log_append_ln("Bargraph max. value not valid:'"+b+"' (Object ID: '"+this.objId+"')");else if(this.maxValue!==c)this.maxValue=c,this.updateMinMaxRangeBase(),this.scheduleFullRedrawPainter()};this.setStartAngle=function(a){a=parseFloat(a);if(!isNaN(a)&&this.startAngle!==a)this.startAngle=a,this.scheduleFullRedrawPainter()};this.setStopAngle=function(a){a=parseFloat(a);if(!isNaN(a)&&
this.stopAngle!==a)this.stopAngle=a,this.scheduleFullRedrawPainter()};this.setSpacement=function(a){a=parseFloat(a);if(!isNaN(a)&&this.spacement!==a)this.spacement=a,this.scheduleFullRedrawPainter()};this.setInvertGrowing=function(a){if(this.invertGrowing!==a)this.invertGrowing=a,this.scheduleFullRedrawPainter()};this.setInvertScalePos=function(a){if(this.invertScalePos!==a)this.invertScalePos=a,this.scheduleFullRedrawPainter()};this.setPaintHorizontal=function(a){if(this.horizontal!==a)this.horizontal=
a,this.scheduleFullRedrawPainter()};this.setShowScale=function(a){if(this.showScale!==a)this.showScale=a,this.scheduleFullRedrawPainter()};this.setScaleText=function(a){a=parseInt(a,10);if(!isNaN(a)&&this.nScaleText!==a)this.nScaleText=a,this.scheduleFullRedrawPainter()};var p=0,s=0,n=0;this.updateBar=function(k){if(!(k.type===void 0||k.name===void 0))if(!(k.type===null||k.name===null)){var t=k.value;q!==null&&(q.parentNode.removeChild(q),q=null);if(f.w>0&&f.h>0){var m,k=document.createElementNS(a.SvgNs,
"svg");if(k!==null){m="";m="0 0 "+f.w+" "+f.h;k.setAttributeNS(null,"x",f.x);k.setAttributeNS(null,"y",f.y);k.setAttributeNS(null,"width",f.w);k.setAttributeNS(null,"height",f.h);k.setAttributeNS(null,"viewBox",m);k.setAttributeNS(null,"version","1.1");f.getMainGroupElement().appendChild(k);t=parseFloat(t);if(isNaN(t)===!0)t=f.baseValue;if(f.minValue>f.maxValue)m=f.minValue,f.minValue=f.maxValue,f.maxValue=m;j=f.getOutlineWidth();if(f.isGauge===!0){var r=t,w=f.minValue,x=f.maxValue;if(x!=w){(f.stopAngle-
f.startAngle)%360!=0&&(r=b(r,w,x));t=f.w/2;m=f.h/2;var v=Math.min(t,m),y=v+(t-v),z=v+(m-v),r=f.startAngle+(r-w)*e()/(x-w);f.checkIfInterior()===!0&&a.createSVGPie(document,k,y,z,t,m,f.startAngle,r,f.invertGrowing,null,0,"rgb("+f.getInteriorColor()+")");if(f.showScale){var w=f.getOutlineColor(),x=f.minValue,L=f.maxValue;if(L!=x&&f.spacement>0)for(var P=f.w/2,M=f.h/2,E=Math.min(f.w/2,f.h/2),Q=Math.min(f.w/2,f.h/2)/10,T=e(),S=f.minValue,Q=Math.max(Q,2);S<=L;){var C=(f.startAngle+(S-f.minValue)*T/(L-
x))*Math.PI/180,F=P+(E-Q)*Math.cos(C),A=M-(E-Q)*Math.sin(C),B=P+E*Math.cos(C),C=M-E*Math.sin(C);a.createSVGLine(document,k,B,C,F,A,"rgb("+w+")",1).setAttributeNS(null,"shape-rendering","geometricPrecision");S+=f.spacement}}f.checkIfOutline()===!0&&(w=f.getOutlineWidth()/2,a.createSVGEllipse(document,k,y,z,t-w,m-w,"rgb("+f.getOutlineColor()+")",f.getOutlineWidth(),null).setAttributeNS(null,"shape-rendering","geometricPrecision"));f.getOutlineWidth()>0&&(f.checkIfInterior()===!0&&d(k,f.startAngle,y,
z,v,f.getOutlineColor(),f.getOutlineWidth()),d(k,r,y,z,v,f.getOutlineColor(),f.getOutlineWidth()))}}else{m=t;v=f.showScale;t=f.nScaleText;y=f.w;z=f.h;j=f.getOutlineWidth();f.horizontal===!0?(z<2*(j+p)+1&&(j=0),v===!0&&z<=2*(j+p)+9&&(v=!1)):(y<2*(j+p)+1&&(j=0),v&&y<=2*(j+p)+9&&(v=!1));v===!1&&(t=0);s=v===!0?8:0;t>0&&(f.horizontal===!0?(n=16,n>=z-s-(j+p)*2-1&&(n=0)):(n=30,n>=y-s-(j+p)*2-1&&(n=0)),n<3&&(t=n=0),s+=n);o===!0?(f.checkIfInterior()===!0&&(f.innerFillRect===!0?(r=f.getOutlineWidth(),f.horizontal===
!0?f.invertScalePos===!0?a.createSVGRect(document,k,r,r+s+1,y-r*2,z-r*2-s-1,"rgb("+f.getInteriorColor()+")",null,0):a.createSVGRect(document,k,r,r,y-r*2,z-r*2-s-1,"rgb("+f.getInteriorColor()+")",null,0):f.invertScalePos===!0?a.createSVGRect(document,k,r+s+1,r,y-r*2-s-1,z-r*2,"rgb("+f.getInteriorColor()+")",null,0):a.createSVGRect(document,k,r,r,y-r*2-s-1,z-r*2,"rgb("+f.getInteriorColor()+")",null,0)):a.createSVGRect(document,k,0,0,y,z,"rgb("+f.getInteriorColor()+")",null,0)),g(k,m,h,s)):g(k,m,f.getInteriorColor(),
s);if(v===!0){m=f.getOutlineColor();v=s;z=r=w=z=r=y=y=0;if(f.spacement>0&&(y=f.maxValue-f.minValue,y!=0))if(z=f.minValue,f.horizontal===!0){y=(f.w-j*2)/y;r=(z-f.minValue)*y;r+=j;f.invertScalePos===!0?a.createSVGRect(document,k,j,v,f.w-j*2,2,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,j,f.h-v-2,f.w-j*2,2,"rgb("+m+")",null,0,!1);f.invertScalePos===!0?r>0&&r<f.w?a.createSVGRect(document,k,r-1,v-8,2,10,"rgb("+m+")",null,0,!1):r<f.w?a.createSVGRect(document,k,r,v-8,1,10,"rgb("+m+")",null,0,!1):
a.createSVGRect(document,k,r-1,v-8,1,10,"rgb("+m+")",null,0,!1):r>0&&r<f.w?a.createSVGRect(document,k,r-1,f.h-v-2,2,10,"rgb("+m+")",null,0,!1):r<f.w?a.createSVGRect(document,k,r,f.h-v-2,1,10,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,r-1,f.h-v-2,1,10,"rgb("+m+")",null,0,!1);w=r-f.spacement*y;for(z=1;w>=0;)z%5===0?f.invertScalePos===!0?w>0&&w<f.w?a.createSVGRect(document,k,w-1,v-8,2,8,"rgb("+m+")",null,0,!1):w<f.w?a.createSVGRect(document,k,w,v-8,1,8,"rgb("+m+")",null,0,!1):a.createSVGRect(document,
k,w-1,v-8,1,8,"rgb("+m+")",null,0,!1):w>0&&w<f.w?a.createSVGRect(document,k,w-1,f.h-v,2,8,"rgb("+m+")",null,0,!1):w<f.w?a.createSVGRect(document,k,w,f.h-v,1,8,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,w-1,f.h-v,1,8,"rgb("+m+")",null,0,!1):f.invertScalePos===!0?a.createSVGRect(document,k,w-1,v-4,2,4,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,w-1,f.h-v,2,4,"rgb("+m+")",null,0,!1),z++,w=r-f.spacement*z*y;w=r+f.spacement*y;for(z=1;w<=f.w;)z%5===0?f.invertScalePos===!0?w>0&&w<f.w?a.createSVGRect(document,
k,w-1,v-8,2,10,"rgb("+m+")",null,0,!1):w<f.w?a.createSVGRect(document,k,w,v-8,1,10,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,w-1,v-8,1,10,"rgb("+m+")",null,0,!1):w>0&&w<f.w?a.createSVGRect(document,k,w-1,f.h-v-2,2,10,"rgb("+m+")",null,0,!1):w<f.w?a.createSVGRect(document,k,w,f.h-v-2,1,10,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,w-1,f.h-v-2,1,10,"rgb("+m+")",null,0,!1):f.invertScalePos===!0?a.createSVGRect(document,k,w-1,v-4,2,4,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,
w-1,f.h-v,2,4,"rgb("+m+")",null,0,!1),z++,w=r+f.spacement*z*y}else{y=(f.h-j*2)/y;f.invertScalePos===!0?a.createSVGRect(document,k,v,j,2,f.h-j*2,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,f.w-v-2,j,2,f.h-j*2,"rgb("+m+")",null,0,!1);f.invertScalePos===!0?0<f.h?a.createSVGRect(document,k,v-8,0,10,1,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,v-8,-1,10,1,"rgb("+m+")",null,0,!1):0<f.h?a.createSVGRect(document,k,f.w-v-2,0,10,1,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,f.w-v-2,-1,
10,1,"rgb("+m+")",null,0,!1);r=0+f.spacement*y;for(z=1;r<=f.h;)z%5===0?f.invertScalePos===!0?r>0&&r<f.h?a.createSVGRect(document,k,v-8,r-1,8,2,"rgb("+m+")",null,0,!1):r<f.h?a.createSVGRect(document,k,v-8,r,8,1,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,v-8,r-1,8,1,"rgb("+m+")",null,0,!1):r>0&&r<f.h?a.createSVGRect(document,k,f.w-v,r-1,8,2,"rgb("+m+")",null,0,!1):r<f.h?a.createSVGRect(document,k,f.w-v,r,8,1,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,f.w-v,r-1,8,1,"rgb("+m+")",null,
0,!1):f.invertScalePos===!0?a.createSVGRect(document,k,v-4,r-1,4,2,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,f.w-v,r-1,4,2,"rgb("+m+")",null,0,!1),z++,r=0+f.spacement*z*y;r=0-f.spacement*y;for(z=1;r>=0;)z%5===0?f.invertScalePos===!0?r>0&&r<f.h?a.createSVGRect(document,k,v-8,r-1,10,2,"rgb("+m+")",null,0,!1):r<f.h?a.createSVGRect(document,k,v-8,r,10,1,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,v-8,r-1,10,1,"rgb("+m+")",null,0,!1):r>0&&r<f.h?a.createSVGRect(document,k,f.w-v-2,r-1,10,
2,"rgb("+m+")",null,0,!1):r<f.h?a.createSVGRect(document,k,f.w-v-2,r,10,1,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,f.w-v-2,r-1,10,1,"rgb("+m+")",null,0,!1):f.invertScalePos===!0?a.createSVGRect(document,k,v-4,r-1,4,2,"rgb("+m+")",null,0,!1):a.createSVGRect(document,k,f.w-v,r-1,4,2,"rgb("+m+")",null,0,!1),z++,r=0-f.spacement*z*y}if(t>0&&(t=f.getOutlineColor(),v=m=w=0,z=f.minValue,w=f.maxValue,r=f.nScaleText,x=0,y=w-z,y!==0&&r>0))if(v=16,f.horizontal===!0){m=0;r>=2&&(x=z.toString(),f.invertGrowing===
!0?f.invertScalePos===!0?c(k,x,f.w,0,m,v,2,t):c(k,x,f.w,f.h-v,m,v,2,t):f.invertScalePos===!0?c(k,x,0,0,m,v,0,t):c(k,x,0,f.h-v,m,v,0,t),x=w.toString(),f.invertGrowing===!0?f.invertScalePos===!0?c(k,x,0,0,m,v,0,t):c(k,x,0,f.h-v,m,v,0,t):f.invertScalePos===!0?c(k,x,f.w,0,m,v,2,t):c(k,x,f.w,f.h-v,m,v,2,t));r==3&&(x=(z+y/2).toString(),f.invertScalePos===!0?c(k,x,f.w/2,0,m,v,1,t):c(k,x,f.w/2,f.h-v,m,v,1,t));if(r==6)for(w=2;w<10;w+=2)x=z+w*y/10,x=x.toString(),f.invertGrowing===!0?f.invertScalePos===!0?c(k,
x,f.w-w*f.w/10,0,m,v,1,t):c(k,x,f.w-w*f.w/10,f.h-v,m,v,1,t):f.invertScalePos===!0?c(k,x,w*f.w/10,0,m,v,1,t):c(k,x,w*f.w/10,f.h-v,m,v,1,t);if(r==11)for(w=1;w<10;w++)x=z+w*y/10,x=x.toString(),f.invertGrowing===!0?f.invertScalePos===!0?c(k,x,f.w-w*f.w/10,0,m,v,1,t):c(k,x,f.w-w*f.w/10,f.h-v,m,v,1,t):f.invertScalePos===!0?c(k,x,w*f.w/10,0,m,v,1,t):c(k,x,w*f.w/10,f.h-v,m,v,1,t)}else{r>=2&&(x=z.toString(),f.invertGrowing===!0?f.invertScalePos===!0?c(k,x,n,0,m,v,2,t):c(k,x,f.w-n,0,m,v,0,t):f.invertScalePos===
!0?c(k,x,n,f.h-v,m,v,2,t):c(k,x,f.w-n,f.h-v,m,v,0,t),x=w.toString(),f.invertGrowing===!0?f.invertScalePos===!0?c(k,x,n,f.h-v,m,v,2,t):c(k,x,f.w-n,f.h-v,m,v,0,t):f.invertScalePos===!0?c(k,x,n,0,m,v,2,t):c(k,x,f.w-n,0,m,v,0,t));r==3&&(x=(z+y/2).toString(),f.invertScalePos===!0?c(k,x,n,f.h/2-v/2,m,v,2,t):c(k,x,f.w-n,f.h/2-v/2,m,v,0,t));if(r==6)for(w=2;w<10;w+=2)x=z+w*y/10,x=x.toString(),f.invertGrowing===!0?f.invertScalePos===!0?c(k,x,n,w*f.h/10-v/2,m,v,2,t):c(k,x,f.w-n,w*f.h/10-v/2,m,v,0,t):f.invertScalePos===
!0?c(k,x,n,f.h-w*f.h/10-v/2,m,v,2,t):c(k,x,f.w-n,f.h-w*f.h/10-v/2,m,v,0,t);if(r==11)for(w=1;w<10;w++)x=z+w*y/10,x=x.toString(),f.invertGrowing===!0?f.invertScalePos===!0?c(k,x,n,w*f.h/10-v/2,m,v,2,t):c(k,x,f.w-n,w*f.h/10-v/2,m,v,0,t):f.invertScalePos===!0?c(k,x,n,f.h-w*f.h/10-v/2,m,v,2,t):c(k,x,f.w-n,f.h-w*f.h/10-v/2,m,v,0,t)}}f.checkIfOutline()===!0&&f.getOutlineWidth()>0&&(t=f.getOutlineColor(),m=s,v=m!=0?1:0,f.getOutlineWidth()>0&&(f.horizontal===!0?f.invertScalePos===!0?a.createSVGRect(document,
k,0,m+v,f.w,f.h-m-v,null,"rgb("+t+")",f.getOutlineWidth()):a.createSVGRect(document,k,0,0,f.w,f.h-m-v,null,"rgb("+t+")",f.getOutlineWidth()):f.invertScalePos===!0?a.createSVGRect(document,k,m+v,0,f.w-m-v,f.h,null,"rgb("+t+")",f.getOutlineWidth()):a.createSVGRect(document,k,0,0,f.w-m-v,f.h,null,"rgb("+t+")",f.getOutlineWidth())))}}q=k}}}};a.PainterType_Bargraph.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_IGraphic=function(k){this.base=a.PainterType_MPainter;this.base(k);var e=this,b=null,d=null,g=0,c=0,f=0,q=0,o=0,h=0,j=0,p=0;this.typeDraw=function(){if(this.isFullPainterRedrawRequired()===!0){var k=0,n=0,u="",t="",m=0,r=0;e.checkIfInterior()===!0&&(k=1);e.checkIfOutline()===!0&&(n=1);e.getOutlineWidth();u="rgba("+e.getInteriorColor()+","+k+")";t="rgba("+e.getOutlineColor()+","+n+")";m=e.checkIfOutline()===!0?e.getOutlineWidth():e.getInnerFill()===!0?e.getOutlineWidth():
0;r=e.getOutlineStyle();if(e.frmElmnt!==null)a.removeSVG(e.frmElmnt),e.frmElmnt=null;switch(r){case a.SOLID:e.frmElmnt=a.createSVGRect(e.svgDoc,e.getMainGroupElement(),e.x,e.y,e.w,e.h,u,t,m);break;case a.DASHED:case a.DOTTED:e.frmElmnt=a.createSVGRectDashed(e.svgDoc,e.getMainGroupElement(),e.x,e.y,e.w,e.h,u,t,m,e.getInnerFill(),r);break;default:a.log_append_ln("Unknown outline style")}m=this.getEditSource();if(m.name!==null){var t=0,k="",n=0,t=null,u=[],m=m.value,w=r=r=0,x=0,v=[],m=m.replace(/\n/gi,
a.FVLINESEPTOKEN2),m=m.replace(/\t/gi,a.FVCOLSEPTOKEN2),m=a.parseCSV(m);if(m.length===1){r=m[0].length;for(w=x=0;w<r;w++)switch(x){case 0:m[0][w].toString().indexOf("#!crv\\n#r")!==-1&&(x=1);break;case 1:t=m[0][w].split(",");t.length===4?x=2:(a.log_append_ln("updateIGraphicByContent parse Error 1 (#r - dimension)"),x=-1);break;case 2:m[0][w].toString().indexOf("#c")!==-1&&(x=3);break;case 3:n=parseInt(m[0][w].toString(),10);isNaN(n)===!1?x=4:(a.log_append_ln("updateIGraphicByContent parse Error 2 (#c - num Points)"),
x=-1);break;case 4:u.length<n&&(v=m[0][w].toString().split(","),v.length>0&&isNaN(v[0])===!0&&(v[0]=0),v.length>1&&isNaN(v[1])===!0&&(v[1]=0),u.push(v))}}if(x===4){for(w=0;w<t.length;w++)t[w]=parseInt(t[w],10),isNaN(t[w])===!0&&a.log_append_ln("updateIGraphicByContent parse Error 3 (numeric #r coordinates expected)");for(w=0;w<u.length;w++)u[w][0]=parseInt(u[w][0],10),isNaN(u[w][0])===!0&&a.log_append_ln("updateIGraphicByContent parse Error 4 (numeric #c coordinates expected)"),u[w][1]=parseInt(u[w][1],
10),isNaN(u[w][1])===!0&&a.log_append_ln("updateIGraphicByContent parse Error 5 (numeric #c coordinates expected)")}if(n>0){d!==null&&a.removeSVG(d);m=0;e.checkIfOutline()===!0&&(m=e.getOutlineWidth());r=document.createElementNS(a.SvgNs,"svg");r!==null&&(r.setAttributeNS(null,"x",e.xOrg+m),r.setAttributeNS(null,"y",e.yOrg+m),g=e.wOrg-2*m,r.setAttributeNS(null,"width",g),c=e.hOrg-2*m,r.setAttributeNS(null,"height",c),r.setAttributeNS(null,"viewbox","0 0 "+g+" "+c),r.setAttributeNS(null,"version","1.1"),
e.getMainGroupElement().appendChild(r));d=r;b!==null&&a.removeSVG(b);o=t[0];h=t[1];j=t[2];p=t[3];h!=o&&(f=g/(h-o));p!=j&&(q=c/(p-j));b=document.createElementNS(a.SvgNs,"path");for(t=0;t<n;t++)m=Math.round((u[t][0]-o)*f),r=Math.round((p-u[t][1])*q),t===0?k="M"+m+" "+r+" ":k+="L"+m+" "+r+" ";b.setAttributeNS(null,"d",k);b.setAttributeNS(null,"stroke","rgb("+e.getOutlineColor()+")");b.setAttributeNS(null,"stroke-width",e.getOutlineWidth());b.setAttributeNS(null,"fill","none");b.setAttributeNS(null,"preserveAspectRatio",
"none");d.appendChild(b)}}}};this.notify=function(b){var c=0;switch(b){case a.VIEW_GAIN_FOCUS:c=0;break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.genericDraw();break;case a.MOUSE_DOWN:c=0;break;case a.MOUSE_UP:c=0}return c}};a.PainterType_Bargraph.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){var k,e,b;function d(){this.type=0;this.typeStr="";this.y=this.x=0;this.ViewItem=null;this.consumedFlag=!1;this.consumedPainter=null;this.actionExecutedFlag=!1;this.jqEvent=null}function g(a,b){b.x=a.x;b.y=a.y;b.ViewItem=a.ViewItem;b.consumedFlag=a.consumedFlag;b.consumedPainter=a.consumedPainter;b.actionExecutedFlag=a.actionExecutedFlag;b.jqEvent=a.jqEvent;b.typeStr=a.typeStr;b.type=a.type}function c(b){if(a.g_MouseDownEventInfo.consumedFlag===!0&&a.g_MouseDownEventInfo.consumedPainter!==
null){a.g_MouseDownEventInfo.type=b.type;a.g_MouseDownEventInfo.typeStr=b.typeStr;a.g_MouseDownEventInfo.jqEvent=b.jqEvent;if(a.g_MouseDownEventInfo.actionExecutedFlag===!1)a.g_MouseDownEventInfo.x=b.x,a.g_MouseDownEventInfo.y=b.y;a.g_MouseDownEventInfo.consumedPainter.notify(b.type,a.g_MouseDownEventInfo);a.releaseDragIfRequired();a.scheduleRepaint()}}a.MOUSE_DOWN=216;a.MOUSE_DOWN_STR="HMI_MOUSE_DOWN";a.MOUSE_UP=217;a.MOUSE_UP_STR="HMI_MOUSE_UP";a.MOUSE_OVER=502;a.MOUSE_OVER_STR="HMI_MOUSE_OVER";
a.MOUSE_OUT=503;a.MOUSE_OUT_STR="HMI_MOUSE_OUT";a.MOUSE_MOVE=504;a.MOUSE_MOVE_STR="HMI_MOUSE_MOVE";a.g_MouseDownEventInfo=new d;a.g_MouseMoveEventInfo=new d;var f=0,q=!1;k=0;e={pageX:0,pageY:0};b={pageX:0,pageY:0};a.ME_registerViewMouseEventHandler=function(b){a.getViewDOMHandles(b);$(b.ClickableDiv.handle).on("touchstart touchmove touchend",function(a){b.MouseEventDispatcher(a)});$(b.ClickableDiv.handle).on("mousedown mouseup mousemove mouseout mouseover",function(a){b.MouseEventDispatcher(a)})};
a.ME_destroyMouseEventHandler=function(a){$(a.ClickableDiv.handle).unbind()};a.ME_registerViewKeyDownEventListener=function(b){b.layers&&b.captureEvents(Event.KEYDOWN);b.onkeydown=function(b){if(a.g_MouseDownEventInfo.ViewItem){var c=0;a.resetInactivity();b&&(c=b.which?b.which:b.keyCode);a.getDebugLevel>=3&&a.log_append_ln("documentHandle.onkeydown keyCode: "+c);c==13?a.g_MouseDownEventInfo.ViewItem.NotifyFunc&&a.g_MouseDownEventInfo.ViewItem.NotifyFunc(a.ENTER,null):c==27?a.g_MouseDownEventInfo.ViewItem.NotifyFunc&&
a.g_MouseDownEventInfo.ViewItem.NotifyFunc(a.ESCAPE,null):a.g_MouseDownEventInfo.ViewItem.NotifyFunc&&a.g_MouseDownEventInfo.ViewItem.NotifyFunc(c,null);a.scheduleRepaint()}}};a.ME_destroyViewKeyEventListener=function(a){if(a!==null)a.onkeydown=null};a.ME_mouseEventDispatcher=function(o){var h=null,j=!1;if(!(this.locked===!0||this.unloadedFlag===!0||this.mouseDisabled===!0))if(o.stopPropagation(),this.NotifyFunc!==null){if(h=q===!0){h=!1;if(o.type==="mousedown"||o.type==="mouseup"||o.type==="mousemove"||
o.type==="mouseout"||o.type==="mouseover"||o.type=="dblclick")h=!0;h=h===!0}if(!h){if(h=q===!1)if(h=!1,o.type==="touchstart"||o.type==="touchend"||o.type==="touchmove")h=!0;h&&(q=!0);h=null;j=!1;h=new d;h.x=0;h.y=0;h.ViewItem=this;h.consumedFlag=!1;h.consumedPainter=null;h.actionExecutedFlag=!1;h.jqEvent=o;if(q===!0)switch(o.type){case "touchstart":h.typeStr=a.MOUSE_DOWN_STR;h.type=a.MOUSE_DOWN;break;case "touchend":h.typeStr=a.MOUSE_UP_STR;h.type=a.MOUSE_UP;break;case "touchmove":h.typeStr=a.MOUSE_MOVE_STR;
h.type=a.MOUSE_MOVE;break;case "touchleave":h.typeStr=a.MOUSE_OUT_STR;a.type=a.MOUSE_OUT;break;default:h.typeStr=o.type,a.log_append_ln("Unknown event case 1: "+o.type),j=!0}else switch(o.type){case "mousedown":h.typeStr=a.MOUSE_DOWN_STR;h.type=a.MOUSE_DOWN;break;case "mouseup":h.typeStr=a.MOUSE_UP_STR;h.type=a.MOUSE_UP;break;case "mousemove":h.typeStr=a.MOUSE_MOVE_STR;h.type=a.MOUSE_MOVE;break;case "mouseout":h.typeStr=a.MOUSE_OUT_STR;h.type=a.MOUSE_OUT;break;case "mouseover":h.typeStr=a.MOUSE_OVER_STR;
h.type=a.MOUSE_OVER;break;default:h.typeStr=o.type,a.log_append_ln("Unknown event case 2: "+o.type),j=!0}if(j!==!0&&!(q===!1&&h.jqEvent.which!==1&&(h.type===a.MOUSE_DOWN||h.type===a.MOUSE_UP))){var j=h,p=!1;if(q===!0)switch(o.type){case "touchstart":k===0?(j.x=o.originalEvent.touches[0].pageX,j.y=o.originalEvent.touches[0].pageY,e.pageX=j.x,e.pageY=j.y,k=1,a.getDebugLevel()>=2&&a.log_append_ln("phase: 0, y: "+j.y)):p=!0;break;case "touchmove":k>0?(j.x=o.originalEvent.touches[0].pageX,j.y=o.originalEvent.touches[0].pageY,
b.pageX=j.x,b.pageY=j.y,k=2,a.getDebugLevel()>=2&&a.log_append_ln("phase: 1 (touchmove), y: "+j.y)):p=!0;break;case "touchend":k===1?(j.x=e.pageX,j.y=e.pageY,k=0,a.getDebugLevel()>=2&&a.log_append_ln("phase: 1 (touchend), y: "+j.y)):k===2?(j.x=b.pageX,j.y=b.pageY,k=0,a.getDebugLevel()>=2&&a.log_append_ln("phase: 2, y: "+j.y)):p=!0}else j.x=o.pageX,j.y=o.pageY;j.x-=a.getLeftPos(this.ClickableDiv.handle);j.y-=a.getTopPos(this.ClickableDiv.handle);if(p!==!0){a.resetInactivity();a.getDebugLevel()>=1&&
a.showMouseCirlce(this,h.x,h.y);f===a.MOUSE_MOVE&&h.type===a.MOUSE_MOVE||a.getDebugLevel()>=2&&a.log_append_ln(h.typeStr);a.g_MouseDownEventInfo.ViewItem=this;switch(h.type){case a.MOUSE_OUT:if(a.g_MouseDownEventInfo.type===a.MOUSE_DOWN)a.getDebugLevel()>=2&&a.log_append_ln("sc.ME_mouseEventDispatcher Mouse Out with Pressed Button -> Simulate Mouse Up"),h.type=a.MOUSE_UP,h.typeStr=a.MOUSE_UP_STR,c(h);break;case a.MOUSE_OVER:g(h,a.g_MouseDownEventInfo);break;case a.MOUSE_DOWN:if(document.hasFocus()&&
(o=document.activeElement))a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher docCurrentActiveElt =  "+o+" name = "+o.tagName),a.g_HTMLControlDropDownElmnt!==null?(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlDropDownElmnt =  "+a.g_HTMLControlDropDownElmnt),a.g_HTMLControlDropDownElmnt===o&&(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlDropDownElmnt has focus so send him the blur()"),a.g_HTMLControlDropDownElmnt.blur())):
a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlDropDownElmnt not found!"),a.g_HTMLControlInputElmnt!==null?(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlInputElmnt =  "+a.g_HTMLControlInputElmnt),a.g_HTMLControlInputElmnt===o&&(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlInputElmnt has focus so send him the blur()"),a.g_HTMLControlInputElmnt.blur())):a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlInputElmnt not found!"),
a.g_HTMLControlPwInputElement!==null?(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlPwInputElement =  "+a.g_HTMLControlPwInputElement),a.g_HTMLControlPwInputElement===o&&(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlPwInputElement has focus so send him the blur()"),a.g_HTMLControlPwInputElement.blur())):a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlPwInputElement not found!"),a.g_HTMLControlTextareaElmnt!==null?
(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlTextareaElmnt =  "+a.g_HTMLControlTextareaElmnt),a.g_HTMLControlTextareaElmnt===o&&(a.getDebugLevel()>=3&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlTextareaElmnt has focus so send him the blur()"),a.g_HTMLControlTextareaElmnt.blur())):a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlTextareaElmnt not found!");g(h,a.g_MouseDownEventInfo);this.NotifyFunc(h.type,a.g_MouseDownEventInfo);
a.scheduleRepaint();break;case a.MOUSE_UP:c(h);break;case a.MOUSE_MOVE:var j=0,j=a.g_MouseMoveNotificationList.length,p=0,p=h.x,s=h.y;a.getDebugLevel()>=2&&$("#SC_MouseMove").text(p+" "+s);g(h,a.g_MouseMoveEventInfo);for(p=j-1;p>=0;p--)if(a.g_MouseMoveNotificationList[p]!==void 0&&a.g_MouseMoveNotificationList[p].notify!==void 0&&(j=a.g_MouseMoveNotificationList[p].notify(h.type,a.g_MouseMoveEventInfo),j==1))break;a.g_MouseDragObject!==null&&a.g_MouseDragObject.onDrag!==null&&(o.preventDefault(),
a.g_MouseDragObject.onDrag(a.g_MouseMoveEventInfo))}f=h.type}}}}};return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_Rectangle=function(k){this.base=a.PainterType_MPainter;this.base(k);this.typeDraw=function(){if(this.isFullPainterRedrawRequired()===!0){var e=0,b=0,d="",g="",c=0,f=0;this.checkIfInterior()===!0&&(e=1);this.checkIfOutline()===!0&&(b=1);this.getOutlineWidth();d="rgba("+this.getInteriorColor()+","+e+")";g="rgba("+this.getOutlineColor()+","+b+")";c=this.checkIfOutline()===!0?this.getOutlineWidth():this.getInnerFill()===!0?this.getOutlineWidth():0;f=this.getOutlineStyle();
if(this.frmElmnt!==null)a.removeSVG(this.frmElmnt),this.frmElmnt=null;switch(f){case a.SOLID:this.frmElmnt=a.createSVGRect(this.svgDoc,this.getMainGroupElement(),this.x,this.y,this.w,this.h,d,g,c);break;case a.DASHED:case a.DOTTED:this.frmElmnt=a.createSVGRectDashed(this.svgDoc,this.getMainGroupElement(),this.x,this.y,this.w,this.h,d,g,c,this.getInnerFill(),f);break;default:a.log_append_ln("ERROR PainterType_Rectangle Unknown outline style")}}}};a.PainterType_Rectangle.prototype=new a.PainterType_MPainter;
return a}(_SCIntern||{});_SCIntern=function(a){a.sprintf=function(){function k(a,b,c,d){b=a.length>=b?"":Array(1+b-a.length>>>0).join(c);return d?a+b:b+a}function e(a,b,c,d,g){var e=d-a.length;e>0&&(a=c||!g?k(a,d," ",c):a.slice(0,b.length)+k("",e,"0",!0)+a.slice(b.length));return a}function b(a,b,c,d,g,p,s){a>>>=0;c=c&&a&&{2:"0b",8:"0",16:"0x"}[b]||"";a=c+k(a.toString(b),p||0,"0",!1);return e(a,c,d,g,s)}function d(a,b,c,d,g){d!==null&&(a=a.slice(0,d));return e(a,"",b,c,g)}var g=arguments,c=0;return g[c++].replace(a.sprintf.regex,
function(a,q,o,h,j,p,s){j="";if(a=="%%")return"%";for(var n=!1,u="",t=!1,m=!1,r=0;o&&r<o.length;r++)switch(o.charAt(r)){case " ":u=" ";break;case "+":u="+";break;case "-":n=!0;break;case "0":t=!0;break;case "#":m=!0}h=h?h=="*"?+g[c++]:h.charAt(0)=="*"?+g[h.slice(1,-1)]:+h:0;h<0&&(h=-h,n=!0);if(!isFinite(h))throw Error("sprintf: (minimum-)width must be finite");p=p?p=="*"?+g[c++]:p.charAt(0)=="*"?+g[p.slice(1,-1)]:+p:"fFeE".indexOf(s)>-1?6:s=="d"?0:void 0;q=q?g[q.slice(0,-1)]:g[c++];switch(s){case "s":return d(String(q),
n,h,p,t);case "c":return d(String.fromCharCode(+q),n,h,p,t);case "b":return b(q,2,m,n,h,p,t);case "o":return b(q,8,m,n,h,p,t);case "x":return b(q,16,m,n,h,p,t);case "X":return b(q,16,m,n,h,p,t).toUpperCase();case "u":return b(q,10,m,n,h,p,t);case "i":case "d":return a=parseInt(q,10),isNaN(a)!==!0&&(j=a<0?"-":u,q=j+k(String(Math.abs(a)),p,"0",!1)),e(q,j,n,h,t);case "e":case "E":case "f":case "F":case "g":case "G":return a=+q,j=a<0?"-":u,u=["toExponential","toFixed","toPrecision"]["efg".indexOf(s.toLowerCase())],
s=["toString","toUpperCase"]["eEfFgG".indexOf(s)%2],q=j+Math.abs(a)[u](p),e(q,j,n,h,t)[s]();default:return a}})};a.sprintf.regex=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g;return a}(_SCIntern||{});_SCIntern=function(a){Date.ext={};Date.ext.util={};Date.prototype.strftimeUTCMode=!1;Date.ext.util.xPad=function(a,e,b){for(typeof b=="undefined"&&(b=10);parseInt(a,10)<b&&b>1;b/=10)a=e.toString()+a;return a.toString()};Date.prototype.locale="de-DE";if(document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang)Date.prototype.locale=document.getElementsByTagName("html")[0].lang;Date.ext.locales={};Date.ext.locales.en={a:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),A:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),
b:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),B:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"};Date.ext.locales["en-US"]=Date.ext.locales.en;Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z";Date.ext.locales["en-US"].x="%D";Date.ext.locales["en-US"].X="%r";Date.ext.locales["en-GB"]=Date.ext.locales.en;Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"];Date.ext.formats=
{a:function(a){return Date.ext.locales[a.locale].a[a.getDay()]},A:function(a){return Date.ext.locales[a.locale].A[a.getDay()]},b:function(a){return Date.ext.locales[a.locale].b[a.getMonth()]},B:function(a){return Date.ext.locales[a.locale].B[a.getMonth()]},c:"toLocaleString",C:function(a){return Date.ext.util.xPad(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return Date.ext.util.xPad(parseInt(Date.ext.util.G(a)/100,10),0)},G:function(a){var e=a.getFullYear(),
b=parseInt(Date.ext.formats.V(a),10),a=parseInt(Date.ext.formats.W(a),10);a>b?e++:a===0&&b>=52&&e--;return e},H:["getHours","0"],I:function(a){a=a.getHours()%12;return Date.ext.util.xPad(a===0?12:a,0)},j:function(a){var e=a-new Date(""+a.getFullYear()+"/1/1 GMT");e+=a.getTimezoneOffset()*6E4;a=parseInt(e/6E4/60/24,10)+1;return Date.ext.util.xPad(a,0,100)},m:function(a){return Date.ext.util.xPad(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return Date.ext.locales[a.locale].p[a.getHours()>=
12?1:0]},P:function(a){return Date.ext.locales[a.locale].P[a.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(a){a=a.getDay();return a===0?7:a},U:function(a){var e=parseInt(Date.ext.formats.j(a),10),a=6-a.getDay(),e=parseInt((e+a)/7,10);return Date.ext.util.xPad(e,0)},V:function(a){var e=parseInt(Date.ext.formats.W(a),10),b=(new Date(""+a.getFullYear()+"/1/1")).getDay();e+=b>4||b<=1?0:1;e==53&&(new Date(""+a.getFullYear()+"/12/31")).getDay()<4?e=1:e===0&&(e=Date.ext.formats.V(new Date(""+(a.getFullYear()-
1)+"/12/31")));return Date.ext.util.xPad(e,0)},w:"getDay",W:function(a){var e=parseInt(Date.ext.formats.j(a),10),a=7-Date.ext.formats.u(a),e=parseInt((e+a)/7,10);return Date.ext.util.xPad(e,0,10)},y:function(a){return Date.ext.util.xPad(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){var a=a.getTimezoneOffset(),e=Date.ext.util.xPad(parseInt(Math.abs(a/60),10),0),b=Date.ext.util.xPad(a%60,0);return(a>0?"-":"+")+e+b},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(){return"%"}};
Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};Date.ext.aggregates.z=Date.ext.formats.z(new Date);Date.ext.aggregates.Z=Date.ext.formats.Z(new Date);Date.ext.unsupported={};Date.prototype.strftime=function(a){if(!(this.locale in Date.ext.locales))this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")in Date.ext.locales?this.locale.replace(/-[a-zA-Z]+$/,""):"en-GB";for(var e=this;a.match(/%[cDhnrRtTxXzZ]/);)a=a.replace(/%([cDhnrRtTxXzZ])/g,
function(a,d){var g=Date.ext.aggregates[d];return g=="locale"?Date.ext.locales[e.locale][d]:g});a=a.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(a,d){var g=Date.ext.formats[d];return typeof g=="string"?e[g]():typeof g=="function"?g.call(e,e):typeof g=="object"&&typeof g[0]=="string"?Date.ext.util.xPad(e[g[0]](),g[1]):d});e=null;return a};return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_TextField=function(k){this.base=a.PainterType_MPainter;this.base(k);this.drawShape=a.drawRectShape;this.clearText=a.clearText;this.drawSourceText=a.drawSourceText;this.frmElmntOut=this.frmElmntInt=null;this.updateTextFieldSourceElement=function(e){var b=this.getOutlineWidth();this.getU3d()===!0&&(b+=2);(this.w<0||this.h<0)&&a.log_append_ln(" ERROR hmi_textfield this.w < 0 || this.h < 0");a.setSvgAttrC(e.e,"x",this.x+b);a.setSvgAttrC(e.e,"y",this.y+b);a.setSvgAttrC(e.e,
"width",this.w-2*b);a.setSvgAttrC(e.e,"height",this.h-2*b);this.clearText(e);this.drawSourceText(e)};this.notify=function(e,b){var d=0;switch(e){case a.DRAW_OBJECT:this.editModeFlag===!1&&(this.instanceDraw&&this.instanceDraw(),this.genericDraw());break;case a.MOUSE_DOWN:if(a.OB_checkMouseCoordinates(this,b)===!0)if(this.instanceDisabled()===!1){var g=this.instanceValidDownAction(),c=this.instanceValidUpAction();if(g===!0||c===!0){b.consumedFlag=!0;b.consumedPainter=this;this.scheduleFullRedrawPainter();
if(g===!0)this.executeActionMouseDown(),b.actionExecutedFlag=!0;d=1}}else d=0;else d=0;break;case a.MOUSE_UP:b.consumedFlag===!0&&(a.OB_checkMouseCoordinates(this,a.g_MouseDownEventInfo)===!0?this.instanceDisabled()===!1?this.executeActionMouseUp&&this.executeActionMouseUp():a.getDebugLevel()>=2&&a.log_append_ln("hmi_textfield Disabled while down case"):a.getDebugLevel()>=2&&a.log_append_ln("hmi_textfield Undo case"),this.scheduleFullRedrawPainter());break;case a.ENTER:this.editModeFlag&&(this.leaveEditMode(!0),
d=1);break;case a.ESCAPE:this.editModeFlag&&(this.leaveEditMode(!1),d=1);break;case a.REMOVE_SELECTION:this.editModeFlag&&(this.leaveEditMode(!0),d=1);break;case a.VIEW_LOST_FOCUS:this.editModeFlag&&(this.leaveEditMode(!1),d=1)}return d};this.drawRectShapeInterior=function(){var e=0,b=e="",d=this.getOutlineWidth(),g=this.getRepaintElement(this.frmOuterGroup),c=this.getRepaintElement(this.frmInnerGroup);if(this.checkIfInterior()===!0){for(e=1;g!=null&&g.hasChildNodes();)g.removeChild(g.firstChild);
for(;c&&c.hasChildNodes();)c.removeChild(c.firstChild);e="rgba("+this.getInteriorColor()+","+e+")";b="rgba("+this.getOutlineColor()+",0)";this.bgElmnt=a.createSVGInOutRect(this.svgDoc,c,g,this.x,this.y,this.w,this.h,e,b,d,this.getInnerFill())}};this.drawRectShapeOutline=function(){var e=1,e="",b=this.getOutlineWidth(),d=0,e=this.checkIfOutline()===!0?1:0,e="rgba("+this.getOutlineColor()+","+e+")",d=this.getOutlineStyle();if(this.frmElmntOut!==null)a.removeSVG(this.frmElmntOut),this.frmElmntOut=null;
this.frmElmntOut=null;switch(d){case a.SOLID:this.frmElmntOut=a.createSVGRect(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,null,e,b,this.getInnerFill());break;case a.DASHED:case a.DOTTED:this.frmElmntOut=a.createSVGRectDashed(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,null,e,b,this.getInnerFill(),d);break;default:a.log_append_ln("ERROR hmi_textfield Unknown outline style")}};this.typeDraw=function(){var e=null,e=0;if(this.isFullPainterRedrawRequired()===
!0){this.drawRectShapeInterior();if(this.frm3dElmnt!==null)a.removeSVG(this.frm3dElmnt),this.frm3dElmnt=null;if(this.getU3d()===!0)e=this.getOutlineWidth(),this.frm3dElmnt=a.createSVGRect_3dFrame_TextField(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,e);this.drawRectShapeOutline();e=this.getEditSource();e.name!==null?this.updateTextFieldSourceElement(e):this.clearText(e)}}};a.PainterType_TextField.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_Oval=function(k){function e(d){var g=a.getMPainterScreenCrd(b),c=g.w/2,f=g.h/2,e=g.x+c,k=g.y+f,f=Math.sqrt(c*c-f*f),c=e-f;e+=f;g=c+e-2*g.x;c=Math.sqrt(Math.pow(d.x-c,2)+Math.pow(d.y-k,2));c+=Math.sqrt(Math.pow(d.x-e,2)+Math.pow(d.y-k,2));return g>=c?!0:!1}var b=this;this.base=a.PainterType_MPainter;this.base(k);this.notify=function(b,g){var c=0;switch(b){case a.VIEW_GAIN_FOCUS:if(this.instanceDisabled()===!1&&this.onGainActionFunc)this.onGainActionFunc();break;
case a.VIEW_LOST_FOCUS:if(this.instanceDisabled()===!1&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.genericDraw();break;case a.MOUSE_DOWN:if(a.OB_checkMouseCoordinates(this,g)===!0&&e(g)===!0&&this.instanceDisabled()===!1){var f=this.anyMouseDownExternalEventListener(),k=this.anyMouseUpExternalEventListener(),o=this.instanceValidDownAction(),h=this.instanceValidUpAction();if(o===!0||h===!0||f===!0||k===!0){g.consumedFlag=!0;g.consumedPainter=
this;this.scheduleFullRedrawPainter();if(o===!0)this.executeActionMouseDown(),g.actionExecutedFlag=!0;if(f===!0)this.callExternalListener(b,g),g.actionExecutedFlag=!0;c=1}}break;case a.MOUSE_UP:g.consumedFlag===!0&&(a.OB_checkMouseCoordinates(this,g)===!0?e(g)===!0&&(this.instanceDisabled()===!1?(this.executeActionMouseUp&&this.executeActionMouseUp(),this.anyMouseUpExternalEventListener()&&this.callExternalListener(b,g)):a.getDebugLevel()>=2&&a.log_append_ln("hmi_circle Disabled while down case"),
this.scheduleFullRedrawPainter()):(a.getDebugLevel()>=2&&a.log_append_ln("hmi_circle Undo case"),this.scheduleFullRedrawPainter()))}return c};this.typeDraw=function(){var b=0,g=1,c="",g="",f=this.getOutlineWidth(),e=0,c=c=0;if(this.isFullPainterRedrawRequired()===!0)this.checkIfInterior()===!0&&(b=1),g=this.checkIfOutline()===!0?1:0,c="rgba("+this.getInteriorColor()+","+b+")",g="rgba("+this.getOutlineColor()+","+g+")",e=this.getOutlineStyle(),this.frmElmnt!==null&&a.removeSVG(this.frmElmnt),this.frmElmnt=
a.createSVGEllipseExt(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,c,g,f,this.getInnerFill()),e===a.DASHED?a.setSVGAttr(this.frmElmnt,"stroke-dasharray",f+" "+f):e===a.DOTTED&&(c=f*a.DASHRECT_LENGTH_MULT,a.setSVGAttr(this.frmElmnt,"stroke-dasharray",c+" "+f))}};a.PainterType_Oval.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.OB_checkMousePolygonCoordinates=function(k,e){var b=!1;if(k&&e)if(k.x!==null&&k.y!==null&&k.w!==null&&k.h!==null&&k.svgDoc!==null){var d=a.getMPainterScreenCrd(k);e.x>=d.x&&e.y>=d.y&&e.x<d.x+d.w&&e.y<d.y+d.h&&(b=!0)}else a.log_append_ln("hmi_polygon OB_checkMouseCoordinates error");return b};a.applyPolyWOffset=function(k){for(var e=-1,b=0,d=0,d=0;d<this.arrLen;d++)e===-1?e=this.arrXOrg[d]:this.arrXOrg[d]<e&&(e=this.arrXOrg[d]),this.arrXOrg[d]>b&&(b=this.arrXOrg[d]);if(this.arrLen===
2&&this.arrXOrg[0]===this.arrXOrg[1])this.arrX[1]=this.arrXOrg[1]+k.wOff,isNaN(this.arrX[1])===!0&&(a.log_append_ln("WARNING sc.applyPolyWOffset arrX[1] isNan so set to 0"),this.arrX[1]=0);else if(b!=e)for(d=0;d<this.arrLen;d++)this.arrX[d]=this.arrXOrg[d]+(this.arrXOrg[d]-e)*k.wOff/(b-e),isNaN(this.arrX[d])===!0&&(a.log_append_ln("WARNING sc.applyPolyWOffset arrX[i] isNan so set to 0"),this.arrX[d]=0)};a.applyPolyHOffset=function(k){for(var e=-1,b=0,d=0,d=0;d<this.arrLen;d++)e===-1?e=this.arrYOrg[d]:
this.arrYOrg[d]<e&&(e=this.arrYOrg[d]),this.arrYOrg[d]>b&&(b=this.arrYOrg[d]);if(this.arrLen===2&&this.arrYOrg[0]===this.arrYOrg[1])this.arrY[1]=this.arrYOrg[1]+k.hOff,isNaN(this.arrY[1])===!0&&(a.log_append_ln("WARNING sc.applyPolyHOffset arrY[1] isNan so set to 0"),this.arrY[1]=0);else for(d=0;d<this.arrLen;d++)b!=e&&(this.arrY[d]=this.arrYOrg[d]+(this.arrYOrg[d]-e)*k.hOff/(b-e),isNaN(this.arrY[d])===!0&&(a.log_append_ln("WARNING sc.applyPolyHOffset arrY[i] isNan so set to 0"),this.arrY[d]=0))};
a.applyXYOffset=function(k){for(var e=0,e=0;e<this.arrLen;e++)this.arrY[e]+=k.yOff,isNaN(this.arrY[e])===!0&&(a.log_append_ln("WARNING sc.applyXYOffset arrY[i] isNan so set to 0"),this.arrY[e]=0);for(e=0;e<this.arrLen;e++)this.arrX[e]+=k.xOff,isNaN(this.arrX[e])===!0&&(a.log_append_ln("WARNING sc.applyXYOffset arrX[i] isNan so set to 0"),this.arrX[e]=0)};a.applyPolyOffset=function(){if(this.hasAnyOffset()!==!1){this.arrX=a.cloneArray(this.arrXOrg);this.arrY=a.cloneArray(this.arrYOrg);var k=this.getOffsetStruct();
k.wOff!==0&&this.applyPolyWOffset(k);k.hOff!==0&&this.applyPolyHOffset(k);(k.xOff!==0||k.yOff!==0)&&this.applyXYOffset(k)}};a.PainterType_Polygon=function(k){function e(d){a.getMPainterScreenCrd(b);var g=0,c=0,f=1,e=0,k=!1;if(b.arrLen>=3){for(;g===0;){g=-1;for(e=0;e<b.arrLen;e++){var f=d.x,h=d.y+c,j=b.arrX[e],p=b.arrY[e],s=b.arrX[0],n=b.arrY[0];e<b.arrLen-1&&(s=b.arrX[e+1],n=b.arrY[e+1]);if(!(h==p&&p==n)){if(p>n)var u=j,t=p,j=s,p=n,s=u,n=t;if(!(h==p&&f==j)&&!(h<=p||h>n))if(f=(j-f)*(n-h)-(p-h)*(s-
f),f=f>0?-1:f<0?1:0,g*=f,g===0)break}}c++}g==1&&(k=!0)}return k}var b=this;this.base=a.PainterType_MPainter;this.base(k);this.arrLen=0;this.arrX=[];this.arrY=[];this.arrXOrg=[];this.arrYOrg=[];this.applyPolyOffset=a.applyPolyOffset;this.applyPolyWOffset=a.applyPolyWOffset;this.applyPolyHOffset=a.applyPolyHOffset;this.applyXYOffset=a.applyXYOffset;this.notify=function(b,g){var c=0;switch(b){case a.VIEW_GAIN_FOCUS:if(this.instanceDisabled()===!1&&this.onGainActionFunc)this.onGainActionFunc();break;
case a.VIEW_LOST_FOCUS:if(this.instanceDisabled()===!1&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.genericDraw();break;case a.MOUSE_DOWN:if(a.OB_checkMouseCoordinates(this,g)===!0&&e(g)===!0&&this.instanceDisabled()===!1){var f=this.anyMouseDownExternalEventListener(),k=this.anyMouseUpExternalEventListener(),o=this.instanceValidDownAction(),h=this.instanceValidUpAction();if(o===!0||h===!0||f===!0||k===!0){g.consumedFlag=!0;g.consumedPainter=
this;this.scheduleFullRedrawPainter();if(o===!0)this.executeActionMouseDown(),g.actionExecutedFlag=!0;if(f===!0)this.callExternalListener(b,g),g.actionExecutedFlag=!0;c=1}}break;case a.MOUSE_UP:g.consumedFlag===!0&&a.OB_checkMouseCoordinates(this,g)===!0&&(e(g)===!0?this.instanceDisabled()===!1?(this.executeActionMouseUp&&this.executeActionMouseUp(),this.anyMouseUpExternalEventListener()&&this.callExternalListener(b,g)):a.getDebugLevel()>=2&&a.log_append_ln("hmi_polygon Disabled while down case"):
a.getDebugLevel()>=2&&a.log_append_ln("hmi_polygon Undo case"),this.scheduleFullRedrawPainter())}return c};if(k.arrLen)this.arrLen=k.arrLen;if(k.arrX)this.arrXOrg=a.cloneArray(k.arrX),this.arrX=a.cloneArray(k.arrX);if(k.arrY)this.arrYOrg=a.cloneArray(k.arrY),this.arrY=a.cloneArray(k.arrY);this.typeDraw=function(){var b=0,g=1,c="",g="",f=this.getOutlineWidth(),e=0,c=c=0;if(this.isFullPainterRedrawRequired()===!0)this.applyPolyOffset(),this.checkIfInterior()===!0&&(b=1),g=this.checkIfOutline()===!0?
1:0,c="rgba("+this.getInteriorColor()+","+b+")",g="rgba("+this.getOutlineColor()+","+g+")",e=this.getOutlineStyle(),this.frmElmnt!==null&&a.removeSVG(this.frmElmnt),this.frmElmnt=a.createSVGPolygon(this.svgDoc,this.getRepaintElement(this.frmGroup),this.arrX,this.arrY,g,f,c),e===a.DASHED?a.setSVGAttr(this.frmElmnt,"stroke-dasharray",f+" "+f):e===a.DOTTED&&(c=f*a.DASHRECT_LENGTH_MULT,a.setSVGAttr(this.frmElmnt,"stroke-dasharray",c+" "+f))}};a.PainterType_Polygon.prototype=new a.PainterType_MPainter;
return a}(_SCIntern||{});_SCIntern=function(a){function k(a){a=a.trim();a=parseInt(a,0).toString(16);a=a.trim();return a.length==1?"0"+a:a}var e=function(){var a=1;return function(){return a++}}();a.PainterType_Polyline=function(b){this.base=a.PainterType_MPainter;this.base(b);var d=new a.InfoType;this.arrLen=0;this.arrX=[];this.arrY=[];this.arrXOrg=[];this.arrYOrg=[];this.applyPolyOffset=a.applyPolyOffset;this.applyPolyWOffset=a.applyPolyWOffset;this.applyPolyHOffset=a.applyPolyHOffset;this.applyXYOffset=a.applyXYOffset;
this.setEnd=function(a){if(a!==void 0&&(this.updateSrcExt(d,a,{ppo:null}),d.value!==d.valuePrev))d.valuePrev=d.value,this.scheduleFullRedrawPainter()};if(b.arrLen)this.arrLen=b.arrLen;if(b.arrX)this.arrXOrg=a.cloneArray(b.arrX),this.arrX=a.cloneArray(b.arrX);if(b.arrY)this.arrYOrg=a.cloneArray(b.arrY),this.arrY=a.cloneArray(b.arrY);this.typeDraw=function(){var b=0,c=1,f="",q="",o=this.getOutlineWidth(),h=c=0,h=0,h="polyline_",c=e(),j="ArrowL_",p="ArrowR_",s,n,u,t="0,0,",m=1;s=n=0;h+=c.toString();
j+=h;p+=h;if(this.isFullPainterRedrawRequired()===!0){this.applyPolyOffset();this.checkIfInterior()===!0&&(b=1);c=this.checkIfOutline()===!0?1:0;f="rgba("+this.getInteriorColor()+","+b+")";q="rgba("+this.getOutlineColor()+","+c+")";c=this.getOutlineStyle();if(this.frmElmnt!==null)a.removeSVG(this.frmElmnt),this.frmElmnt=null;m=this.getOutlineColor().split(",");m.length>2&&(u="#"+k(m[0])+k(m[1])+k(m[2]));b=this.svgDoc.getElementsByTagName("defs");o>4?(m=(o+6)/5,s=11*m,t+=parseInt(15*m,0)+","+parseInt(s,
0),n=this.svgDoc.createElementNS(a.SvgNs,"path"),n.setAttribute("d","M0,5 L14,10 L14,0 Z"),n.setAttribute("style","fill:"+u+";"),s=this.svgDoc.createElementNS(a.SvgNs,"marker"),s.setAttribute("id",j),s.setAttribute("preserveAspectRatio","xMinYMin meet"),s.setAttribute("viewBox",t),s.setAttribute("markerWidth","15"),s.setAttribute("markerHeight","11"),s.setAttribute("refX","14"),s.setAttribute("refY","5"),s.setAttribute("orient","auto"),s.appendChild(n),b[0].appendChild(s),arrowRpath=this.svgDoc.createElementNS(a.SvgNs,
"path"),arrowRpath.setAttribute("d","M0,0 L0,10 L14,5 Z"),arrowRpath.setAttribute("style","fill:"+u+";"),u=this.svgDoc.createElementNS(a.SvgNs,"marker"),u.setAttribute("id",p),u.setAttribute("preserveAspectRatio","xMinYMin meet"),u.setAttribute("viewBox",t),u.setAttribute("markerWidth","15"),u.setAttribute("markerHeight","11"),u.setAttribute("refX","0"),u.setAttribute("refY","5"),u.setAttribute("orient","auto")):(m=1,s=11*m,t+=parseInt(15*m,0)+","+parseInt(s,0),n=this.svgDoc.createElementNS(a.SvgNs,
"path"),n.setAttribute("d","M0,5 L14,10 L14,0 Z"),n.setAttribute("style","fill:"+u+";"),s=this.svgDoc.createElementNS(a.SvgNs,"marker"),s.setAttribute("id",j),s.setAttribute("preserveAspectRatio","xMinYMin meet"),s.setAttribute("viewBox",t),s.setAttribute("markerWidth","15"),s.setAttribute("markerHeight","11"),s.setAttribute("refX","14"),s.setAttribute("refY","5"),s.setAttribute("orient","auto"),s.setAttribute("markerUnits","userSpaceOnUse"),s.appendChild(n),b[0].appendChild(s),arrowRpath=this.svgDoc.createElementNS(a.SvgNs,
"path"),arrowRpath.setAttribute("d","M0,0 L0,10 L14,5 Z"),arrowRpath.setAttribute("style","fill:"+u+";"),u=this.svgDoc.createElementNS(a.SvgNs,"marker"),u.setAttribute("id",p),u.setAttribute("preserveAspectRatio","xMinYMin meet"),u.setAttribute("viewBox",t),u.setAttribute("markerWidth","15"),u.setAttribute("markerHeight","11"),u.setAttribute("refX","0"),u.setAttribute("refY","5"),u.setAttribute("orient","auto"),u.setAttribute("markerUnits","userSpaceOnUse"));u.appendChild(arrowRpath);b[0].appendChild(u);
n=Math.atan2(this.arrX[1]-this.arrX[0],this.arrY[1]-this.arrY[0]);s=Math.atan2(this.arrX[this.arrLen-1]-this.arrX[this.arrLen-2],this.arrY[this.arrLen-1]-this.arrY[this.arrLen-2]);u=Math.sin(n)*15*m;t=Math.cos(n)*11*m;b=Math.sin(s)*15*m;m*=Math.cos(s)*11;switch(a.atoi(d.value)){case 1:this.arrX[0]+=u;this.arrY[0]+=t;break;case 2:this.arrX[this.arrLen-1]-=b;this.arrY[this.arrLen-1]-=m;break;case 3:this.arrX[0]+=u,this.arrY[0]+=t,this.arrX[this.arrLen-1]-=b,this.arrY[this.arrLen-1]-=m}this.frmElmnt=
a.createSVGPolyline(this.svgDoc,this.getRepaintElement(this.frmGroup),this.arrX,this.arrY,this.arrLen,f,q,o);j="url(#"+j+")";p="url(#"+p+")";a.setSVGAttr(this.frmElmnt,"id",h);switch(a.atoi(d.value)){case 1:a.setSVGAttr(this.frmElmnt,"marker-start",j);break;case 2:a.setSVGAttr(this.frmElmnt,"marker-end",p);break;case 3:a.setSVGAttr(this.frmElmnt,"marker-start",j),a.setSVGAttr(this.frmElmnt,"marker-end",p)}c===a.DOTTED?a.setSVGAttr(this.frmElmnt,"stroke-dasharray",o+" "+o):c===a.DASHED&&(h=o*a.DASHRECT_LENGTH_MULT,
a.setSVGAttr(this.frmElmnt,"stroke-dasharray",h+" "+h))}}};a.PainterType_Polyline.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function k(a,b){var c=0;return c=(new Date(a,b,1)).getDay()}function e(d){return b(18,d,!a.SpecialCO.mbTmzEn,"MB_LocalDateTime",!0)}function b(b,g,c,f){var e=1970,k=70,h=1,j=1,p=0,s=0,n=0,u=0,t="",m=0,r="";c===!0?(e=g.getUTCFullYear(),k=e-2E3,h=g.getUTCMonth()+1,j=g.getUTCDate(),p=g.getUTCHours(),s=g.getUTCMinutes(),n=g.getUTCSeconds(),u=g.getUTCMilliseconds()):(e=g.getFullYear(),k=e-2E3,h=g.getMonth()+1,j=g.getDate(),p=g.getHours(),s=g.getMinutes(),n=g.getSeconds(),u=g.getMilliseconds());
t=p>=12?"PM":"AM";m=p;m%=12;b!==24&&(h<10&&(h="0"+h),j<10&&(j="0"+j),p<10&&(p="0"+p),s<10&&(s="0"+s),n<10&&(n="0"+n));if(a.stringcmp("MB_LocalDateTime",f))switch(b){case 0:r=j+"."+h+"."+e+" "+p+":"+s+":"+n;break;case 1:r=e+"."+h+"."+j+" "+m+":"+s+":"+n+" "+t;break;case 2:r=j+"."+h+"."+k+" "+p+":"+s+":"+n;break;case 3:r=k+"."+h+"."+j+" "+m+":"+s+":"+n+" "+t;break;case 4:r=j+"-"+h+"-"+e+" "+p+":"+s+":"+n;break;case 5:r=e+"-"+h+"-"+j+" "+p+":"+s+":"+n;break;case 6:r=j+"-"+h+"-"+k+" "+p+":"+s+":"+n;break;
case 7:r=k+"-"+h+"-"+j+" "+p+":"+s+":"+n;break;case 8:r=j+"/"+h+"/"+e+" "+p+":"+s+":"+n;break;case 9:r=e+"/"+h+"/"+j+" "+p+":"+s+":"+n;break;case 10:r=j+"/"+h+"/"+k+" "+p+":"+s+":"+n;break;case 11:r=k+"/"+h+"/"+j+" "+p+":"+s+":"+n;break;case 12:r=h+"/"+j+"/"+e+" "+m+":"+s+":"+n+" "+t;break;case 13:r=h+"/"+j+"/"+k+" "+m+":"+s+":"+n+" "+t;break;case 14:r=j+"."+h+"."+e+" "+p+":"+s;break;case 15:r=j+"."+h+"."+e;break;case 16:r=j+"."+h+"."+e+" "+p+":"+s;break;case 17:r=j+"."+h+"."+k;break;case 18:r=p+
":"+s+":"+n;break;case 19:r=m+":"+s+":"+n+" "+t;break;case 20:r=p+":"+s;break;case 21:r=m+":"+s+" "+t;break;case 22:u>0&&(r=a.pad(u,3),r="."+r);r=p+":"+s+":"+n+r;break;case 23:u>0&&(r=a.pad(u,3),r="."+r);r="TOD#"+p+":"+s+":"+n+r;break;case 24:r="T#";s+=p*60;s>0&&(r+=s+"m");r+=n+"s";r+=u+"ms";break;case 25:r=j+"-"+h+"-"+e;break;case 26:r="D#"+e+"-"+h+"-"+j;break;case 27:r="D#"+e+"-"+h+"-"+j+" "+p+":"+s+":"+n;break;default:r=""}else if(a.stringcmp(a.SpecialCO.dateLocalNow.name,f))switch(b){case 0:r=
j+"."+h+"."+e;break;case 1:r=e+"."+h+"."+j;break;case 2:r=j+"."+h+"."+k;break;case 3:r=k+"."+h+"."+j;break;case 4:r=j+"-"+h+"-"+e;break;case 5:r=e+"-"+h+"-"+j;break;case 6:r=j+"-"+h+"-"+k;break;case 7:r=k+"-"+h+"-"+j;break;case 8:r=j+"/"+h+"/"+e;break;case 9:r=e+"/"+h+"/"+j;break;case 10:r=j+"/"+h+"/"+k;break;case 11:r=k+"/"+h+"/"+j;break;case 12:r=h+"/"+j+"/"+e;break;case 13:r=h+"/"+j+"/"+k;break;case 14:r=j+"."+h+"."+e;break;case 15:r=j+"."+h+"."+e;break;case 16:r=j+"."+h+"."+e;break;case 17:r=
j+"."+h+"."+k;break;case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:r="";break;default:r=""}else if(a.stringcmp(a.SpecialCO.timeLocalNow.name,f))switch(b){case 0:r=p+":"+s+":"+n;break;case 1:r=m+":"+s+":"+n+" "+t;break;case 2:r=p+":"+s+":"+n;break;case 3:r=m+":"+s+":"+n+" "+t;break;case 4:r=p+":"+s+":"+n;break;case 5:r=p+":"+s+":"+n;break;case 6:r=p+":"+s+":"+n;break;case 7:r=p+":"+s+":"+n;break;case 8:r=p+":"+s+":"+n;break;case 9:r=p+":"+s+":"+n;break;case 10:r=p+
":"+s+":"+n;break;case 11:r=p+":"+s+":"+n;break;case 12:r=m+":"+s+":"+n+" "+t;break;case 13:r=m+":"+s+":"+n+" "+t;break;case 14:r=p+":"+s;break;case 15:r="";break;case 16:r=p+":"+s;break;case 17:r="";break;case 18:r=p+":"+s+":"+n;break;case 19:r=m+":"+s+":"+n+" "+t;break;case 20:r=p+":"+s;break;case 21:r=m+":"+s+" "+t;break;case 22:case 23:case 24:case 25:case 26:case 27:r="";break;default:r=""}return r}a.mb_calendarReadVal=function(b,g){var c=0,c=a.strstr(b,"_INDCO."),f="",e="",o=0,h=1970;c?a.prefixcmp("daysInMonth",
b)||a.prefixcmp("Wday1InMonth",b)?(a.strlen(c)<18&&(e=a.sprintf("MB_Calendar.month%s",c),f=a.directReadContainer(e),f!==a.CONTAINER_INITIAL_VALUE&&(o=a.atoi(f)),e=a.sprintf("MB_Calendar.year%s",c),f=a.directReadContainer(e),f!==a.CONTAINER_INITIAL_VALUE&&(h=a.atoi(f))),a.prefixcmp("daysInMonth",b)?f=a.sprintf("%d",(new Date(h,o,0)).getDate()):a.prefixcmp("Wday1InMonth",b)&&(f="0",h>=1970&&h<=2100&&(f=a.sprintf("%d",k(h,o)))),c=1):c=0:c=0;c===0&&(f=a.directReadContainer(g));return f};a.mb_calendarWriteVal=
function(b,g){var c=0,f=a.strstr(b,"_INDCO."),k=0,o=null,h=null,j=o=k=0,p=h="",s=0,n,u=0,h=null;if(f)if(a.prefixcmp("timestamp",b)&&a.strlen(f)<18&&a.getDebugLevel()>=2&&a.log_append_ln("calendar timetamp: '"+g+"'"),a.prefixcmp("action",b)&&a.strlen(f)<18){if(a.stringcmp(g,"SET_TS"))h=a.sprintf("MB_Calendar.time%s",f),p=a.directReadContainer(h),p!==a.CONTAINER_INITIAL_VALUE&&(h=/^(\d*):(\d*):(\d*)/.exec(p),h!==null&&(u=parseInt(h[1],10),n=parseInt(h[2],10),s=parseInt(h[3],10))),h=a.sprintf("MB_Calendar.day%s",
f),p=a.directReadContainer(h),p!==a.CONTAINER_INITIAL_VALUE&&(j=a.atoi(p)),h=a.sprintf("MB_Calendar.month%s",f),p=a.directReadContainer(h),p!==a.CONTAINER_INITIAL_VALUE&&(o=a.atoi(p)),h=a.sprintf("MB_Calendar.year%s",f),p=a.directReadContainer(h),p!==a.CONTAINER_INITIAL_VALUE&&(k=a.atoi(p)),a.SpecialCO.mbTmzEn.value===1?(h=new Date(k,o,j,u,n,s,0),k=h.getTime()/1E3):k=Date.UTC(k,o,j,u,n,s,0)/1E3,h=a.sprintf("MB_Calendar.timestamp%s",f),p=a.sprintf("%i",k),a.directWriteContainer(h,p);else if(a.stringcmp(g,
"GET_TS"))k=0,h=a.sprintf("MB_Calendar.timestamp%s",f),p=a.directReadContainer(h),p!==a.CONTAINER_INITIAL_VALUE&&(k=a.atoi(p)),o=new Date(0),a.SpecialCO.mbTmzEn.value===1?o.setUTCSeconds(k):o.setSeconds(k),o&&(h=a.sprintf("MB_Calendar.day%s",f),p=a.sprintf("%d",o.getDate()),a.directWriteContainer(h,p),h=a.sprintf("MB_Calendar.month%s",f),p=a.sprintf("%d",o.getMonth()),a.directWriteContainer(h,p),h=a.sprintf("MB_Calendar.year%s",f),p=a.sprintf("%d",o.getFullYear()),a.directWriteContainer(h,p),h=a.sprintf("MB_Calendar.time%s",
f),p=e(o),a.directWriteContainer(h,p));else if(a.stringcmp(g,"GET_DATETIME")&&(o=new Date))h=a.sprintf("MB_Calendar.day%s",f),p=a.sprintf("%d",o.getDate()),a.directWriteContainer(h,p),h=a.sprintf("MB_Calendar.month%s",f),p=a.sprintf("%d",o.getMonth()),a.directWriteContainer(h,p),h=a.sprintf("MB_Calendar.year%s",f),p=a.sprintf("%d",o.getFullYear()),a.directWriteContainer(h,p),h=a.sprintf("MB_Calendar.time%s",f),p=e(o),a.directWriteContainer(h,p);c=1}else c=0,(a.prefixcmp("day_",b)||a.prefixcmp("month_",
b)||a.prefixcmp("year_",b)||a.prefixcmp("time_",b)||a.prefixcmp("timestamp_",b))&&a.scheduleRepaint();c==1&&a.scheduleRepaint();return c};a.executeCalendarAction=function(b,g){a.getDebugLevel()>=2&&a.log_append_ln("executeCalendarAction name: "+b+"value: "+g)};a.DateTime_ReadDT=function(d,g,c,f,e,k){var h=0,j="";if(d===null||g===null)return j;h=parseInt(d,10);if(isNaN(h)===!0)return j;if(e!==null){var d="",d=1970,p=70,f=g=1,s=0,n=0,u=0,t=0,j="",m=null,r=p=p=0,w=0,x,v=null;switch(h){case 0:m=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)/.exec(e);
m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),d=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10));break;case 1:m=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(e);m!==null&&(d=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10),j=m[7]);break;case 2:m=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),p=parseInt(m[3],10),s=parseInt(m[4],10),n=
parseInt(m[5],10),u=parseInt(m[6],10),d=p+2E3);break;case 3:m=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(e);m!==null&&(p=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10),j=m[7],d=p+2E3);break;case 4:m=/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),d=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10));break;case 5:m=/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(e);
m!==null&&(d=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10));break;case 6:m=/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),p=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10),d=p+2E3);break;case 7:m=/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&(p=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],
10),u=parseInt(m[6],10),d=p+2E3);break;case 8:m=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),d=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10));break;case 9:m=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&(d=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10));break;case 10:m=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&
(f=parseInt(m[1],10),g=parseInt(m[2],10),p=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10),d=p+2E3);break;case 11:m=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(e);m!==null&&(p=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10),d=p+2E3);break;case 12:m=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(e);m!==null&&(g=parseInt(m[1],10),f=parseInt(m[2],10),d=parseInt(m[3],10),s=parseInt(m[4],10),n=
parseInt(m[5],10),u=parseInt(m[6],10),j=m[7]);break;case 13:m=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(e);m!==null&&(g=parseInt(m[1],10),f=parseInt(m[2],10),p=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10),j=m[7],d=p+2E3);break;case 14:m=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),d=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10));break;case 15:m=/^(\d*)\.(\d*)\.(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],
10),g=parseInt(m[2],10),d=parseInt(m[3],10));break;case 16:m=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),p=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),d=p+2E3);break;case 17:m=/^(\d*)\.(\d*)\.(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),p=parseInt(m[3],10),d=p+2E3);break;case 18:m=/^(\d*):(\d*):(\d*)/.exec(e);m!==null&&(s=parseInt(m[1],10),n=parseInt(m[2],10),u=parseInt(m[3],10));break;case 19:m=/^(\d*):(\d*):(\d*)\s(\w*)/.exec(e);
m!==null&&(s=parseInt(m[1],10),n=parseInt(m[2],10),u=parseInt(m[3],10),j=m[4]);break;case 20:m=/^(\d*):(\d*)/.exec(e);m!==null&&(s=parseInt(m[1],10),n=parseInt(m[2],10));break;case 21:m=/^(\d*):(\d*)\s(\w*)/.exec(e);m!==null&&(s=parseInt(m[1],10),n=parseInt(m[2],10),j=m[3]);break;case 22:m=/^(\d*):(\d*):(\d*)\.?(\d*)?/.exec(e);if(m!==null&&(s=parseInt(m[1],10),n=parseInt(m[2],10),u=parseInt(m[3],10),m.length>3&&m[4]!==void 0)){for(;m[4].length<3;)m[4]+="0";t=parseInt(m[4],10)}break;case 23:m=/^TOD#(\d*):(\d*):(\d*)\.?(\d*)?/.exec(e);
if(m!==null&&(s=parseInt(m[1],10),n=parseInt(m[2],10),u=parseInt(m[3],10),m.length>3&&m[4]!==void 0)){for(;m[4].length<3;)m[4]+="0";t=parseInt(m[4],10)}break;case 24:e=m=e;h=0;s=e.length;for(n=0;h<=s;){if(isNaN(e[h])===!1){for(n=a.atoi(e.substring(h,s));isNaN(e[h])===!1;)h++;e[h]=="s"?p=n:e[h]=="m"&&e[h+1]!="s"?r=n:e[h]=="m"&&e[h+1]=="s"?(x=n,h++):e[h]=="h"&&(w=n)}h++}s=w;n=r;u=p;t=x;break;case 25:m=/^(\d*)-(\d*)-(\d*)/.exec(e);m!==null&&(f=parseInt(m[1],10),g=parseInt(m[2],10),d=parseInt(m[3],10));
break;case 26:m=/^D#(\d*)-(\d*)-(\d*)/.exec(e);m!==null&&(d=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10));break;case 27:m=/^D#(\d*)-(\d*)-(\d*) (\d*):(\d*):(\d*)/.exec(e),m!==null&&(d=parseInt(m[1],10),g=parseInt(m[2],10),f=parseInt(m[3],10),s=parseInt(m[4],10),n=parseInt(m[5],10),u=parseInt(m[6],10))}m!==null?(a.stringcmp(j,"PM")&&(s+=12),c===!0?p=Date.UTC(d,g-1,f,s,n,u,t):(v=new Date(d,g-1,f,s,n,u,t),p=v.getTime()),k&&(p/=1E3),d=a.toFixed(p,0)):d="";j=d}else{if(g==a.SpecialCO.dateTimeLocalNow.name||
g==a.SpecialCO.dateLocalNow.name||g==a.SpecialCO.timeLocalNow.name)f===null&&(f=new Date);if(f===null)return a.err_append_ln("No date obj given!"),"";j=b(h,f,c,g,k)}return j};return a}(_SCIntern||{});_SCIntern=function(a){var k,e,b;a.BACnet_Alarming=function(b){this.TextFlags={id:!1,instance:!1,type:!1,from:!1,to:!1};this.readTextFlags=function(){var e="",e=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam10.name),10);if(isNaN(e)===!1)this.TextFlags.id=e>0?!0:!1;e=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam20.name),10);if(isNaN(e)===!1)this.TextFlags.instance=e>0?!0:!1;e=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam30.name),10);if(isNaN(e)===!1)this.TextFlags.type=e>0?!0:!1;e=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam40.name),
10);if(isNaN(e)===!1)this.TextFlags.from=e>0?!0:!1;e=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam50.name),10);if(isNaN(e)===!1)this.TextFlags.to=e>0?!0:!1};this.readTextFlags();a.getDebugLevel()>=2&&a.log_append_ln("BACnet instance created")};a.BACnet_HisLineType=function(b,e,c){var f=!1;this.setStateColor=function(b){this.color=a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR+b+"#"};this.setStateColor(c.StateNoStateColor.value);this.itemId=parseInt(b[0],10);if(isNaN(this.itemId)===!0)this.itemId=b[0];
this.typeId=parseInt(b[1],10);if(isNaN(this.typeId)===!0)this.typeId=b[1];this.htmlTag=e+"_"+this.typeId;this.on=parseInt(b[2],16);this.off=parseInt(b[3],16);this.on!==0&&this.off===0&&(f=!0);this.state=parseInt(b[4],10);if(isNaN(this.state))this.state=b[4];this.BACnetEvent={typeId:0,instance:0,type:0,from:0,to:0,description:""};this.BACnetEvent.typeId=parseInt(b[6],10);this.BACnetEvent.instance=parseInt(b[7],10);this.BACnetEvent.type=parseInt(b[8],10);this.BACnetEvent.from=parseInt(b[9],10);this.BACnetEvent.to=
parseInt(b[10],10);this.BACnetEvent.description=b[11];(isNaN(this.BACnetEvent.typeId)===!0||isNaN(this.BACnetEvent.instance)===!0||isNaN(this.BACnetEvent.type)===!0||isNaN(this.BACnetEvent.from)===!0||isNaN(this.BACnetEvent.to)===!0)&&a.err_append_ln("BACnet_HisLineType error");if(this.state===0)this.state="NAK",f===!0?this.setStateColor(c.StateOnNackedColor.value):this.setStateColor(c.StateOffNackedColor.value);else if(this.state==1)this.state="ACK",f===!0?this.setStateColor(c.StateOnAckedColor.value):
this.setStateColor(c.StateOffAckedColor.value)};k="Analog Input,Analog Output,Analog Value,Binary Input,Binary Output,Binary Value,Calendar,Command,Device,Event Enrollment,File,Group,Loop,Multi State Input,Multi State Output,Notification Class,Program,Schedule,Averaging,Multi State Value,Trend Log,Life Safety Point,Life Safety Zone,Accumulator,Pulse Converter,Event Log,Global Group,Trendlog Multiple,Load Control,Structured View".split(",");e="Change Of Bit String,Change Of State,Change Of Value,Command Failure,Floating Limit,Out Of Range,Complex Event Type,Deprecated,Change Of Life Safety,Enumeration,Buffer Ready,Unsigned Range".split(",");
b="State Normal,Fault,Off Normal,High Limit,Low Limit,Life Safety Alarm".split(",");a.BACnet_generateHistoryAlarmContainerValue=function(d,g){var c=0,f="";if(d.rArrayHistory===null)return"";for(c=0;c<d.rArrayHistory.length;c++){f+=d.rArrayHistory[c].color;f+=a.FVCOLSEPTOKEN2;f+=d.rArrayHistory[c].itemId;f+=a.FVCOLSEPTOKEN2;f+=d.rArrayHistory[c].typeId;f+=a.FVCOLSEPTOKEN2;var q=d.rArrayHistory[c],o="";if(q.BACnetEvent.description.length>0)o=q.BACnetEvent.description,o+=" ; ";g.id===!0&&(o+=q.BACnetEvent.typeId<
30&&q.BACnetEvent.typeId>=0?k[q.BACnetEvent.typeId]:q.BACnetEvent.typeId,o+=" ; ");g.instance===!0&&(o+=q.BACnetEvent.instance,o+=" ; ");g.type===!0&&(o+=q.BACnetEvent.type<6&&q.BACnetEvent.type>=0?e[q.BACnetEvent.type]:q.BACnetEvent.instance,o+=" ; ");g.from===!0&&(o+=q.BACnetEvent.from<6&&q.BACnetEvent.from>=0?b[q.BACnetEvent.from]:q.BACnetEvent.from,o+=" ; ");g.to===!0&&(o+=q.BACnetEvent.to<6&&q.BACnetEvent.to>=0?b[q.BACnetEvent.to]:q.BACnetEvent.to,o+=" ; ");f+=o;f+=a.FVCOLSEPTOKEN2;f+=a.getAlarmDateTimeByIntSec(d.rArrayHistory[c].on);
f+=a.FVCOLSEPTOKEN2;f+=a.getAlarmDateTimeByIntSec(d.rArrayHistory[c].off);f+=a.FVCOLSEPTOKEN2;f+=d.rArrayHistory[c].state;f+=a.FVLINESEPTOKEN2}return f};return a}(_SCIntern||{});
