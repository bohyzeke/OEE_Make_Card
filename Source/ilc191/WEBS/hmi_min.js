var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,g){a!=Array.prototype&&a!=Object.prototype&&(a[h]=g.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(h){return $jscomp.SYMBOL_PREFIX+(h||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var h=0;return $jscomp.iteratorPrototype(function(){return h<a.length?{done:!1,value:a[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,h){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var g=0,b={next:function(){if(g<a.length){var d=g++;return{value:h(d,a[d]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};
$jscomp.polyfill=function(a,h,g,b){if(h){g=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var d=a[b];d in g||(g[d]={});g=g[d]}a=a[a.length-1];b=g[a];h=h(b);h!=b&&null!=h&&$jscomp.defineProperty(g,a,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Math.trunc",function(a){return a?a:function(a){a=Number(a);if(isNaN(a)||Infinity===a||-Infinity===a||0===a)return a;var g=Math.floor(Math.abs(a));return 0>a?-g:g}},"es6","es3");$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var h=a[Symbol.iterator];return h?h.call(a):$jscomp.arrayIterator(a)};$jscomp.owns=function(a,h){return Object.prototype.hasOwnProperty.call(a,h)};
$jscomp.polyfill("WeakMap",function(a){function h(a){$jscomp.owns(a,b)||$jscomp.defineProperty(a,b,{value:{}})}function g(a){var b=Object[a];b&&(Object[a]=function(a){h(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(k){return!1}}())return a;var b="$jscomp_hidden_"+Math.random().toString().substring(2);g("freeze");g("preventExtensions");
g("seal");var d=0,e=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};e.prototype.set=function(a,c){h(a);if(!$jscomp.owns(a,b))throw Error("WeakMap key fail: "+a);a[b][this.id_]=c;return this};e.prototype.get=function(a){return $jscomp.owns(a,b)?a[b][this.id_]:void 0};e.prototype.has=function(a){return $jscomp.owns(a,b)&&$jscomp.owns(a[b],this.id_)};e.prototype.delete=
function(a){return $jscomp.owns(a,b)&&$jscomp.owns(a[b],this.id_)?delete a[b][this.id_]:!1};return e},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(a){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a($jscomp.makeIterator([[b,"s"]]));if("s"!=d.get(b)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=b||"s"!=f.value[1])return!1;f=e.next();return f.done||4!=f.value[0].x||"t"!=f.value[1]||!e.next().done?!1:!0}catch(m){return!1}}())return a;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var h=new WeakMap,g=function(a){this.data_={};this.head_=e();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}};g.prototype.set=function(a,d){var c=b(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=d:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:d},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,this.size++);return this};g.prototype.delete=
function(a){a=b(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};g.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=e();this.size=0};g.prototype.has=function(a){return!!b(this,a).entry};g.prototype.get=function(a){return(a=b(this,a).entry)&&a.value};g.prototype.entries=function(){return d(this,function(a){return[a.key,
a.value]})};g.prototype.keys=function(){return d(this,function(a){return a.key})};g.prototype.values=function(){return d(this,function(a){return a.value})};g.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};g.prototype[Symbol.iterator]=g.prototype.entries;var b=function(a,b){var c=b&&typeof b;"object"==c||"function"==c?h.has(b)?c=h.get(b):(c=""+ ++f,h.set(b,c)):c="p_"+b;var d=a.data_[c];if(d&&$jscomp.owns(a.data_,c))for(a=0;a<d.length;a++){var e=
d[a];if(b!==b&&e.key!==e.key||b===e.key)return{id:c,list:d,index:a,entry:e}}return{id:c,list:d,index:-1,entry:void 0}},d=function(a,b){var c=a.head_;return $jscomp.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})},e=function(){var a={};return a.previous=a.next=a.head=a},f=0;return g},"es6","es3");
$jscomp.findInternal=function(a,h,g){a instanceof String&&(a=String(a));for(var b=a.length,d=0;d<b;d++){var e=a[d];if(h.call(g,e,d,a))return{i:d,v:e}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,g){return $jscomp.findInternal(this,a,g).v}},"es6","es3");$jscomp.polyfill("Math.sinh",function(a){if(a)return a;var h=Math.exp;return function(a){a=Number(a);return 0===a?a:(h(a)-h(-a))/2}},"es6","es3");
$jscomp.polyfill("Math.cosh",function(a){if(a)return a;var h=Math.exp;return function(a){a=Number(a);return(h(a)+h(-a))/2}},"es6","es3");$jscomp.polyfill("Math.tanh",function(a){return a?a:function(a){a=Number(a);if(0===a)return a;var g=Math.exp(-2*Math.abs(a));g=(1-g)/(1+g);return 0>a?-g:g}},"es6","es3");$jscomp.polyfill("Math.asinh",function(a){return a?a:function(a){a=Number(a);if(0===a)return a;var g=Math.log(Math.abs(a)+Math.sqrt(a*a+1));return 0>a?-g:g}},"es6","es3");
$jscomp.polyfill("Math.acosh",function(a){return a?a:function(a){a=Number(a);return Math.log(a+Math.sqrt(a*a-1))}},"es6","es3");$jscomp.polyfill("Math.log1p",function(a){return a?a:function(a){a=Number(a);if(.25>a&&-.25<a){for(var g=a,b=1,d=a,e=0,f=1;e!=d;)g*=a,f*=-1,d=(e=d)+f*g/++b;return d}return Math.log(1+a)}},"es6","es3");$jscomp.polyfill("Math.atanh",function(a){if(a)return a;var h=Math.log1p;return function(a){a=Number(a);return(h(a)-h(-a))/2}},"es6","es3");
$jscomp.polyfill("Math.log10",function(a){return a?a:function(a){return Math.log(a)/Math.LN10}},"es6","es3");
var _SCIntern=function(a){function h(a,b){this.element=null;this.name="";this.name=b;a&&(this.element=a.getElementById(b))}a.drawRectShape=function(){var g=0,b=this.getOutlineWidth();!0===this.checkIfInterior()&&(g=1);var d=!0===this.checkIfOutline()?1:0;g=a.adjustColorStr(this.getInteriorColor(),g.toString());d=a.adjustColorStr(this.getOutlineColor(),d.toString());var e=this.getOutlineStyle();null!==this.frmElmnt&&(a.removeSVG(this.frmElmnt),this.frmElmnt=null);switch(e){case a.SOLID:this.frmElmnt=
a.createSVGRect(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,g,d,b,this.getInnerFill());break;case a.DASHED:case a.DOTTED:this.frmElmnt=a.createSVGRectDashed(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,g,d,b,this.getInnerFill(),e);break;default:a.log_append_ln("Unknown outline style")}};a.InfoType=function(){this.textg=this.img=this.valuePrev=this.value=this.e=this.type=this.name=null;this.h=this.w=this.y=this.x=0;this.fSz=this.fSt=
this.fN=null};a.PainterType_MPainter=function(g){function b(b,c,d,f,n,k,g){if(null!==b.value){var m=null,p=null,q=1,h=null,w=0,r=null,x=null,Y=null,D=null,B={rValue:b.value.toString()};b.type!==a.INFO_T_FILE&&(!0===d&&(d=e.getTcrFormatSource(),null!==d.value&&("undefined"===typeof n||null==n||1!=n||null==(p=e.getTcrGainSource())||null==p.value||isNaN(p.value)||(q=p.value),"undefined"===typeof k||null==k||1!=k||null==(h=e.getTcrOffsetSource())||null==h.value||isNaN(h.value)||(w=h.value),isNaN(B.rValue)||
(B.rValue=parseFloat(B.rValue)*parseFloat(q)+parseFloat(w)),"undefined"!==typeof f&&null!=f&&1==f&&(null==(r=e.getTcrMinValueSource())||null==r.value||isNaN(r.value)||(x=parseFloat(r.value)),null==(Y=e.getTcrMaxValueSource())||null==Y.value||isNaN(Y.value)||(D=parseFloat(Y.value)),null!==x&&B.rValue<x&&(a.MsgBoxErrorFlag=!0,a.err_append_ln("Invalid entry: "+B.rValue+" < "+x+"!")),null!==D&&B.rValue>D&&(a.MsgBoxErrorFlag=!0,a.err_append_ln("Invalid entry: "+B.rValue+" > "+D+"!"))),a.TCR_convertToValueFormat(d.value,
B))),!0===c&&null!=(m=e.getTcrUnitSource())&&null!=m.value&&void 0!=m.value&&(B.rValue=B.rValue+" "+m.value),!0===c&&(f=e.getFormatSource().value,null!==f&&(0===B.rValue.length&&(B.rValue=a.getTimestamp_ms()/1E3),-1!==f.indexOf("%t")?(n=1E3*B.rValue,c=new Date(0),-1!==f.indexOf("%tu")?(c.setTime(n),n=new Date(0),n.setMilliseconds(c.getUTCMilliseconds()),n.setSeconds(c.getUTCSeconds()),n.setMinutes(c.getUTCMinutes()),n.setHours(c.getUTCHours()),n.setDate(c.getUTCDate()),n.setMonth(c.getUTCMonth()),
n.setFullYear(c.getUTCFullYear()),f=f.replace("%tu",""),B.rValue=n.strftime(f)):(c.setTime(n),f=f.replace("%t",""),B.rValue=c.strftime(f))):B.rValue=a.sprintf(f,B.rValue)),(b.type===a.INFO_T_PPO||b.type===a.INFO_T_PASSWORDPPO)&&void 0!==g&&null!==g.ppo&&0<g.ppo.unit.length&&(B.rValue=B.rValue+" "+g.ppo.unit)),b.value=B.rValue)}}function d(b,c,d){b.type=c.type;b.name=c.name;b.type===a.INFO_T_FILE?(c.value=c.name,d=c.value.indexOf("|"),-1!=d&&(c.value=c.value.substring(0,d)),b.value=a.rl_resolveInfoName(c.value)):
b.value=a.RW_readSource(c.type,c.name,d)}var e=this;this.objId=0;this.objStr="";this.h=this.w=this.y=this.x=this.hOrg=this.wOrg=this.yOrg=this.xOrg=this.ptId=0;this.instanceValidUpAction=this.instanceValidDownAction=this.instanceDisabled=this.instanceDraw=this.painterGroupElement=this.shpElmnt=this.svgDoc=null;this.repaintElements=[];this.externEventListener=[];this.editModeFlag=this.mouseInFlag=!1;this.editSource=new a.InfoType;this.paintSource=new a.InfoType;this.pressedSource=new a.InfoType;this.disabledSource=
new a.InfoType;this.formatSource=new a.InfoType;this.tcrFormatSource=new a.InfoType;this.tcrUnitSource=new a.InfoType;this.tcrGainSource=new a.InfoType;this.tcrOffsetSource=new a.InfoType;this.tcrMinValueSource=new a.InfoType;this.tcrMaxValueSource=new a.InfoType;this.drawCellTxtOnXLinesSource=new a.InfoType;this.reloadFilePeriode=new a.InfoType;this.blendSources=[];this.blendSourcesPrevString=[];this.onLostActionFunc=this.onDrawActionFunc=this.onGainActionFunc=this.executeActionMouseUp=this.executeActionMouseDown=
null;this.isDisabledPrev=this.isDisabled=!1;this.isVisible=!0;this.notify=function(b,c){var d=0;switch(b){case a.VIEW_GAIN_FOCUS:if(!1===this.instanceDisabled()&&this.onGainActionFunc)this.onGainActionFunc();break;case a.VIEW_LOST_FOCUS:if(!1===this.instanceDisabled()&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();e.instanceDisabled&&(e.isDisabled=e.instanceDisabled(),e.isDisabled!==e.isDisabledPrev&&(e.isDisabledPrev=e.isDisabled,e.scheduleFullRedrawPainter()));
this.genericDraw();if(!1===this.instanceDisabled()&&this.onDrawActionFunc)this.onDrawActionFunc();break;case a.MOUSE_DOWN:if(!0===a.OB_checkMouseCoordinates(this,c))if(!1===this.instanceDisabled()){var f=this.anyMouseDownExternalEventListener(),n=this.anyMouseUpExternalEventListener(),k=this.instanceValidDownAction(),g=this.instanceValidUpAction();if(!0===k||!0===g||!0===f||!0===n)this.isPressed=!0,a.isDefined(c)&&(c.consumedFlag=!0,c.consumedPainter=this,this.scheduleFullRedrawPainter(),!0===k&&
(this.executeActionMouseDown(),c.actionExecutedFlag=!0),!0===f&&(this.callExternalListener(b,c),c.actionExecutedFlag=!0)),d=1}else d=0;else d=0;break;case a.MOUSE_UP:a.isDefined(a.g_MouseEventInfo)&&!0===a.g_MouseEventInfo.consumedFlag&&null!==a.g_MouseEventInfo.consumedPainter&&(!0===a.OB_checkMouseCoordinates(this,a.g_MouseEventInfo)||a.g_MouseEventInfo.consumedPainter===this?!1===this.instanceDisabled()?(this.executeActionMouseUp&&this.executeActionMouseUp(),this.anyMouseUpExternalEventListener()&&
this.callExternalListener(b,c)):2<=a.getDebugLevel()&&a.log_append_ln("hmi_mpainter Disabled while down case"):2<=a.getDebugLevel()&&a.log_append_ln("hmi-mpainter Undo case"),this.isPressed=!1,this.scheduleFullRedrawPainter());break;case a.MOUSE_MOVE:!0===a.OB_checkMouseCoordinates(this,c)?!1===this.instanceDisabled()&&!1===this.mouseInFlag&&(this.mouseInFlag=!0,a.isDefined(c)&&(c.type=a.MOUSE_OVER,c.typeStr=a.MOUSE_OVER_STR,this.getNumExternEventListener()&&this.callExternalListener(a.MOUSE_OVER,
c))):!0===this.mouseInFlag&&(this.mouseInFlag=!1,a.isDefined(c)&&(c.type=a.MOUSE_OUT,c.typeStr=a.MOUSE_OUT_STR,this.getNumExternEventListener()&&(d=this.callExternalListener(a.MOUSE_OUT,c))))}return d};this.dragImpl=function(b,c){var d=0,e=Date.now();Date.now();var f=e-b.lastWriteTSmS;3<=a.getDebugLevel()&&a.log_append_ln("dragImpl(..., "+c+" ) dragInfoPtr.lastWriteTSmS "+b.lastWriteTSmS+" timeNowMs "+e+" dragInfoPtr.previousToWriteValue "+b.previousToWriteValue+" deltaMs "+f);var n=0>=b.lastWriteTSmS||
b.destType!==a.INFO_T_PPO?a.RW_readSource(b.destType,b.destName):b.previousToWriteValue;!0===isNaN(n)&&(a.log_append_ln("WARNING this.dragImpl destPrevious value ["+n+"] is NaN so force to 0 "),n=0);a.toFixed(n,4);var k=a.RW_readSource_parseFloat(b.typeValueMin,b.nameValueMin,1);var g=a.RW_readSource_parseFloat(b.typeValueMax,b.nameValueMax,1);var m=a.RW_readSource_parseInt(b.typeOptionFlag,b.nameOptionFlag);n=k;var p=g;m=2==(m&2);var q=a.RW_readSource_parseFloat(b.typePxMin,b.namePxMin,1);var h=
a.RW_readSource_parseFloat(b.typePxMax,b.namePxMax,1);!0===isNaN(c)&&(a.log_append_ln("WARNING this.dragImpl offset value ["+c+"] is NaN so force to 0 "),c=0);h!=q?(d=0,h!=q-n?d=(p-n)*(c-q)/(h-q)+n:a.log_append_ln("ERROR in dragWritePPOFromDrag iOffsetMax["+h+"] == iOffsetMin - iMinPPO"),n=a.MIN(k,g),p=a.MAX(k,g),d<n&&(d=n),d>p&&(d=p),!0===isNaN(d)&&(a.log_append_ln("WARNING this.dragImpl destNow value ["+d+"] is NaN so force to 0 "),d=0),1==m?(n=a.toFixed(d,0),3<=a.getDebugLevel()&&a.log_append_ln("this.dragImpl dragInfoPtr.sliderOptionInteger active so rounds to int before write value= "+
d+" destRounded = "+n)):n=a.toFixed(d,4),b.destType===a.INFO_T_PPO?(0>=b.lastWriteTSmS||f>=a.DRAGINFO_WRITE_MIN_MS)&&b.previousToWriteValue!=n&&(3<=a.getDebugLevel()&&a.log_append_ln("dragImpl( "+c+" ) WRITE PPO destRounded: "+n+" dragInfoPtr.destName "+b.destName+" deltaMs "+f),a.writePPO(b.destName,n,!0),b.lastWriteTSmS=e):b.previousToWriteValue!=n&&(a.RW_writeSource(b.destType,b.destName,n),3<=a.getDebugLevel()&&a.log_append_ln("dragImpl( "+c+" ) WRITE CO destRounded: "+n+" dragInfoPtr.destName "+
b.destName+" deltaMs "+f),b.lastWriteTSmS=e),b.previousToWriteValue=n,a.scheduleRepaint()):m?(n=a.toFixed(d,0),3<=a.getDebugLevel()&&a.log_append_ln("this.dragImpl dragInfoPtr.sliderOptionInteger active so rounds to int before write value= "+d+" destRounded = "+n)):n=a.toFixed(d,4);return n};this.onDrag=function(){var b=this.getOffsetStruct();null!==this.dragXInfo&&(this.dragImpl(this.dragXInfo,a.g_MouseMoveEventInfo.x-this.xOrg-b.xOff-this.dragXInfo.relDownPos),3<=a.getDebugLevel()&&(a.log_append_ln("this.onDrag"),
a.log_append_ln("sc.g_MouseMoveEventInfo.x: "+a.g_MouseMoveEventInfo.x),a.log_append_ln("this.xOrg: "+this.xOrg),a.log_append_ln("offset.xOff: "+b.xOff),a.log_append_ln("this.dragXInfo.relDownPos: "+this.dragXInfo.relDownPos)));null!==this.dragYInfo&&(this.dragImpl(this.dragYInfo,a.g_MouseMoveEventInfo.y-this.yOrg-b.yOff-this.dragYInfo.relDownPos),3<=a.getDebugLevel()&&(a.log_append_ln("this.onDrag"),a.log_append_ln("sc.g_MouseMoveEventInfo.y: "+a.g_MouseMoveEventInfo.y),a.log_append_ln("this.yOrg: "+
this.yOrg),a.log_append_ln("offset.yOff: "+b.yOff),a.log_append_ln("this.dragYInfo.relDownPos: "+this.dragYInfo.relDownPos)));this.setOffset(b)};this.getDragXOffset=function(){var b=0;null!==this.dragXInfo&&(b=this.getDragOffset(this.dragXInfo));3<=a.getDebugLevel()&&a.log_append_ln("this.getDragXOffset: "+b);!0===isNaN(b)&&(a.log_append_ln("WARNING this.getDragXOffset dOffset value ["+b+"] is NaN so force to 0 "),b=0);return b};this.getDragYOffset=function(){var b=0;null!==this.dragYInfo&&(b=this.getDragOffset(this.dragYInfo));
!0===isNaN(b)&&(a.log_append_ln("WARNING this.getDragYOffset dOffset value ["+b+"] is NaN so force to 0 "),b=0);return b};this.getDragOffset=function(b){var c=0;null!==b&&(c=0>=b.lastWriteTSmS||b.destType!==a.INFO_T_PPO?a.RW_readSource(b.destType,b.destName):b.previousToWriteValue,!0===isNaN(c)&&(a.log_append_ln("WARNING this.getDragOffset destNow value ["+c+"] is NaN so force to 0 for "+b.destName),c=0));var d=parseFloat(a.RW_readSource(b.typeValueMin,b.nameValueMin));var e=parseFloat(a.RW_readSource(b.typeValueMax,
b.nameValueMax));var f=parseFloat(a.RW_readSource(b.typePxMin,b.namePxMin));b=parseFloat(a.RW_readSource(b.typePxMax,b.namePxMax));var n=0;e!=d-f?n=(c-d)*(b-f)/(e-d)+f:a.log_append_ln("ERROR in dragGetOffsetFromPPO iMaxPPO["+e+"]  == (iMinPPO - iOffsetMin)");d=n;!0===isNaN(d)&&(a.log_append_ln("WARNING this.getDragOffset dOffset value ["+d+"] is NaN so force to 0 "),d=0);d<f&&(d=f);d>b&&(d=b);return d};this.dragYInfo=this.dragXInfo=null;var f="0, 0, 0",c=!0,n="0, 0, 0",k=!1,w=!1,m=!0,p=null,r=1,q=
0,y=10,t="",u=0,v=10,z="",x=0,A=!1,C=!1,I=!1,H=0,T=0,F=!1,W=!1,M=null,Q=null,E={xOff:0,yOff:0,wOff:0,hOff:0},G=0,J=0,X=0,ca=0,da=0,ba="",aa="";this.getOffsetStruct=function(){return E};this.hasAnyOffset=function(){var a=!1;if(0!=E.xOff||0!=E.yOff||0!=E.wOff||0!=E.hOff||0!=G||0!=J)a=!0;return a};this.scheduleFullRedrawPainter=function(){A=!0};this.isFullPainterRedrawRequired=function(){return 4<=a.getDebugLevel()?!0:A};this.resetFullRedrawFlag=function(){A=!1};this.genericDraw=function(){if(!0===this.isFullPainterRedrawRequired()){e.getShapeElement()&&
(e.getShapeElement().setAttribute("stroke",a.adjustColorStr(e.getOutlineColor())),!0===e.checkIfOutline()?e.getShapeElement().setAttribute("stroke-width",e.getOutlineWidth()):e.getShapeElement().setAttribute("stroke-width","0"),e.ptId!==a.PT_NAME_BARGRAPH_ID&&(e.getShapeElement().setAttribute("fill",a.adjustColorStr(e.getInteriorColor())),!0===e.checkIfInterior()?e.getShapeElement().setAttribute("fill-opacity","1"):e.getShapeElement().setAttribute("fill-opacity","0")));var b="",c=0;0<X?c=0-Math.abs(X):
0>X&&(c=Math.abs(X));if(0!==c){b=""===ba||!0===isNaN(ba)?e.x+e.w/2+ca:ba;var d=""===aa||!0===isNaN(aa)?e.y+e.h/2+da:aa;b="rotate("+c+","+b+","+d+")"}c=e.getMainGroupElement();null!==c?(0<b.length&&c.setAttributeNS(null,"transform",b),0===b.length&&(b=c.getAttributeNS(null,"transform"),null!==b&&0<b.length&&c.setAttributeNS(null,"transform",""))):a.log_append_ln("getMainGroupElement returned null!")}null!==this.typeDraw&&this.typeDraw();this.resetFullRedrawFlag()};this.typeDraw=null;this.setTextHPos=
function(a){H!=a&&(H=a,this.scheduleFullRedrawPainter())};this.getTextHPos=function(){return H};this.setTextVPos=function(a){T!=a&&(T=a,this.scheduleFullRedrawPainter())};this.getTextVPos=function(){return T};this.setMultiline=function(a){C!=a&&(C=a,this.scheduleFullRedrawPainter())};this.getIsMultiline=function(){return C};this.setAutoAdjust=function(a){I!=a&&(I=a,this.scheduleFullRedrawPainter())};this.getIsAutoAjust=function(){return I};this.setTextColor=function(a){p!=a&&(p=a,this.scheduleFullRedrawPainter())};
this.setOutlineColor=function(a){n!=a&&(n=a,this.scheduleFullRedrawPainter())};this.setInnerFill=function(a){k!=a&&(k=a,this.scheduleFullRedrawPainter())};this.setU3d=function(a){w!=a&&(w=a,this.scheduleFullRedrawPainter())};this.setInteriorColor=function(a){f!=a&&(f=a,this.scheduleFullRedrawPainter())};this.setOutlineColorPressed=function(a){Q!=a&&(Q=a,this.scheduleFullRedrawPainter())};this.getOutlineColorPressed=function(){return a.isDefined(Q)&&"string"===typeof Q?Q:null};this.setInteriorColorPressed=
function(a){M!=a&&(M=a,this.scheduleFullRedrawPainter())};this.getInteriorColorPressed=function(){return a.isDefined(M)&&"string"===typeof M?M:null};this.setHasOutline=function(a){m!=a&&(m=a,this.scheduleFullRedrawPainter())};this.setHasInterior=function(a){c!=a&&(c=a,this.scheduleFullRedrawPainter())};this.setPressedFlag=function(a){F!=a&&(F=a,this.scheduleFullRedrawPainter())};this.setPaintAsRoundedRect=function(b){a.isDefined(b)&&"boolean"===typeof b&&(W=b)};this.checkPaintAsRoundedRect=function(){return W};
this.setUseFont=function(b){var c={ppo:null};if(null===b.type)y==v||y==v&&t==z&&u==x||(y=v,t=z,u=x,this.scheduleFullRedrawPainter());else if(b.type==a.INFO_T_FONT){if(y!=b.fSz||t!=b.fN||u!=b.fSt)y=b.fSz,t=b.fN,u=b.fSt,this.scheduleFullRedrawPainter()}else{b=a.RW_readSource(b.type,b.name,c);var d=b.split(",");3==d.length&&(c=d[0],b=parseInt(d[1],10),d=parseInt(d[2],10),!0===isNaN(d)||!0===isNaN(b)||0>=d||0>b||5<=b||y==d&&t==c&&u==b||(y=d,t=c,u=b,this.scheduleFullRedrawPainter()))}};this.getPressedFlag=
function(a){return F};this.getInteriorColor=function(){return f};this.getOutlineColor=function(){return n};this.getTextColor=function(){return null!==p?p:this.getOutlineColor()};this.getOutlineStyle=function(){return q};this.getOutlineWidth=function(){return r};this.getInnerFill=function(){return k};this.getU3d=function(){return w};this.checkIfInterior=function(){return c};this.checkIfOutline=function(){return m};this.getFontSize=function(){return y};this.getFontName=function(){return t};this.getFontStyle=
function(){return u};this.getSvgFontStyle=function(){switch(this.getFontStyle()){case 0:var a="normal";break;case 1:a="normal";break;case 2:a="italic";break;case 3:a="italic";break;default:a="normal"}return a};this.getSvgFontWeight=function(){switch(this.getFontStyle()){case 0:var a="lighter";break;case 1:a="bold";break;case 2:a="lighter";break;case 3:a="bold";break;default:a="lighter"}return a};this._getRepaintElement=function(a){var b,c=!1,d=0,e=null;for(b=0;b<this.repaintElements.length&&!1===
c;b++)this.repaintElements[b]&&this.repaintElements[b].name===a&&(c=!0,d=b);!1===c&&(this.repaintElements.push(new h(this.svgDoc,a)),d=this.repaintElements.length-1,c=!0);!0===c&&(this.repaintElements[d].element=this.svgDoc.getElementById(a),e=this.repaintElements[d].element);return e};this.getRepaintElementByIdx=function(a){return this.getRepaintElement("sc_obj_"+this.objId+"_rpn_"+a)};this.getRepaintElement=function(b){var c=this._getRepaintElement(b);c||3<=a.getDebugLevel()&&a.log_append_ln("getRepaintElement: "+
b+" not found!");return c};this.getShapeElement=function(){return this.shpElmnt};this.getMainGroupElement=function(){return this.svgDoc.getElementById(this.objStr)};this.getNumRepaints=function(){return this.repaintElements.length};this.changeRepaintVisibility=function(a,b){b?this.showRepaint(a):this.hideRepaint(a)};this.hideRepaint=function(b){var c=this.getRepaintElement(b);null===c?a.log_append_ln(b+" is null (hideRepaint)"):c.setAttributeNS(null,"visibility","hidden")};this.showRepaint=function(b){var c=
this.getRepaintElement(b);null===c?a.log_append_ln(b+" is null (showRepaint)"):c.setAttributeNS(null,"visibility","")};this.setVisibility=function(a){this.isVisible=a;var b=this.getMainGroupElement();null==b?console.log("setVisibility() domElmnt == null"):a?b.setAttributeNS(null,"visibility","visible"):b.setAttributeNS(null,"visibility","hidden")};this.setOffset=function(b){var c=this.getDragXOffset(),d=this.getDragYOffset();!0===isNaN(c)&&(a.log_append_ln("WARNING this.setOffset offsetDragx value ["+
c+"] is NaN so force to 0 "),c=0);!0===isNaN(d)&&(a.log_append_ln("WARNING this.setOffset offsetDragy value ["+d+"] is NaN so force to 0 "),d=0);!0===isNaN(b.xOff)&&(a.log_append_ln("WARNING this.setOffset offsetStruct.xOff value ["+b.xOff+"] is NaN so force to 0 "),b.xOff=0);!0===isNaN(b.yOff)&&(a.log_append_ln("WARNING this.setOffset offsetStruct.yOff value ["+b.yOff+"] is NaN so force to 0 "),b.yOff=0);!0===isNaN(b.wOff)&&(a.log_append_ln("WARNING this.setOffset offsetStruct.wOff value ["+b.wOff+
"] is NaN so force to 0 "),b.wOff=0);!0===isNaN(b.hOff)&&(a.log_append_ln("WARNING this.setOffset offsetStruct.hOff value ["+b.hOff+"] is NaN so force to 0 "),b.hOff=0);!0===isNaN(E.xOff)&&(a.log_append_ln("WARNING this.setOffset offsetStructPrev.xOff value ["+E.xOff+"] is NaN so force to 0 "),E.xOff=0);!0===isNaN(E.yOff)&&(a.log_append_ln("WARNING this.setOffset offsetStructPrev.yOff value ["+E.yOff+"] is NaN so force to 0 "),E.yOff=0);!0===isNaN(E.wOff)&&(a.log_append_ln("WARNING this.setOffset offsetStructPrev.wOff value ["+
E.wOff+"] is NaN so force to 0 "),E.wOff=0);!0===isNaN(E.hOff)&&(a.log_append_ln("WARNING this.setOffset offsetStructPrev.hOff value ["+E.hOff+"] is NaN so force to 0 "),E.hOff=0);!0===isNaN(G)&&(a.log_append_ln("WARNING this.setOffset offsetDragStructPrev.dragXOff value ["+G+"] is NaN so force to 0 "),G=0);!0===isNaN(J)&&(a.log_append_ln("WARNING this.setOffset offsetDragStructPrev.dragYOff value ["+J+"] is NaN so force to 0 "),J=0);if(E.xOff!==b.xOff||E.yOff!==b.yOff||E.wOff!==b.wOff||E.hOff!==
b.hOff||G!==c||J!==d)this.x=this.xOrg+b.xOff+c,!0===isNaN(this.x)&&(a.log_append_ln("WARNING this.setOffset this.x value ["+this.x+"] is NaN so force to 0 "),this.x=0),this.y=this.yOrg+b.yOff+d,!0===isNaN(this.y)&&(a.log_append_ln("WARNING this.setOffset this.y value ["+this.y+"] is NaN so force to 0 "),this.y=0),this.w=this.wOrg+b.wOff,!0===isNaN(this.w)&&(a.log_append_ln("WARNING this.setOffset this.w value ["+this.w+"] is NaN so force to 0 "),this.w=0),this.h=this.hOrg+b.hOff,!0===isNaN(this.h)&&
(a.log_append_ln("WARNING this.setOffset this.h value ["+this.h+"] is NaN so force to 0 "),this.h=0),0>this.w&&(this.x+=this.w,0>this.x&&(this.x=0),this.w=-this.w),0>this.h&&(this.y+=this.h,0>this.y&&(this.y=0),this.h=-this.h),2<=a.getDebugLevel&&a.log_append_ln("this.setOffset \nthis.x = "+this.x+" \nthis.y = "+this.y+" \nthis.w = "+this.w+" \nthis.h = "+this.h),E.xOff=b.xOff,E.yOff=b.yOff,E.wOff=b.wOff,E.hOff=b.hOff,G=c,J=d,this.scheduleFullRedrawPainter()};this.setRotate=function(a){if(ba!==a.cxAbs||
aa!==a.cyAbs||X!==a.angle||ca!==a.cxOff||da!==a.cyOff)ba=a.cxAbs,aa=a.cyAbs,ca=a.cxOff,da=a.cyOff,X=a.angle,this.scheduleFullRedrawPainter()};this.getNumExternEventListener=function(){return this.externEventListener.length};this.anyMouseDownExternalEventListener=function(){var b;for(b=0;b<this.externEventListener.length;b++)if(this.externEventListener[b]&&this.externEventListener[b].eventId===a.MOUSE_DOWN)return!0;return!1};this.anyMouseUpExternalEventListener=function(){var b;for(b=0;b<this.externEventListener.length;b++)if(this.externEventListener[b]&&
this.externEventListener[b].eventId===a.MOUSE_UP)return!0;return!1};this.callExternalListener=function(b,c){var d;for(d=0;d<this.externEventListener.length;d++)a.isDefined(this.externEventListener[d])&&this.externEventListener[d].eventId===b&&this.externEventListener[d].cbFunction(c,this.externEventListener[d].cbArgument1,this.externEventListener[d].cbArgument2);return 0};this.setEditSource=function(c){var e={ppo:null};void 0!==c&&!0!==this.editModeFlag&&(d(this.editSource,c,e),this.editSource.type!==
a.INFO_T_FILE&&b(this.editSource,!0,!0,!0,!0,!0,e),this.editSource.e=this.ptId!==a.PT_NAME_FILEVIEWER_ID&&this.ptId!==a.PT_NAME_BARGRAPH_ID&&this.ptId!==a.PT_NAME_IGRAPHIC_ID?this.getRepaintElement("sc_obj_"+this.objId+"_rpn_esrc"):null,this.editSource.value!==this.editSource.valuePrev&&(this.editSource.valuePrev=this.editSource.value,this.scheduleFullRedrawPainter()))};this.getEditSource=function(){return this.editSource};this.editSource_getValue_parseInt=function(){return parseInt(this.editSource.value,
10)};this.editSource_getValue_TextField=function(){var c={value:""};c.value=a.RW_readSource(this.editSource.type,this.editSource.name);this.editSource.type!==a.INFO_T_FILE&&b(c,!1,!0,!0,!0,!0);return c.value};this.editSource_getValue_DropDown=function(){return a.RW_readSource(this.editSource.type,this.editSource.name)};this.editSource_getValue_parseInt_TextField=function(){return parseInt(this.editSource_getValue_TextField(),10)};this.editSource_getValue_parseInt_DropDown=function(){return parseInt(this.editSource_getValue_DropDown(),
10)};this.updateSrcExt=function(a,b,c){d(a,b,c)};this.setFormat=function(a){void 0!==a&&(d(this.formatSource,a),this.formatSource.value!==this.formatSource.valuePrev&&(this.formatSource.valuePrev=this.formatSource.value,this.scheduleFullRedrawPainter()))};this.getFormatSource=function(){return this.formatSource};this.setTcrFormatSource=function(a){void 0!==a&&(d(this.tcrFormatSource,a),this.tcrFormatSource.value!==this.tcrFormatSource.valuePrev&&(this.tcrFormatSource.valuePrev=this.tcrFormatSource.value,
this.scheduleFullRedrawPainter()))};this.getTcrFormatSource=function(){return this.tcrFormatSource};this.setTcrUnitSource=function(a){void 0!==a&&(d(this.tcrUnitSource,a),this.tcrUnitSource.value!==this.tcrUnitSource.valuePrev&&(this.tcrUnitSource.valuePrev=this.tcrUnitSource.value,this.scheduleFullRedrawPainter()))};this.getTcrUnitSource=function(){return this.tcrUnitSource};this.setTcrMinValueSource=function(a){void 0!==a&&(d(this.tcrMinValueSource,a),this.tcrMinValueSource.value!==this.tcrMinValueSource.valuePrev&&
(this.tcrMinValueSource.valuePrev=this.tcrMinValueSource.value,this.scheduleFullRedrawPainter()))};this.getTcrMinValueSource=function(){return this.tcrMinValueSource};this.setTcrMaxValueSource=function(a){void 0!==a&&(d(this.tcrMaxValueSource,a),this.tcrMaxValueSource.value!==this.tcrMaxValueSource.valuePrev&&(this.tcrMaxValueSource.valuePrev=this.tcrMaxValueSource.value,this.scheduleFullRedrawPainter()))};this.getTcrMaxValueSource=function(){return this.tcrMaxValueSource};this.setTcrGainSource=function(a){void 0!==
a&&(d(this.tcrGainSource,a),this.tcrGainSource.value!==this.tcrGainSource.valuePrev&&(this.tcrGainSource.valuePrev=this.tcrGainSource.value,this.scheduleFullRedrawPainter()))};this.getTcrGainSource=function(){return this.tcrGainSource};this.setReloadFilePeriode=function(a){void 0!==a&&(d(this.reloadFilePeriode,a),this.reloadFilePeriode.value!==this.reloadFilePeriode.valuePrev&&(this.reloadFilePeriode.valuePrev=this.reloadFilePeriode.value,this.scheduleFullRedrawPainter()))};this.getReloadFilePeriode=
function(){return this.reloadFilePeriode};this.setTcrOffsetSource=function(a){void 0!==a&&(d(this.tcrOffsetSource,a),this.tcrOffsetSource.value!==this.tcrOffsetSource.valuePrev&&(this.tcrOffsetSource.valuePrev=this.tcrOffsetSource.value,this.scheduleFullRedrawPainter()))};this.getTcrOffsetSource=function(){return this.tcrOffsetSource};this.setDrawCellTxtOnXLinesSource=function(a){void 0!==a&&(d(this.drawCellTxtOnXLinesSource,a),this.drawCellTxtOnXLinesSource.value!==this.drawCellTxtOnXLinesSource.valuePrev&&
(this.drawCellTxtOnXLinesSource.valuePrev=this.drawCellTxtOnXLinesSource.value,this.scheduleFullRedrawPainter()))};this.getDrawCellTxtOnXLinesSource=function(){return this.drawCellTxtOnXLinesSource};this.setPaintSource=function(c){var e={ppo:null};void 0!==c&&(d(this.paintSource,c,e),this.paintSource.type!==a.INFO_T_FILE&&b(this.paintSource,!0,!0,!0,!0,!0,e),this.paintSource.e=this.getRepaintElement("sc_obj_"+this.objId+"_rpn_psrc"),this.paintSource.value!==this.paintSource.valuePrev&&(this.paintSource.valuePrev=
this.paintSource.value,this.scheduleFullRedrawPainter()))};this.getPaintSource=function(){return this.paintSource};this.setPressedSource=function(c){void 0!==c&&(d(this.pressedSource,c),this.pressedSource.type!==a.INFO_T_FILE&&b(this.pressedSource,!0,!0,!0,!0,!0),this.pressedSource.value!==this.pressedSource.valuePrev&&(this.pressedSource.valuePrev=this.pressedSource.value,this.scheduleFullRedrawPainter()))};this.getPressedSource=function(a){return this.pressedSource};this.setDisabledSource=function(c){void 0!==
c&&(d(this.disabledSource,c),this.disabledSource.type!==a.INFO_T_FILE&&b(this.disabledSource,!0,!0,!0,!0,!0),this.disabledSource.value!==this.disabledSource.valuePrev&&(this.disabledSource.valuePrev=c.value,this.scheduleFullRedrawPainter()))};this.getDisabledSource=function(a){return this.disabledSource};this.getBlendSources=function(){return this.blendSources};this.setBlendSources=function(c){if(void 0!==c){var e=c.length,f,n,k=this.blendSources.length,g=!1,m=null;if(k||e){for(n=0;n<k;n++)this.blendSources[n].visible=
!1;for(f=0;f<e;f++){for(n=0;n<k;n++)g=!1,m=null,this.blendSources[n].index==c[f].index&&(g=!0,m=this.blendSources[n],m.visible=!0);!1===g&&(m=new a.InfoType,m.index=c[f].index,m.e=this.getRepaintElement("sc_obj_"+this.objId+"_rpn_bsrc_"+m.index),m.visible=!0,this.blendSources.push(m));null!==m&&(d(m,c[f]),m.value!==m.valuePrev&&(m.valuePrev=m.value,this.scheduleFullRedrawPainter()),m.type!==a.INFO_T_FILE&&b(m,!0,!0,!0,!0,!0))}!0===this.compareBlendSources()&&this.scheduleFullRedrawPainter()}}};this.compareBlendSources=
function(){var a=this.blendSources.length,b="",c;for(c=0;c<a;c++)b+=this.blendSources[c].index+" "+this.blendSources[c].visible+"\n";return b!=this.blendSourcesPrevString?(this.blendSourcesPrevString=b,!0):!1};this.activateEditMode=function(b){if(null!==this.getEditSource()){var c=this.getFontSize();b=this.editSource_getValue_TextField();3<=a.getDebugLevel()&&(a.log_append_ln("hmi_mpainter activateEditMode editSource fSizeOrg: "+c),a.log_append_ln("hmi_mpainter activateEditMode editSource value: "+
b));var d=0;var e=0;a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.ClickableDiv)&&a.isDefined(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle)&&(e=a.getLeftPos(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle),d=a.getTopPos(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle));var f=a.getScreenCrds(this.x,this.y,this.w,this.h);if(null!=f){lUpperLeft=a.ME_teq2screenCoord(f.x+e,f.y+d);var n=a.ME_teq2screenCoord(f.x+e+f.w,f.y+d+f.h);if(null!=
lUpperLeft&&null!=n){d=lUpperLeft.y+"px";e=lUpperLeft.x+"px";var k=n.x-lUpperLeft.x+"px";n=n.y-lUpperLeft.y+"px";if(this.ptId===a.PT_NAME_FILEVIEWER_ID)f=f.scaleFactor*c,$(a.g_HTMLControlTextareaElmnt).css("position","absolute").css("top",d).css("left",e).css("width",k).css("height",n).css("font-size",f+"px").css("font-family",this.getFontName()).css("font-style",this.getSvgFontStyle()).css("font-weight",this.getSvgFontWeight()).val(b).css("display","block").focus();else{e=this.svgDoc.getElementById(this.objStr);
e&&e.setAttribute("visibility","hidden");d=this.editSource.type===a.INFO_T_PASSWORDPPO||this.editSource.type===a.INFO_T_PASSWORDCONTAINER?a.g_HTMLControlPwInputElement:a.g_HTMLControlInputElmnt;$("#SC_HTMLControlWrapper").append(d);e=e.getBBox();var g=a.ME_screenCoord2Teq(e.x,e.y,g);var m=a.ME_screenCoord2Teq(e.width,e.height,m);f=f.scaleFactor*c;$(d).css("position","absolute").css("top",g.y.toString()+"px").css("left",g.x.toString()+"px").css("width",(m.x-2).toString()+"px").css("height",(m.y-4).toString()+
"px").css("font-size",f+"px").css("font-family",this.getFontName()).css("font-style",this.getSvgFontStyle()).css("font-weight",this.getSvgFontWeight()).attr("detached","false").val(b).css("color","black").css("border-color","black").css("border-width","1px").css("outline","0").css("box-shadow","inset 0 0px 0px rgb(0, 0, 0), 0 0 0px rgb(0, 0, 0)").css("display","block").focus().select();d.setSelectionRange(0,9999)}this.editModeFlag=!0}}}};a.hideInputField=function(b){b===a.PT_NAME_FILEVIEWER_ID?$(a.g_HTMLControlTextareaElmnt).css("display",
"none").css("top","0px").css("left","0px").css("width","0px").css("height","0px").val(""):("false"==$(a.g_HTMLControlPwInputElement).attr("detached")&&$(a.g_HTMLControlPwInputElement).attr("detached","true").detach().val(""),"false"==$(a.g_HTMLControlInputElmnt).attr("detached")&&$(a.g_HTMLControlInputElmnt).attr("detached","true").detach().val(""),$(a.g_HTMLControlFileBrowser).attr("visibility","visible").css("top","0px").css("left","0px").css("width","0px").css("height","0px").val(""))};this.leaveEditMode=
function(b){var c=this.svgDoc.getElementById(this.objStr);3<=a.getDebugLevel&&a.log_append_ln("hmi_mpainter leaveEditMode");if(!0===this.editModeFlag){if(b)if(b=this.getEditSource(),null!==b){b.value=this.editSource.type===a.INFO_T_PASSWORDPPO||this.editSource.type===a.INFO_T_PASSWORDCONTAINER?a.g_HTMLControlPwInputElement.value:a.g_HTMLControlInputElmnt.value;var d={rValue:b.value};var f=e.getTcrFormatSource();null!==f.value&&a.TCR_convertToRawValueByFormat(f.value,d);b.value=d.rValue;this.ptId===
a.PT_NAME_FILEVIEWER_ID?(f=a.g_HTMLControlTextareaElmnt.value,f=f.replace(/\n/gi,a.FVLINESEPTOKEN2),f=f.replace(/\t/gi,a.FVCOLSEPTOKEN2),2<=a.getDebugLevel()&&a.log_append_ln(f),a.RW_writeSource(b.type,b.name,f)):b.type===a.INFO_T_PPO?a.writePPO(b.name,b.value,!0):a.RW_writeSource(b.type,b.name,b.value)}else a.log_append_ln("hmi_mpainter Leave edit mode error");a.hideInputField(this.ptId);this.editModeFlag=!1;c&&c.setAttribute("visibility","visible")}};g&&(g.cbDis&&(this.instanceDisabled=g.cbDis),
g.cbHasDown&&(this.instanceValidDownAction=g.cbHasDown),g.cbHasUp&&(this.instanceValidUpAction=g.cbHasUp),g.cbD&&(this.instanceDraw=g.cbD),g.cbADown&&(this.executeActionMouseDown=g.cbADown),g.cbAUp&&(this.executeActionMouseUp=g.cbAUp),g.cbAGain&&(this.onGainActionFunc=g.cbAGain),g.cbADraw&&(this.onDrawActionFunc=g.cbADraw),g.cbALost&&(this.onLostActionFunc=g.cbALost),g.dragX&&(this.dragXInfo=g.dragX,this.dragXInfo.relDownPos=0,this.dragXInfo.lastWriteTSmS=0),g.dragY&&(this.dragYInfo=g.dragY,this.dragYInfo.relDownPos=
0,this.dragYInfo.lastWriteTSmS=0),this.objId=g.oId,this.objStr="sc_obj_"+this.objId,this.shpStr=this.objStr+"_shp",this.frmGroup="sc_obj_"+this.objId+"_frm",this.frmOuterGroup=this.frmGroup+"_outer",this.frmInnerGroup=this.frmGroup+"_inner",this.olnGroup="sc_obj_"+this.objId+"_oln",this.bgElmnt=this.frm3dElmnt=this.frmElmnt=null,this.ptId=g.ptId,this.ptStr="sc_pty_"+this.ptId,this.xOrg=this.x=g.x,this.yOrg=this.y=g.y,this.wOrg=this.w=g.w,this.hOrg=this.h=g.h,f=g.iC,c=g.hI?!0:!1,n=g.oC,m=g.hO?!0:!1,
r=g.oW,q=g.oS,t=g.fN,y=g.fSz,u=g.fSt,z=t,v=y,x=u,g.sDc&&(this.shpElmnt=(this.svgDoc=g.sDc)?this.svgDoc.getElementById(this.shpStr):null,this.painterGroupElement=this.svgDoc?this.svgDoc.getElementById(this.objStr):null));this.scheduleFullRedrawPainter()};return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_Button=function(h){this.base=a.PainterType_MPainter;this.base(h);this.isPressed=!1;this.updateImage=a.updateImage;this.hideImages=a.hideImages;this.clearText=a.clearText;this.clearAllText=a.removeTxtChildren;this.clearPic=a.removePicChildren;this.drawSourceText=a.drawSourceText;this.paintSrcNOCACHEElmt=0;this.updateButtonSourceElement=function(g,b){var d=0;!0===this.getU3d()&&(d+=1);g.type!==a.INFO_T_FILE&&(d=this.getOutlineWidth());g.x=this.x+d;g.y=this.y+d;g.w=
this.w-2*d;g.h=this.h-2*d;a.setSvgAttrC(g.e,"x",g.x);a.setSvgAttrC(g.e,"y",g.y);a.setSvgAttrC(g.e,"width",g.w);a.setSvgAttrC(g.e,"height",g.h);g.type===a.INFO_T_FILE?0<g.e.id.indexOf("_rpn_bsrc_")?this.updateImage(g,b,!0):this.updateImage(g,b):(this.hideImages(g),0<g.e.id.indexOf("_rpn_bsrc_")?this.clearAllText(g):this.clearText(g),this.drawSourceText(g))};this.drawBackGroundShape=function(){var g=0,b=this.getOutlineWidth(),d=this.getRepaintElement(this.frmOuterGroup),e=this.getRepaintElement(this.frmInnerGroup),
f=d.parentNode.parentNode;for(!0===this.checkIfInterior()&&(g=1);null!=d&&d.hasChildNodes();)d.removeChild(d.firstChild);for(;null!=e&&e.hasChildNodes();)e.removeChild(e.firstChild);var c=a.isDefined(c=this.getInteriorColorPressed())?c:this.getInteriorColor();g=a.adjustColorStr(c,g.toString());c=a.adjustColorStr(this.getOutlineColor(),0,toString());a.createEzSVGRect(this.svgDoc,e,this.x,this.y,this.w,this.h,g,c,b,this.getInnerFill(),null,this.checkPaintAsRoundedRect(),!1,d,f)};this.drawOutLineShape=
function(){var g,b=this.getOutlineWidth(),d=this.getRepaintElement(this.olnGroup);for(g=!0===this.checkIfOutline()?1:0;null!=d&&d.hasChildNodes();)d.removeChild(d.firstChild);var e=a.adjustColorStr(this.getInteriorColor(),(0).toString());var f=a.isDefined(f=this.getOutlineColorPressed())?f:this.getOutlineColor();g=a.adjustColorStr(f,g.toString());f=this.getOutlineStyle();a.createEzSVGRect(this.svgDoc,d,this.x,this.y,this.w,this.h,e,g,b,this.getInnerFill(),f,this.checkPaintAsRoundedRect(),!0,null)};
this.typeDraw=function(){if(!0===this.isFullPainterRedrawRequired()||0<this.paintSrcNOCACHEElmt){this.paintSrcNOCACHEElmt=0;this.drawBackGroundShape();null!==this.frm3dElmnt&&(a.removeSVG(this.frm3dElmnt),this.frm3dElmnt=null);if(!0===this.getU3d()){var g=this.getOutlineWidth();!1===this.isPressed&&!1===this.getPressedFlag()?this.frm3dElmnt=a.createSVGRect_3dFrame(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,g):this.frm3dElmnt=a.createSVGRect(this.svgDoc,this.getRepaintElement(this.frmGroup),
this.x+g,this.y+g,this.w-2*g,this.h-2*g,"rgba(0,0,0,0.0)","rgba(0,0,0,1.0)",1)}g=this.getPaintSource();var b=this.getPressedSource();var d=this.getDisabledSource();var e=this.getBlendSources();var f=e.length;!0===this.isDisabled&&null!==d.name?(g.type=d.type,g.name=d.name,g.value=d.value,g.valuePrev=d.valuePrev):!0!==this.isPressed&&!0!==this.getPressedFlag()||null===b.name||(g.type=b.type,g.name=b.name,g.value=b.value,g.valuePrev=b.valuePrev);null!==g.name?(this.updateButtonSourceElement(g,b),0===
g.name.toLowerCase().indexOf("nocache")&&g.type===a.INFO_T_FILE&&this.paintSrcNOCACHEElmt++):(this.hideImages(g),this.clearText(g));for(b=0;b<f;b++)!0===e[b].visible&&null!==g.name?(this.updateButtonSourceElement(e[b]),0===e[b].name.toLowerCase().indexOf("nocache")&&e[b].type===a.INFO_T_FILE&&this.paintSrcNOCACHEElmt++):(this.hideImages(e[b]),this.clearText(e[b]));this.drawOutLineShape()}}};a.PainterType_Button.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});/*
 (c) 2013 iniNet Solutions GmbH - hmi_min.js
*/
var _hmibuild=0;
_SCIntern=function(a){function h(b){a.SpecialCO.lastPage.value=b+".teq";a.SpecialCO.currentPage.value=b+".teq";A(a.SpecialCO.lastPage.name,a.SpecialCO.lastPage.value,!1);A(a.SpecialCO.currentPage.name,a.SpecialCO.currentPage.value,!1)}function g(b){var c="";a.isDefined(b)&&a.isDefined(b.DestinationDiv)&&(c=encodeURIComponent(b.DestinationDiv.id));return c}function b(a){var b=g(a);b='<iframe style="position: absolute;"  id="'+a.Embed.id.replace("#","")+'" width="'+a.Width+'" height="'+a.Height+'" src="'+
a.ViewName+"_teq."+V+"#"+b+'" />';var c='<div style="margin: 0px; padding: 0px; position: absolute; width: '+a.Width+"px; height: "+a.Height+'px; background-color: rgba(128, 128, 128, 0.0);"  id='+a.ClickableDiv.id.replace("#","")+" />";a.DestinationDiv.handle=$(a.DestinationDiv.id)[0];a.DestinationDiv.jQHan=$(a.DestinationDiv.id);a.DestinationDiv.jQHan.html(b+c)}function d(a,b,c,d,e){c.ViewName=b;c.NotifyFunc=null;c.DestinationDiv.id=a;c.DestinationDiv.handle=null;c.ClickableDiv.id=a+"_clickableDiv";
c.ClickableDiv.handle=null;c.Embed.id=a+"_embedSVG";c.Embed.handle=null;c.Width=d;c.Height=e;c.ViewJumpScheduledFlag=!1;c.ViewJumpScheduledName="";c.URLJumpScheduledFlag=!1;c.URLJumpScheduledName="";c.URLJumpScheduledValue="";c.TRDSaveToFileScheduled=0;c.TRDSaveToFilePainter=null;c.TRDLoadScheduled=0;c.TRDLoadPainter=null;c.callbackMouse=null;c.SVGRegisterMade=!1}function e(c,e,f,n){var D=new a.ViewInstanceType,k=a.createNewEvent("load");u(c);d(c,e,D,f,n);a.ViewList.addView(D);b(D);a.getViewDOMHandles(D);
a.ME_registerViewMouseEventHandler(D);a.ME_registerViewKeyDownEventListener(window);D.Embed.handle.onload=function(){!0===D.unloadedFlag?(a.scheduleMsgBoxOpen(),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.err_append_ln(a.g_MouseEventInfo.ViewItem.ViewJumpScheduledName+"_teq."+V+" not Found!"),a.g_MouseEventInfo.ViewItem.ViewJumpScheduledFlag=!0,a.g_MouseEventInfo.ViewItem.ViewJumpScheduledName=a.SpecialCO.lastPage.value)):a.isDefined(a.g_MouseEventInfo)&&(a.g_MouseEventInfo.ViewItem=
D);null!=k&&dispatchEvent(k);return!0};h(e);2<=a.getDebugLevel()&&$("#SC_CurrentPage").html(a.SpecialCO.currentPage.value);dispatchEvent(k)}function f(b){return a.RW_readSource(a.INFO_T_PPO,b)}function c(b){return a.RW_readSource(a.INFO_T_CONTAINER,b)}function n(b){null!==a.SVGNotifyFuncHandle&&(3<=a.getDebugLevel&&a.log_append_ln("removeSelection()"),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.g_MouseEventInfo.ViewItem.NotifyFunc(a.REMOVE_SELECTION))}function k(b){null!==
a.SVGNotifyFuncHandle&&a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGWindow)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGWindow.g_ModalPainter)&&a.g_MouseEventInfo.ViewItem.SVGWindow.g_ModalPainter.notify(a.CHANGE_DDL_VALUE)}function w(){$("body").append('<div id="SC_HTMLControlWrapper"><select id="SC_HTMLControlDropDown" size="10" style="margin: 0px;" ></select><input id="SC_HTMLControlInput" type="text" value="" /><input id="SC_HTMLControlInputPW" type="password" value="" /><input id="SC_HTMLControlInputFile" type="file" value="" /><textarea wrap="hard" id="SC_HTMLControlTextArea"></textarea><textarea wrap="hard" id="SC_HTMLControlTextAreaForMsg"></textarea></div>');
$.fn.notexists=function(b){!this.length&&a.isDefined(b,"function")&&b();return this};a.g_HTMLControlDropDownElmnt=$("#SC_HTMLControlDropDown").notexists(function(){a.err_append_ln("SC_HTMLControlDropDown not found!")}).css("display","none").css("z-index","2147483638").css("overflow","auto").on("height","100px").on("change",k).get(0);a.g_HTMLControlInputElmnt=$("#SC_HTMLControlInput").notexists(function(){a.err_append_ln("SC_HTMLControlInput not found!")}).css("display","none").css("z-index","2147483638").on("blur",
n).detach().get(0);a.g_HTMLControlPwInputElement=$("#SC_HTMLControlInputPW").notexists(function(){a.err_append_ln("SC_HTMLControlInputPW not found!")}).css("display","none").css("z-index","2147483638").on("blur",n).detach().get(0);a.g_HTMLControlFileBrowser=$("#SC_HTMLControlInputFile").notexists(function(){a.err_append_ln("SC_HTMLControlInputFile not found!")}).css("display","none").css("z-index","2147483638").on("blur",n).get(0);a.g_HTMLControlTextareaElmnt=$("#SC_HTMLControlTextArea").notexists(function(){a.err_append_ln("SC_HTMLControlTextArea not found!")}).css("display",
"none").css("z-index","2147483638").get(0);a.g_HTMLControlTextareaForMsgElmnt=$("#SC_HTMLControlTextAreaForMsg").notexists(function(){a.err_append_ln("SC_HTMLControlTextAreaForMsg not found!")}).css("display","none").css("z-index","2147483638").get(0)}function m(b,c){var d=new XMLHttpRequest;d.open("GET",b,!0);d.responseType="arraybuffer";d.onreadystatechange=function(){d.readyState==d.DONE&&(200==d.status&&d.response?(2<=a.getDebugLevel()&&a.log_append_ln(" getServerCSVFileToArrayBuffer downloaded : "+
b+"\n xhr.status "+d.status+"\n xhr.statusText "+d.statusText),c(d.response)):(a.log_append_ln(" getServerCSVFileToArrayBuffer Failed to download: "+b+"\n xhr.status "+d.status+"\n xhr.statusText "+d.statusText),c(null)))};d.send()}function p(b,c){var d="";m(b,function(e){if(null==e||void 0==e)d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,a.g_FileEncodeStrList[b]=d;else{2<=a.getDebugLevel()&&a.log_append_ln("after getSrvCSVFileBOMEncodeStr2 "+b+" m.byteLength = "+e.byteLength);var f=new Uint8Array(e);
for(i=0;i<e.byteLength&&4>i;i++)2<=a.getDebugLevel()&&a.log_append_ln("sc.getSrvCSVFileBOMEncodeStr2 bufView ["+i+"] = "+f[i]);2<=e.byteLength&&((f[0]&255)==a.UNICODEFILE_UTF16LE_BOM0&&(f[1]&255)==a.UNICODEFILE_UTF16LE_BOM1?(d="text/csv;charset="+a.UNICODEFILE_UTF16LE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d):(f[0]&255)==a.UNICODEFILE_UTF16BE_BOM0&&(f[1]&255)==a.UNICODEFILE_UTF16BE_BOM1&&(d="text/csv;charset="+a.UNICODEFILE_UTF16BE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d));3<=e.byteLength&&(f[0]&255)==
a.UNICODEFILE_UTF8_BOM0&&(f[1]&255)==a.UNICODEFILE_UTF8_BOM1&&(f[2]&255)==a.UNICODEFILE_UTF8_BOM2&&(d="text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR,a.g_FileEncodeStrList[b]=d);0>=d.length&&(d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,a.g_FileEncodeStrList[b]=d);r(b,c)}});return d}function r(b,c){var d=null,e=null;2<=a.getDebugLevel()&&a.log_append_ln("Start loadLanguageCSV "+b);d=a.getSrvCSVFileBOMEncodeStr(b,c);void 0==d||null==d||0==d.length?1<=a.getDebugLevel()&&a.log_append_ln("loadLanguageCSV waits for encoding check ... for "+
b):(1<=a.getDebugLevel()&&a.log_append_ln("loadLanguageCSV encoding found : "+d+" for "+b),$.ajax({type:"GET",global:!1,async:!1,cache:!0,dataType:"text",beforeSend:function(a){a.overrideMimeType(d)},url:b,complete:function(){2<=a.getDebugLevel()&&a.log_append_ln("loadLanguageCSV load file completed. "+b)},success:function(c){2<=a.getDebugLevel()&&a.log_append_ln("loadLanguageCSV load file suceeded. "+b);e=c},error:function(){a.log_append_ln("ERROR loadLanguageCSV failed to load file! "+b)},statusCode:{404:function(){a.log_append_ln("ERROR File not found (404): "+
b)}}}));null!=e&&(c?R=a.parseTwoColCSVContent(e):N=a.parseTwoColCSVContent(e));1<=a.getDebugLevel()&&a.log_append_ln("End loadLanguageCSV "+b+" loadEncodingStr = "+d)}function q(b){var c="";var d=new XMLHttpRequest;if(a.isDefined(d)&&(d.open("GET",document.location,!1),d.send(null),d=d.getAllResponseHeaders().toLowerCase(),a.isDefined(d))){var e=d.split("\n");for(d=0;d<e.length;d++){var f=e[d].indexOf("server");if(0<=f){c=e[d].substring(f+7);break}}}a.isDefined(window.console)&&a.isDefined(window.console.log)&&
(window.console.log("HMI.js Visualisation _init before update from html params Library Build: '"+a.HMI_BUILD_DT+"' Version: '"+a.HMI_VERSION+"' Target: '"+a.TARGET_TYPE_NR+"' (c) 2013 ... 2017 iniNet Solutions GmbH"),window.console.log("client Navigator.userAgent: "+navigator.userAgent),location?window.console.log("Server location.hostname: "+location.hostname):window.console.log(" Server Hostname is not supported by this browser."));N.PM_AM="0";if(b){b.Width&&(da=b.Width);b.Height&&(ba=b.Height);
b.Period&&(aa=b.Period);b.Repaint&&(Y=b.Repaint);b.DebugLevel&&(ja=b.DebugLevel);b.PM_AM&&(d=parseInt(b.PM_AM,10),!1===isNaN(d)&&(N.PM_AM=b.PM_AM));b.ZoomMode&&(a.ZoomMode=b.ZoomMode);if(b.ContainerInitVar){d=b.ContainerInitVar;2<=a.getDebugLevel()&&a.log_append_ln("Start loadCoInitValues()");for(n in d)3<=a.getDebugLevel()&&a.log_append_ln("co_itq '"+n+"' = '"+d[n]+"'"),A(n,d[n],!0);2<=a.getDebugLevel()&&a.log_append_ln("End loadCoInitValues()")}if(b.staticCSV){var n=b.staticCSV;2<=a.getDebugLevel()&&
a.log_append_ln("Start loadStaticCSV()");r(n,!0);2<=a.getDebugLevel()&&a.log_append_ln("End loadStaticCSV()")}b.languageCSV&&(n=b.languageCSV,2<=a.getDebugLevel()&&a.log_append_ln("Start loadInitialLanguageCSV()"),r(n,!1),2<=a.getDebugLevel()&&a.log_append_ln("End loadInitialLanguageCSV()"));b.SVGViewExtension&&(V=b.SVGViewExtension);b.LocalPPORefresh&&(G=b.LocalPPORefresh);b.PPOInitFile&&(J=b.PPOInitFile);b.TargetTypeNr&&(a.TARGET_TYPE_NR=b.TargetTypeNr);b.MsgBox&&(a.MsgBox=b.MsgBox);b.FullRedraw&&
(a.FullRedraw=b.FullRedraw);b.cgiOrderListMaxSize&&(a.cgiOrderListMaxSize=parseInt(b.cgiOrderListMaxSize,10),!0===isNaN(a.cgiOrderListMaxSize)&&(a.cgiOrderListMaxSize=1200));b.cgiFail&&(a.Link.cgiFailMax=parseInt(b.cgiFail,10),!0===isNaN(a.Link.cgiFailMax)&&(a.Link.cgiFailMax=1));a.HMI_CGI_RELATIVTOROOT=b.CGI_RELATIVTOROOT?b.CGI_RELATIVTOROOT:a.CGI_RELATIVTOROOT_WEBROOT}window.console&&window.console.log&&window.console.log("HMI.js Visualisation _init after update from html params ' Target: '"+a.TARGET_TYPE_NR);
0<c.length&&window.console&&window.console.log&&window.console.log("HMI.js Visualisation _init after check server name from html params ' Target: '"+a.TARGET_TYPE_NR);a.cgiOrderListMaxSize=500;a.cgiOrderFileRandomStr=Math.floor(1E6*Math.random()).toString();1<=a.getDebugLevel()&&(b=a.GetBrowserInfos(),$("#SC_BrowserInfo").html(b.name+" "+b.fullVersion+"<br>HMI.js Version: "+a.HMI_VERSION+"<br> Build: "+a.HMI_BUILD_DT+"<br>Target: "+a.TARGET_TYPE_NR),$("#SC_UserAgent").html(navigator.userAgent.toLowerCase()));
if(!a.isDefined(a.g_MouseEventInfo))return a.showCriticalErrorScreen(101,"JavaScript Module hmi_mouse.js missing!"),!1;if(!a.isDefined(Date.prototype.strftime))return a.showCriticalErrorScreen(102,"JavaScript Module hmi_strftime.js missing!"),!1;if(!a.isDefined(a.PainterType_MPainter))return a.showCriticalErrorScreen(103,"JavaScript Module hmi_mpainter.js missing!"),!1;if(!a.isDefined(a.PainterType_Button))return a.showCriticalErrorScreen(104,"JavaScript Module hmi_button.js missing!"),!1;if(!a.isDefined(a.PainterType_TextField))return a.showCriticalErrorScreen(105,
"JavaScript Module hmi_textfield.js missing!"),!1;if(!a.isDefined(a.PainterType_Oval))return a.showCriticalErrorScreen(106,"JavaScript Module hmi_circle.js missing!"),!1;if(!a.isDefined(a.PainterType_Polygon))return a.showCriticalErrorScreen(107,"JavaScript Module hmi_polygon.js missing!"),!1;if(!a.isDefined(a.PainterType_Polyline))return a.showCriticalErrorScreen(108,"JavaScript Module hmi_polyline.js missing!"),!1;if(!a.isDefined(a.PainterType_IGraphic))return a.showCriticalErrorScreen(109,"JavaScript Module hmi_igraphic.js missing!"),
!1;if(!a.isDefined(a.PainterType_Bargraph))return a.showCriticalErrorScreen(110,"JavaScript Module hmi_bargraph.js missing!"),!1;if(!a.isDefined(a.PainterType_Rectangle))return a.showCriticalErrorScreen(111,"JavaScript Module hmi_rectangle.js missing!"),!1;a.initMsgBoxVars();a.VM_doRepaint();a.initSpiderLink();0<J.length&&a.loadAndParseTCRFile(J);w();a.lastActivityTs_ms=a.getTimestamp_ms();2<=a.getDebugLevel()&&a.log_append_ln("SpiderControl.init() End");return!0}function y(){$("body").append('<div id="SC_WebConsoleWrapper"><b>HMI.js Debug Console</b><br>Browser: <span id="SC_BrowserInfo"></span><br />\r\n\t\t\t<br />User Agent:<br /><span id="SC_UserAgent"></span><br /><br />\r\n\t\t\tCurrent Page: <span id="SC_CurrentPage"></span><br />\r\n\t\t\tRepaint Cnt: <span id="SC_RepaintCnt"></span><br />\r\n\t\t\tRefresh Cnt: <span id="SC_RefreshCnt"></span><br />\r\n\t\t\tMouse Move: <span id="SC_MouseMove"></span><br />\r\n\t\t\t<input type="button" id="SC_ClearWebConsole" value="Clear"/>\r\n\t\t\t<input type="button" id="SC_StopStartWebConsole" value="Stop" />\r\n\t\t\t<input type="button" id="SC_ConsoleLeftRight" value="Left" /><br />\r\n\t\t\t<div id="SC_WebConsoleContents"></div></div>');
$("#SC_ClearWebConsole").click(function(a){a.stopImmediatePropagation();$("#SC_WebConsoleContents").html("<br /><i><b>Cleared<b></i><br />")});$("#SC_StopStartWebConsole").click(function(b){b.stopImmediatePropagation();O&&($("#SC_StopStartWebConsole").attr("value","Start"),a.log_append_ln("Console Stoped"));if(O=!O)$("#SC_StopStartWebConsole").attr("value","Stop"),a.log_append_ln("Console Started")});$("#SC_WebConsoleWrapper").css({"font-family":"Courier New","font-size":"11px",position:"fixed",border:"solid 1px black",
"background-color":"white",top:"5px",right:"5px",width:"250px",height:"80%",padding:"10px",overflow:"scroll"});P=!1;$("#SC_ConsoleLeftRight").click(function(a){a.stopImmediatePropagation();P?($("#SC_ConsoleLeftRight").attr("value","Left"),$("#SC_WebConsoleWrapper").css({left:"",right:"5px"})):($("#SC_ConsoleLeftRight").attr("value","Right"),$("#SC_WebConsoleWrapper").css({left:"5px",right:""}));P=!P})}function t(b){3<=a.getDebugLevel()&&a.log_append_ln("unloadView");if(null!==b){if(!1===b.unloadedFlag&&
null!==b.SVGWindow){b.SVGWindow.onunload=null;b.SVGWindow.onbeforeunload=null;b.unloadedFlag=!0;b.LostFunc();b.LostFunc=null;b.RepaintFunc=null;var c=b.SVGPPOArray,d;if(null!==c)if(c)for(d=0;d<c.length;d++){var e=c[d];void 0!==a.g_PPOList[e]&&0<a.g_PPOList[e].regView&&a.g_PPOList[e].regView--}else a.log_append_ln("ERROR hmi.js unloadViewPPOs() failed!");a.destroyMouseMoveNotifyList();3<=a.getDebugLevel()&&a.log_append_ln("Unloaded: ("+b.ViewName+")");b.MouseCircle=null}}else a.log_append_ln("unloadView() Error: viewItem not found!")}
function u(b){b=a.ViewList.getViewByDestinationDivId(b);null!==b&&(t(b),a.ME_destroyViewKeyEventListener(b.SVGDocument),a.ME_destroyMouseEventHandler(b),b.DestinationDiv.jQHan.html(""),a.ViewList.removeViewByDestinationDivId(b.DestinationDiv.id))}function v(b){a.SpecialCO.language.value!=b&&(r(b,!1),a.SpecialCO.language.value=b)}function z(b){b=parseInt(b,10);!1===isNaN(b)&&(a.SpecialCO.skiprefresh.value=b)}function x(b){var c=null;$.ajax({type:"GET",global:!1,async:!1,timeout:a.AjaxTimeout,cache:!0,
success:function(b){c=b;3<=a.getDebugLevel()&&console.log("Result: "+c)},error:function(c){2<=a.getDebugLevel()&&console.log("Error retrieving = 1: "+b+" => "+c)},url:b,dataType:"text"});return c}function A(b,c,d){var e=0;b=a.rl_resolveInfoName(b);if(b!==a.SpecialCO.dateTimeLocalNow.name&&b!==a.SpecialCO.dateLocalNow.name&&b!==a.SpecialCO.timeLocalNow.name&&b!==a.SpecialCO.mbRunningTime.name)if(b===a.SpecialCO.blink.name)a.directWriteContainer(b,c);else if(b===a.SpecialCO.language.name)v(c);else if(b===
a.SpecialCO.mbMsgBox.name&&!0===d)a.noop();else if(b==a.SpecialCO.MB_SilentDebugPrintOut.name)"1"==c&&0<a.getDebugLevel()&&(a.log_append_ln(a.SilentDebugStr),a.SilentDebugStr="");else if(b==a.SpecialCO.polltime.name)C(c);else if(b==a.SpecialCO.skiprefresh.name)z(c);else if(b==a.SpecialCO.mbTmzEn.name)c=parseInt(c,10),!1===isNaN(c)&&(a.SpecialCO.mbTmzEn.value=c);else if(b==a.SpecialCO.mbInactivity.name||b==a.SpecialCO.mbInactivity.alias)"0"==c&&a.resetInactivity();else if(b==a.SpecialCO.mbInactivityMin.name)"0"==
c&&a.resetInactivity();else if(b==a.SpecialCO.mbMsgBox.name)a.SpecialCO.mbMsgBox.value=c,0==a.SpecialCO.mbMsgBox.value.length&&(a.SpecialCO.mbMsgBoxNr.value="0");else if(b==a.SpecialCO.mbMsgBoxNr.name)a.SpecialCO.mbMsgBoxNr.value=c;else if(b==a.SpecialCO.autoincr.name)a.SpecialCO.autoincr.value=c;else if(!0===a.prefixicmp(a.SpecialCO.MB_Calendar.name,b))e=a.mb_calendarWriteVal(b.substring(12,b.length),c),0===e&&a.directWriteContainer(b,c);else if(b==a.SpecialCO.MB_ClearFileCache.name)"7"==c?(a.isDefined(a.g_MouseEventInfo)&&
a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.Embed)&&a.g_MouseEventInfo.ViewItem.Embed.handle.contentWindow.location.reload(!0),a.initial=!1):"0"!=c&&console.log("MB_clearFileCache = "+c+" is not supported in HTML5");else if(b==a.SpecialCO.MB_domDeltaFlag.name){var f=[],n=null,k=[],g=null,D=null,m=null,p=d=null,q=null,B=0,h=0,w=p="",r=null,t=-1,y=-1,u=b=-1,Z=null,A=null,G=0;d=function(b){for(G=0;G<w.length-4;G++)"HMI."==w.substring(G,G+4)&&(w=w.slice(0,G)+"_SCIntern."+
w.slice(G+4),G+=b.length);A=new Function("PObjArr","document",w);A(r,Z);if(a.isDefined(r)&&0<r.length)for(G=r.length-1;0<G;G--)"undefined"!==typeof r[G]&&null!=r[G].objId&&G!=r[G].objId&&(r[r[G].objId]=r[G],r.splice(G,1))};var I=function(){f=J.getElementsByTagName("defs");D=f[0];g=Z;k=g.getElementsByTagName("defs");m=k[0];g=m.parentNode;0<f.length&&0<k.length&&(n=D.parentNode,g.replaceChild(D,m));for(B=0;B<n.childNodes.length;B++)if(D=n.childNodes[B],"undefined"!==typeof D.tagName&&D.id)if(m=g.getElementById(D.id),
null!=m)g.replaceChild(D,m);else{t=parseInt(D.id.substr(7),10);for(h=0;h<g.childNodes.length;h++)if(m=g.childNodes[h],null!=m&&null!=m.id&&""!=m.id&&(q=m,y=parseInt(m.id.substr(7),10),y>t)){g.insertBefore(D,m);break}g.lastChild==q?appendChild(D):g.insertBefore(D,q.nextSibling)}};e=function(){var a=0,b=null;do"undefined"!==typeof r[a]&&void 0!=r[a]&&null!=r[a]&&(b=r[a].svgDoc),a++;while(null==b&&a<r.length);return b};if("1"==c&&(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&
(r=a.g_MouseEventInfo.ViewItem.PObjArrFunc()),a.isDefined(r)&&0<r.length&&(Z=e(),w=x("deltajs_teq.svg")),null!=w&&0<w.length&&d("_SCIntern."),p=x("delta_teq.svg"),null!=p&&0<p.length)){var J=(new DOMParser).parseFromString(p,"application/xml");I()}if("2"==c){a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(r=a.g_MouseEventInfo.ViewItem.PObjArrFunc());if((p=x("delta_teq.svg"))&&0<p.length)for(J=(new DOMParser).parseFromString(p,"application/xml"),f=J.getElementsByTagName("defs"),
n=f[0].parentNode,B=0;B<n.childNodes.length;B++)D=n.childNodes[B],"undefined"!==typeof D.tagName&&D.id&&(t=parseInt(D.id.substr(7),10),null!=t&&0<t&&0>b?b=t:null!=t&&0<t&&0<b&&(u=t));if(a.isDefined(r)&&0<r.length){Z=e();if(0<b){r.splice(b,r.length-b);for(B=b;B<=u;B++)r.push(void 0);if(null!=Z)for(null!=(p=m=Z.getElementById("sc_obj_"+b))&&(g=m.parentNode);null!=p;)m=m.nextSibling,"undefined"!==typeof p.tagName&&p.id&&(t=parseInt(p.id.substr(7),10),null!=t&&t>=b&&g.removeChild(p)),p=m}w=x("deltajs_teq.svg")}null!=
w&&0<w.length&&d("_SCIntern.");0<b&&null!=J&&I()}if("3"==c&&a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(c=u=-1,r=a.g_MouseEventInfo.ViewItem.PObjArrFunc(),p=x("delta_teq.svg"),a.isDefined(r)&&0<r.length)){if("undefined"===typeof r[0]||void 0==r[0]||null==r[0]||0!=r[0].objId||"undefined"===typeof r[r-length-1]||void 0==r[r-length-1]||null==r[r-length-1]||r[r-length-1].objId!=r-length-1){b=r.length;for(B=0;B<b;B++)"undefined"!==typeof r[B]&&void 0!=r[B]&&null!=r[B]&&
null!=r[B].objId?r[b+r[B].objId]=r[B]:r[b+B]=void 0;r.splice(0,b)}b=u=-1;if(p&&0<p.length){J=(new DOMParser).parseFromString(p,"application/xml");f=J.getElementsByTagName("defs");n=f[0].parentNode;for(B=1;B<n.childNodes.length;B++)D=n.childNodes[B],"undefined"!==typeof D.tagName&&D.id&&(t=parseInt(D.id.substr(7),10),null!=t&&0<t&&0>b?b=t:null!=t&&0<=t&&0<b&&(u=t));-1==u&&(u=b)}Z=e();w=x("deltajs_teq.svg");null!=w&&0<w.length&&d("_SCIntern.");d=null;-1==b&&(b=u=1);for(B=b;B<=u;B++)null!=(m=Z.getElementById("sc_obj_"+
B))&&(d=m.nextElementSibling,g=m.parentNode,null!=(lDummyTagPtr=J.getElementById("sc_obj_"+B))?(c=B,g.replaceChild(lDummyTagPtr,m)):g.removeChild(m));for(;B<r.length;B++)if(null!=(m=Z.getElementById("sc_obj_"+B)))d=m.nextElementSibling,g=m.parentNode,g.removeChild(m),r[B]=void 0;else{d=null;r[B]=void 0;break}if(null==d)for(;B<r.length;B++)if(null!=(d=Z.getElementById("sc_obj_"+B))){g=d.parentNode;break}for(B=c;B<=u;B++)null!=(lDummyTagPtr=J.getElementById("sc_obj_"+B))&&g.insertBefore(lDummyTagPtr,
d)}}else a.prefixcmp(a.SpecialCO.NOINITSESSCO.name,b)&&a.writeSessionContainer(b,c)||a.prefixcmp(a.SpecialCO.MB_PERCO.name,b)&&a.writePersistentContainer(b,c)||a.directWriteContainer(b,c)}function C(b){b=parseInt(b,10);!1===isNaN(b)&&(a.SpecialCO.polltime.value=b)}function I(b,c){2<=a.getDebugLevel()&&a.log_append_ln("registerPPO: "+c);if(void 0===a.g_PPOList[c]){var d=new a.PPOListItemType;d.name=c;d.address=c;a.g_PPOList[c]=d}1===b?a.g_PPOList[c].regView++:2===b&&(a.g_PPOList[c].regHMI=!0)}function H(b){b=
a.rl_resolveInfoName(b);return void 0!==N[b]?N[b]:void 0!==R[b]?R[b]:b}function T(a){return H(a)}function F(){var b=!1;a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(b=a.g_MouseEventInfo.ViewItem.ViewJumpScheduledFlag);return b}function W(){var b=!1;a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(b=a.g_MouseEventInfo.ViewItem.URLJumpScheduledFlag);return b}function M(b,c,d,e,f){var n=0;var k=b;var g=0,D={},m=e;D.operator="";D.nPosStart=0;D.baseAddr=
0;do{var p=k.indexOf(c);if(0<=p){n=k.indexOf(d,p+c.length);-1===n&&(n=k.length);p+c.length===n&&(n=k.indexOf(d,p+c.length+1));-1===n&&(n=k.length+1);var q=k.substring(p,n+d.length);if(e&&2<=p)if("+"==k[p-1]||"-"==k[p-1]||"*"==k[p-1]||"/"==k[p-1]||"%"==k[p-1]){if(0<=p-2){q=p-2;var B=k,h=0;D=0;var w=q;var r={};var t=!1;r.baseAddr=0;for(r.nPosStart=0;0<=q;){var x=B.charAt(q);switch(x){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":var u=!0;break;default:u=!1}if(!1!==
u||"-"==x&&!t)h=q,r.nPosStart=q,q--,"-"==x&&(t=!0);else break}q=B.substring(h,w+1);q=parseInt(q,10);!1===isNaN(q)&&(D=q);r.baseAddr=D;D=r;D.operator=k[p-1];q=k.substring(D.nPosStart,n+d.length)}}else m=!1;r=k.substring(p+c.length,n);if(m){m=q;q=D;B=0;r=f(r);r=parseInt(r,10);!1===isNaN(r)&&(B=r);switch(q.operator){case "+":r=q.baseAddr+B;break;case "-":r=q.baseAddr-B;break;case "*":r=q.baseAddr*B;break;case "/":r=0===B?0:q.baseAddr/B;break;case "%":r=0===B?0:q.baseAddr%B;break;default:r=0}k=k.replace(m,
r.toString())}else m=q,r=f(r),k=k.replace(m,r);m=e}g++}while(0<=p&&0<=n&&100>g);100<=g&&a.log_append_ln("Resolve Loop aborted cycleCnt >= 100!",b);return k}function Q(b,c){var d="No Message",e={rValue:d,pIdx:0},f=a.getMergedExtendedPPOForPPOName(b);a.isDefined(f)?void 0!==a.g_PPOList[b]&&(0===a.g_PPOList[b].regView&&!1===a.g_PPOList[b].regHMI&&(a.g_PPOList[b].regHMI=!0),e.rValue=a.g_PPOList[b].value,a.TCR_readFormatedPPO(f,e),void 0!==c&&(c.ppo=a.g_PPOList[b]),d=e.rValue):a.log_append_ln("sc.rw_readPPO( "+
b+" ) error can't find name in sc.g_PPOList");return d}function E(b){b=a.rl_resolveInfoName(b);if(b==a.SpecialCO.language.name)var c=a.SpecialCO.language.value;else if(b==a.SpecialCO.polltime.name)c=a.SpecialCO.polltime.value;else if(b==a.SpecialCO.MB_SilentDebugPrintOut.name)c=a.SpecialCO.MB_SilentDebugPrintOut.value;else if(b==a.SpecialCO.skiprefresh.name)c=a.co_readSkipRefreshCO();else if(b==a.SpecialCO.dateTimeLocalNow.name)c=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateTimeLocalNow.name,
!1,null,null,!0);else if(b==a.SpecialCO.dateLocalNow.name)c=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,!1,null,null,!0);else if(b==a.SpecialCO.timeLocalNow.name)c=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!1,null,null,!0);else if(b==a.SpecialCO.mbTmzEn.name)c=a.SpecialCO.mbTmzEn.value;else if(b==a.SpecialCO.mbRunningTime.name)b=a.getTimestamp_ms(),0!==b-a.FirstRpntTs_ms&&(a.SpecialCO.mbRunningTime.value=a.toFixedNotRound((b-a.FirstRpntTs_ms)/
1E3,0)),c=a.SpecialCO.mbRunningTime.value;else if(b==a.SpecialCO.mbInactivity.name||b==a.SpecialCO.mbInactivity.alias)b=a.getTimestamp_ms(),0!==b-a.lastActivityTs_ms&&(a.SpecialCO.mbInactivity.value=a.toFixedNotRound((b-a.lastActivityTs_ms)/1E3,0)),c=a.SpecialCO.mbInactivity.value;else if(b==a.SpecialCO.mbInactivityMin.name)b=a.getTimestamp_ms(),0!==b-a.lastActivityTs_ms&&(a.SpecialCO.mbInactivityMin.value=a.toFixedNotRound((b-a.lastActivityTs_ms)/6E4,0)),c=a.SpecialCO.mbInactivityMin.value;else if(b==
a.SpecialCO.mbMsgBox.name)c=a.SpecialCO.mbMsgBox.value;else if(b==a.SpecialCO.mbMsgBoxNr.name)c=a.SpecialCO.mbMsgBoxNr.value;else if(b==a.SpecialCO.autoincr.name)c=a.SpecialCO.autoincr.value;else if(!0===a.prefixicmp(a.SpecialCO.MB_Calendar.name,b))c=a.mb_calendarReadVal(b.substring(12,b.length),b);else if(b==a.SpecialCO.MB_BrowserTypeID.name)c=a.SpecialCO.MB_BrowserTypeID.value;else if(b==a.SpecialCO.IsWebBrowser.name)c=a.SpecialCO.IsWebBrowser.value;else if(b==a.SpecialCO.MB_IsApp.name)c=a.SpecialCO.MB_IsApp.value;
else if(b==a.SpecialCO.MB_ClearFileCache.name)c=a.SpecialCO.MB_ClearFileCache.value;else if(b==a.SpecialCO.MB_SCREEN_WIDTH.name)c=a.SpecialCO.MB_SCREEN_WIDTH.value();else if(b==a.SpecialCO.MB_SCREEN_HEIGHT.name)c=a.SpecialCO.MB_SCREEN_HEIGHT.value();else if(b==a.SpecialCO.MB_WND_INNER_WIDTH.name)c=a.SpecialCO.MB_WND_INNER_WIDTH.value();else if(b==a.SpecialCO.MB_WND_INNER_HEIGHT.name)c=a.SpecialCO.MB_WND_INNER_HEIGHT.value();else if(b==a.SpecialCO.MB_domDeltaFlag.name)c=a.SpecialCO.MB_domDeltaFlag.value;
else if(b==a.SpecialCO.MB_DebugBoxLevel.name)c=a.SpecialCO.MB_DebugBoxLevel.value;else{if(a.prefixcmp(a.SpecialCO.NOINITSESSCO.name,b)&&(c=a.readSessionContainer(b),!1!==c)||a.prefixcmp(a.SpecialCO.MB_PERCO.name,b)&&(c=a.readPersistentContainer(b),!1!==c))return c;c=a.directReadContainer(b)}return c}a.HMI_VERSION="1.6.40.150.02";a.CLIENT="hmi.js";a.ILR_VERSION="1.2";a.CntReadPPOSource=0;a.HMI_BUILD_DT=_hmibuild;a.MsgBox="";a.FullRedraw=!1;a.HMI_CGI_RELATIVTOROOT=a.CGI_RELATIVTOROOT_WEBROOT;a.cgiHost=
"";a.host="";a.SilentDebugStr="";a.cgiOrderListMaxSize=500;a.cgiOrderFileRandomStr="randomStartStr";a.SvgNs="http://www.w3.org/2000/svg";a.XmlNs="http://www.w3.org/XML/1998/namespace";a.XlinkNS="http://www.w3.org/1999/xlink";a.TARGET_TYPE_STD_BASE=100;a.TARGET_TYPE_SAIA=a.TARGET_TYPE_STD_BASE+1;a.TARGET_TYPE_WAGO=a.TARGET_TYPE_STD_BASE+6;a.TARGET_TYPE_PHOENIX=a.TARGET_TYPE_STD_BASE+9;a.TARGET_TYPE_PANASONIC=a.TARGET_TYPE_STD_BASE+10;a.TARGET_TYPE_CODESYSV2=a.TARGET_TYPE_STD_BASE+20;a.INFO_T_UNDEFINED=
0;a.INFO_T_PPO=1;a.INFO_T_HTMLTAG=2;a.INFO_T_STRING=3;a.INFO_T_FILE=4;a.INFO_T_CONTAINER=5;a.INFO_T_TEQINDEX=6;a.INFO_T_URL=7;a.INFO_T_SYMBOL=8;a.INFO_T_PASSWORDPPO=9;a.INFO_T_PASSWORDCONTAINER=10;a.INFO_T_COLOR=11;a.INFO_T_FONT=12;a.INFO_T_CGI=14;a.INFO_T_CYPH_STRING=15;a.MAXKEYCODE=1E3;a.ENTER=209;a.DRAW_OBJECT=200;a.ESCAPE=255;a.REMOVE_SELECTION=202;a.SILENTDEBUGSTR_MAX="100000";a.WRITEVALWORKERMAXPENDINGWRITEVAL=5;a.VIEW_GAIN_FOCUS=a.MAXKEYCODE+1;a.VIEW_LOST_FOCUS=a.MAXKEYCODE+2;a.CHANGE_DDL_VALUE=
1E3;a.PT_NAME_UTFSTRINGSAVED_ID=0;a.PT_NAME_RECTANGLE_ID=1;a.PT_NAME_LINE_ID=2;a.PT_NAME_BUTTON_ID=3;a.PT_NAME_BARGRAPH_ID=4;a.PT_NAME_TEXTFIELD_ID=5;a.PT_NAME_EVENT_ID=6;a.PT_NAME_OVAL_ID=7;a.PT_NAME_POLYGON_ID=8;a.PT_NAME_FILEVIEWER_ID=9;a.PT_NAME_IGRAPHIC_ID=10;a.PT_NAME_DEGRADEV_ID=11;a.PT_NAME_MOIRE_ID=12;a.PT_NAME_POLYLINE_ID=13;a.PT_NAME_SPHERE2_ID=14;a.PT_NAME_DROPDOWN_ID=15;a.PT_NAME_CIRCULARGAUGE_ID=16;a.UNICODEFILE_ISO8859_ENCODINGSTR="ISO-8859-1";a.UNICODEFILE_UTF8_ENCODINGSTR="UTF-8";
a.UNICODEFILE_UTF8_BOM0=239;a.UNICODEFILE_UTF8_BOM1=187;a.UNICODEFILE_UTF8_BOM2=191;a.UNICODEFILE_UTF16BE_ENCODINGSTR="UTF-16BE";a.UNICODEFILE_UTF16BE_BOM0=254;a.UNICODEFILE_UTF16BE_BOM1=255;a.UNICODEFILE_UTF16LE_ENCODINGSTR="UTF-16LE";a.UNICODEFILE_UTF16LE_BOM0=255;a.UNICODEFILE_UTF16LE_BOM1=254;a.CGI_RELATIVTOROOT_HTMLTAGNAME="CGI_RELATIVTOROOT";a.CGI_RELATIVTOROOT_WEBROOT="";a.CGI_RELATIVTOROOT_DOCBASE=".";a.WAGO_VALIDPPONAMESTR1_1="M";a.WAGO_VALIDPPONAMESTR1_2="I";a.WAGO_VALIDPPONAMESTR1_3="Q";
a.WAGO_VALIDPPONAMESTR2_1="X";a.WAGO_VALIDPPONAMESTR2_2="B";a.WAGO_VALIDPPONAMESTR2_3="W";a.WAGO_VALIDPPONAMESTR2_4="D";a.WAGOSTRDEFAULTLENGT=32;a.WAGOSTRMAXLENGT=250;a.JS_PT_ONLINE_TREND=100;a.JS_PT_OFFLINE_TREND=101;a.JS_PT_SAVED_TREND=102;a.CONTAINER_INITIAL_VALUE="";a.ZoomMode="";var G=!1,J="";a.FirstRpntTs_ms=0;a.lastActivityTs_ms=0;a.previousDrawDateTimeFormat=0;a.previousMBTmzEn=0;a.inverseCTM=null;a.DRAGINFO_WRITE_MIN_MS=100;a.SOLID=0;a.DASHED=1;a.DOTTED=2;a.DASHRECT_LENGTH_MULT=4;a.DDL_MAX_LN=
50;a.V_POS_TOP=0;a.V_POS_CENTER=1;a.V_POS_BOTTOM=2;a.H_POS_RIGHT=0;a.H_POS_CENTER=1;a.H_POS_LEFT=2;a.TRDSaveFileMsg="Saving Trend curves to local HD_File...";a.TRDLoadingMsg="Loading Trend curves ...";a.ConnectionErrorMsg="Connection Error ...";a.SpecialCO={blink:{name:"@BLINKCO",value:"0"},autoincr:{name:"AUTOINCRCO",value:0},lastPage:{name:"@LAST_PAGE",value:""},currentPage:{name:"@CURRENT_PAGE",value:""},language:{name:"@LANGUAGE",value:""},polltime:{name:"MB_PollTimeSubstitute",value:0},skiprefresh:{name:"MB_SkipPPORefresh",
value:0},dateTimeLocalNow:{name:"MB_LocalDateTime",value:0},dateLocalNow:{name:"MB_LocalDate",value:0},timeLocalNow:{name:"MB_LocalTime",value:0},mbTmzEn:{name:"MB_tmz_en",value:0},mbRunningTime:{name:"MB_RunningTime",value:0},mbInactivity:{name:"MB_InactivityCounter",alias:"@MB_InactivityCounter",value:0},mbInactivityMin:{name:"MB_InactivityCounterMin",value:0},mbMsgBox:{name:"MessageBoxCO",value:0},mbMsgBoxNr:{name:"MSGBOX_NR",value:0},MB_Calendar:{name:"MB_Calendar",value:0},MB_BrowserTypeID:{name:"MB_BrowserTypeID",
value:5},IsWebBrowser:{name:"IsWebBrowser",value:1},MB_IsApp:{name:"MB_IsApp",value:0},MB_ClearFileCache:{name:"MB_clearFileCache",value:""},NOINITSESSCO:{name:"_NOINITSESSCO_",value:19},MB_PERCO:{name:"MB_PERCO_",value:19},MB_SCREEN_WIDTH:{name:"MB_SCREEN_WIDTH",value:function(){return screen.width.toString()}},MB_SCREEN_HEIGHT:{name:"MB_SCREEN_HEIGHT",value:function(){return screen.height.toString()}},MB_WND_INNER_WIDTH:{name:"MB_WND_INNER_WIDTH",value:function(){return window.innerWidth.toString()}},
MB_WND_INNER_HEIGHT:{name:"MB_WND_INNER_HEIGHT",value:function(){return window.innerHeight.toString()}},MB_domDeltaFlag:{name:"MB_domDeltaFlag",value:0},MB_DebugBoxLevel:{name:"MB_DebugBoxLevel",value:0},userLevel:{name:"userLevel",value:10},MB_SilentDebugPrintOut:{name:"MB_SilentDebugPrintOut",value:0}};a.COND={UNDEFINED:0,EQUAL:1,NO_CONDITION:2,NOT_EQUAL:3,GREATER:4,GREATER_EQUAL:5,LESSER:6,LESSER_EQUAL:7,AND_EQUAL:8,AND_EQUAL0:9,AND_NOTEQUAL0:10,EQUAL_IGNORECASE:11,NOT_EQUAL_IGNORECASE:12,IS_INT:13,
IS_FLOAT:14,OR_EQUAL0:15,OR_NOT_EQUAL0:16};a.mP=function(b){switch(b.ptId){case a.PT_NAME_UTFSTRINGSAVED_ID:b={};break;case a.PT_NAME_RECTANGLE_ID:b=new a.PainterType_Rectangle(b);break;case a.PT_NAME_LINE_ID:b=new a.PainterType_Line(b);break;case a.PT_NAME_BUTTON_ID:b=new a.PainterType_Button(b);break;case a.PT_NAME_BARGRAPH_ID:b=new a.PainterType_Bargraph(b);break;case a.PT_NAME_TEXTFIELD_ID:b=new a.PainterType_TextField(b);break;case a.PT_NAME_EVENT_ID:b=new a.PainterType_EventP(b);break;case a.PT_NAME_OVAL_ID:b=
new a.PainterType_Oval(b);break;case a.PT_NAME_POLYGON_ID:b=new a.PainterType_Polygon(b);break;case a.PT_NAME_FILEVIEWER_ID:b=new a.PainterType_FileViewer(b);break;case a.PT_NAME_IGRAPHIC_ID:b=new a.PainterType_IGraphic(b);break;case a.PT_NAME_DEGRADEV_ID:b={};break;case a.PT_NAME_MOIRE_ID:b={};break;case a.PT_NAME_POLYLINE_ID:b=new a.PainterType_Polyline(b);break;case a.PT_NAME_SPHERE2_ID:b={};break;case a.PT_NAME_DROPDOWN_ID:b=new a.PainterType_DropDown(b);break;case a.PT_NAME_CIRCULARGAUGE_ID:b=
{};break;case a.JS_PT_ONLINE_TREND:b=new a.PainterType_OnlineTrend(b);break;case a.JS_PT_OFFLINE_TREND:b=new a.PainterType_OfflineTrend(b);break;case a.JS_PT_SAVED_TREND:b=new a.PainterType_SavedTrend(b);break;default:b={}}return b};a.LPRItemType=function(a,b){this.address=a;this.value=b};var X="",ca="";a.LocalPPORefreshType=function(){this.cbWrite=this.cbUpdate=null;this.PPOList={};this.ListChanged=!1;this.getNumPPOs=function(){return Object.keys(this.PPOList).length}};a.LocalPPORefresh=new a.LocalPPORefreshType;
a.isFirstLoadViewCall=!0;a.fileLoaded=!1;a.fileEncoding="";a.onSvgWindowError=function(b,c,d){a.err_append_ln("Uncaught SVG Window Error! errorMsg:");a.err_append_ln(b);a.err_append_ln("url: "+c+" lineNumber: "+d)};a.onHtmlWindowError=function(b,c,d){a.err_append_ln("Uncaught HTML Window Error! errorMsg:");a.err_append_ln(b);a.err_append_ln("url: "+c+" lineNumber: "+d)};a.SaveFileError="Saving files on the client side is not supported in the HTML5 client!";a.LoadFileError="Loading files on the client side is not supported in the HTML5 client!";
a.SavedError="Saved Trending is not supported in the HTML5 client!";a.showCriticalErrorScreen=function(b,c){var d=a.GetBrowserInfos();$("body").html('<div><h1 style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">HMI.js Visualisation Error #'+b+":</h1>");$("body").append('<big><span style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">'+c+"</span></big></big></big><br>");$("body").append('<h2 style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">Browser Info: </h2>');
$("body").append('<big><span style="font-family: Helvetica,Arial,sans-serif; color: rgb(255, 255, 255);">'+d.name+" "+d.fullVersion+"<br>sc.HMI_VERSION: "+a.HMI_VERSION+"<br>sc.HMI_BUILD_DT: "+a.HMI_BUILD_DT+"<br>sc.TARGET_TYPE_NR: "+a.TARGET_TYPE_NR+"<br></span></big></big></big><br><div>");$("body").css("background-color","rgb(0,0,102)")};a.getTopPos=function(a){for(var b=0;null!==a;)b+=a.offsetTop,a=a.offsetParent;return b};a.getLeftPos=function(b){for(var c=0;a.isDefined(b);)c+=b.offsetLeft,b=
b.offsetParent;return c};a.registerModalPainter=function(b){a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGWindow)&&null===a.g_MouseEventInfo.ViewItem.SVGWindow.g_ModalPainter?a.g_MouseEventInfo.ViewItem.SVGWindow.g_ModalPainter=b:a.log_append_ln("ERROR registerModalPainter failed!")};a.removeModalPainter=function(){a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGWindow)&&
a.isDefined(a.g_MouseEventInfo.ViewItem.SVGWindow.g_ModalPainter)?a.g_MouseEventInfo.ViewItem.SVGWindow.g_ModalPainter=null:a.log_append_ln("ERROR removeModalPainter failed!")};a.resetInactivity=function(){a.lastActivityTs_ms=a.getTimestamp_ms()};a.ViewInstanceType=function(){this.unloadedFlag=!1;this.RepaintFunc=this.GainFunc=this.LostFunc=this.NotifyFunc=this.SVGPPOArray=this.SVGDocument=this.SVGWindow=this.SVGRootElmnt=null;this.mouseDisabled=this.locked=!1;this.DestinationDiv={id:"",handle:null,
jQHan:null};this.ClickableDiv={id:"",handle:null,jQHan:null};this.Embed={id:"",handle:null,jQHan:null};this.ViewName="";this.Height=this.Width=0;this.ViewJumpScheduledFlag=!1;this.ViewJumpScheduledName="";this.URLJumpScheduledFlag=!1;this.URLJumpScheduledValue=this.URLJumpScheduledName="";this.TRDSaveToFileScheduled=0;this.TRDSaveToFilePainter=null;this.TRDLoadScheduled=0;this.MouseCircle=this.TRDLoadPainter=null;this.MouseEventDispatcher=a.ME_mouseEventDispatcher;this.SVGRegisterMade=this.scheduleGainFocus=
!1};a.ViewInstanceListType=function(){this.list=[];this.getNumViews=function(){return this.list.length};this.addView=function(a){this.list.push(a)};this.removeViewByDestinationDivId=function(b){var c,d=this.getNumViews(),e=!1;for(c=0;c<d&&!1===e;c++)if(this.list[c]&&this.list[c].DestinationDiv.id==b){e=!0;break}!0===e&&(this.list[c].SVGRootElmnt=null,this.list[c].NotifyFunc=null,this.list[c].NotifyFunc=null,this.list[c].RepaintFunc=null,this.list[c].DestinationDiv.id="",this.list[c].ClickableDiv.id=
"",this.list[c].Embed.id="",this.list[c].DestinationDiv.handle=null,this.list[c].ClickableDiv.handle=null,this.list[c].Embed.handle=null,this.list[c].DestinationDiv.jQHan=null,this.list[c].ClickableDiv.jQHan=null,this.list[c].Embed.jQHan=null,a.removeFromArray(this.list,c))};this.getViewByIndex=function(b){var c=null;a.isDefined(b)&&b<this.getNumViews()&&0<=b&&(c=this.list[b]);return c};this.getViewByDestinationDivId=function(b){var c,d=this.getNumViews(),e=!1,f=null;if(a.isDefined(b))for(c=0;c<d&&
!1===e;c++)a.isDefined(this.list[c])&&a.isDefined(this.list[c].DestinationDiv)&&this.list[c].DestinationDiv.id==b&&(e=!0,f=this.list[c]);return f};this.doViewRepaints=function(){var a,b=this.getNumViews();for(a=0;a<b;a++)if(this.list[a]){var c=this.list[a];null!==c.RepaintFunc&&!0!==c.locked&&c.RepaintFunc()}};this.doViewGainIfRequired=function(){var a,b=this.getNumViews();for(a=0;a<b;a++)if(this.list[a]){var c=this.list[a];null!==c.GainFunc&&!0!==c.locked&&!0===c.scheduleGainFocus&&(c.GainFunc(),
c.scheduleGainFocus=!1)}}};a.ViewList=new a.ViewInstanceListType;a.g_HTMLControlInputElmnt=null;a.g_HTMLControlPwInputElement=null;a.g_HTMLControlTextareaElmnt=null;a.g_HTMLControlDropDownElmnt=null;a.g_HTMLControlFileBrowser=null;a.g_HTMLControlTextareaForMsgElmnt=null;a.g_WriteValWorker=null;a.g_WriteValWorkerUse=0;a.g_WriteValWorkerIsInit=0;a.g_ConnectFail=0;a.g_WriteValWorkerPendingWriteValsListSize=0;a.ConnectErrorMsgIsdisplaying=0;var da=640,ba=480;a.getHmiOriginalWidth=function(){return da};
a.getHmiOriginalHeight=function(){return ba};var aa=1E3,Y=5,ja=0,O=!0,P=!0;a.g_PPOList={};a.g_PPOAdressToNameMap={};a.g_CurrentPPOUpdateAskedNameToOrgNameMap={};a.tcrparsed=0;var L={};a.g_OnlineTrendEmitter=[];var K=[],U=[],N={},R={};a.g_MouseMoveNotificationList=[];a.g_MouseDragObject=null;a.RepaintFlag=1;var S=0,ea=0,V="svg",fa=!1,ha=!1,ia=!1;a.g_FileEncodeStrList={};a.startDrag=function(b){a.isDefined(a.g_MouseEventInfo)&&a.isDefined(b)&&(a.g_MouseDragObject=b,a.isDefined(b.dragXInfo)&&(b.dragXInfo.relDownPos=
a.g_MouseEventInfo.x-b.x,b.dragXInfo.lastWriteTSmS=0),a.isDefined(b.dragYInfo)&&(b.dragYInfo.relDownPos=a.g_MouseEventInfo.y-b.y,b.dragYInfo.lastWriteTSmS=0),2<=a.getDebugLevel()&&(a.log_append_ln("startDrag"),a.log_append_ln("painter.x"+b.x),a.log_append_ln("sc.g_MouseEventInfo.x"+a.g_MouseEventInfo.x),a.log_append_ln("painter.dragXInfo.relDownPos"+b.dragXInfo.relDownPos)))};a.releaseDragIfRequired=function(){if(a.isDefined(a.g_MouseDragObject)){a.isDefined(a.g_MouseDragObject.dragXInfo)&&(a.g_MouseDragObject.dragXInfo.lastWriteTSmS=
0);a.isDefined(a.g_MouseDragObject.dragYInfo)&&(a.g_MouseDragObject.dragYInfo.lastWriteTSmS=0);var b=a.g_MouseDragObject.getOffsetStruct();a.isDefined(a.g_MouseDragObject.dragXInfo)&&(a.g_MouseDragObject.dragImpl(a.g_MouseDragObject.dragXInfo,a.g_MouseMoveEventInfo.x-a.g_MouseDragObject.xOrg-b.xOff-a.g_MouseDragObject.dragXInfo.relDownPos),3<=a.getDebugLevel()&&(a.log_append_ln("releaseDragIfRequired"),a.log_append_ln("sc.g_MouseMoveEventInfo.x: "+a.g_MouseMoveEventInfo.x),a.log_append_ln("sc.g_MouseDragObject.xOrg: "+
a.g_MouseDragObject.xOrg),a.log_append_ln("offset.xOff: "+b.xOff),a.log_append_ln("sc.g_MouseDragObject.dragXInfo.relDownPos: "+a.g_MouseDragObject.dragXInfo.relDownPos)));a.isDefined(a.g_MouseDragObject.dragYInfo)&&(a.g_MouseDragObject.dragImpl(a.g_MouseDragObject.dragYInfo,a.g_MouseMoveEventInfo.y-a.g_MouseDragObject.yOrg-b.yOff-a.g_MouseDragObject.dragYInfo.relDownPos),3<=a.getDebugLevel()&&(a.log_append_ln("releaseDragIfRequired"),a.log_append_ln("sc.g_MouseMoveEventInfo.y: "+a.g_MouseMoveEventInfo.y),
a.log_append_ln("sc.g_MouseDragObject.yOrg: "+a.g_MouseDragObject.yOrg),a.log_append_ln("offset.yOff: "+b.yOff),a.log_append_ln("sc.g_MouseDragObject.dragYInfo.relDownPos: "+a.g_MouseDragObject.dragYInfo.relDownPos)));a.g_MouseDragObject.setOffset(b);a.g_MouseDragObject=null;2<=a.getDebugLevel()&&a.log_append_ln("releaseDrag")}};a.hideNDisableHTMLControlTextareaForMsgElmnt=function(){var b=document.activeElement;null!==a.g_HTMLControlTextareaForMsgElmnt&&a.g_HTMLControlTextareaForMsgElmnt===b&&(a.g_HTMLControlTextareaForMsgElmnt.blur(),
3<=a.getDebugLevel()&&a.log_append_ln("  sc.hideNDisableHTMLControlTextareaForMsgElmnt() sc.g_HTMLControlTextareaForMsgElmnt has focus so send him the blur()"));null!==a.g_HTMLControlTextareaForMsgElmnt&&$(a.g_HTMLControlTextareaForMsgElmnt).css("display","none").css("top","0px").css("left","0px").css("width","0px").css("height","0px").val("")};a.showNEnableHTMLControlTextareaForMsgElmnt=function(b,c,d,e){var f=20,n="Courier New",k="bold",g="normal",m=null,p;var D=a.getScreenCrds(5,5,window.innerWidth-
15,window.innerHeight-15);if(""===a.ZoomMode||"No Auto Zoom"===a.ZoomMode)for(p=0;p<a.ViewList.getNumViews();p++)if(a.ViewList.getViewByIndex(p)&&!1===a.stringcmp(a.ViewList.getViewByIndex(p).ViewName,a.MsgBox)){var q=a.ViewList.getViewByIndex(p);a.isDefined(q)&&a.isDefined(q.width)&&a.isDefined(q.height)&&(D=a.getScreenCrds(5,5,q.width-15,q.height-15))}a.isDefined(b)&&(f=b.getFontSize(),n=b.getFontName(),k=b.getSvgFontWeight(),g=b.getSvgFontStyle(),D=a.getScreenCrds(b.x,b.y,b.w,b.h));a.isDefined(c)&&
a.isDefined(d)&&(m=a.RW_readSource(c,d),1===e&&(m+="\n"+(new Date).toTimeString().slice(0,8)));a.isDefined(m)&&a.isDefined(a.g_HTMLControlTextareaForMsgElmnt)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.ClickableDiv)&&a.isDefined(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle)&&null!=D&&(c=a.getLeftPos(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle),b=a.getTopPos(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle),lUpperLeft=a.ME_teq2screenCoord(D.x+c,D.y+b),
e=a.ME_teq2screenCoord(D.x+c+D.w,D.y+b+D.h),a.isDefined(lUpperLeft)&&a.isDefined(e)&&(b=lUpperLeft.y+"px",c=lUpperLeft.x+"px",d=e.x-lUpperLeft.x+"px",e=e.y-lUpperLeft.y+"px",3<=a.getDebugLevel()&&(a.log_append_ln("hmi_mpainter showNEnableHTMLControlTextareaForMsgElmnt msgPainter fSizeOrg: "+f),a.log_append_ln("hmi_mpainter showNEnableHTMLControlTextareaForMsgElmnt msg value: "+m),a.log_append_ln("hmi_mpainter showNEnableHTMLControlTextareaForMsgElmnt cssTop: "+b),a.log_append_ln("hmi_mpainter showNEnableHTMLControlTextareaForMsgElmnt cssLeft: "+
c),a.log_append_ln("hmi_mpainter showNEnableHTMLControlTextareaForMsgElmnt cssWidth: "+d),a.log_append_ln("hmi_mpainter showNEnableHTMLControlTextareaForMsgElmnt cssHeight: "+e)),D=D.scaleFactor*f,$(a.g_HTMLControlTextareaForMsgElmnt).css("position","absolute").css("background-color","rgba(128,128,128,0.8)").css("color","rgb(255,255,255)").css("border","none").css("top",b).css("left",c).css("width",d).css("height",e).css("font-size",D+"px").css("font-family",n).css("font-style",g).css("font-weight",
k).css("display","block").css("padding-top","10px").css("text-align","center").val(m),f=$('<div id="temp"></div>'),f.css("position","absolute").css("background-color","rgba(102,102,102,0.8)").css("color","rgb(255,255,255)").css("border","none").css("top",b).css("left",c).css("width",d).css("font-size",D+"px").css("font-family",n).css("font-style",g).css("font-weight",k).css("display","block").css("text-align","center").text("test text"),$("body").append(f),n=$("#temp").height(),f.remove(),m=m.split("\n").length,
1<m&&(n*=m),m=($(a.g_HTMLControlTextareaForMsgElmnt).height()-n)/2,m=parseInt(m,10),!0===isNaN(m)&&(m=$(a.g_HTMLControlTextareaForMsgElmnt).height()/2),$(a.g_HTMLControlTextareaForMsgElmnt).css("padding-top",m+"px")))};a.getSrvCSVFileBOMEncodeStr=function(b,c){var d="";a.isDefined(b)&&(void 0===a.g_FileEncodeStrList[b]&&p(b,c),void 0!==a.g_FileEncodeStrList[b]&&(d=a.g_FileEncodeStrList[b]));return d};a.createMouseCircle=function(b){null!==b&&null!==b.SVGDocument&&(b.MouseCircle=b.SVGDocument.createElementNS(a.SvgNs,
"circle"),null!==b.MouseCircle&&(b.MouseCircle.setAttributeNS(null,"visibility","hidden"),b.MouseCircle.setAttributeNS(null,"cx",25),b.MouseCircle.setAttributeNS(null,"cy",25),b.MouseCircle.setAttributeNS(null,"r",5),b.MouseCircle.setAttributeNS(null,"fill","red"),b.MouseCircle.setAttributeNS(null,"id","MouseCircle"),b.SVGRootElmnt.appendChild(b.MouseCircle)))};a.showMouseCirlce=function(a,b,c){null!==a.MouseCircle&&(a.MouseCircle.setAttributeNS(null,"visibility",""),a.MouseCircle.setAttributeNS(null,
"cx",b),a.MouseCircle.setAttributeNS(null,"cy",c))};a.registerSVG=function(b,c,d,e,f,n,k,g,m,p,q,h,r){2<=a.getDebugLevel()&&a.log_append_ln("sc.registerSVG "+q);b=a.ViewList.getViewByDestinationDivId(decodeURIComponent(b));if(null!==b){b.ClickableDiv.jQHan.css("width",h);b.ClickableDiv.jQHan.css("height",r);b.Embed.jQHan.css("width",h);b.Embed.jQHan.css("height",r);b.width=h;b.height=r;b.ViewJumpScheduledFlag=!1;b.ViewJumpScheduledName="";b.URLJumpScheduledFlag=!1;b.URLJumpScheduledName="";b.URLJumpScheduledValue=
"";b.TRDSaveToFileScheduled=0;b.TRDSaveToFilePainter=null;b.TRDLoadScheduled=0;b.TRDLoadPainter=null;b.ViewName=q;b.SVGWindow=c;b.SVGDocument=d;b.SVGRootElmnt=e;b.SVGPPOArray=p;b.NotifyFunc=f;b.RepaintFunc=n;b.GainFunc=k;b.PObjArrFunc=m;b.LostFunc=g;c=b.SVGPPOArray;if(null!==c&&a.g_PPOList)for(d=0;d<c.length;d++)I(1,c[d]);null===b.SVGPPOArray?b.GainFunc():b.scheduleGainFocus=!0;null===b.SVGPPOArray?b.RepaintFunc():a.scheduleRepaint();b.unloadedFlag=!1;b.SVGRegisterMade=!0;2<=a.getDebugLevel()&&a.log_append_ln("Registered: ("+
b.ViewName+")");1<=a.getDebugLevel()&&a.createMouseCircle(b)}else a.log_append_ln("registerSVG() Error: viewItem not found!")};a.destorySVG=function(b){var c=a.ViewList.getViewByDestinationDivId(decodeURIComponent(b));2<=a.getDebugLevel()&&a.log_append_ln("sc.destroySVG ("+b+")");null!==c&&t(c)};a.doInstanceRepaint=function(b){var c=0,d=a.ViewList.getViewByDestinationDivId(b);null!==d&&null!==d.RepaintFunc?(d.RepaintFunc(),c=1):a.log_append_ln("sc.doInstanceRepaint Error: viewItem.RepaintFunc() is null for "+
b+" !");return c};a.disableMouse=function(b){b=a.ViewList.getViewByDestinationDivId(b);null!==b&&(b.mouseDisabled=!0)};a.enableMouse=function(b){b=a.ViewList.getViewByDestinationDivId(b);null!==b&&(b.mouseDisabled=!1)};a.lockInstance=function(b){b=a.ViewList.getViewByDestinationDivId(b);null!==b&&(b.locked=!0,b.ClickableDiv.jQHan.css("background-color","rgba(255, 255, 255, 1.0)"))};a.unlockInstance=function(b){b=a.ViewList.getViewByDestinationDivId(b);null!==b&&(b.locked=!1,b.ClickableDiv.jQHan.css("background-color",
"rgba(255, 255, 255, 0.0)"))};a.Init=function(b){2<=b.DebugLevel&&y();a.log_append_ln("SpiderControl.init()");null===b&&a.log_append_ln("Error SpiderControl.init() params is undefined ! ");if(a.isDefined(b.TargetTypeNr))switch(b.TargetTypeNr){case a.TARGET_TYPE_STD_BASE:case a.TARGET_TYPE_SAIA:case a.TARGET_TYPE_WAGO:case a.TARGET_TYPE_PHOENIX:case a.TARGET_TYPE_PANASONIC:case a.TARGET_TYPE_CODESYSV2:a.TARGET_TYPE_NR=b.TargetTypeNr;break;default:a.log_append_ln("params.TargetTypeNr is undefined but set to: sc.TARGET_TYPE_STD_BASE  ! "),
a.TARGET_TYPE_NR=a.TARGET_TYPE_STD_BASE}else a.log_append_ln("params.TargetTypeNr is undefined but set to: sc.TARGET_TYPE_STD_BASE  ! "),a.TARGET_TYPE_NR=a.TARGET_TYPE_STD_BASE;return q(b)};a.loadTEQFileBlocking=function(b){var c="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR;a.fileLoaded=!1;$.ajax({type:"GET",global:!1,beforeSend:function(a){a.overrideMimeType(c)},async:!1,cache:!0,url:b,timeout:a.AjaxTimeout,success:function(b){a.fileLoaded=!0},error:function(){a.fileLoaded=!1},complete:function(a,
b){}});return a.fileLoaded};a.loadSvgzFileBlocking=function(b){a.fileLoaded=!1;$.ajax({type:"GET",global:!1,beforeSend:function(a){},async:!1,cache:!0,url:b,timeout:a.AjaxTimeout,complete:function(a,b){},success:function(b){a.fileLoaded=!0},error:function(){a.fileLoaded=!1}});return a.fileLoaded};a.checkIfBrowserIsSupportedAndTEQOnServer=function(b){var c=b+".teq";b="Loading "+b+" Failed !! <br><br>Please load all files with *.teq (Views) extension on the server/PLC! Then refresh this page.<br><br>Bitte laden Sie alle Dateien mit *.teq (Views) Erweiterung auf den Server/SPS! Dann diese Seite neu laden.";
return!1===document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?(a.showCriticalErrorScreen(2,"Your browser does not support SVG!<br>Ihr Browser unterstuetzt kein SVG!<br>\r\n\t\t\t        <br>\r\n\t\t\t        <b>Browser Compatibility<br>Browser Kompatibilitaet</b>\r\n\t\t\t        <br>\r\n\t\t\t        - Microsoft Internet Explorer 11 and above<br>\r\n\t\t\t        - Chrome<br>\r\n\t\t\t        - Firefox<br>\r\n\t\t\t        - Safari<br>"),!1):!0===a.isFirstLoadViewCall&&
!1===a.loadTEQFileBlocking(c)?(window.console&&window.console.log&&window.console.log(b),a.showCriticalErrorScreen(1,b),!1):!0};a.isDefinedInJS=function(a){var b=!1;void 0!==a&&(b=!0);return b};a.checkWebserverSVGZSupport=function(a){return"success"};a.CheckSpiderLoadView=function(b,c,d){d=!1;0!==b.length&&(!0===a.isFirstLoadViewCall&&!0===a.checkIfBrowserIsSupportedAndTEQOnServer(b)&&("success"===(c=a.checkWebserverSVGZSupport(b))?(a.isFirstLoadViewCall=!1,d=!0):"no_html5"===c?a.showCriticalErrorScreen(200,
"Webserver does not support HTML5!<br>Couldn't load view: "+b+"_teq."+V):"no_file"===c?a.showCriticalErrorScreen(201,"View doen't exist!<br>View: "+b+"_teq."+V):a.showCriticalErrorScreen(202,"CheckSpiderLoadView error 202 for view!<br>View: "+b+"_teq."+V)),!1===a.isFirstLoadViewCall&&!0===a.checkIfBrowserIsSupportedAndTEQOnServer(b)&&(d=!0));return d};a.LoadView=function(b,c,d,f){if(0!==c.length)if(!0===a.CheckSpiderLoadView(c,d,f))if(null===$("#destId")&&a.log_append_ln("sc.LoadView Error Destination Div Id Not Found!"),
null===b)a.log_append_ln("sc.LoadView() destId is undefined");else{var n=c;a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&(n="archivereader?"+c);e(b,n,d,f)}else a.log_append_ln("ERROR sc.LoadView check failed for "+c)};a.UnloadView=function(b){3<=a.getDebugLevel()&&a.log_append_ln("SpiderControl.UnloadView()");null===b?a.log_append_ln("SpiderControl.UnloadView() destId is undefined"):u(b)};a.EnableWebConsole=function(){y()};a.ReadPPO=function(b){4<=a.getDebugLevel()&&a.log_append_ln("SpiderControl.ReadPPO()");
return f(b)};a.WritePPO=function(b,c){4<=a.getDebugLevel()&&a.log_append_ln("SpiderControl.WritePPO()");a.writePPO(b,c,!1)};a.getDebugLevel=function(){return ja};a.ReadContainer=function(b){4<=a.getDebugLevel()&&a.log_append_ln("SpiderControl.ReadContainer()");return c(b)};a.ScheduleViewJump=function(b,c){3<=a.getDebugLevel()&&a.log_append_ln("SpiderControl.ScheduleViewJump()")};a.checkContainerRange=function(b,c,d,e){var f=a.MIN(d,e);d=a.MAX(d,e);for(e=f;e<=d;e++)if(f=c+e,b===f)return!0;return!1};
a.checkSessionContainerName=function(b){return a.checkContainerRange(b,a.SpecialCO.NOINITSESSCO.name,0,a.SpecialCO.NOINITSESSCO.value)};a.checkPersistanContainer=function(b){return a.checkContainerRange(b,a.SpecialCO.MB_PERCO.name,0,a.SpecialCO.NOINITSESSCO.value)};a.writeSessionContainer=function(b,c){var d=!1;!0===a.checkSessionContainerName(b)&&(d=a.writeSessionStorage(b,c));return d};a.readSessionContainer=function(b){var c=!1;!0===a.checkSessionContainerName(b)&&(c=a.readSessionStorage(b));return c};
a.writePersistentContainer=function(b,c){var d=!1;!0===a.checkPersistanContainer(b)&&(d=a.writeLocalStorage(b,c));return d};a.readPersistentContainer=function(b){var c=!1;!0===a.checkPersistanContainer(b)&&(c=a.readLocalStorage(b));return c};a.writeSessionStorage=function(b,c){var d=!1;!1!==a.checkStorage()&&(sessionStorage.setItem(b,c),d=!0);return d};a.readSessionStorage=function(b){var c=!1;!1!==a.checkStorage()&&(c=sessionStorage.getItem(b),null===c&&(c=""));return c};a.writeLocalStorage=function(b,
c){var d=!1;!1!==a.checkStorage()&&(localStorage.setItem(b,c),d=!0);return d};a.readLocalStorage=function(b){var c=!1;!1!==a.checkStorage()&&(c=localStorage.getItem(b),null===c&&(c=""));return c};a.checkStorage=function(){var a=!1;void 0!==Storage&&(a=!0);return a};a.directReadContainer=function(b){return L[b]?L[b].mValue:a.CONTAINER_INITIAL_VALUE};a.directWriteContainer=function(b,c){void 0===c&&(2<=a.getDebugLevel()&&a.log_append_ln("directWriteContainer called with 'undefined' value (co name: '"+
b+"'"),c=a.CONTAINER_INITIAL_VALUE);void 0===b&&2<=a.getDebugLevel()&&a.log_append_ln("directWriteContainer called with 'undefined' name");L[b]={mName:b,mValue:c};a.updateUserLevelTimestamp()};a.SetRefresh=function(b){3<=a.getDebugLevel()&&a.log_append_ln("SpiderControl.SetRefreshRate()");C(b)};a.WriteContainer=function(b,c){3<=a.getDebugLevel()&&a.log_append_ln("sc.WriteContainer name = "+b+" , value = "+c);a.RW_writeSource(a.INFO_T_CONTAINER,b,c)};a.readDateTimeFormat=function(){return H("PM_AM")};
a.localRefreshPPO=function(){null!==a.LocalPPORefresh.cbUpdate?(a.LocalPPORefresh.PPOList={},a.prepareLPRList(a.LocalPPORefresh.PPOList)&&(a.LocalPPORefresh.cbUpdate(a.LocalPPORefresh)?a.updateInternalPPOList(a.LocalPPORefresh.PPOList):2<=a.getDebugLevel()&&a.log_append_ln("sc.LocalPPORefresh.cbUpdate returned not true"))):2<=a.getDebugLevel()&&a.log_append_ln("LocalPPORefresh.cbUpdate not set")};a.VM_doRepaint=function(){var b=!1,c=aa;var d=a.getTimestamp_ms();var e=!1,f,n=!1;if(a.g_WriteValWorkerPendingWriteValsListSize>=
a.WRITEVALWORKERMAXPENDINGWRITEVAL)2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint too many pending writeVals [ "+a.g_WriteValWorkerPendingWriteValsListSize+" ] in worker Thread so skips repaint for 5ms"),window.setTimeout(_SCIntern.VM_doRepaint,5);else if(!0===F()&&0<a.g_WriteValWorkerPendingWriteValsListSize)2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint should make a view jump but pending writeVals [ "+a.g_WriteValWorkerPendingWriteValsListSize+" ] in worker Thread so skips repaint for 5ms"),
window.setTimeout(_SCIntern.VM_doRepaint,5);else if(!0===W()&&0<a.g_WriteValWorkerPendingWriteValsListSize)2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint should make a URL jump but pending writeVals [ "+a.g_WriteValWorkerPendingWriteValsListSize+" ] in worker Thread so skips repaint for 5ms"),window.setTimeout(_SCIntern.VM_doRepaint,5);else if(!0===W()&&0>=a.g_WriteValWorkerPendingWriteValsListSize)2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint makes a URL "),a.isDefined(a.g_MouseEventInfo)&&
a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.URLJumpScheduledFlag=!1,window.open(a.g_MouseEventInfo.ViewItem.URLJumpScheduledValue,a.g_MouseEventInfo.ViewItem.URLJumpScheduledName),window.setTimeout(_SCIntern.VM_doRepaint,100));else if(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&2===a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled)2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint TRDSaveToFileScheduled == 2 so skips repaint/ppo_update until save made"),
a.showNEnableHTMLControlTextareaForMsgElmnt(null,a.INFO_T_HTMLTAG,a.TRDSaveFileMsg,1),window.setTimeout(_SCIntern.VM_doRepaint,5);else if(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&2===a.g_MouseEventInfo.ViewItem.TRDLoadScheduled)2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint TRDLoadScheduled == 2 so skips repaint/ppo_update until save made"),a.showNEnableHTMLControlTextareaForMsgElmnt(null,a.INFO_T_HTMLTAG,a.TRDLoadingMsg,1),window.setTimeout(_SCIntern.VM_doRepaint,
5);else{for(f=0;f<a.ViewList.getNumViews();f++)if(a.ViewList.getViewByIndex(f)&&!1===a.stringcmp(a.ViewList.getViewByIndex(f).ViewName,a.MsgBox)){var k=a.ViewList.getViewByIndex(f);!0===k.scheduleGainFocus&&(e=!0);!0===k.SVGRegisterMade&&(n=!0)}0===a.FirstRpntTs_ms&&(a.FirstRpntTs_ms=d);0!==a.SpecialCO.polltime.value&&(c=a.SpecialCO.polltime.value);if(d-c>=ea||!0===ha)ha=!1,ea=d,a.SpecialCO.blink.value="1"==a.SpecialCO.blink.value?"0":"1",A(a.SpecialCO.blink.name,a.SpecialCO.blink.value,!1),a.SpecialCO.autoincr.value>=
a.SpecialCO.autoincr.value.MAX_VALUE&&(a.SpecialCO.autoincr.value=0),a.SpecialCO.autoincr.value++,2<=a.getDebugLevel()&&$("#SC_RefreshCnt").html(a.SpecialCO.autoincr.value),!0===G?a.localRefreshPPO():a.SL_refreshPPO();!1===a.checkUserLevelTimestamp()?a.WriteContainer(a.SpecialCO.userLevel.name,0):a.updateUserLevelTimestamp();if(0<a.g_ConnectFail)0===a.ConnectErrorMsgIsdisplaying&&(2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint sc.g_ConnectFail > 0 so display error msg"),a.showNEnableHTMLControlTextareaForMsgElmnt(null,
a.INFO_T_HTMLTAG,a.ConnectionErrorMsg,1),a.ConnectErrorMsgIsdisplaying=1);else{a.ConnectErrorMsgIsdisplaying&&(a.hideNDisableHTMLControlTextareaForMsgElmnt(),a.ConnectErrorMsgIsdisplaying=0);if(ia)for(ia=!1,f=a.g_OnlineTrendEmitter.length,c=0;c<f;c++)a.g_OnlineTrendEmitter[c].refreshCurvePoints();fa&&!e&&n&&(fa=!1,a.RepaintFlag&&(2<=a.getDebugLevel()&&(Dbg_RepaintStart_ms=a.getTimestamp_ms(),a.CntReadPPOSource=0),a.ViewList.doViewRepaints(),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&
1<=a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled?(a.showNEnableHTMLControlTextareaForMsgElmnt(null,a.INFO_T_HTMLTAG,a.TRDSaveFileMsg,1),2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint TRDSaveToFileScheduled == 1 so adds saving message")):a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&1<=a.g_MouseEventInfo.ViewItem.TRDLoadScheduled&&(a.showNEnableHTMLControlTextareaForMsgElmnt(null,a.INFO_T_HTMLTAG,a.TRDLoadingMsg,1),2<=a.getDebugLevel()&&a.log_append_ln("sc.VM_doRepaint TRDSaveToFileScheduled == 1 so adds saving message")),
3<=a.getDebugLevel()&&(Dbg_RepaintStop_ms=a.getTimestamp_ms(),Dbg_RepaintDuration_ms=Dbg_RepaintStop_ms-Dbg_RepaintStart_ms,a.log_append_ln("RpnDur_ms: "+Dbg_RepaintDuration_ms+" (nPPO:"+a.CntReadPPOSource+")"))),!0===a.isMsgBoxScheduled()&&(a.resetMsgBoxScheduled(),a.openMsgBox()),!0===F()&&(2<=a.getDebugLevel()&&a.log_append_ln("vm_isViewJumpRequested() === true"),e="",a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(e=a.g_MouseEventInfo.ViewItem.ViewJumpScheduledName),
""!==e&&(n=e.lastIndexOf(".teq"),n=-1!=n?e.substr(0,n):e,""!==n&&(a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&0>n.lastIndexOf("archivereader?")&&(n="archivereader?"+n),n+="_teq."+V,c="",a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(c=g(a.g_MouseEventInfo.ViewItem)),!0===a.loadSvgzFileBlocking(n)?(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.Embed)&&a.isDefined(a.g_MouseEventInfo.ViewItem.Embed.handle)&&
a.g_MouseEventInfo.ViewItem.Embed.handle.src!=n+"#"+c&&(t(a.g_MouseEventInfo.ViewItem),a.g_MouseEventInfo.ViewItem.Embed.handle.src=n+"#"+c,2<=a.getDebugLevel()&&a.log_append_ln("iframe: '"+a.g_MouseEventInfo.ViewItem.Embed.handle.src+"'")),2<=a.getDebugLevel()&&$("#SC_CurrentPage").html(e),b=!0):a.err_append_ln("Page: "+n+" doesn't exist!"))),a.SpecialCO.lastPage.value=a.SpecialCO.currentPage.value,a.SpecialCO.currentPage.value=e,A(a.SpecialCO.lastPage.name,a.SpecialCO.lastPage.value,!1),A(a.SpecialCO.currentPage.name,
a.SpecialCO.currentPage.value,!1),2<=a.getDebugLevel()&&a.log_append_ln("vm_viewJumpRequestDone()"),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.ViewJumpScheduledFlag=!1),a.scheduleRefresh()),S++,2<=a.getDebugLevel()&&$("#SC_RepaintCnt").html(S))}a.previousDrawDateTimeFormat=a.readDateTimeFormat();a.previousMBTmzEn=a.SpecialCO.mbTmzEn.value;d=a.getTimestamp_ms()-d;b?(2<=a.getDebugLevel()&&a.log_append_ln("viewJmpFlag so restarts repaint immediately"),
window.setTimeout(_SCIntern.VM_doRepaint,0)):d>Y?window.setTimeout(_SCIntern.VM_doRepaint,5):(1E4<=Y-d&&a.log_append_ln("VM_doRepaint makes sleeps for more then 10s! (HMI_Repaint - rpntDuration) = "+(Y-d)+" rpntDuration = "+d),window.setTimeout(_SCIntern.VM_doRepaint,Y-d))}};a.getRefreshPeriod=function(){return aa};a.getViewDOMHandles=function(a){a.ClickableDiv.handle=$(a.ClickableDiv.id)[0];a.ClickableDiv.jQHan=$(a.ClickableDiv.id);a.Embed.handle=$(a.Embed.id)[0];a.Embed.jQHan=$(a.Embed.id)};a.CMP=
function(b,c,d){if(null!==c&&null!==d&&null!==b)switch(b){case a.COND.UNDEFINED:return 1;case a.COND.EQUAL:return a.isEqual(c,d);case a.COND.NO_CONDITION:return 1;case a.COND.NOT_EQUAL:return a.isNotEqual(c,d);case a.COND.GREATER:return a.isGreater(c,d);case a.COND.GREATER_EQUAL:return a.isGreaterOrEqual(c,d);case a.COND.LESSER:return a.isLesser(c,d);case a.COND.LESSER_EQUAL:return a.isLesserOrEqual(c,d);case a.COND.AND_EQUAL:return b=parseInt(c),d=parseInt(d),d=(b&d)===d===!0?1:0,3<=a.getDebugLevel()&&
a.log_append_ln("sc.COND.AND_EQUAL: res:"+d),d;case a.COND.AND_EQUAL0:return b=parseInt(c),d=parseInt(d),0===(b&d);case a.COND.AND_NOTEQUAL0:return b=parseInt(c),d=parseInt(d),0!==(b&d);case a.COND.IS_INT:return a.isInt(c);case a.COND.IS_FLOAT:return a.isFloat(c);case a.COND.EQUAL_IGNORECASE:return a.isEqualIgnoreCase(c,d);case a.COND.NOT_EQUAL_IGNORECASE:return a.isNotEqualIgnoreCase(c,d);case a.COND.OR_EQUAL0:return a.isOrEqual0(c,d);case a.COND.OR_NOT_EQUAL0:return a.isOrNotEqual0(c,d);default:return!1}else return 0};
a.isDecimalStr=function(a,b){var c=0;if(null!==a&&void 0!==a&&(a=String(a).trim(),0<a.length)){c=a.match(/e/gi);if(null!==c&&1<c.length)return 0;c=a.match(/[+-]/g);if(null!==c&&2<c.length)return 0;c=a.match(/[.,]/g);if(null!==c&&1<c.length)return 0;c=a.match(/^[-+][0-9]+\.[0-9]+[eE][-+]?[0-9]+$/g);if(null!==c&&0<c.length)return 0;c=1;1===b&&(c=0,b=Number(a),isNaN(b)||0==b%1&&(c=1))}return c};a.isEqual=function(b,c){var d=0,e=parseFloat(b),f=parseFloat(c);if(0==a.isDecimalStr(b,0)||0==a.isDecimalStr(c,
0)||isNaN(f)||isNaN(e))return String(b)==String(c)&&(d=1),d;e==f&&(d=1);return d};a.isNotEqual=function(b,c){var d=0,e=parseFloat(b),f=parseFloat(c);if(0==a.isDecimalStr(b,0)||0==a.isDecimalStr(c,0)||isNaN(f)||isNaN(e))return String(b)!=String(c)&&(d=1),d;e!=f&&(d=1);return d};a.isGreater=function(a,b){var c=0;a=parseFloat(a);b=parseFloat(b);isNaN(a)&&(a=0);isNaN(b)&&(b=0);a>b&&(c=1);return c};a.isGreaterOrEqual=function(a,b){var c=0;a=parseFloat(a);b=parseFloat(b);isNaN(a)&&(a=0);isNaN(b)&&(b=0);
a>=b&&(c=1);return c};a.isLesser=function(a,b){var c=0;a=parseFloat(a);b=parseFloat(b);isNaN(a)&&(a=0);isNaN(b)&&(b=0);a<b&&(c=1);return c};a.isLesserOrEqual=function(a,b){var c=0;a=parseFloat(a);b=parseFloat(b);isNaN(a)&&(a=0);isNaN(b)&&(b=0);a<=b&&(c=1);return c};a.isEqualIgnoreCase=function(a,b){a=a.toUpperCase();b=b.toUpperCase();return 0==a.localeCompare(b)?!0:!1};a.isNotEqualIgnoreCase=function(a,b){a=a.toUpperCase();b=b.toUpperCase();return 0!=a.localeCompare(b)?!0:!1};a.isOrEqual0=function(a,
b){return 0==(Number(a)|Number(b))};a.isOrNotEqual0=function(a,b){return 0!=(Number(a)|Number(b))};a.isInt=function(b){var c=!1;1==a.isDecimalStr(b,1)&&(c=!0);return c};a.isFloat=function(b){var c=!1;1==a.isDecimalStr(b,0)&&(c=!0);return c};a.DragInfoType=function(){this.nameOptionFlag=this.namePxMax=this.namePxMin=this.nameValueMax=this.nameValueMin=0;this.typePxMax=this.typePxMin=this.typeOptionFlag=this.typeValueMax=this.typeValueMin=a.INFO_T_STRING;this.destType=a.INFO_T_PPO;this.destName="PPO"};
a.PainterType_EventP=function(b){this.base=a.PainterType_MPainter;this.base(b);this.notify=function(b,c){switch(b){case a.VIEW_GAIN_FOCUS:if(!1===this.instanceDisabled()&&this.onGainActionFunc)this.onGainActionFunc();break;case a.VIEW_LOST_FOCUS:if(!1===this.instanceDisabled()&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:if(!1===this.instanceDisabled()&&this.onDrawActionFunc)this.onDrawActionFunc()}return 0}};a.PainterType_EventP.prototype=new a.PainterType_MPainter;a.PainterType_Line=
function(b){this.base=a.PainterType_MPainter;this.base(b);this.notify=function(b,c){switch(b){case a.VIEW_GAIN_FOCUS:if(!1===this.instanceDisabled()&&this.onGainActionFunc)this.onGainActionFunc();break;case a.VIEW_LOST_FOCUS:if(!1===this.instanceDisabled()&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw(),this.genericDraw()}return 0}};a.PainterType_Line.prototype=new a.PainterType_MPainter;a.rl_resolveInfoName=function(a){a=M(a,"#PPO_",
"#",0,f);a=M(a,"#PPOFF","#",1,f);a=M(a,"@PPO_","@",0,f);a=M(a,"@PPOFF","@",1,f);a=M(a,"#HTML_","#",0,T);a=M(a,"#HTMLOFFSET_","#",1,T);a=M(a,"#CO_","#",0,c);a=M(a,"#COFF_","#",1,c);a=M(a,"@HTML_","@",0,T);a=M(a,"@HTMLOFFSET_","@",1,T);a=M(a,"@CO_","@",0,c);return a=M(a,"@COFF_","@",1,c)};a.registerHMI_PPO=function(a){I(2,a)};a.getMPainterScreenCrd=function(b){var c=null;a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGRootElmnt)&&
(c=a.getMPainterScreenCrdExt(a.g_MouseEventInfo.ViewItem.SVGRootElmnt,b));return c};a.getMPainterScreenCrdExt=function(b,c){var d={};if(!a.isDefined(b))return a.log_append_ln("Error: getMPainterScreenCrd(): svgRootElmnt not defined"),null;if(!a.isDefined(c))return a.log_append_ln("Error: getMPainterScreenCrd(): MPainter not defined"),null;var e=b.getScreenCTM();var f=b.createSVGPoint();b=b.createSVGPoint();b.x=c.x;b.y=c.y;var n=b.matrixTransform(e);b=n.x;var k=n.y;f.x=c.x+c.w;f.y=c.y+c.h;e=f.matrixTransform(e);
c=e.x-n.x;n=e.y-n.y;d.x=b;d.y=k;d.w=c;d.h=n;return d};a.getScreenCrds=function(b,c,d,e){var f={};if(!a.isDefined(a.g_MouseEventInfo)||!a.isDefined(a.g_MouseEventInfo.ViewItem)||!a.isDefined(a.g_MouseEventInfo.ViewItem.SVGRootElmnt))return a.log_append_ln("Error: getScreenCrds(): sc.g_MouseEventInfo.ViewItem.SVGRootElmnt == null"),null;var n=a.g_MouseEventInfo.ViewItem.SVGRootElmnt.getScreenCTM(),k=a.g_MouseEventInfo.ViewItem.SVGRootElmnt.createSVGPoint();k.x=b;k.y=c;f.nw=k.matrixTransform(n);k.x+=
d;f.ne=k.matrixTransform(n);k.y+=e;f.se=k.matrixTransform(n);k.x-=d;f.sw=k.matrixTransform(n);f.w=f.ne.x-f.nw.x;f.h=f.sw.y-f.ne.y;f.scaleFactor=f.w/d;f.x=f.nw.x;f.y=f.nw.y;return f};a.OB_checkMouseCoordinates=function(b,c){var d=!1;a.isDefined(b)&&a.isDefined(c)&&(a.isDefined(b.x)&&a.isDefined(b.y)&&a.isDefined(b.w)&&a.isDefined(b.h)&&a.isDefined(b.svgDoc)?(b=a.getMPainterScreenCrd(b),a.isDefined(b)&&(lUpperLeft=a.ME_teq2screenCoord(b.x,b.y),lLowerRight=a.ME_teq2screenCoord(b.x+b.w,b.y+b.h),a.isDefined(lUpperLeft)&&
a.isDefined(lLowerRight)&&c.x>=lUpperLeft.x&&c.y>=lUpperLeft.y&&c.x<=lLowerRight.x&&c.y<=lLowerRight.y&&(d=!0))):a.log_append_ln("OB_checkMouseCoordinates error"));return d};a.getMergedExtendedPPOForPPOName=function(b){var c=null,d=null;a.isDefined(a.g_PPOList)&&(d=a.g_PPOList[b]);a.isDefined(d)&&(d.resolved=a.rl_resolveInfoName(d.address),c=new a.PPOListItemType,c.value=d.value,c.name=d.name,c.resolved=d.resolved,c.address=d.address,c.min=d.min,c.max=d.max,c.format=d.format,c.writeAddr=d.writeAddr,
c.scale_Fact=d.scale_Fact,c.scale_Offset=d.scale_Offset,c.scale_Min=d.scale_Min,c.scale_Max=d.scale_Max,c.unit=d.unit,c.minvalue=d.minvalue,c.maxvalue=d.maxvalue,c.gain=d.gain,c.offset=d.offset,c.regView=d.regView,c.regHMI=d.regHMI,b=a.g_PPOList[d.resolved],a.isDefined(b)&&(b.resolved=a.rl_resolveInfoName(b.address),c.value=b.value,c.name=b.name,c.resolved=b.resolved,c.address=b.address,0===c.min.length&&0<b.min.length&&(c.min=b.min),0===c.max.length&&0<b.max.length&&(c.max=b.max),0===c.format.length&&
0<b.format.length&&(c.format=b.format),c.writeAddr=b.writeAddr,0===c.scale_Fact.length&&0<b.scale_Fact.length&&(c.scale_Fact=b.scale_Fact),0===c.scale_Offset.length&&0<b.scale_Offset.length&&(c.scale_Offset=b.scale_Offset),0===c.scale_Min.length&&0<b.scale_Min.length&&(c.scale_Min=b.scale_Min),0===c.scale_Max.length&&0<b.scale_Max.length&&(c.scale_Max=b.scale_Max),0===c.unit.length&&0<b.unit.length&&(c.unit=b.unit),c.minvalue=b.minvalue,c.maxvalue=b.maxvalue,c.gain=b.gain,c.offset=b.offset,c.regView=
b.regView,c.regHMI=b.regHMI));return c};a.writePPO=function(b,c,d){var e,f={},n="",k=a.getMergedExtendedPPOForPPOName(b);if(a.isDefined(k)){var g={writeEnabled:!1,rValue:c};a.TCR_writeFormatedPPOValue(k,g);if(!0===g.writeEnabled)if(!0===d&&(k.value=c,a.isDefined(a.g_PPOList)&&a.isDefined(a.g_PPOList[b])&&(a.g_PPOList[b].value=c)),!0===G)null!==a.LocalPPORefresh.cbWrite?a.LocalPPORefresh.cbWrite(k.resolved,g.rValue):a.log_append_ln("LocalPPORefresh.cbWrite not set");else{if(a.TARGET_TYPE_NR===a.TARGET_TYPE_WAGO&&
(b=e=0,a.prefixicmp("MD",k.resolved)&&(c=k.format,"string"===c.toLowerCase()&&(b=parseInt(k.resolved.replace(/[^0-9\.]/g,""),10),isNaN(b)&&(b=0),e=parseInt(k.max,10),isNaN(e)&&(e=a.WAGOSTRDEFAULTLENGT),e>a.WAGOSTRMAXLENGT&&(e=a.WAGOSTRMAXLENGT)),"string"===c.toLowerCase()&&0<e))){c=g.rValue;g.rValue.length>e&&(c=g.rValue.substring(0,e));for(d=e/4;4*d<e;)d++;var m=0;for(e=0;e<d;e++){var p="MD"+(e+b).toString();var q=0;m+3<c.length&&(q|=(c.charCodeAt(m+3)&255)<<24);m+2<c.length&&(q|=(c.charCodeAt(m+
2)&255)<<16);m+1<c.length&&(q|=(c.charCodeAt(m+1)&255)<<8);m<c.length&&(q|=c.charCodeAt(m)&255);f[p]=q.toString();m+=4}}if(0<Object.keys(f).length)for(n in f)a.sl_writeValue(n,f[n]);else a.sl_writeValue(k.resolved,g.rValue)}}else a.log_append_ln("sc.writePPO( "+b+" , "+c+" ) error can't find name in sc.g_PPOList")};a.getContainerList=function(){return L};a.RW_readSource=function(b,c,d){var e=c;b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO?(a.CntReadPPOSource++,e=Q(c,d)):b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER?
e=E(c):b==a.INFO_T_HTMLTAG?e=H(c):b==a.INFO_T_FILE&&(e="File Not Found",b=a.loadFileSource(c),null!==b&&(e=b));return e};a.RW_readSource_parseFloat=function(b,c,d){var e=c,f=0;b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO?e=Q(c):b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER?e=E(c):b==a.INFO_T_HTMLTAG?e=H(c):b==a.INFO_T_STRING&&(e=c);1===d?!0!==isNaN(parseFloat(e,10))?f=parseFloat(e,10):1<=a.getDebugLevel()&&a.log_append_ln("WARNING sc.RW_readSource_parseFloat("+b+", "+c+") ! value ["+e+"] is NaN so returns 0 "):
f=parseFloat(e,10);return f};a.RW_readSource_parseInt=function(b,c){var d=c,e=0;b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO?d=Q(c):b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER?d=E(c):b==a.INFO_T_HTMLTAG?d=H(c):b==a.INFO_T_STRING&&(d=c);!0!==isNaN(parseInt(d,10))?e=parseInt(d,10):1<=a.getDebugLevel()&&a.log_append_ln("WARNING sc.RW_readSource_parseInt("+b+", "+c+") ! value ["+d+"] is NaN so returns 0 ");return e};a.RW_writeSource=function(b,c,d){2<=a.getDebugLevel()&&a.log_append_ln("sc.RW_writeSource("+
b+" , "+c+" , "+d+")");if(b==a.INFO_T_CONTAINER||b==a.INFO_T_PASSWORDCONTAINER)A(c,d,!1);else if(b==a.INFO_T_PPO||b==a.INFO_T_PASSWORDPPO)a.writePPO(c,d,!1);else if(b==a.INFO_T_TEQINDEX)a.isDefined(c)&&(b=c=a.rl_resolveInfoName(c),d=c.lastIndexOf(".teq"),-1!=d&&(b=c.substr(0,d)),!0===a.CheckSpiderLoadView(b,0,0)?!0===a.stringcmp(b,a.MsgBox)?0<a.MsgBox.length&&a.openMsgBox():a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&!0!==a.stringcmp(a.g_MouseEventInfo.ViewItem.ViewName,
b)&&(a.g_MouseEventInfo.ViewItem.ViewJumpScheduledFlag=!0,a.g_MouseEventInfo.ViewItem.ViewJumpScheduledName=c):a.log_append_ln("ERROR vm_scheduleSVGPicture check failed for "+c));else if(b==a.INFO_T_URL){b=d;var e=[];a.isDefined(b,"string")&&(b=b.trim(),":"==b.charAt(0)?(d=a.isDefined(a.host,"string")&&a.isDefined(e=a.host.split(":"))&&3===e.length&&0<=a.host.lastIndexOf(":")?a.host.substring(0,a.host.lastIndexOf(":")):a.host,b=d+b):0>b.indexOf("http")&&0>b.indexOf("https")&&(b=a.host+"/"+b),a.isDefined(a.g_MouseEventInfo.ViewItem)&&
(a.g_MouseEventInfo.ViewItem.URLJumpScheduledFlag=!0,a.g_MouseEventInfo.ViewItem.URLJumpScheduledName=c,a.g_MouseEventInfo.ViewItem.URLJumpScheduledValue=b))}else b===a.INFO_T_CGI&&a.userCGIAction(d)};a.sl_isPPOScheduled=function(b){var c=!1;a.g_PPOList[b]&&(c=0<a.g_PPOList[b].regView||!0===a.g_PPOList[b].regHMI);return c};a.sl_getPPOWriteAddress=function(b){var c="",d="",e=b;void 0!==a.g_PPOAdressToNameMap[b]&&(e=a.g_PPOAdressToNameMap[b]);if(void 0!==a.g_PPOList[e])c=a.g_PPOList[e].writeAddr;else for(d in a.g_PPOList)a.g_PPOList[d].address==
b&&(c=a.g_PPOList[d].writeAddr);return c};a.prepareLPRList=function(b){var c=0,d=0;if(a.g_PPOList){ca=X;X="";for(d in a.g_PPOList)a.sl_isPPOScheduled(d)&&(a.g_PPOList[d].resolved=a.rl_resolveInfoName(a.g_PPOList[d].address),b[a.g_PPOList[d].resolved]=new a.LPRItemType(a.g_PPOList[d].resolved,a.g_PPOList[d].value),X+=a.g_PPOList[d].resolved,c++);a.LocalPPORefresh.ListChanged=!1;X!==ca&&(a.LocalPPORefresh.ListChanged=!0)}return c};a.getPPOValueBylprList=function(a,b){var c;for(c=0;c<a.length;c++)if(b==
a[c].address)return a[c].value};a.updateInternalPPOList=function(b){var c=0,d=!1;for(c in b)!0===a.sl_updatePPOList(b[c].address,b[c].value)&&(d=!0);!0!==d&&!0!==a.FullRedraw||a.scheduleRepaint();a.ViewList.doViewGainIfRequired()};a.co_readSkipRefreshCO=function(){var b=parseInt(a.SpecialCO.skiprefresh.value,10);return!1===isNaN(b)?b:0};a.scheduleRepaint=function(){fa=!0;2<=a.getDebugLevel()&&(a.Dbg_RpnSchedule_ms=a.getTimestamp_ms())};a.scheduleRefresh=function(){ha=!0};a.scheduleOnlineTrendRefresh=
function(){ia=!0};a.getTimestamp_s=function(){var a=(new Date).getTime();return a=Math.round(a/1E3)};a.getTimestamp_ms=function(){return(new Date).getTime()};a.sl_updatePPOListByName=function(b,c){var d="",e=!1;if(a.g_PPOList)if(void 0!=a.g_PPOList[b])a.g_PPOList[b].value!==c&&(a.g_PPOList[b].value=c,e=!0);else for(d in a.g_PPOList)a.g_PPOList[d].name==b&&a.g_PPOList[d].value!==c&&(a.g_PPOList[d].value=c,e=!0);return e};a.sl_updatePPOList=function(b,c){var d="",e=!1,f=!1,n;if(a.isDefined(a.g_CurrentPPOUpdateAskedNameToOrgNameMap)&&
a.isDefined(a.g_CurrentPPOUpdateAskedNameToOrgNameMap[b])){var k=a.g_CurrentPPOUpdateAskedNameToOrgNameMap[b];if(a.isDefined(k))for(n in k)a.isDefined(a.g_PPOList)&&a.isDefined(a.g_PPOList[n])&&(f=!0,a.g_PPOList[n].value!==c&&(a.g_PPOList[n].value=c,e=!0))}if(!f&&a.isDefined(a.g_PPOList))for(d in a.g_PPOList)a.g_PPOList[d].resolved==b&&a.g_PPOList[d].value!==c&&(a.g_PPOList[d].value=c,e=!0);return e};a.dg_append_ln=function(b){0<a.getDebugLevel()&&(null!=a.SilentDebugStr&&null!=b&&a.SilentDebugStr.length+
b.length<=a.SILENTDEBUGSTR_MAX?a.SilentDebugStr+=b+"\n":null!=a.SilentDebugStr&&null!=b&&a.SilentDebugStr.length+b.length>=a.SILENTDEBUGSTR_MAX&&(a.SilentDebugStr+="MAX MSG LENGTH REACHED SO STOPS SILENT MSG! \n"))};a.log_append_ln=function(b){if(0<a.getDebugLevel()){if(O){var c=b+"<br />";0<a.getDebugLevel()&&O&&$("#SC_WebConsoleContents").prepend(c)}window.console&&window.console.log(b)}};a.GetBrowserInfos=function(){var a=navigator.userAgent,b=navigator.appName,c=parseFloat(navigator.appVersion).toString();
parseInt(navigator.appVersion,10);var d,e,f;-1!=(e=a.indexOf("Opera"))?(b="Opera",c=a.substring(e+6),-1!=(e=a.indexOf("Version"))&&(c=a.substring(e+8))):-1!=(e=a.indexOf("MSIE"))?(b="Microsoft Internet Explorer",c=a.substring(e+5)):-1!=a.indexOf("Trident")&&-1!=(e=a.indexOf("rv:"))?(b="Microsoft Internet Explorer",c=a.substring(e+3)):-1!=a.indexOf("Edge")&&-1!=(e=a.indexOf("Edge"))?(b="Edge",c=a.substring(e+5)):-1!=(e=a.indexOf("Chrome"))?(b="Chrome",c=a.substring(e+7)):-1!=(e=a.indexOf("Safari"))?
(b="Safari",c=a.substring(e+7),-1!=(e=a.indexOf("Version"))&&(c=a.substring(e+8))):-1!=(e=a.indexOf("Firefox"))?(b="Firefox",c=a.substring(e+8)):(d=a.lastIndexOf(" ")+1)<(e=a.lastIndexOf("/"))&&(b=a.substring(d,e),c=a.substring(e+1),b.toLowerCase()==b.toUpperCase()&&(b=navigator.appName));-1!=(f=c.indexOf(";"))&&(c=c.substring(0,f));-1!=(f=c.indexOf(" "))&&(c=c.substring(0,f));-1!=c.indexOf(")")&&-1==c.indexOf("(")&&(c=c.replace(")",""));a=parseInt(c,10);isNaN(a)&&(c=parseFloat(navigator.appVersion).toString(),
a=parseInt(navigator.appVersion,10));return{name:b,version:a,fullVersion:c}};a.destroyMouseMoveNotifyList=function(){a.g_MouseMoveNotificationList=[]};a.getOnlineTrendEmitterInstance=function(b){var c,d=a.g_OnlineTrendEmitter.length;for(c=0;c<d;c++)if(a.g_OnlineTrendEmitter[c].trendIndex===b)return a.g_OnlineTrendEmitter[c];return null};a.getOfflineTrendEmitterInstance=function(a){var b,c=K.length;for(b=0;b<c;b++)if(K[b].trendIndex===a)return K[b];return null};a.getSavedTrendEmitterInstance=function(a){var b,
c=U.length;for(b=0;b<c;b++)if(U[b].trendIndex===a)return U[b];return null};a.registerOnlineTrendEmitter=function(b){a.g_OnlineTrendEmitter.push(b);2<=a.getDebugLevel()&&a.log_append_ln("registerOnlineTrendEmitter "+b.trendIndex)};a.registerOfflineTrendEmitter=function(a){K.push(a)};a.registerSavedTrendEmitter=function(a){U.push(a)};a.updateUserLevelTimestamp=function(){var b=a.getTimestamp_s();a.writeLocalStorage(a.SpecialCO.userLevel.name,b)};a.checkUserLevelTimestamp=function(){var b=!1,c=a.SpecialCO.userLevel.value;
if(!1===a.checkStorage())return!0;var d=a.readLocalStorage(a.SpecialCO.userLevel.name);if(!1===d)return b;d=parseInt(d,10);a.getTimestamp_s()-d<c&&(b=!0);return b};return a}(_SCIntern||{});
var SpiderControl=function(a,h){a.Init=h.Init;a.LoadView=h.LoadView;a.UnloadView=h.UnloadView;a.EnableWebConsole=h.EnableWebConsole;a.Init=h.Init;a.ReadPPO=h.ReadPPO;a.WritePPO=h.WritePPO;a.ReadContainer=h.ReadContainer;a.WriteContainer=h.WriteContainer;a.SetRefresh=h.SetRefresh;a.log_append_ln=h.log_append_ln;a.GetBrowserInfos=h.GetBrowserInfos;a.LocalPPORefresh=h.LocalPPORefresh;a.LockInstance=h.lockInstance;a.UnlockInstance=h.unlockInstance;a.DisableMouse=h.disableMouse;a.EnableMouse=h.enableMouse;
a.SchedulePPORead=h.scheduleRefresh;return a}(SpiderControl||{},_SCIntern);String.prototype.isDefined=function(a){return"undefined"!=typeof a&&void 0!=a&&null!=a?!0:!1};String.prototype.doesContainOnlyCharFrom=function(a,h){var g=this.valueOf();a=this.isDefined(h)&&1==h?new RegExp("["+a+"]","gi"):new RegExp("["+a+"]","g");g=g.replace(a,"");return 0==g.length?!0:!1};
String.prototype.doesNotContainCharFrom=function(a,h){var g=this.valueOf();a=this.isDefined(h)&&1==h?new RegExp("["+a+"]","gi"):new RegExp("["+a+"]","g");g=g.replace(a,"");return g.length==this.valueOf().length?!0:!1};
String.prototype.hasPattern=function(a){var h,g=this.valueOf();var b=!1;if(this.isDefined(a))var d=a.replace(/\[|\]/g,"");else return!1;if(!this.isDefined(g)||""==g||g.length>d.length)return!1;var e=h=0;for(d=!1;h<g.length&&e<a.length;){var f=a.charAt(e);b=g.charAt(h);switch(f){case "#":b=b.doesContainOnlyCharFrom("0123456789");break;case "@":b=b.doesContainOnlyCharFrom("abcdefghijklmnopqrstuvwxyz",!0);break;case "$":b=b.doesContainOnlyCharFrom("abcdefghijklmnopqrstuvwxyz");break;case "%":b=b.doesContainOnlyCharFrom("ABCDEFGHIJKLMNOPQRSTUVWXYZ");
break;case "&":b=b.doesContainOnlyCharFrom("0123456789abcdefghijklmnopqrstuvwxyz",!0);break;case "[":e++;b=!1;d=!0;break;case "]":e++;d=b=!1;break;default:b=b==f}if("["!=f&&"]"!=f)if(1==b)h++,e++,h<g.length&&(b=!1);else if(1==d)e++,b=!1;else return!1}return e<a.length?"["!=a.charAt(e)&&1!=d||"]"!=a.charAt(a.length-1)?!1:b:b};
String.prototype.isValidDate=function(a){var h=[31,29,31,30,31,30,31,31,30,31,30,31],g="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),b=[],d="";d=(new Date(Date.now())).getYear();b=this.valueOf().split(".");if(0==b.length||!this.isDefined(a))return!1;d=100<d?d-100:d;switch(!0){case "DD.MM"==a:return b.forEach(function(a,b,c){c[b]=parseInt(a)}),1>b[1]||12<b[1]||0>b[0]||b[0]>h[b[1]-1]?!1:!0;case "DD.MM.YY"==a:return d=b[0]+" "+g[parseInt(b[1])-1]+(d>=parseInt(b[2])?" 20":" 19")+b[2],a=
new Date(d),a.getMonth()+1==parseInt(b[1])?!0:!1;default:return!1}};
_SCIntern=function(a){function h(a){return a.toString()}function g(b,d,e,f,c,n){b=a.createSVGElement(b,"rect");0>f&&(f=0);0>c&&(c=0);a.setSVGAttr(b,"x",d);a.setSVGAttr(b,"y",e);a.setSVGAttr(b,"width",f);a.setSVGAttr(b,"height",c);a.isDefined(n)&&a.setSVGAttr(b,"fill",n);return b}a.pad=function(a,d){if(!0===isNaN(d))return!0;for(a=a.toString();a.length<d;)a="0"+a;return a};a.getRValue=function(a){return!0===isNaN(a)?0:(a&16711680)>>16};a.getGValue=function(a){return!0===isNaN(a)?0:(a&65280)>>8};a.getBValue=
function(a){return!0===isNaN(a)?0:a&255};a.Sleep=function(a){var b=(new Date).getTime();do var e=(new Date).getTime();while(e-b<a)};a.removeTxtChildren=function(b){if(a.isDefined(b)&&a.isDefined(b.e)&&a.isDefined(b.textg))for(;a.isDefined(b.e.firstChild);)b.e.removeChild(b.e.firstChild)};a.clearText=function(b){a.isDefined(b.textg)&&(a.removeSVG(b.textg),b.textg=null)};a.adjustColorStr=function(b,d){var e;if(!a.isDefined(b))return"black";switch(!0){case "string"===typeof b:var f=a.isDefined(d,"string")?
"rgba(":"rgb(";b=b.trim();switch(!0){case "#"==b.charAt(0):if(7==b.length){b=b.slice(1);for(e=0;3>e;e++){var c=b.charAt(2*e)+b.charAt(2*e+1);2>e?f+=parseInt(c,16).toString()+",":(f+=parseInt(c,16).toString(),f=a.isDefined(d,"string")?f+(","+d+")"):f+")")}return f}break;case -1<b.indexOf("rgb"):return b;case -1<b.indexOf(","):return e=b.split(","),3==e.length?a.isDefined(d,"string")?f+b+","+d+")":f+b+")":4==e.length?"rgba("+b+")":"black";default:return b}break;case "[object Array]"===Object.prototype.toString.call(b):if(2<
b.length&&5>b.length){for(e=0;e<e.length;e++)if("number"!==typeof parseInt(b[e]))return"black";return 3==b.length?"rgb("+b[0].toString()+","+b[1].toString()+","+b[2].toString()+")":"rgba("+b[0].toString()+","+b[1].toString()+","+b[2].toString()+","+b[3].toString()+")"}break;case "[object Object]"===Object.prototype.toString.call(b):if(2<b.length&&5>b.length){for(f in b)if("number"!==typeof b[f])return"black";return 3==b.length?"rgb("+b.R.toString()+","+b.G.toString()+","+b.B.toString()+")":"rgba("+
b.R.toString()+","+b.G.toString()+","+b.B.toString()+","+b.A.toString()+")"}break;default:return"black"}};a.parseSourceRowAsArray=function(b){b=b.toString();b=b.replace(/\n/gi,a.FVLINESEPTOKEN2);b=b.replace(/\t/gi,a.FVCOLSEPTOKEN2);return b.split(/\\n/)};a.drawSourceText=function(b){var d=[],e="start",f=[],c="%0",n=0,k=0,g=0;var m=this.getTextHPos();var p=this.getTextVPos();if(a.isDefined(b.e))var h=b.e.getAttributeNS(null,"width");else console.log("drawSourceText() src.e == null");h=parseInt(h,10);
var q=0;p===a.V_POS_TOP?k=1:p===a.V_POS_CENTER?k=.92:p===a.V_POS_BOTTOM&&(k=.9);if(!0===this.getIsMultiline()){d=a.parseSourceRowAsArray(b.value);var y=d.length}else{if(b.type==a.INFO_T_PASSWORDCONTAINER||b.type==a.INFO_T_PASSWORDPPO){y="";var t;for(t=0;t<b.value.length;t++)y+="*";d.push(y)}else d.push(b.value);y=1}b.textg=a.createSVGElement(document,"g");m===a.H_POS_RIGHT?(e="start",c=0):m===a.H_POS_CENTER?(e="middle",c=h/2):m===a.H_POS_LEFT&&(e="end",c=h);for(m=0;m<y;m++)h=document.createElementNS(a.SvgNs,
"text"),h.setAttributeNS(a.XmlNs,"xml:space","preserve"),h.setAttributeNS(null,"text-anchor",e),h.setAttributeNS(null,"font-size",this.getFontSize()),h.setAttributeNS(null,"font-family",this.getFontName()),h.setAttributeNS(null,"font-style",this.getSvgFontStyle()),h.setAttributeNS(null,"font-weight",this.getSvgFontWeight()),t=document.createTextNode(d[m]),isNaN(c)?console.log("drawSourceText() x is NaN"):h.setAttributeNS(null,"x",c),g=0===m?g+k:g+1.1,h.setAttributeNS(null,"y",g+"em"),h.setAttributeNS(null,
"fill",a.adjustColorStr(this.getTextColor())),h.appendChild(t),f.push(h),b.textg.appendChild(h),a.isDefined(b.e)?b.e.appendChild(b.textg):console.log("drawSourceText() src.e == null");a.isDefined(b.textg)&&(d=b.textg.getBBox(),p===a.V_POS_TOP?n=0:a.isDefined(b.e)?p===a.V_POS_CENTER?(a.isDefined(p=b.e.getAttributeNS(null,"outline_width"))||(p=0),n=(b.e.getAttributeNS(null,"height")-d.height+2*p)/2,0>=n&&(n=0==p?b.e.getAttributeNS(null,"height")-(d.height+.8*n):b.e.getAttributeNS(null,"height")-(d.height+
.3*n-2*p))):p===a.V_POS_BOTTOM&&(n=b.e.getAttributeNS(null,"height")-(d.height-2)):console.log("drawSourceText() src.e == null"),!0===this.isPressed&&this.ptId===a.PT_NAME_BUTTON_ID&&(n+=1,q=1),b.textg.setAttribute("transform","translate("+q+", "+n+")"))};a.ImageListItem=function(){this.e=null;this.visible=!1;this.eTmp=null;this.fname=""};a.ImageList=function(){this.list=[]};a.hideImages=function(b){var d;if(a.isDefined(b.img)){var e=b.img.list.length;for(d=0;d<e;d++){var f=b.img.list[d];f.visible=
!1}for(d=0;d<e;d++)f=b.img.list[d],f.e.setAttributeNS(null,"visibility","hidden")}};a.createImage=function(b,d,e){var f=d.fname;a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&(f="archivereader?"+f);d.e=a.createSVGElement(document,"image");var c=a.createSVGElement(document,"svg");if(a.isDefined(b.e))c.setAttributeNS("http://www.w3.org/1999/xlink","width",b.e.getAttribute("width")),c.setAttributeNS(null,"height",b.e.getAttribute("height"));else throw"createImage(): src.e == null";c.setAttributeNS(null,
"preserveAspectRatio","none");c.appendChild(d.e);if(a.isDefined(b.e)){if(a.isDefined(e,"boolean")&&1==e)for(;a.isDefined(b.e.firstChild);)b.e.removeChild(b.e.firstChild);b.e.appendChild(c)}else throw"createImage() src.e == null";d.e.setAttributeNS("http://www.w3.org/1999/xlink","href",f);a.isDefined(d.e)&&(d.e.setAttributeNS(null,"x",0),d.e.setAttributeNS(null,"y",0),d.e.setAttributeNS(null,"width",b.w),d.e.setAttributeNS(null,"height",b.h),d.e.setAttributeNS(null,"preserveAspectRatio","none"),a.isDefined(d.eTmp=
new Image)&&(d.eTmp.src=f,d.eTmp.onload=function(){0!==d.eTmp.width&&d.e.setAttribute("width",d.eTmp.width);0!==d.eTmp.height&&d.e.setAttribute("height",d.eTmp.height);if(0!==d.eTmp.height&&0!==d.eTmp.width){var a="0 0 "+d.eTmp.width+" "+d.eTmp.height;c.setAttribute("viewBox",a)}}))};a.updateImage=function(b,d,e){var f=!1;if(!a.isDefined(b.img)&&(b.img=new a.ImageList,a.isDefined(d)&&a.isDefined(d.value)&&d.type===a.INFO_T_FILE)){var c=new a.ImageListItem;c.fname=d.value;c.visible=!1;a.createImage(b,
c);b.img.list.push(c)}var n=b.img.list.length;for(d=0;d<n;d++)c=b.img.list[d],!0===a.stringcmp(b.value,c.fname)&&b.type===a.INFO_T_FILE?(f=!0,c.visible=!0):c.visible=!1;!1===f&&a.isDefined(b.name)&&b.type===a.INFO_T_FILE&&(c=new a.ImageListItem,c.fname=b.value,c.visible=!0,a.createImage(b,c,e),b.img.list.push(c));n=b.img.list.length;for(d=0;d<n;d++)c=b.img.list[d],!0===c.visible?c.e.setAttributeNS(null,"visibility","true"):c.e.setAttributeNS(null,"visibility","hidden"),0===c.fname.toLowerCase().indexOf("nocache")&&
(e=""+c.fname+"?"+(new Date).getTime(),c.e.setAttributeNS("http://www.w3.org/1999/xlink","href",e))};a.changeSvgAttrDim=function(a,d,e,f,c,n){a.setAttributeNS(null,"x",d);a.setAttributeNS(null,"y",e);a.setAttributeNS(null,"width",f);a.setAttributeNS(null,"height",c);a.setAttributeNS(null,"viewBox",n)};a.setSvgAttrC=function(b,d,e){a.isDefined(b)?(0>e&&(e=0),b.setAttributeNS(null,d,e)):console.log("setSVGAttrC() argument SVG element -e- is null")};a.str_isLesser=function(b,d){var e=0;if(!a.isDefined(d))return 0;
if(!a.isDefined(b))return 1;do{if(b[e]!=d[e])return b[e]<d[e];e++}while(e<b.length&&e<d.length);return!1};a.str_isGreater=function(b,d){var e=0;if(!a.isDefined(b))return 0;if(!a.isDefined(d))return 1;do{if(b[e]!=d[e])return b[e]>d[e];e++}while(e<b.length&&e<d.length);return!1};a.cloneArray=function(a){return a.slice(0)};a.removeFromArray=function(a,d){return a.splice(d,1)};a.getDateTimeByHex=function(b){b=parseInt(b,16);var d=0;!1===isNaN(b)&&(0>=b?d="":(b=new Date(1E3*b),d=a.DateTime_ReadDT(a.readDateTimeFormat(),
a.SpecialCO.dateTimeLocalNow.name,!a.SpecialCO.mbTmzEn.value,b,null,!0)));return d};a.getTimeFormatInt=function(b,d,e){b=parseInt(b,10);var f=0;!1===isNaN(b)&&(!0===e&&(b*=1E3),f=new Date(0),f.setUTCMilliseconds(b),f=a.DateTime_ReadDT(d,a.SpecialCO.dateTimeLocalNow.name,!0,f,null,e));return f};a.util_insertChar=function(a,d){d.rValue=a+d.rValue};a.insertStr=function(a,d,e){e.rValue=0<a?e.rValue.substring(0,a)+d+e.rValue.substring(a,e.rValue.length):d+e.rValue};a.calculateMyTextWidth=function(b,d,
e,f,c,n){var k=-1;try{var g=a.createSVGTextExt(document,f,0,0,"0,0,0","start",e,d,b,c,n);a.isDefined(g)&&(g.textContent=b,k=g.getComputedTextLength());f.removeChild(g)}catch(m){a.log_append_ln("sc.calculateMyTextWidth exception= "+m.message)}finally{2<=a.getDebugLevel()&&a.log_append_ln("sc.calculateMyTextWidth( "+b+" , "+d+" , "+e+" ) = "+k)}return k};a.parseContentsAsMultiArray=function(b,d){b=b.replace(/\n/gi,a.FVLINESEPTOKEN2);b=b.replace(/\t/gi,a.FVCOLSEPTOKEN2);var e=b.split(/\\n/),f=[];for(b=
d.maxCol=0;b<e.length;b++)if(a.isDefined(e[b]))if(!0===a.prefixicmp(a.FVLINESPECLINESTARTSTR,e[b])){var c=e[b].substring(4);a.isDefined(c)&&(f[b]=c.split(","));a.isDefined(d)&&(d.hasColLayout=!0)}else a.isDefined(d)&&(d.containsColumns=!0),f[b]=e[b].split(/\\t/),a.isDefined(d)&&d.maxCol<f[b].length&&(d.maxCol=f[b].length);0<f.length&&f[f.length-1]&&""===f[f.length-1][0]&&f.pop();if(0<f.length&&a.isDefined(d)&&!0===d.autowrap&&!1===d.hasColLayout&&1===d.maxCol&&0<d.width&&a.isDefined(d.innerSVGElmnt)&&
a.isDefined(d.svgFontStyle)&&a.isDefined(d.svgFontWeight))for(b=0;b<f.length;b++)if(e=f[b][0],a.isDefined(e)){var n=a.calculateMyTextWidth(e,d.fontSize,d.fontFamily,d.innerSVGElmnt,d.svgFontStyle,d.svgFontWeight);if(n>d.width&&(c=e.split(" "),0<c.length)){var k=0;var g=c[0];e="";var m=g;for(n=a.calculateMyTextWidth(m,d.fontSize,d.fontFamily,d.innerSVGElmnt,d.svgFontStyle,d.svgFontWeight);n<d.width&&k+1<c.length;)n=c[k+1],m=g+" "+n,n=a.calculateMyTextWidth(m,d.fontSize,d.fontFamily,d.innerSVGElmnt,
d.svgFontStyle,d.svgFontWeight),n<d.width&&(g=m,k++);for(k+=1;k<c.length;k++)n=c[k],0<e.length&&(e+=" "),e+=n;f[b][0]=g;f[f.length]=f[f.length-1][0].split(/\\t/);for(c=f.length-2;c>b;c--)f[c+1][0]=f[c][0];f[b+1][0]=e}}return f};a.parseTwoColCSVContent=function(b){var d={},e=b.split("\n");var f=e.length;for(b=0;b<f;b++)if(3<=e[b].length){var c=e[b].split(";");2==c.length?d[c[0]]=c[1]:2<=a.getDebugLevel()&&a.log_append_ln("ERROR parseCSVContent item parse error")}return d};a.parseCSV=function(b){return a.parseCGI_CSV_Content(b)};
a.parseCGI_CSV_Content=function(a){var b=[];0<a.length&&a.lastIndexOf("\n",a.length-1)!=a.length-1&&(a+="\n");var e=a.split("\n").filter(h);var f=e.length;for(a=0;a<f;a++)if(0<e[a].length){e[a].lastIndexOf(";",e[a].length-1)!=e[a].length-1&&(e[a]+=";");var c=e[a].replace(/;;/g,"; ;");b.push(c.split(";").filter(h))}return b};a.parse_CSV_Content=function(a){var b=[],e=a.split("\n").filter(h);var f=e.length;for(a=0;a<f;a++)3<=e[a].length&&b.push(e[a].split(";").filter(h));return b};a.noop=function(){};
a.setSVGCordAttr=function(b,d,e){e=Math.round(e);1<e&&(e-=.5);.5>e&&(e=.5);a.setSVGAttr(b,d,e)};a.createSVGElement=function(b,d){b=b.createElementNS(a.SvgNs,d);a.isDefined(b)||a.log_append_ln("ERROR sc.createSVGElement failed for name "+d);return b};a.setSVGAttr=function(a,d,e){a.setAttributeNS(null,d,e)};a.removeSVG=function(b){a.isDefined(b)&&a.isDefined(b.parentNode)&&b.parentNode.removeChild(b)};a.createInnerSVG=function(b,d,e,f,c,n){b=a.createSVGElement(b,"svg");a.isDefined(b)&&(a.setSVGAttr(b,
"x",e),a.setSVGAttr(b,"y",f),a.setSVGAttr(b,"width",c),a.setSVGAttr(b,"height",n),a.setSVGAttr(b,"viewBox","0 0 "+c+" "+n),a.setSVGAttr(b,"version","1.1"),d.appendChild(b));return b};a.createTriangle=function(b,d,e,f,c,n,k,g,m){b=b.createElementNS(a.SvgNs,"polygon");b.setAttributeNS(null,"points",e+","+f+" "+c+","+n+" "+k+","+g);b.setAttributeNS(null,"fill",m);return d.appendChild(b)};a.createHorizontalLine=function(a,d,e,f,c,n){var b=null;e==c?b=g(a,d,e,f-d,1,n):d==f&&(b=g(a,d,e,1,c-e,n));return b};
a.createSVGSimpleRect=function(a,d,e,f,c,n){return g(a,d,e,f,c,n)};a.createSVGTSpan=function(b,d,e,f,c){b=b.createElementNS(a.SvgNs,"tspan");a.isDefined(e)&&b.setAttributeNS(null,"dx",e);a.isDefined(f)&&b.setAttributeNS(null,"dy",f);a.isDefined(c)&&(b.textContent=c);d.appendChild(b);return b};a.createClipRect=function(b,d,e,f,c,n,k){var g=b.createElementNS(a.SvgNs,"clipPath");g.setAttributeNS(null,"id",k);d.appendChild(g);0>c&&(c=0);b=b.createElementNS(a.SvgNs,"rect");b.setAttributeNS(null,"x",e);
b.setAttributeNS(null,"y",f);b.setAttributeNS(null,"width",c);b.setAttributeNS(null,"height",n);g.appendChild(b);return g};a.createSVGText=function(b,d,e,f,c,n,k,g,m,p){b=b.createElementNS(a.SvgNs,"text");b.setAttributeNS(a.XmlNs,"xml:space","preserve");b.setAttributeNS(null,"text-anchor",n);b.setAttributeNS(null,"x",e);b.setAttributeNS(null,"y",f);b.setAttributeNS(null,"fill",c);b.setAttributeNS(null,"font-size",g);b.setAttributeNS(null,"font-family",k);b.setAttributeNS(null,"font-weight",p);b.setAttributeNS(null,
"font-style",m);d.appendChild(b);return b};a.createSVGTextExt=function(b,d,e,f,c,n,k,g,m,p,h){var q=b.createElementNS(a.SvgNs,"text");q.setAttributeNS(a.XmlNs,"xml:space","preserve");q.setAttributeNS(null,"text-anchor",n);q.setAttributeNS(null,"x",e);q.setAttributeNS(null,"y",f);q.setAttributeNS(null,"fill",a.adjustColorStr(c));q.setAttributeNS(null,"font-size",g);q.setAttributeNS(null,"font-family",k);q.setAttributeNS(null,"font-weight",h);q.setAttributeNS(null,"font-style",p);d.appendChild(q);b=
b.createTextNode(m);q.appendChild(b);return q};a.createSVGRectDashed=function(b,d,e,f,c,n,k,h,m,p,r){var q;m=parseInt(m,10);var w=1;!0===isNaN(m)&&(m=0);if(!a.isDefined(b)||!a.isDefined(d))return null;var t=a.createSVGElement(b,"g");if(a.isDefined(t)){a.isDefined(k)&&(k=!0===p?g(b,e+m,f+m,c-2*m,n-2*m,k):g(b,e,f,c,n,k),t.appendChild(k));if(0<m){r===a.DOTTED?w=1:r===a.DASHED&&(w=4);k=m*w;p=m;var u=e+c;var v=f;var z=e+1;for(q=0;z+k<u;z+=k,q++)0===q%2&&(r=g(b,z,v,k,p,h),t.appendChild(r));0===q%2&&u-z<
k&&(r=g(b,z,v,u-z,p,h),t.appendChild(r));k=m;p=m*w;z=e+c-m;u=f+n;v=f;for(q=0;v+p<u;v+=p,q++)0===q%2&&(r=g(b,z,v,k,p,h),t.appendChild(r));0===q%2&&u-v<p&&(r=g(b,z,v,k,u-v,h),t.appendChild(r));k=m*w;p=m;u=e+c;v=f+n-m;z=e;for(q=0;z+k<u;z+=k,q++)0===q%2&&(r=g(b,z,v,k,p,h),t.appendChild(r));0===q%2&&u-z<k&&(r=g(b,z,v,u-z,p,h),t.appendChild(r));k=m;p=m*w;z=e;u=f+n;v=f;for(q=0;v+p<u;v+=p,q++)0===q%2&&(r=g(b,z,v,k,p,h),t.appendChild(r));0===q%2&&u-v<p&&(r=g(b,z,v,k,u-v,h),t.appendChild(r))}d.appendChild(t)}return t};
a.createSVGOlnRectDashed=function(b,d,e,f,c,n,k,h,m,p,r){var q;k=parseInt(m,10);m=1;!0===isNaN(k)&&(k=0);if(!a.isDefined(b)||!a.isDefined(d))return null;p=a.createSVGElement(b,"g");if(a.isDefined(p)){if(0<k){r===a.DOTTED?m=1:r===a.DASHED&&(m=4);var w=k*m;var t=k;var u=e+c;var v=f;var z=e+1;for(q=0;z+w<u;z+=w,q++)0===q%2&&(r=g(b,z,v,w,t,h),p.appendChild(r));0===q%2&&u-z<w&&(r=g(b,z,v,u-z,t,h),p.appendChild(r));w=k;t=k*m;z=e+c-k;u=f+n;v=f;for(q=0;v+t<u;v+=t,q++)0===q%2&&(r=g(b,z,v,w,t,h),p.appendChild(r));
0===q%2&&u-v<t&&(r=g(b,z,v,w,u-v,h),p.appendChild(r));w=k*m;t=k;u=e+c;v=f+n-k;z=e;for(q=0;z+w<u;z+=w,q++)0===q%2&&(r=g(b,z,v,w,t,h),p.appendChild(r));0===q%2&&u-z<w&&(r=g(b,z,v,u-z,t,h),p.appendChild(r));w=k;t=k*m;z=e;u=f+n;v=f;for(q=0;v+t<u;v+=t,q++)0===q%2&&(r=g(b,z,v,w,t,h),p.appendChild(r));0===q%2&&u-v<t&&(r=g(b,z,v,w,u-v,h),p.appendChild(r))}d.appendChild(p)}return p};a.createSVGRect_3dFrame_TextField=function(b,d,e,f,c,n,k){if(!a.isDefined(b)||!a.isDefined(d))return null;var h=a.createSVGElement(b,
"g");k--;if(a.isDefined(h)){var m=g(b,e+c-k-1,f+k,1,n-2*k,"rgb(255,255,255)");h.appendChild(m);m=g(b,e+c-k-2,f+k,1,n-2*k,"rgb(192,192,192)");h.appendChild(m);m=g(b,e+k,f+n-k-1,c-2*k-1,1,"rgb(255,255,255)");h.appendChild(m);m=g(b,e+k,f+n-k-2,c-2*k-1,1,"rgb(192,192,192)");h.appendChild(m);m=g(b,e+k,f+k,1,n-2*k-1,"rgb(128,128,128)");h.appendChild(m);m=g(b,e+k+1,f+k,1,n-2*k-2,"rgb(0,0,0)");h.appendChild(m);m=g(b,e+k,f+k,c-2*k-1,1,"rgb(128,128,128)");h.appendChild(m);d.appendChild(h);m=g(b,e+k+1,f+k+1,
c-2*k-3,1,"rgb(0,0,0)");h.appendChild(m);d.appendChild(h)}return h};a.createSVGRect_3dFrame=function(b,d,e,f,c,n,k){if(!a.isDefined(b)||!a.isDefined(d))return null;var h=a.createSVGElement(b,"g");if(a.isDefined(h)){var m=g(b,e+c-k-1,f+k,1,n-2*k,"rgb(128,128,128)");h.appendChild(m);m=g(b,e+k,f+n-k-1,c-2*k-1,1,"rgb(128,128,128)");h.appendChild(m);m=g(b,e+k,f+k,1,n-2*k-1,"rgb(255,255,255)");h.appendChild(m);m=g(b,e+k,f+k,c-2*k-1,1,"rgb(255,255,255)");h.appendChild(m);d.appendChild(h)}return h};a.createSVGRect=
function(b,d,e,f,c,n,k,h,m,p){var r=parseInt(m,10);!0===isNaN(r)&&(r=0);if(!a.isDefined(b)||!a.isDefined(d))return null;m=a.createSVGElement(b,"g");a.isDefined(m)&&(a.isDefined(k)&&(k=!0===p?g(b,e+r,f+r,c-2*r,n-2*r,k):g(b,e,f,c,n,k),m.appendChild(k)),0<r&&(k=g(b,e,f,c,r,h),m.appendChild(k),k=g(b,e,f+n-r,c,r,h),m.appendChild(k),k=g(b,e,f,r,n,h),m.appendChild(k),b=g(b,e+c-r,f,r,n,h),m.appendChild(b)),d.appendChild(m));return m};a.createEzSVGRect=function(b,d,e,f,c,n,k,g,m,p,h,q,y,t,u){var r=0,w=0,x=
0,A=!1,C=-1,I;if(!a.isDefined(b)||!a.isDefined(d))return null;var H=d.getAttributeNS(null,"id");if(0>n||0>c)return null;a.isDefined(m)&&"number"==typeof(w=parseInt(m))&&0<w&&(x=.5*w);a.isDefined(p)&&1==p&&(A=!0);if(!a.isDefined(y)||0==y){if(!a.isDefined(p=a.createSVGElement(b,"rect")))return null;p.setAttributeNS(null,"id",H+"_Bottom");p.setAttributeNS(null,"x",(0==A?e:e+w).toString());p.setAttributeNS(null,"y",(0==A?f:f+w).toString());p.setAttributeNS(null,"height",(0==A?n:n-2*w).toString());p.setAttributeNS(null,
"width",(0==A?c:c-2*w).toString());a.isDefined(q)&&1==q&&(A=(0==A?12:0<12-w?12-w:0).toString(),p.setAttributeNS(null,"rx",A),p.setAttributeNS(null,"ry",A));k=a.isDefined(k)?"fill:"+k+"; ":"";p.setAttributeNS(null,"style",k);d.appendChild(p)}if(0<w){if(0>(k=n-w)||0>(C=c-w))return d;if(!a.isDefined(p=a.createSVGElement(b,"rect")))return null;p.setAttributeNS(null,"id",H+"_Border");p.setAttributeNS(null,"x",(e+x).toString());p.setAttributeNS(null,"y",(f+x).toString());p.setAttributeNS(null,"height",
k.toString());p.setAttributeNS(null,"width",C.toString());a.isDefined(q)&&1==q&&(r=0>=(r=12-x)?0:r,p.setAttributeNS(null,"rx",r.toString()),p.setAttributeNS(null,"ry",r.toString()));k=(a.isDefined(g)?"stroke:"+g+"; ":"")+(a.isDefined(m)?"stroke-width:"+m+"; ":"");a.isDefined(h)||(h=a.SOLID);switch(h){case a.DOTTED:k+="stroke-dasharray:"+w.toString()+","+w.toString()+";";break;case a.DASHED:k+="stroke-dasharray:"+(6*w).toString()+","+(3*w).toString()+";"}p.setAttributeNS(null,"style",k+" fill-opacity: 0.0; ");
a.isDefined(t)?t.appendChild(p):d.appendChild(p)}if(a.isDefined(u)){m=null;g=u.getAttribute("id")+"_clip";u.setAttribute("clip-path","url(#"+g+")");if(a.isDefined(m=u.firstChild)&&"defs"==m.tagName)for(;a.isDefined(m.firstChild)&&"clipPath"==m.firstChild.tagName;)m.removeChild(m.firstChild);else a.isDefined(I=u.firstChild)?u.insertBefore(m=a.createSVGElement(b,"defs"),I):u.appendChild(m=a.createSVGElement(b,"defs"));m.appendChild(u=a.createSVGElement(b,"clipPath"));u.appendChild(p=a.createSVGElement(b,
"rect"));u.setAttributeNS(null,"id",g);p.setAttributeNS(null,"x",e.toString());p.setAttributeNS(null,"y",f.toString());p.setAttributeNS(null,"height",n.toString());p.setAttributeNS(null,"width",c.toString());a.isDefined(q)&&1==q&&(p.setAttributeNS(null,"rx",(12).toString()),p.setAttributeNS(null,"ry",(12).toString()))}return d};a.createNewEvent=function(a){if("function"===typeof Event)var b=new Event(a);else b=document.createEvent("Event"),b.initEvent(a,!0,!0);return b};a.createSVGInOutRect=function(b,
d,e,f,c,n,k,h,m,p,r){var q=parseInt(p,10);!0===isNaN(q)&&(q=0);if(!a.isDefined(b)||!a.isDefined(d))return null;p=a.createSVGElement(b,"g");a.isDefined(p)&&(a.isDefined(h)&&(h=!0===r?g(b,f+q,c+q,n-2*q,k-2*q,h):g(b,f,c,n,k,h),p.appendChild(h)),d.appendChild(p));if(!a.isDefined(b)||!a.isDefined(e))return null;p=a.createSVGElement(b,"g");a.isDefined(p)&&(0<q&&(d=g(b,f,c,n,q,m),p.appendChild(d),d=g(b,f,c+k-q,n,q,m),p.appendChild(d),d=g(b,f,c,q,k,m),p.appendChild(d),b=g(b,f+n-q,c,q,k,m),p.appendChild(b)),
e.appendChild(p));return p};a.createSVGOlnRect=function(b,d,e,f,c,n,k,h,m,p){m=parseInt(m,10);!0===isNaN(m)&&(m=0);if(!a.isDefined(b)||!a.isDefined(d))return null;k=a.createSVGElement(b,"g");a.isDefined(k)&&(0<m&&(p=g(b,e,f,c,m,h),k.appendChild(p),p=g(b,e,f+n-m,c,m,h),k.appendChild(p),p=g(b,e,f,m,n,h),k.appendChild(p),b=g(b,e+c-m,f,m,n,h),k.appendChild(b)),d.appendChild(k));return k};a.createSVGLine=function(b,d,e,f,c,n,k,g){if(!a.isDefined(b)||!a.isDefined(d))return null;b=a.createSVGElement(b,"line");
a.setSVGAttr(b,"x1",e);a.setSVGAttr(b,"y1",f);a.setSVGAttr(b,"x2",c);a.setSVGAttr(b,"y2",n);a.setSVGAttr(b,"stroke",k);a.setSVGAttr(b,"stroke-width",g);d.appendChild(b);return b};a.createEzSVGEllipse=function(b,d,e,f,c,n,k,g,m,p,h,q,y){var r=0,w=0,v=!1;if(!a.isDefined(b)||!a.isDefined(d))return null;var z=d.getAttributeNS(null,"id");if(0>n||0>c)return null;e+=c/2;f+=n/2;c/=2;n/=2;a.isDefined(m)&&"number"==typeof(r=parseInt(m))&&0<r&&(w=.5*r);a.isDefined(p)&&1==p&&(v=!0);if(!a.isDefined(q)||0==q){if(!a.isDefined(p=
a.createSVGElement(b,"ellipse")))return null;p.setAttributeNS(null,"id",z+"_Bottom");p.setAttributeNS(null,"cx",e.toString());p.setAttributeNS(null,"cy",f.toString());p.setAttributeNS(null,"rx",(0==v?c:c-r).toString());p.setAttributeNS(null,"ry",(0==v?n:n-r).toString());k=a.isDefined(k)?"fill:"+k+"; ":"";p.setAttributeNS(null,"style",k+"stroke-opacity: 0.0;");d.appendChild(p)}if(0<r){if(!a.isDefined(p=a.createSVGElement(b,"ellipse")))return null;c=0>c-w?0:c-w;n=0>n-w?0:n-w;p.setAttributeNS(null,"id",
z+"_Border");p.setAttributeNS(null,"cx",e.toString());p.setAttributeNS(null,"cy",f.toString());p.setAttributeNS(null,"rx",c.toString());p.setAttributeNS(null,"ry",n.toString());k=(a.isDefined(g)?"stroke:"+g+"; ":"")+(a.isDefined(m)?"stroke-width:"+m+"; ":"");a.isDefined(h)||(h=a.SOLID);switch(h){case a.DOTTED:k+="stroke-dasharray:"+r.toString()+","+r.toString()+";";break;case a.DASHED:k+="stroke-dasharray:"+(6*r).toString()+","+(3*r).toString()+";"}p.setAttributeNS(null,"style",k+" fill-opacity: 0.0; ");
a.isDefined(y)?y.appendChild(p):d.appendChild(p)}return d};a.createSVGEllipseExt=function(b,d,e,f,c,n,g,h,m,p){if(!a.isDefined(b)||!a.isDefined(d))return null;b=a.createSVGElement(b,"ellipse");!0===p&&(e+=m,f+=m,c-=2*m,n-=2*m);a.setSvgAttrC(b,"cx",e+c/2);a.setSvgAttrC(b,"cy",f+n/2);a.setSvgAttrC(b,"rx",c/2);a.setSvgAttrC(b,"ry",n/2);a.setSVGAttr(b,"fill",g);0<m&&a.isDefined(h)&&(a.setSVGAttr(b,"stroke",h),a.setSVGAttr(b,"stroke-width",m));d.appendChild(b);return b};a.createSVGEllipse=function(b,d,
e,f,c,n,g,h,m){if(!a.isDefined(b)||!a.isDefined(d))return null;b=a.createSVGElement(b,"ellipse");a.setSVGAttr(b,"cx",e);a.setSVGAttr(b,"cy",f);a.setSVGAttr(b,"rx",c);a.setSVGAttr(b,"ry",n);a.isDefined(m)||(m="none");a.setSVGAttr(b,"fill",m);0<h&&a.isDefined(g)&&(a.setSVGAttr(b,"stroke",g),a.setSVGAttr(b,"stroke-width",h));d.appendChild(b);return b};a.createSVGPolygon=function(b,d,e,f,c,n,g){if(!a.isDefined(b)||!a.isDefined(d))return null;b=a.createSVGElement(b,"polygon");var k=e.length,m,p="";for(m=
0;m<k;m++)0!==m&&(p+=" "),p+=e[m]+","+f[m];a.setSVGAttr(b,"points",p);a.isDefined(g)||(g="none");a.setSVGAttr(b,"fill",g);a.setSVGAttr(b,"fill-rule","evenodd");0<n&&null!==c&&(a.setSVGAttr(b,"stroke",c),a.setSVGAttr(b,"stroke-width",n));d.appendChild(b);return b};a.createSVGPolyline=function(b,d,e,f,c,n,g,h){if(null===!a.isDefined(b)||!a.isDefined(d))return null;b=a.createSVGElement(b,"polyline");var k="",p;for(p=0;p<c;p++)0!==p&&(k+=" "),k+=e[p]+","+f[p],a.setSvgAttrC(b,"points",k);a.setSvgAttrC(b,
"points",k);a.setSVGAttr(b,"fill",n);0<h&&a.isDefined(g)&&(a.setSVGAttr(b,"stroke",g),a.setSVGAttr(b,"stroke-width",h));d.appendChild(b);return b};a.createSVGPie=function(b,d,e,f,c,n,g,h,m,p,r,q){if(!a.isDefined(b)||!a.isDefined(d))return null;b=a.createSVGElement(b,"path");var k=0,w=1;if(m)for(k=1;h>g;)h-=360;else for(;h<g;)h+=360;180>Math.abs(h-g)&&(w=0);a.setSVGAttr(b,"d","M"+e+","+f+" L"+(e+c*Math.cos(Math.PI*g/180))+","+(f-n*Math.sin(Math.PI*g/180))+" A"+c+","+n+" 0 "+w+","+k+" "+(e+c*Math.cos(Math.PI*
h/180))+","+(f-n*Math.sin(Math.PI*h/180))+" z");a.isDefined(q)||(q="none");a.setSVGAttr(b,"fill",q);0<r&&a.isDefined(p)&&(a.setSVGAttr(b,"stroke",p),a.setSVGAttr(b,"stroke-width",r));d.appendChild(b);return b};a.toFixed=function(a,d){d=Math.pow(10,d||0);return 0!=d?String(Math.round(a*d)/d):String(Math.round(a))};a.toFixedInt=function(a,d){d=Math.pow(10,d||0);return 0!=d?Math.round(a*d)/d:Math.round(a)};a.toFixedNotRound=function(a,d){var b=a.toString(),f=b.indexOf(".");d=-1!==f?b.substr(0,1+f+d):
b;d=parseFloat(d);!1===isNaN(d)&&(a=d.toString());return a};a.stringcmp=function(b,d){var e=!1;if(!a.isDefined(b)||!a.isDefined(d))return e;d=d.toString();b.toString().toLowerCase()===d.toLowerCase()&&(e=!0);return e};a.prefixcmp=function(b,d){var e=!1;if(!a.isDefined(b)||!a.isDefined(d))return e;d.substring(0,b.length)===b&&(e=!0);return e};a.prefixicmp=function(b,d){var e=!1;if(!a.isDefined(b)||!a.isDefined(d))return e;b=b.toLowerCase();d.toLowerCase().substring(0,b.length)===b&&(e=!0);return e};
a.BIT_clearBit=function(a,d){return a&~d};a.BIT_setBit=function(a,d){return a|d};a.strstr=function(a,d){d=a.indexOf(d,0);return-1===d?null:a.slice(d,a.length)};a.strlen=function(b){var d=0;a.isDefined(b)&&a.isDefined(b.length)&&(d=b.length);return d};a.MAX=function(a,d){return Math.max(a,d)};a.MIN=function(a,d){return Math.min(a,d)};a.StrEndWith=function(a,d){return-1!==a.indexOf(d,a.length-d.length)};a.CircularBuffer=function(b){b=b.toFixed(0);this.pTail=this.pHeader=-1;this.size=b;this.newestTS=
this.lastAddedIndex=this.level=0;this.yetAddedTSPints={};this.bufferArr=[];this.clear=function(){var b;this.pTail=this.pHeader=-1;this.newestTS=this.lastAddedIndex=this.level=0;if(a.isDefined(this.bufferArr))for(;0<this.bufferArr.length;)this.bufferArr.pop();if(a.isDefined(this.yetAddedTSPints))for(b in this.yetAddedTSPints)delete this.yetAddedTSPints[b]};this.add=function(b){var d=-1,f=-1;0>this.size&&a.isDefined(b)&&a.isDefined(this.yetAddedTSPints[b.t_s])&&(d=this.yetAddedTSPints[b.t_s]);if(0<=
d)2<=a.getDebugLevel()&&a.log_append_ln("Trend Buffer yet contains a Point with the to add point's timestamp so no new add made! for TS "+b.t_s+" \n");else{if(-1==this.pTail&&-1==this.pHeader)f=this.pTail=this.pHeader=0,this.bufferArr[f]=b,this.lastAddedIndex=this.yetAddedTSPints[b.t_s]=f,this.newestTS=b.t_s;else{if(0>this.size){if(this.pTail++,f=this.pTail,this.newestTS>b.t_s)if(b.t_s<this.bufferArr[0].t_s)f=0;else{var c=this.lastAddedIndex;c>=this.bufferArr.length&&(c=0);if(b.t_s<this.bufferArr[c].t_s)for(d=
0;0<c&&0===d;c--)b.t_s<this.bufferArr[c].t_s&&b.t_s>=this.bufferArr[c-1].t_s&&(d=1,f=c);else if(b.t_s>this.bufferArr[c].t_s)for(d=0;c<this.bufferArr.length-1&&0===d;c++)b.t_s>this.bufferArr[c].t_s&&b.t_s<=this.bufferArr[c+1].t_s&&(d=1,f=c+1)}}else 0===this.pHeader&&0===this.pTail?(this.pTail++,f=this.pTail):this.pHeader<this.pTail&&this.pTail<this.size-1?(this.pTail++,f=this.pTail):this.pHeader<this.pTail&&this.pTail==this.size-1?(this.pHeader++,f=this.pTail=0):this.pHeader>this.pTail&&this.pHeader<
this.size-1?(this.pTail++,this.pHeader++,f=this.pTail):this.pHeader>this.pTail&&this.pHeader==this.size-1&&(this.pTail++,this.pHeader=0,f=this.pTail);if(0>this.size&&f!==this.bufferArr.length)for(c=this.bufferArr.length-1;c>=f;c--)this.bufferArr[c+1]=this.bufferArr[c],this.yetAddedTSPints[this.bufferArr[c+1].t_s]=c+1;this.bufferArr[f]=b;this.lastAddedIndex=this.yetAddedTSPints[b.t_s]=f;this.newestTS<b.t_s&&(this.newestTS=b.t_s)}0>this.size?this.level++:this.level<this.size&&this.level++}};this.get=
function(a){var b=null;a<this.level&&0<this.level&&0<=a?-1==this.pHeader&&-1==this.pTail?b=null:this.pHeader+a<=this.pTail?b=this.bufferArr[this.pHeader+a]:this.pHeader>this.pTail?this.pHeader+a<=this.size-1?b=this.bufferArr[this.pHeader+a]:this.pHeader+a>this.size-1&&(b=this.bufferArr[this.pHeader+a-this.size]):b=null:b=null;return b}};a.str_ascii2byte=function(b,d){if(a.isDefined(b)&&a.isDefined(d)){if(a.isDefined(d.buffer)){var e=b.length;if(e+1>>1!=e>>1)return-1;for(e=0;e<b.length;e++){var f=
"0x"+b[e]+b[e+1];f=parseInt(f,10);d.buffer[d.nByte++]=String.fromCharCode(f)}return 0}}else return-1};a.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){var d="",e=0;for(b=a.Base64._utf8_encode(b);e<b.length;){var f=b.charCodeAt(e++);var c=b.charCodeAt(e++);var n=b.charCodeAt(e++);var g=f>>2;f=(f&3)<<4|c>>4;var h=(c&15)<<2|n>>6;var m=n&63;isNaN(c)?h=m=64:isNaN(n)&&(m=64);d=d+this._keyStr.charAt(g)+this._keyStr.charAt(f)+this._keyStr.charAt(h)+
this._keyStr.charAt(m)}return d},decode:function(b){var d="",e=0;for(b=b.replace(/[^A-Za-z0-9\+\/=]/g,"");e<b.length;){var f=this._keyStr.indexOf(b.charAt(e++));var c=this._keyStr.indexOf(b.charAt(e++));var n=this._keyStr.indexOf(b.charAt(e++));var g=this._keyStr.indexOf(b.charAt(e++));f=f<<2|c>>4;c=(c&15)<<4|n>>2;var h=(n&3)<<6|g;d+=String.fromCharCode(f);64!=n&&(d+=String.fromCharCode(c));64!=g&&(d+=String.fromCharCode(h))}return d=a.Base64._utf8_decode(d)},_utf8_encode:function(a){var b;a=a.replace(/\r\n/g,
"\n");var e="";for(b=0;b<a.length;b++){var f=a.charCodeAt(b);128>f?e+=String.fromCharCode(f):(127<f&&2048>f?e+=String.fromCharCode(f>>6|192):(e+=String.fromCharCode(f>>12|224),e+=String.fromCharCode(f>>6&63|128)),e+=String.fromCharCode(f&63|128))}return e},_utf8_decode:function(a){for(var b="",e=0,f,c,n;e<a.length;)f=a.charCodeAt(e),128>f?(b+=String.fromCharCode(f),e++):191<f&&224>f?(c=a.charCodeAt(e+1),b+=String.fromCharCode((f&31)<<6|c&63),e+=2):(c=a.charCodeAt(e+1),n=a.charCodeAt(e+2),b+=String.fromCharCode((f&
15)<<12|(c&63)<<6|n&63),e+=3);return b}};a.isDefined=function(a){return"undefined"!==typeof a&&void 0!=a&&null!=a?!0:!1};a.requestFullScreen=function(a){var b=a.requestFullScreen||a.webkitRequestFullScreen||a.mozRequestFullScreen||a.msRequestFullScreen;b&&b.call(a)};a.destroyDownloadClickedElement=function(a){document.body.removeChild(a.target)};a.saveDataInFile=function(b,d,e){if(!a.isDefined(b)||!a.isDefined(d))return!1;d=a.isDefined(e)&&!0===e?new Blob(["\ufeff",d]):new Blob([d],{type:"text/plain"});
if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(d,b);else{blobURL=window.URL.createObjectURL(d);d=document.createElement("a");if(!a.isDefined(d))return!1;d.download=b;d.innerHTML="Download File";d.href=blobURL;d.onclick=a.destroyDownloadClickedElement;d.style.display="none";document.body.appendChild(d);d.click()}return!0};return a}(_SCIntern||{});_SCIntern=function(a){a.AlarmSrvConfigType=function(){this.response="";this.asynchUpdateCb=function(h){a.AlarmSrvConfig.response=h}};a.AlarmSrvConfig=new a.AlarmSrvConfigType;a.getAlarmDateTimeByIntMSecUTC=function(h){return a.getAlarmDateTimeByIntMSec_Flag(h,!1)};a.getAlarmDateTimeByIntMSec=function(h){return a.getAlarmDateTimeByIntMSec_Flag(h,!a.SpecialCO.mbTmzEn.value)};a.getAlarmDateTimeByIntMSec_Flag=function(h,g){h=parseInt(h,10);var b=0;!1===isNaN(h)&&(0>=h?b="---":(h=new Date(h),b=a.DateTime_ReadDT(a.readDateTimeFormat(),
a.SpecialCO.dateTimeLocalNow.name,g,h,null,!0)));return b};a.HisLineType=function(h,g,b){var d=!1,e=parseInt(b.Version.value,10);!0===isNaN(e)&&(e=1);var f=parseInt(b.ColorMode.value,10);!0===isNaN(f)&&(f=0);this.setStateColor=function(b){if(void 0===b||0>=b.length)b="255,255,255";this.color=a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR+b+"#"};this.setStateColor(b.StateNoStateColor.value);this.itemId=parseInt(h[0],10);!0===isNaN(this.itemId)&&(this.itemId=h[0]);this.typeId=parseInt(h[1],10);!0===isNaN(this.typeId)&&
(this.typeId=h[1]);this.TID_HtmlTag=g+"_"+this.typeId;if(20<=e&&a.Link.SrvInfo_ALR2Activ){this.Grp1=parseInt(h[2],10);!0===isNaN(this.Grp1)&&(this.Grp1=h[2]);this.Grp1_HtmlTag=g+"_GRP1_"+this.Grp1;this.Grp2=parseInt(h[3],10);!0===isNaN(this.Grp2)&&(this.Grp2=h[3]);this.Grp2_HtmlTag=g+"_GRP2_"+this.Grp2;this.Grp3=parseInt(h[4],10);!0===isNaN(this.Grp3)&&(this.Grp3=h[4]);this.Grp3_HtmlTag=g+"_GRP3_"+this.Grp3;this.Prio=parseInt(h[5],10);!0===isNaN(this.Prio)&&(this.Prio=h[5]);this.Prio_HtmlTag=g+"_PRIO_"+
this.Prio;var c=parseInt(h[6],16);!0===isNaN(c)&&(c=0);var n=parseInt(h[7],16);!0===isNaN(n)&&(n=0);this.on=1E3*c+n;c=parseInt(h[8],16);!0===isNaN(c)&&(c=0);n=parseInt(h[9],16);!0===isNaN(n)&&(n=0);this.off=1E3*c+n;0<this.on&&0>=this.off&&(d=!0);this.state=parseInt(h[10],10);isNaN(this.state)&&(this.state=h[10]);0===this.state?(this.state="NAK",0===f&&(!0===d?this.setStateColor(b.StateOnNackedColor.value):this.setStateColor(b.StateOffNackedColor.value))):1==this.state&&(this.state="ACK",0===f&&(!0===
d?this.setStateColor(b.StateOnAckedColor.value):this.setStateColor(b.StateOffAckedColor.value)));22<=e&&a.Link.SrvInfo_ALR2Activ&&2.01<=a.Link.SrvInfo_ALR2Version&&(this.Grp4=parseInt(h[11],10),!0===isNaN(this.Grp4)&&(this.Grp4=h[11]),this.Grp4_HtmlTag=g+"_GRP4_"+this.Grp4,this.Grp5=parseInt(h[12],10),!0===isNaN(this.Grp5)&&(this.Grp5=h[12]),this.Grp5_HtmlTag=g+"_GRP5_"+this.Grp5,this.Grp6=parseInt(h[13],10),!0===isNaN(this.Grp6)&&(this.Grp6=h[13]),this.Grp6_HtmlTag=g+"_GRP6_"+this.Grp6,this.Grp7=
parseInt(h[14],10),!0===isNaN(this.Grp7)&&(this.Grp7=h[14]),this.Grp7_HtmlTag=g+"_GRP7_"+this.Grp7,this.Grp8=parseInt(h[15],10),!0===isNaN(this.Grp8)&&(this.Grp8=h[15]),this.Grp8_HtmlTag=g+"_GRP8_"+this.Grp8,this.Grp9=parseInt(h[16],10),!0===isNaN(this.Grp9)&&(this.Grp9=h[16]),this.Grp9_HtmlTag=g+"_GRP9_"+this.Grp9,this.Grp10=parseInt(h[17],10),!0===isNaN(this.Grp10)&&(this.Grp10=h[17]),this.Grp10_HtmlTag=g+"_GRP10_"+this.Grp10,this.AlrTxt=h[18]);h="";1==f&&0<=this.Grp1?(h=b.AlrCoPrefix.name+"Grp1Color["+
this.Grp1+"]."+b.AlrCoIndex.name,this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,h))):2==f&&0<=this.Grp2?(h=b.AlrCoPrefix.name+"Grp2Color["+this.Grp2+"]."+b.AlrCoIndex.name,this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,h))):3==f&&0<=this.Grp3?(h=b.AlrCoPrefix.name+"Grp3Color["+this.Grp3+"]."+b.AlrCoIndex.name,this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,h))):4==f&&0<=this.Prio&&(h=b.AlrCoPrefix.name+"PrioColor["+this.Prio+"]."+b.AlrCoIndex.name,this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,
h)))}else this.on=parseInt(h[2],16),this.off=parseInt(h[3],16),0!==this.on&&0===this.off&&(d=!0),this.state=parseInt(h[4],10),isNaN(this.state)&&(this.state=h[4]),0===this.state?(this.state="NAK",!0===d?this.setStateColor(b.StateOnNackedColor.value):this.setStateColor(b.StateOffNackedColor.value)):1==this.state&&(this.state="ACK",!0===d?this.setStateColor(b.StateOnAckedColor.value):this.setStateColor(b.StateOffAckedColor.value))};a.DefLineType=function(h,g,b){var d=!1;this.setStateColor=function(b){this.color=
a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR+b+"#"};this.setStateColor(b.StateNoStateColor.value);this.typeId=parseInt(h[0],10);!0===isNaN(this.typeId)&&(this.typeId=h[0]);this.TID_HtmlTag=g+"_"+this.typeId;this.counter=parseInt(h[1],10);!0===isNaN(this.counter)&&(this.counter=h[1]);this.on=parseInt(h[2],16);this.off=parseInt(h[3],16);0!==this.on&&0===this.off&&(d=!0);this.state=parseInt(h[4],10);isNaN(this.state)&&(this.state=h[4]);0===this.counter?(this.setStateColor(b.StateNoStateColor.value),this.state=
"--"):0===this.state?(this.state="NAK",!0===d?this.setStateColor(b.StateOnNackedColor.value):this.setStateColor(b.StateOffNackedColor.value)):1==this.state&&(this.state="ACK",!0===d?this.setStateColor(b.StateOnAckedColor.value):this.setStateColor(b.StateOffAckedColor.value))};a.AlarmBase=function(h,g,b,d){this.index=h;this.coPrefix=g;this.nRow=b;this.specific_update=null;this.previousConfigResponse="";this.fileViewer=d;this.rArrayOverview=this.rArrayHistory=null;this.sta=0;this.BACnet=null;this.isBACnet=
function(){var a=!1;null!==this.BACnet&&(a=!0);return a};this.getDisplayedNumRow=function(){var a=this.nRow;null!==this.fileViewer&&null!==this.fileViewer.getNrOfRowDisplayed&&(a=this.fileViewer.getNrOfRowDisplayed());return a};this.getMaxFilteredPage=this.getMaxPage=null;this.loadHistoryCGI_psc=function(b,d){var c="";2<=a.getDebugLevel()&&a.log_append_ln("loadHistoryCGI_psc() called; startLine = "+b+"; endline = "+d);if("1"===this.co.LoadAlrsRemoteMode.value)if(0<this.co.LoadAlrsRemoteFile.value.length){a.loadData("plc?"+
this.co.LoadAlrsRemoteFile.value+"cfg",a.AlarmSrvConfig.asynchUpdateCb,!1);var e=a.loadGeneralCGI("plc?"+this.co.LoadAlrsRemoteFile.value+"Alr")}else 2<=a.getDebugLevel()&&a.log_append_ln("Warning during loadHistoryCGI_psc() from Panasonic Alarming , LoadAlrsRemoteFile not right configured : ["+this.co.LoadAlrsRemoteFile.value+"]"),e=a.loadGeneralCGI("plc?alarm1Alr");else 2<=a.getDebugLevel()&&a.log_append_ln("Warning during loadHistoryCGI_psc() from Panasonic Alarming , LoadAlrsRemoteMode not right configured : ["+
this.co.LoadAlrsRemoteMode.value+"]"),e=a.loadGeneralCGI("plc?alarm1Alr");if(a.isDefined(e)&&0<e.length){var f;e=e.trim();e=e.split("\n");if(!(e.length<b)&&1==a.isDefined(e)&&0<e.length){var g=!1;for(f=0;f<e.length&&!g;f++)"end"===e[f].toLowerCase()&&(g=!0);if(0==g)return"";e.splice(f,e.length-f);for(f=b;f<e.length||f<=d;f++)c=f==b?e[f]:c+("\n"+e[f]);return c+"\nDone"}}return""};this.loadHistoryCGI=function(b,d){var c=parseInt(this.co.Version.value,10);!0===isNaN(c)&&(c=1);a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?
b=this.loadHistoryCGI_psc(b,d):(20<=c&&a.Link.SrvInfo_ALR2Activ?(c="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,c=c+("&action=lhis&startLine="+b)+("&endLine="+d),0<this.co.FilterTIDs.value.length&&"0"!=this.co.FilterTIDs.value&&(c+="&TID="+this.co.FilterTIDs.value),0<this.co.FilterGrp1s.value.length&&"0"!=this.co.FilterGrp1s.value&&(c+="&grp1="+this.co.FilterGrp1s.value),0<this.co.FilterGrp2s.value.length&&"0"!=this.co.FilterGrp2s.value&&(c+="&grp2="+this.co.FilterGrp2s.value),
0<this.co.FilterGrp3s.value.length&&"0"!=this.co.FilterGrp3s.value&&(c+="&grp3="+this.co.FilterGrp3s.value),0<this.co.FilterPrios.value.length&&"0"!=this.co.FilterPrios.value&&(c+="&prio="+this.co.FilterPrios.value),0<this.co.SortMode.value.length&&"0"!=this.co.SortMode.value&&(c+="&sortTON="+this.co.SortMode.value),0<this.co.FilterMode.value.length&&"0"!=this.co.FilterMode.value&&(c+="&filterON="+this.co.FilterMode.value),0<this.co.FilterAckMode.value.length&&"0"!=this.co.FilterAckMode.value&&(c+=
"&filterACK="+this.co.FilterAckMode.value)):(c="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value,c=c+("&action=loadHistory&startLine="+b)+("&endLine="+d),0<this.co.SortMode.value.length&&"0"!=this.co.SortMode.value&&(c+="&sortTON="+this.co.SortMode.value),0<this.co.FilterMode.value.length&&"0"!=this.co.FilterMode.value&&(c+="&filterON="+this.co.FilterMode.value),0<this.co.FilterAckMode.value.length&&"0"!=this.co.FilterAckMode.value&&(c+="&filterACK="+this.co.FilterAckMode.value),0<this.co.FilterTIDs.value.length&&
"-1"!=this.co.FilterTIDs.value&&(c+="&TID="+this.co.FilterTIDs.value)),b=a.loadGeneralCGI(c));return b};this.loadHistoryAlarmBlock=function(b,d){b=this.loadHistoryCGI(b,d);return a.parseCGI_CSV_Content(b)};this.updateIndices=function(a,b){var c={stop:0,start:-1,end:-1};if(0>=b)return c;c.end=(a+1)*this.getDisplayedNumRow()-1;c.end>=b&&(c.end=b-1);0>c.end&&(c.end=0);c.start=a*this.getDisplayedNumRow();0>c.start&&(c.start=0);return c};this.update_co=function(b){var d=!1;b?(b=a.ReadContainer(this.name),
b!=this.value&&(this.value=b,d=!0)):(a.WriteContainer(this.name,this.value),d=!0);return d};this.config={version:0,overViewSize:0,maxHistorySize:0,actualHistorySize:0,blockSize:0,stateIndex:0,actualFilteredSize:0};this.exec_deleteByType=function(b){b="";var d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==typeId&&"0"!==typeId&&""!==typeId&&"-1"!==typeId?(20<=d&&a.Link.SrvInfo_ALR2Activ?a.log_append_ln("exec_deleteByType Not implemented for Alarming2 Macros  !"):
b="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=delete&type="+typeId,0<b.length&&a.loadGeneralCGI(b)):a.log_append_ln("Error in exec_deleteByType :typeId Not OK!"):a.log_append_ln("exec_deleteByType Not implemented on Panasonic Server !")};this.exec_deleteByItem=function(b){var d="",c=parseInt(this.co.Version.value,10);!0===isNaN(c)&&(c=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(20<=c&&a.Link.SrvInfo_ALR2Activ?a.log_append_ln("exec_deleteByItem Not implemented for Alarming2 Macros  !"):
d="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=delete&item="+b,0<d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_deleteByItem :itemId Not OK!"):a.log_append_ln("exec_deleteByItem Not implemented on Panasonic Server !")};this.exec_deleteList=function(){var b="",d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?(20<=d&&a.Link.SrvInfo_ALR2Activ?a.log_append_ln("exec_deleteList Not implemented for Alarming2 Macros  !"):
b="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=delete&completList=1",0<b.length&&a.loadGeneralCGI(b)):a.log_append_ln("exec_deleteList Not implemented on Panasonic Server !")};this.exec_acknowledgeByType=function(b){var d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(20<=d&&a.Link.SrvInfo_ALR2Activ?(d="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,d=d+"&action=ack"+
("&TID="+b)):d="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=acknowledge&type="+b,0<d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_acknowledgeByType :typeId Not OK!"):a.log_append_ln("exec_acknowledgeByType Not implemented on Panasonic Server !")};this.exec_acknowledgeByItem=function(b){var d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(20<=d&&a.Link.SrvInfo_ALR2Activ?(d=
"alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,d=d+"&action=ack"+("&item="+b)):d="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=acknowledge&item="+b,0<d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_acknowledgeByItem :itemId Not OK!"):a.log_append_ln("exec_acknowledgeByItem Not implemented on Panasonic Server !")};this.exec_acknowledgeByGrp1=function(b){var d="",c=parseInt(this.co.Version.value,10);!0===isNaN(c)&&(c=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?
void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(20<=c&&a.Link.SrvInfo_ALR2Activ?(d="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,d=d+"&action=ack"+("&grp1="+b)):a.log_append_ln("exec_acknowledgeByGrp1 Not implemented before Alarming2 Macros !"),0<d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_acknowledgeByGrp1 :grp1 Not OK!"):a.log_append_ln("exec_acknowledgeByGrp1 Not implemented on Panasonic Server !")};this.exec_acknowledgeByGrp2=function(b){var d="",c=parseInt(this.co.Version.value,
10);!0===isNaN(c)&&(c=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(20<=c&&a.Link.SrvInfo_ALR2Activ?(d="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,d=d+"&action=ack"+("&grp2="+b)):a.log_append_ln("exec_acknowledgeByGrp2 Not implemented before Alarming2 Macros !"),0<d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_acknowledgeByGrp2 :grp2 Not OK!"):a.log_append_ln("exec_acknowledgeByGrp2 Not implemented on Panasonic Server !")};
this.exec_acknowledgeByGrp3=function(b){var d="",c=parseInt(this.co.Version.value,10);!0===isNaN(c)&&(c=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(20<=c&&a.Link.SrvInfo_ALR2Activ?(d="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,d=d+"&action=ack"+("&grp3="+b)):a.log_append_ln("exec_acknowledgeByGrp3 Not implemented before Alarming2 Macros !"),0<d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_acknowledgeByGrp3 :grp3 Not OK!"):
a.log_append_ln("exec_acknowledgeByGrp3 Not implemented on Panasonic Server !")};this.exec_acknowledgeByGrp4=function(b){var d="",c=parseInt(this.co.Version.value,10);!0===isNaN(c)&&(c=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(22<=c&&a.Link.SrvInfo_ALR2Activ?(d="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,d=d+"&action=ack"+("&grp4="+b)):a.log_append_ln("exec_acknowledgeByGrp4 Not implemented before Alarming2 Macros version 22 !"),0<
d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_acknowledgeByGrp4 :grp4 Not OK!"):a.log_append_ln("exec_acknowledgeByGrp4 Not implemented on Panasonic Server !")};this.exec_acknowledgeByPrio=function(b){var d="",c=parseInt(this.co.Version.value,10);!0===isNaN(c)&&(c=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?void 0!==b&&"0"!==b&&""!==b&&"-1"!==b?(20<=c&&a.Link.SrvInfo_ALR2Activ?(d="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,d=d+"&action=ack"+("&prio="+b)):
a.log_append_ln("exec_acknowledgeByPrio Not implemented before Alarming2 Macros !"),0<d.length&&a.loadGeneralCGI(d)):a.log_append_ln("Error in exec_acknowledgeByPrio :prio Not OK!"):a.log_append_ln("exec_acknowledgeByPrio Not implemented on Panasonic Server !")};this.exec_acknowledgeList=function(){var b=parseInt(this.co.Version.value,10);!0===isNaN(b)&&(b=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?(20<=b&&a.Link.SrvInfo_ALR2Activ?(b="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,
b+="&action=ack"):b="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=acknowledge&completList=1",0<b.length&&a.loadGeneralCGI(b)):a.log_append_ln("exec_acknowledgeList Not implemented on Panasonic Server !")};this.exec_acknowledgeListAdv=function(b){b="";var d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?(20<=d&&a.Link.SrvInfo_ALR2Activ?(b="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,b+="&action=ack",0<this.co.ACKItems.value.length&&
"0"!==this.co.ACKItems.value&&"-1"!==this.co.ACKItems.value&&(b+="&item="+this.co.ACKItems.value),0<this.co.ACKTIDs.value.length&&"0"!==this.co.ACKTIDs.value&&"-1"!==this.co.ACKTIDs.value&&(b+="&TID="+this.co.ACKTIDs.value),0<this.co.ACKGrp1s.value.length&&"0"!==this.co.ACKGrp1s.value&&"-1"!==this.co.ACKGrp1s.value&&(b+="&grp1="+this.co.ACKGrp1s.value),0<this.co.ACKGrp2s.value.length&&"0"!==this.co.ACKGrp2s.value&&"-1"!==this.co.ACKGrp2s.value&&(b+="&grp2="+this.co.ACKGrp2s.value),0<this.co.ACKGrp3s.value.length&&
"0"!==this.co.ACKGrp3s.value&&"-1"!==this.co.ACKGrp3s.value&&(b+="&grp3="+this.co.ACKGrp3s.value),0<this.co.ACKPrios.value.length&&"0"!==this.co.ACKPrios.value&&"-1"!==this.co.ACKPrios.value&&(b+="&prio="+this.co.ACKPrios.value),22<=d&&0<this.co.ACKGrp4s.value.length&&"0"!==this.co.ACKGrp4s.value&&"-1"!==this.co.ACKGrp4s.value&&(b+="&grp4="+this.co.ACKGrp4s.value)):a.log_append_ln("exec_acknowledgeListAdv Not implemented before Alarming2 Macros !"),0<b.length&&a.loadGeneralCGI(b)):a.log_append_ln("exec_acknowledgeListAdv Not implemented on Panasonic Server !")};
this.exec_restartAlarmServer=function(){var b=parseInt(this.co.Version.value,10);!0===isNaN(b)&&(b=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?(20<=b&&a.Link.SrvInfo_ALR2Activ?(b="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,b+="&action=reinitAlarming"):b="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=reinitAlarming",0<b.length&&a.loadGeneralCGI(b)):a.log_append_ln("exec_restartAlarmServer Not implemented on Panasonic Server !")};this.exec_clearAlarmServer=
function(){var b=parseInt(this.co.Version.value,10);!0===isNaN(b)&&(b=1);a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC?(20<=b&&a.Link.SrvInfo_ALR2Activ?(b="alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value,b+="&action=clearLogFiles"):b="alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=clearLogFiles",0<b.length&&a.loadGeneralCGI(b)):a.log_append_ln("exec_clearAlarmServer Not implemented on Panasonic Server !")};this.readAllSpecialAlarmContainers=function(){var a=this.co,
b=[];Object.keys(a).forEach(function(c,d){null!==a[c].update&&!0===a[c].update(!0)&&b.push(a[c])});return b};this.loadAndParseSrvCfg=function(){var b=!1,d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?"1"===this.co.LoadAlrsRemoteMode.value?0<this.co.LoadAlrsRemoteFile.value.length?a.loadData("plc?"+this.co.LoadAlrsRemoteFile.value+"cfg",a.AlarmSrvConfig.asynchUpdateCb,!1):(2<=a.getDebugLevel()&&a.log_append_ln("Warning during load cfg from Panasonic Alarming , LoadAlrsRemoteFile not right configured : ["+
this.co.LoadAlrsRemoteFile.value+"]"),a.loadData("plc?alarm1cfg",a.AlarmSrvConfig.asynchUpdateCb,!1)):(2<=a.getDebugLevel()&&a.log_append_ln("Warning during load cfg from Panasonic Alarming , LoadAlrsRemoteMode not right configured : ["+this.co.LoadAlrsRemoteMode.value+"]"),a.loadData("plc?alarm1cfg",a.AlarmSrvConfig.asynchUpdateCb,!1)):20<=d&&a.Link.SrvInfo_ALR2Activ?a.loadData("alarm2"+a.getSrvExt()+"?cgiVer=2&list="+this.co.AlarmsListNr.value+"&action=sta",a.AlarmSrvConfig.asynchUpdateCb,!1):a.loadData("alarm"+
a.getSrvExt()+"?list="+this.co.AlarmsListNr.value+"&action=configNSta",a.AlarmSrvConfig.asynchUpdateCb,!1);0<a.AlarmSrvConfig.response.length&&!1===a.stringcmp(a.AlarmSrvConfig.response,this.previousConfigResponse)&&(b=!0,this.previousConfigResponse=a.AlarmSrvConfig.response,!0===this.parseAlarmSrvConfig()&&(null!==this.getMaxPage&&(this.co.MaxPageNr.value=this.getMaxPage(),this.co.MaxPageNr.update(!1)),20<=d&&a.Link.SrvInfo_ALR2Activ&&null!==this.getMaxPage&&(this.co.MaxFilteredPageNr.value=this.getMaxPage(),
this.co.MaxFilteredPageNr.update(!1))));a.TARGET_TYPE_NR!==a.TARGET_TYPE_PANASONIC&&20<=d&&a.Link.SrvInfo_ALR2Activ&&null!==this.getMaxFilteredPage&&this.co.MaxFilteredPageNr.value!==this.getMaxFilteredPage()&&(b=!0,this.co.MaxFilteredPageNr.value=this.getMaxFilteredPage(),this.co.MaxFilteredPageNr.update(!1));return b};this.update=function(){var b,d=1;if(this.fileViewer.getDrawCellTxtOnXLinesSource){var c=this.fileViewer.getDrawCellTxtOnXLinesSource();null!==c&&null!==c.value&&void 0!==c.value&&
0<c.value.length&&"0"!=c.value&&(d=parseInt(c.value,10))}isNaN(d)&&(d=1);0>=d&&(d=1);var n=this.readAllSpecialAlarmContainers();""===this.co.AlarmsListNr.value&&(this.co.AlarmsListNr.value="ALRLIST0");var g=parseInt(this.co.Version.value,10);!0===isNaN(g)&&(g=1);var h=4,m=6,p=8,r=-1,q=10;22<=g&&a.Link.SrvInfo_ALR2Activ&&(h=5,m=7,p=9,r=11,q=19);var y=this.loadAndParseSrvCfg();if(0<n.length||!0===y||a.previousDrawDateTimeFormat!==a.readDateTimeFormat()||a.previousMBTmzEn!==a.SpecialCO.mbTmzEn.value){for(c=
0;c<n.length;c++)if(!0===a.stringcmp(this.co.SelAlrsTypesAct.name,n[c].name)){var t=this.fileViewer.getSelectedRow();if(!0===a.stringcmp("ACKALRSDEFTYPES",n[c].value))if(20<=g&&a.Link.SrvInfo_ALR2Activ)a.log_append_ln("Error in update Alarming , ACKALRSDEFTYPES no more supported in alarming2");else if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++){var u=this.fileViewer.getTableCell(Math.trunc(t[b]/d)+1,1);this.exec_acknowledgeByType(u)}else u=this.fileViewer.getTableCell(Math.trunc(t/
d)+1,1),this.exec_acknowledgeByType(u);else if(!0===a.stringcmp("ACKALRSHISTYPES",n[c].value))if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/d)+1,2),this.exec_acknowledgeByType(u);else u=this.fileViewer.getTableCell(Math.trunc(t/d)+1,2),this.exec_acknowledgeByType(u);else if(!0===a.stringcmp("ACKALRSHISITEMS",n[c].value))if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/
d)+1,1),this.exec_acknowledgeByItem(u);else u=this.fileViewer.getTableCell(Math.trunc(t/d)+1,1),this.exec_acknowledgeByItem(u);else if(!0===a.stringcmp("ACKALRSHISGRP1S",n[c].value))if(20<=g&&a.Link.SrvInfo_ALR2Activ)if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/d)+1,h),this.exec_acknowledgeByGrp1(u);else u=this.fileViewer.getTableCell(Math.trunc(t/d)+1,h),this.exec_acknowledgeByGrp1(u);else a.log_append_ln("Error in update Alarming , ACKALRSHISGRP1S only supported since alarming2");
else if(!0===a.stringcmp("ACKALRSHISGRP2S",n[c].value))if(20<=g&&a.Link.SrvInfo_ALR2Activ)if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/d)+1,m),this.exec_acknowledgeByGrp2(u);else u=this.fileViewer.getTableCell(Math.trunc(t/d)+1,m),this.exec_acknowledgeByGrp2(u);else a.log_append_ln("Error in update Alarming , ACKALRSHISGRP2S only supported since alarming2");else if(!0===a.stringcmp("ACKALRSHISGRP3S",n[c].value))if(20<=g&&a.Link.SrvInfo_ALR2Activ)if(!0===
this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/d)+1,p),this.exec_acknowledgeByGrp3(u);else u=this.fileViewer.getTableCell(Math.trunc(t/d)+1,p),this.exec_acknowledgeByGrp3(u);else a.log_append_ln("Error in update Alarming , ACKALRSHISGRP3S only supported since alarming2");else if(!0===a.stringcmp("ACKALRSHISGRP4S",n[c].value))if(22<=g&&a.Link.SrvInfo_ALR2Activ)if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/
d)+1,r),this.exec_acknowledgeByGrp4(u);else u=this.fileViewer.getTableCell(Math.trunc(t/d)+1,r),this.exec_acknowledgeByGrp4(u);else a.log_append_ln("Error in update Alarming , ACKALRSHISGRP4S only supported since alarming2 (version 22)");else if(!0===a.stringcmp("ACKALRSHISPRIOS",n[c].value))if(20<=g&&a.Link.SrvInfo_ALR2Activ)if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/d)+1,q),this.exec_acknowledgeByPrio(u);else u=this.fileViewer.getTableCell(Math.trunc(t/
d)+1,q),this.exec_acknowledgeByPrio(u);else a.log_append_ln("Error in update Alarming , ACKALRSHISPRIOS only supported since alarming2");else if(!0===a.stringcmp("DELALRSHISITEMS",n[c].value))if(!0===this.fileViewer.checkIfMultiSelect())for(b=0;b<t.length;b++)u=this.fileViewer.getTableCell(Math.trunc(t[b]/d)+1,1),this.exec_deleteByItem(u);else u=this.fileViewer.getTableCell(Math.trunc(t/d)+1,1),this.exec_deleteByItem(u);else!0===a.stringcmp("ACKALRSDEFLIST",n[c].value)?20<=g&&a.Link.SrvInfo_ALR2Activ?
a.log_append_ln("Error in update Alarming , ACKALRSDEFLIST no more supported in alarming2"):this.exec_acknowledgeList():!0===a.stringcmp("ACKALRSHISLIST",n[c].value)?this.exec_acknowledgeList():!0===a.stringcmp("ACKALRSHISADV",n[c].value)?20<=g&&a.Link.SrvInfo_ALR2Activ?this.exec_acknowledgeListAdv():a.log_append_ln("Error in update Alarming , ACKALRSHISADV only supported since alarming2"):!0===a.stringcmp("DELALRSHISLIST",n[c].value)?this.exec_deleteList():!0===a.stringcmp("RESTARTTRGTALARMING",
n[c].value)?this.exec_restartAlarmServer():!0===a.stringcmp("CLEARTRGTLOGFILES",n[c].value)&&this.exec_clearAlarmServer()}else!0===a.stringcmp(this.co.SelectMode.name,n[c].name)?(2<=a.getDebugLevel()&&a.log_append_ln(n[c].value),!0===a.stringcmp("STOM",n[c].value)?this.fileViewer.changeSelection(-1):!0===a.stringcmp("MTOS",n[c].value)&&this.fileViewer.changeSelection(-1)):!0===a.stringcmp(this.co.AlarmMacroType.name,n[c].name)&&(2<=a.getDebugLevel()&&a.log_append_ln(n[c].value),!0===a.stringcmp("20",
n[c].value)&&(null===this.BACnet&&(this.BACnet=new a.BACnet_Alarming(this)),2<=a.getDebugLevel()&&a.log_append_ln("this is a BACnet alarming macro")));y&&a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&(2<=a.getDebugLevel()&&a.log_append_ln(" Panasonic forces that alarm his reload since the alarmcfg request changed this.co.LoadAlrsAction.name = "+this.co.LoadAlrsAction.name+" this.co.LoadAlrsAction.value = "+this.co.LoadAlrsAction.value),"STARTLOADDATAS"!==this.co.LoadAlrsAction.value&&(this.co.LoadAlrsAction.value=
"STARTLOADDATAS",this.co.LoadAlrsAction.update(!1),n.push(this.co.LoadAlrsAction)));this.specific_update(n);this.fileViewer.removeSelection()}};this.specific_update=a.noop;this.parseAlarmSrvConfig=function(){var b=a.AlarmSrvConfig.response,d=null,c=!1,n=0,g=1,h=parseInt(this.co.Version.value,10);!0===isNaN(h)&&(h=1);3<=a.getDebugLevel()&&null!==b&&a.log_append_ln("Alarming , parseAlarmSrvConfig contents : ["+b+"]");null!==b?d=a.parseCGI_CSV_Content(b):a.log_append_ln("Alarming ERROR: Failed to parseCGI_CSV_Content! ");
20<=h&&a.Link.SrvInfo_ALR2Activ?(n=1,null!==d[0]&&null!==d[0][0]&&!0!==isNaN(parseFloat(d[0][0],10))&&(g=parseFloat(d[0][0],10))):g=0;0!==g&&(a.log_append_ln("Alarming parseAlarmSrvConfig ERROR: error code not Ok so inits this.config.actualHistorySize to 0 error code : "+g),this.config.actualHistorySize=0);0===g&&null!==d&&null!==d[n]&&(null!==d[n][0]&&!0!==isNaN(parseFloat(d[n][0],10))&&(this.config.version=parseFloat(d[n][0],10)),null!==d[n][1]&&(this.config.overViewSize=0,!0!==isNaN(parseInt(d[n][1],
10))&&(this.config.overViewSize=parseInt(d[n][1],10))),null!==d[n][2]&&(this.config.maxHistorySize=0,!0!==isNaN(parseInt(d[n][2],10))&&(this.config.maxHistorySize=parseInt(d[n][2],10))),null!==d[n][3]&&(this.config.actualHistorySize=0,!0!==isNaN(parseInt(d[n][3],10))&&(this.config.actualHistorySize=parseInt(d[n][3],10))),null!==d[n][4]&&(this.config.blockSize=0,!0!==isNaN(parseInt(d[n][4],10))&&(this.config.blockSize=parseInt(d[n][4],10))),null!==d[n][5]&&(this.config.stateIndex=0,!0!==isNaN(parseInt(d[n][5],
10))&&(this.config.stateIndex=parseInt(d[n][5],10),c=!0)));return c};this.co={Language:{name:"@LANGUAGE",value:"0",update:this.update_co},AlrCoPrefix:{name:g,value:g,update:null},AlrCoIndex:{name:h,value:h,update:null},AlarmList:{name:g+"AlarmsList."+h,value:"0",update:this.update_co},AlarmsListNr:{name:g+"AlarmsListNr."+h,value:"ALRLIST0",update:this.update_co},LoadAlrsRemoteMode:{name:g+"LoadAlrsRemoteMode."+h,value:"1",update:this.update_co},LoadAlrsRemoteFile:{name:g+"LoadAlrsRemoteFile."+h,value:"",
update:this.update_co},SelectMode:{name:g+"SelectMode."+h,value:"0",update:this.update_co},AlarmsListSize:{name:g+"AlarmsListSize."+h,value:"0",update:this.update_co},PageNr:{name:g+"PageNr."+h,value:"0",update:this.update_co},MaxPageNr:{name:g+"MaxPageNr."+h,value:"0",update:this.update_co},MaxFilteredPageNr:{name:g+"MaxFilteredPageNr."+h,value:"0",update:this.update_co},SelAlrsTypesAct:{name:g+"SelAlrsTypesAct."+h,value:"0",update:this.update_co},AlarmsListHeaderSP:{name:g+"AlarmsListHeaderSP."+
h,value:"0",update:this.update_co},FilterMode:{name:g+"FilterMode."+h,value:"0",update:this.update_co},SortMode:{name:g+"SortMode."+h,value:"0",update:this.update_co},FilterAckMode:{name:g+"FilterAckMode."+h,value:"0",update:this.update_co},FilterTIDs:{name:g+"FilterTIDs."+h,value:"0",update:this.update_co},AlarmsTxtFromCSV:{name:g+"AlarmsTxtFromCSV."+h,value:"0",update:this.update_co},AlarmListSizeCSV:{name:g+"AlarmListSizeCSV."+h,value:"0",update:this.update_co},StateNoStateColor:{name:g+"StateNoStateColor."+
h,value:"0",update:this.update_co},StateOnNackedColor:{name:g+"StateOnNackedColor."+h,value:"0",update:this.update_co},StateOnAckedColor:{name:g+"StateOnAckedColor."+h,value:"0",update:this.update_co},StateOffNackedColor:{name:g+"StateOffNackedColor."+h,value:"0",update:this.update_co},StateOffAckedColor:{name:g+"StateOffAckedColor."+h,value:"0",update:this.update_co},LoadAlrsAction:{name:g+"LoadAlrsAction."+h,value:"0",update:this.update_co},LoadAlrsBargVal:{name:g+"LoadAlrsBargVal."+h,value:"0",
update:this.update_co},SaveAlrsAction:{name:g+"SaveAlrsAction."+h,value:"0",update:this.update_co},SortAlrsColAction:{name:g+"SortAlrsColAction."+h,value:"0",update:this.update_co},SortAlrsColNr:{name:g+"SortAlrsColNr."+h,value:"0",update:this.update_co},AlarmMacroType:{name:g+"AlarmMacroType."+h,value:"0",update:this.update_co},AlarmTextExtraParam10:{name:g+"AlarmTextExtraParam1On."+h,value:"0",update:this.update_co},AlarmTextExtraParam20:{name:g+"AlarmTextExtraParam2On."+h,value:"0",update:this.update_co},
AlarmTextExtraParam30:{name:g+"AlarmTextExtraParam3On."+h,value:"0",update:this.update_co},AlarmTextExtraParam40:{name:g+"AlarmTextExtraParam4On."+h,value:"0",update:this.update_co},AlarmTextExtraParam50:{name:g+"AlarmTextExtraParam4On."+h,value:"0",update:this.update_co},Version:{name:g+"Version."+h,value:"0",update:this.update_co},FilterGrp1s:{name:g+"FilterGrp1s."+h,value:"0",update:this.update_co},FilterGrp2s:{name:g+"FilterGrp2s."+h,value:"0",update:this.update_co},FilterGrp3s:{name:g+"FilterGrp3s."+
h,value:"0",update:this.update_co},FilterPrios:{name:g+"FilterPrios."+h,value:"0",update:this.update_co},ACKTIDs:{name:g+"ACKTIDs."+h,value:"0",update:this.update_co},ACKItems:{name:g+"ACKItems."+h,value:"0",update:this.update_co},ACKGrp1s:{name:g+"ACKGrp1s."+h,value:"0",update:this.update_co},ACKGrp2s:{name:g+"ACKGrp2s."+h,value:"0",update:this.update_co},ACKGrp3s:{name:g+"ACKGrp3s."+h,value:"0",update:this.update_co},ACKPrios:{name:g+"ACKPrios."+h,value:"0",update:this.update_co},ColorMode:{name:g+
"ColorMode."+h,value:"0",update:this.update_co}};this.generateHistoryAlarmContainerValue=function(){var b,d="",c=parseInt(this.co.Version.value,10);!0===isNaN(c)&&(c=1);if(null===this.rArrayHistory)return"";for(b=0;b<this.rArrayHistory.length;b++)d+=this.rArrayHistory[b].color,d+=a.FVCOLSEPTOKEN2,d+=this.rArrayHistory[b].itemId,d+=a.FVCOLSEPTOKEN2,d+=this.rArrayHistory[b].typeId,d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].TID_HtmlTag),d+=a.FVCOLSEPTOKEN2,22<=c&&a.Link.SrvInfo_ALR2Activ&&
(d+=this.rArrayHistory[b].AlrTxt,d+=a.FVCOLSEPTOKEN2),20<=c&&a.Link.SrvInfo_ALR2Activ&&(d+=this.rArrayHistory[b].Grp1,d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp1_HtmlTag),d+=a.FVCOLSEPTOKEN2,d+=this.rArrayHistory[b].Grp2,d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp2_HtmlTag),d+=a.FVCOLSEPTOKEN2,d+=this.rArrayHistory[b].Grp3,d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp3_HtmlTag),d+=a.FVCOLSEPTOKEN2),
22<=c&&a.Link.SrvInfo_ALR2Activ&&(d+=this.rArrayHistory[b].Grp4,d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp4_HtmlTag),d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp5_HtmlTag),d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp6_HtmlTag),d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp7_HtmlTag),d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp8_HtmlTag),
d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp9_HtmlTag),d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Grp10_HtmlTag),d+=a.FVCOLSEPTOKEN2),20<=c&&a.Link.SrvInfo_ALR2Activ&&(d+=this.rArrayHistory[b].Prio,d+=a.FVCOLSEPTOKEN2,d+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[b].Prio_HtmlTag),d+=a.FVCOLSEPTOKEN2),d=20<=c&&a.Link.SrvInfo_ALR2Activ?d+a.getAlarmDateTimeByIntMSec(this.rArrayHistory[b].on):d+a.getAlarmDateTimeByIntMSec(1E3*
this.rArrayHistory[b].on),d+=a.FVCOLSEPTOKEN2,d=20<=c&&a.Link.SrvInfo_ALR2Activ?d+a.getAlarmDateTimeByIntMSec(this.rArrayHistory[b].off):d+a.getAlarmDateTimeByIntMSec(1E3*this.rArrayHistory[b].off),d+=a.FVCOLSEPTOKEN2,d+=this.rArrayHistory[b].state,d+=a.FVLINESEPTOKEN2;return d};this.addPartialResponseToHistory=function(b,d){var c=b.length,e=parseInt(this.co.Version.value,10);!0===isNaN(e)&&(e=1);if(20<=e&&a.Link.SrvInfo_ALR2Activ){var f=1;2<=c&&(null!==b[0][0]&&!0!==isNaN(parseFloat(b[0][0],10))&&
(f=parseFloat(b[0][0],10)),null!==b[1][1]&&(!0!==isNaN(parseFloat(b[1][1],10))?this.config.actualFilteredSize=parseFloat(b[1][1],10):a.log_append_ln("Alarming addPartialResponseToHistory ERROR in parsing actualFilteredSize : "+b[1][1])))}else f=0;if(0!==f)a.log_append_ln("Alarming addPartialResponseToHistory ERROR: error code not Ok "+f);else for(d.rInt=-1,f=0,20<=e&&a.Link.SrvInfo_ALR2Activ&&(f=2);f<c;f++)if(!0===a.stringcmp(b[f],"Done"))d.rInt=1;else if(!0===a.stringcmp(b[f],"End"))d.rInt=0;else if((2<=
e&&22>e||!a.Link.SrvInfo_ALR2Activ)&&5<=b[f].length&&!0===this.isBACnet()&&!0===a.Link.SrvInfo_ALRActiv&&1.11<=a.Link.SrvInfo_ALRVersion)if("20"===b[f][5]){var g=new a.BACnet_HisLineType(b[f],this.co.AlarmsListNr.value,this.co);d.rArray.push(g);d.rInt=1}else a.log_append_ln("Alarming addPartialResponseToHistory ERROR: EXTRAPARAMSTYPE should be beckhoff one is not for "+b[5]),d.rInt=-1;else if(5<=b[f].length)g=new a.HisLineType(b[f],this.co.AlarmsListNr.value,this.co),d.rArray.push(g),d.rInt=1;else{d.rInt=
-1;break}};this.co.AlarmsListNr.update(!0);0===this.co.AlarmsListNr.value.length&&(this.co.AlarmsListNr.value="ALRLIST0")};a.AlarmDefOnlineType=function(h,g,b){this.base=a.AlarmBase;this.base(h,"@MACROALRDEFON",g,b);this.specific_update=function(a){this.rArrayOverview=null;a=parseInt(this.co.PageNr.value,10);!0===isNaN(a)&&(a=0);var b=this.updateIndices(a,this.config.overViewSize);this.rArrayOverview=this.loadOverviewByIndices(b,a,this.config.overViewSize);this.co.SelAlrsTypesAct.value="0";this.co.SelAlrsTypesAct.update(!1);
this.co.AlarmList.value=this.co.AlarmsListHeaderSP.value+this.generateOverviewAlarmContainerValue();this.co.AlarmList.update(!1);this.co.AlarmsListSize.value=this.config.overViewSize;this.co.AlarmsListSize.update(!1)};this.getMaxPage=function(){var a=0;0<this.config.overViewSize&&0<this.getDisplayedNumRow()&&(a=Math.ceil(this.config.overViewSize/this.getDisplayedNumRow()-1));return a};this.generateOverviewAlarmContainerValue=function(){var b,e=this.rArrayOverview.length,f="";for(b=0;b<e;b++)f+=this.rArrayOverview[b].color,
f+=a.FVCOLSEPTOKEN2,f+=this.rArrayOverview[b].typeId,f+=a.FVCOLSEPTOKEN2,f+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayOverview[b].TID_HtmlTag),f+=a.FVCOLSEPTOKEN2,f+=a.getAlarmDateTimeByIntMSec(1E3*this.rArrayOverview[b].on),f+=a.FVCOLSEPTOKEN2,f+=a.getAlarmDateTimeByIntMSec(1E3*this.rArrayOverview[b].off),f+=a.FVCOLSEPTOKEN2,f+=this.rArrayOverview[b].state,f+=a.FVCOLSEPTOKEN2,f+=this.rArrayOverview[b].counter,f+=a.FVLINESEPTOKEN2;return f};this.addPartialResponseToOverview=function(b,e){var d,
c=b.length;e.rInt=-1;for(d=0;d<c;d++)if(!0===a.stringcmp(b[d],"Done"))e.rInt=0;else if(5===b[d].length){var n=new a.DefLineType(b[d],this.co.AlarmsListNr.value,this.co);e.rArray.push(n);e.rInt=1}else{e.rInt=-1;break}};this.loadOverviewByIndices=function(a,b,f){var c={rArray:[],rInt:0};if(0<=a.start&&0<=a.end){c.rInt=1;a.end+1>=f&&(a.end=f-1);if(0<=b)for(;0<c.rInt&&c.rArray.length<a.end-a.start+1;)b=a.start+c.rArray.length,f=a.end-a.start-c.rArray.length+1<this.config.blockSize?a.end:a.start+c.rArray.length+
this.config.blockSize-1,b=this.loadOverviewAlarmBlock(b,f,c),this.addPartialResponseToOverview(b,c);return c.rArray}};this.loadOverviewAlarmBlock=function(b,e){b=this.loadOverviewCGI(b,e);return a.parseCGI_CSV_Content(b)};this.loadOverviewCGI=function(b,e){return a.loadGeneralCGI("alarm"+a.getSrvExt()+"?list="+this.co.AlarmsListNr.value.toString()+"&action=loadDefOverview&startLine="+b.toString()+"&endLine="+e.toString()+"&sortTON="+this.co.SortMode.value.toString()+"&filterON"+this.co.FilterMode.value.toString())}};
a.AlarmDefOnlineType.prototype=new a.AlarmBase;a.AlarmHisOnlineType=function(h,g,b){var d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);this.base=a.AlarmBase;this.base(h,"@MACROALRHISON",g,b);this.specific_update=function(b){b=parseInt(this.co.Version.value,10);!0===isNaN(b)&&(b=1);var d=parseInt(this.co.PageNr.value,10);!0===isNaN(d)&&(d=0);var c=this.updateIndices(d,this.config.actualHistorySize);this.rArrayHistory=this.loadHistoryByIndices(c,d,this.config.actualHistorySize);this.co.SelAlrsTypesAct.value=
"0";this.co.SelAlrsTypesAct.update(!1);this.co.AlarmList.value=this.co.AlarmsListHeaderSP.value;(2<=b&&22>b||!a.Link.SrvInfo_ALR2Activ)&&!0===this.isBACnet()&&!0===a.Link.SrvInfo_ALRActiv&&1.11<=a.Link.SrvInfo_ALRVersion?this.co.AlarmList.value+=a.BACnet_generateHistoryAlarmContainerValue(this,this.BACnet.TextFlags):this.co.AlarmList.value+=this.generateHistoryAlarmContainerValue();this.co.AlarmList.update(!1);this.co.AlarmsListSize.value=this.config.actualHistorySize;this.co.AlarmsListSize.update(!1)};
this.getMaxPage=function(){var a=0;0<this.config.actualHistorySize&&0<this.getDisplayedNumRow()&&(a=Math.ceil(this.config.actualHistorySize/this.getDisplayedNumRow()-1));return a};this.getMaxFilteredPage=function(){var a=0;0<=this.config.actualFilteredSize&&1<this.getDisplayedNumRow()?(a=Math.ceil(this.config.actualFilteredSize/this.getDisplayedNumRow()-1),0>a&&(a=0)):0<this.config.actualHistorySize&&0<this.getDisplayedNumRow()&&(a=Math.ceil(this.config.actualHistorySize/this.getDisplayedNumRow()-
1));return a};this.loadHistoryByIndices=function(a,b,c){var d=null,e={rArray:[],rInt:0};if(0<=a.start&&0<=a.end){e.rInt=1;a.end+1>=c&&(a.end=c-1);if(0<=b)for(;0<e.rInt&&e.rArray.length<a.end-a.start+1;)b=a.start+e.rArray.length,c=a.end-a.start-e.rArray.length+1<this.config.blockSize?a.end:a.start+e.rArray.length+this.config.blockSize-1,b=this.loadHistoryAlarmBlock(b,c,e),this.addPartialResponseToHistory(b,e);d=e.rArray}return d}};a.AlarmHisOnlineType.prototype=new a.AlarmBase;a.AlarmHisOfflineType=
function(h,g,b){this.base=a.AlarmBase;this.base(h,"@MACROALRHISOFF",g,b);this.loadFullHistory=function(){var a={rArray:[],rInt:1};var b=0;var f=this.config.blockSize<this.config.actualHistorySize?this.config.blockSize-1:this.config.actualHistorySize-1;do{b=this.loadHistoryAlarmBlock(b,f,a);if(0>=b.length)break;this.addPartialResponseToHistory(b,a);b=f+1;f=b+this.config.blockSize-1;f>=this.config.actualHistorySize&&(f=this.config.actualHistorySize-1)}while(0<a.rInt&&a.rArray.length<this.config.actualHistorySize-
1);return a.rArray};this.compareAlarms=function(b,e,f){var c=!1,d=parseInt(this.co.Version.value,10);!0===isNaN(d)&&(d=1);if(0<f)switch(f){case 1:c=b.itemId<e.itemId;break;case 2:c=b.typeId<e.typeId;break;case 3:c=a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.TID_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.TID_HtmlTag));break;case 4:c=20<=d&&a.Link.SrvInfo_ALR2Activ?b.Grp1<e.Grp1:b.on<e.on;break;case 5:c=22<=d&&a.Link.SrvInfo_ALR2Activ?b.Grp1<e.Grp1:20<=d&&a.Link.SrvInfo_ALR2Activ?a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,
b.Grp1_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp1_HtmlTag)):b.off<e.off;break;case 6:c=22<=d&&a.Link.SrvInfo_ALR2Activ?a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp1_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp1_HtmlTag)):20<=d&&a.Link.SrvInfo_ALR2Activ?b.Grp2<e.Grp2:a.str_isLesser(b.state,e.state);break;case 7:22<=d&&a.Link.SrvInfo_ALR2Activ?c=b.Grp2<e.Grp2:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp2_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,
e.Grp2_HtmlTag)));break;case 8:22<=d&&a.Link.SrvInfo_ALR2Activ?c=a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp2_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp2_HtmlTag)):20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.Grp3<e.Grp3);break;case 9:22<=d&&a.Link.SrvInfo_ALR2Activ?c=b.Grp3<e.Grp3:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp3_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp3_HtmlTag)));break;case 10:22<=d&&a.Link.SrvInfo_ALR2Activ?c=a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,
b.Grp3_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp3_HtmlTag)):20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.Prio<e.Prio);break;case 11:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.Prio_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Prio_HtmlTag)));break;case 12:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.on<e.on);break;case 13:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.off<e.off);break;case 14:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isLesser(b.state,e.state));break;case 19:22<=
d&&a.Link.SrvInfo_ALR2Activ&&(c=b.Prio<e.Prio);break;case 20:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isLesser(a.RW_readSource(a.INFO_T_HTMLTAG,b.Prio_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Prio_HtmlTag)));break;case 21:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.on<e.on);break;case 22:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.off<e.off);break;case 23:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isLesser(b.state,e.state))}else switch(f){case -1:c=b.itemId>e.itemId;break;case -2:c=b.typeId>e.typeId;break;
case -3:c=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.TID_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.TID_HtmlTag));break;case -4:c=20<=d&&a.Link.SrvInfo_ALR2Activ?b.Grp1>e.Grp1:b.on>e.on;break;case -5:c=22<=d&&a.Link.SrvInfo_ALR2Activ?b.Grp1>e.Grp1:20<=d&&a.Link.SrvInfo_ALR2Activ?a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp1_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp1_HtmlTag)):b.off>e.off;break;case -6:c=22<=d&&a.Link.SrvInfo_ALR2Activ?a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,
b.Grp1_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp1_HtmlTag)):20<=d&&a.Link.SrvInfo_ALR2Activ?b.Grp2>e.Grp2:a.str_isGreater(b.state,e.state);break;case -7:22<=d&&a.Link.SrvInfo_ALR2Activ?c=b.Grp2>e.Grp2:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp2_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp2_HtmlTag)));break;case -8:22<=d&&a.Link.SrvInfo_ALR2Activ?c=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp2_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,
e.Grp2_HtmlTag)):20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.Grp3>e.Grp3);break;case -9:22<=d&&a.Link.SrvInfo_ALR2Activ?c=b.Grp3>e.Grp3:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp3_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp3_HtmlTag)));break;case -10:22<=d&&a.Link.SrvInfo_ALR2Activ?c=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.Grp3_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Grp3_HtmlTag)):20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.Prio>e.Prio);break;
case -11:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,b.Prio_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Prio_HtmlTag)));break;case -12:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.on>e.on);break;case -13:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.off>e.off);break;case -14:20<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isGreater(b.state,e.state));break;case -19:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.Prio>e.Prio);break;case -20:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isGreater(a.RW_readSource(a.INFO_T_HTMLTAG,
b.Prio_HtmlTag),a.RW_readSource(a.INFO_T_HTMLTAG,e.Prio_HtmlTag)));break;case -21:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.on>e.on);break;case -22:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=b.off>e.off);break;case -23:22<=d&&a.Link.SrvInfo_ALR2Activ&&(c=a.str_isGreater(b.state,e.state))}return c};this.sortHisByNr=function(a){var b=!1;if(null!==this.rArrayHistory&&1<this.rArrayHistory.length)for(var d,c=!0,g,k=this.rArrayHistory.length;!0===c;)for(c=!1,g=0;g+1<k;)d=this.compareAlarms(this.rArrayHistory[g],this.rArrayHistory[g+
1],a),!0===d&&(b=this.rArrayHistory[g],this.rArrayHistory[g]=this.rArrayHistory[g+1],this.rArrayHistory[g+1]=b,c=b=!0),g++;return b};this.specific_update=function(b){var d=parseInt(this.co.PageNr.value,10);isNaN(d);for(d=0;d<b.length;d++)if(!0===a.stringcmp(this.co.LoadAlrsAction.name,b[d].name))!0===a.stringcmp("STARTLOADDATAS",b[d].value)&&(this.rArrayHistory=this.loadFullHistory());else if(!0===a.stringcmp(this.co.SortAlrsColNr.name,b[d].name))2<=a.getDebugLevel()&&a.log_append_ln(b[d].value);
else if(!0===a.stringcmp(this.co.SortAlrsColAction.name,b[d].name)){if(!0===a.stringcmp("SORTHISSOFFALARMS",b[d].value)){var f=parseInt(this.co.SortAlrsColNr.value,10);!1===isNaN(f)&&(this.sortHisByNr(f),this.fileViewer.resetScrollIndex())}}else!0===a.stringcmp(this.co.SaveAlrsAction.name,b[d].name)&&!0===a.stringcmp("SAVEDATASTOFILE",b[d].value)&&this.writeAlarmTxt();this.co.AlarmList.value=this.co.AlarmsListHeaderSP.value+this.generateHistoryAlarmContainerValue();this.co.AlarmList.update(!1);this.co.AlarmsListSize.value=
a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?null!==this.rArrayHistory?this.rArrayHistory.length.toString()+" / "+(this.config.actualHistorySize-1).toString():"0 / "+(this.config.actualHistorySize-1).toString():null!==this.rArrayHistory?this.rArrayHistory.length.toString()+" / "+this.config.actualHistorySize.toString():"0 / "+this.config.actualHistorySize.toString();this.co.AlarmsListSize.update(!1);this.co.SortAlrsColAction.value="0";this.co.SortAlrsColAction.update(!1);this.co.LoadAlrsAction.value=
"0";this.co.LoadAlrsAction.update(!1);this.co.SaveAlrsAction.value="0";this.co.SaveAlrsAction.update(!1)};this.writeAlarmTxt=function(){var b="",e="";var f=new Date(Date.now());switch(!0){case 20==this.co.Version.value:var c="\t";var g="#!-- ALR_VERSION = 2.00\r\nItem ID"+c+"Type ID"+c+"Alarm Descript"+c;var k=4;var h=".tsv";break;case 22==this.co.Version.value:c="\t";g="#!-- ALR_VERSION = 2.01\r\nItem ID"+c+"Type ID"+c+"Alarm Descript"+c;k=10;h=".tsv";break;default:c=";",g="Item ID"+c+"Type ID"+
c+"Description"+c+"Time ON"+c+"Time OFF"+c+"State"+c+"\r\n",k=0,h=".csv"}var m="Alr_"+(f.getFullYear()+"-");m+=("0"+(f.getMonth()+1)).slice(-2)+"-";m+=("0"+f.getDate()).slice(-2)+h;if(0!=a.isDefined(this.rArrayHistory)){for(f=0;f<this.rArrayHistory.length;f++){a.isDefined(this.rArrayHistory[f].itemId)&&(e=this.rArrayHistory[f].itemId.toString()+c);a.isDefined(this.rArrayHistory[f].typeId)&&(e+=this.rArrayHistory[f].typeId.toString()+c,e+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[f].TID_HtmlTag).replace(/\r?\n|\r/g,
"")+c);for(h=1;h<=k;h++){var p="Grp"+h;var r=p+"_HtmlTag";4>=h?a.isDefined(this.rArrayHistory[f][p])&&(e+=this.rArrayHistory[f][p].toString()+c,e+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[f][r]).replace(/\r?\n|\r/g,"")+c,0==f&&(g+=p+c+p+" Descript"+c)):a.isDefined(this.rArrayHistory[f][r])&&(e+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[f][r]).replace(/\r?\n|\r/g,"")+c,0==f&&(g+=p+" Descript"+c))}0==f&&20<=this.co.Version.value&&(g+="Prio"+c+"Prio Descript"+c+"Time ON"+c+"Time OFF"+
c+"Alarm State\r\n");20<=this.co.Version.value&&a.isDefined(this.rArrayHistory[f].Prio)&&(e+=this.rArrayHistory[f].Prio.toString()+c,e+=a.RW_readSource(a.INFO_T_HTMLTAG,this.rArrayHistory[f].Prio_HtmlTag).replace(/\r?\n|\r/g,"")+c);a.isDefined(this.rArrayHistory[f].on)&&0<this.rArrayHistory[f].on?(h=20>this.co.Version.value?new Date(parseInt(1E3*this.rArrayHistory[f].on)):new Date(parseInt(this.rArrayHistory[f].on)),e+=("0"+h.getDate()).slice(-2)+".",e+=("0"+(h.getMonth()+1)).slice(-2)+".",e+=h.getFullYear()+
" ",e+=h.toLocaleTimeString("de-DE")+c):e+="--"+c;a.isDefined(this.rArrayHistory[f].off)&&0<this.rArrayHistory[f].off?(h=20>this.co.Version.value?new Date(parseInt(1E3*this.rArrayHistory[f].off)):new Date(parseInt(this.rArrayHistory[f].off)),e+=("0"+h.getDate()).slice(-2)+".",e+=("0"+(h.getMonth()+1)).slice(-2)+".",e+=h.getFullYear()+" ",e+=h.toLocaleTimeString("de-DE")+c):e+="--"+c;e+=this.rArrayHistory[f].state.toString()+"\r\n";b+=e}a.saveDataInFile(m,g+b,!0)}}};a.AlarmHisOfflineType.prototype=
new a.AlarmBase;return a}(_SCIntern||{});_SCIntern=function(a){function h(){var a=0;$("#SC_HTMLControlDropDown option:selected").each(function(){a=$(this).val()});return a}function g(){var a=0;$("#SC_HTMLControlDropDown option:selected").each(function(){a=$(this).text()});return a}a.PainterType_DropDown=function(b){function d(){var b;$(a.g_HTMLControlDropDownElmnt).empty();f.editSource_getValue_parseInt_DropDown();for(b=0;b<f.table.length;b++)if(0!==f.table[b].length){var c=$('<option value="'+b+'">'+f.table[b]+"</option>");c.appendTo(a.g_HTMLControlDropDownElmnt)}c=
f.numRows>a.DDL_MAX_LN?a.DDL_MAX_LN:f.numRows;1==c&&(c=2);b=c;c>a.DropDownMaxSize&&(b=a.DropDownMaxSize);$(a.g_HTMLControlDropDownElmnt).attr("size",b);this.selectHeight=$(a.g_HTMLControlDropDownElmnt).css("height")}function e(b,c){var d=f.getFontSize(),e=f.editSource_getValue_TextField();3<=a.getDebugLevel()&&(a.log_append_ln("hmi-dropdown editSource_getFontSize(): "+d),a.log_append_ln("hmi-dropdown editSource_getValue(): "+e));var g=0,n=0;a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&
a.isDefined(a.g_MouseEventInfo.ViewItem.ClickableDiv)&&a.isDefined(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle)&&(n=a.getLeftPos(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle),g=a.getTopPos(a.g_MouseEventInfo.ViewItem.ClickableDiv.handle));var k=a.getScreenCrds(f.x,f.y,f.w,f.h);if(null!=k){g=k.h+k.y+g+"px";n=k.x+n+"px";var h=k.w+"px";d*=k.scaleFactor;$(a.g_HTMLControlDropDownElmnt).css("position","absolute").css("top",g).css("left",n).css("width",h).css("background-color",b).css("color",c).css("font-size",
d+"px").css("font-family",f.getFontName()).css("font-style",f.getSvgFontStyle()).css("font-weight",f.getSvgFontWeight()).css("display","none").val(e);this.selectHeight=$(a.g_HTMLControlDropDownElmnt).css("height");this.screenHeight=$(window).height();b=this.screenHeight-parseInt(this.selectHeight)-parseInt(g);0>b&&(g=parseInt(g)-parseInt(k.h)-parseInt(this.selectHeight)+"px");$(a.g_HTMLControlDropDownElmnt).css("top",g).css("display","block")}}this.base=a.PainterType_MPainter;this.base(b);var f=this;
this.table=null;this.listInfoType=function(){this.srcType=0;this.srcPrevValue=this.srcValue=this.srcName=""};this.listInfoArray=[];this.prevListNamesText=this.prevListText="";this.lastListFilesloadIndex=-1;this.editModeActionFlag=!1;this.frmElmntOut=this.frmElmntInt=this.initDDLFunc=null;this.numRows=0;this.arrowSvg=null;var c=this.screenHeight=this.selectHeight=0;this.getTotalNrOfRows=function(){return this.numRows};a.DropDownMaxSize=15;this.activateEditMode=function(){a.registerModalPainter(this);
if(a.isDefined(this.listInfoArray[0])&&this.listInfoArray[0].srcName){var b;f.table=f.getListTable();for(b=c=0;b<f.table.length;b++)0===f.table[b].length&&c++;f.numRows=f.table.length-c;d();e(a.adjustColorStr(this.getInteriorColor()),a.adjustColorStr(this.getOutlineColor()));this.editModeFlag=!0}};this.leaveEditMode=function(b){a.removeModalPainter();!0===this.editModeFlag&&($(a.g_HTMLControlDropDownElmnt).css("display","none").css("top","0px").css("left","0px"),this.editModeFlag=!1)};this.execDropDownAction=
function(b,c,d,e,f){if(void 0!==b)if(!1===this.editModeFlag)switch(b){case 8:this.activateEditMode(),2<=a.getDebugLevel()&&a.log_append_ln("hmi-dropdown this.editModeFlag")}else if(!0===this.editModeActionFlag&&!0===this.editModeFlag)switch(b){case 6:a.RW_writeSource(e,f,h());break;case 7:a.RW_writeSource(e,f,g())}};this.execScrollerAction=function(a,b,c,d,e){};this.execDDLAct=function(b,c,d,e,f){void 0===this.execDDLAct.onlyonce&&(a.SL_refreshPPO(),this.execDDLAct.onlyonce=!1);this.execDropDownAction(b,
c,d,e,f)};this.addDDLInfo=function(a,b){var c=new this.listInfoType;c.srcType=a;c.srcName=b;this.listInfoArray.push(c);this.checkIfListChanged()};this.checkIfListChanged=function(){var b="",c=1;var d=this.getReloadFilePeriode();null==d||null==d.value||isNaN(d.value)||(c=d.value);for(d=0;d<this.listInfoArray.length;d++)0!==d&&(b+="\n"),b+=this.listInfoArray[d].srcName;b!==this.prevListNamesText&&(this.prevListNamesText=b,this.lastListFilesloadIndex=-1);b="";var e=1;for(d=0;d<this.listInfoArray.length;d++){0>
c?0<=this.lastListFilesloadIndex&&(e=0):1<c&&0!==a.SpecialCO.autoincr.value%c&&(e=0);0!==d&&(b+="\n");if(this.listInfoArray[d].srcType!==a.INFO_T_FILE||1===e)this.listInfoArray[d].srcValue=a.RW_readSource(this.listInfoArray[d].srcType,this.listInfoArray[d].srcName);b+=this.listInfoArray[d].srcValue}1===e&&(this.lastListFilesloadIndex=a.SpecialCO.autoincr.value);b!==this.prevListText&&(this.prevListText=b,this.scheduleFullRedrawPainter())};this.getTableRow=function(a){var b="";0<this.table.length&&
(b=this.table[a]);void 0===b&&(b="");return b};this.getListTable=function(){var b="",c;for(c=0;c<this.listInfoArray.length;c++)0!==c&&(b+="\n"),b+=this.listInfoArray[c].srcValue;return a.parseSourceRowAsArray(b)};this.getItemByIndex=function(a){this.table=this.getListTable();return this.getTableRow(a)};this.getIndex=function(b,c){b=a.RW_readSource(b,c);return b=parseInt(b,10)};this.getItemBySource=function(a,b){var c="";a=this.getIndex(a,b);!1===isNaN(a)&&(c=this.getItemByIndex(a));return c};this.updateImage=
a.updateImage;this.hideImages=a.hideImages;this.clearText=a.clearText;this.drawSourceText=a.drawSourceText;this.updateDropDownArrowSourceElement=function(b){var c=this.getOutlineWidth();a.setSvgAttrC(b.e,"x",this.x+this.w-this.h+c);a.setSvgAttrC(b.e,"y",this.y+c);a.setSvgAttrC(b.e,"width",this.h-2*c);a.setSvgAttrC(b.e,"height",this.h-2*c);b.type===a.INFO_T_FILE&&this.updateImage(b,null)};this.updateDropDownIndexSourceElement=function(b){var c=this.getOutlineWidth();!0===this.getU3d()&&(c+=1);a.setSvgAttrC(b.e,
"x",this.x+c);a.setSvgAttrC(b.e,"y",this.y+c+2);var d=this.w-2*c,e=f.h;0>e&&(e=0);txtWidth=d-e;a.setSvgAttrC(b.e,"width",txtWidth);a.setSvgAttrC(b.e,"height",this.h-2*c);this.clearText(b);b.value=this.getItemByIndex(this.getIndex(b.type,b.name));this.drawSourceText(b)};this.drawRectShapeInterior=function(){var b=this.getOutlineWidth(),c=0,d=this.getRepaintElement(this.frmOuterGroup),e=this.getRepaintElement(this.frmInnerGroup);this.getRepaintElement(this.olnGroup);for(!0===this.checkIfInterior()&&
(c=1);null!=d&&d.hasChildNodes();)d.removeChild(d.firstChild);for(;e&&e.hasChildNodes();)e.removeChild(e.firstChild);var f=a.isDefined(f=this.getInteriorColorPressed())?f:this.getInteriorColor();c=a.adjustColorStr(f,c.toString());f=a.adjustColorStr(this.getOutlineColor(),(0).toString());a.createEzSVGRect(this.svgDoc,e,this.x,this.y,this.w,this.h,c,f,b,this.getInnerFill(),null,this.checkPaintAsRoundedRect(),!1,d)};this.drawRectShapeOutline=function(){var b="";var c=this.getOutlineWidth(),d=this.getRepaintElement(this.frmOuterGroup),
e=this.getRepaintElement(this.olnGroup);d=d.parentNode.parentNode;var f=!0===this.checkIfOutline()?1:0;a.isDefined(e)||(d.appendChild(e=a.createSVGElement(this.svgDoc,"g")),e.setAttributeNS(null,"id",this.olnGroup));for(;null!=e&&e.hasChildNodes();)e.removeChild(e.firstChild);b=a.isDefined(b=this.getInteriorColorPressed())?b:this.getInteriorColor();b=a.adjustColorStr(b,(0).toString());f=a.adjustColorStr(this.getOutlineColor(),f.toString());a.createEzSVGRect(this.svgDoc,e,this.x,this.y,this.w,this.h,
b,f,c,this.getInnerFill(),this.getOutlineStyle(),this.checkPaintAsRoundedRect(),!0,null,d)};this.typeDraw=function(){var b=0;if(!0===this.isFullPainterRedrawRequired()){var c=this.getPaintSource();var d=this.getEditSource();this.drawRectShapeInterior();null!==this.frm3dElmnt&&(a.removeSVG(this.frm3dElmnt),this.frm3dElmnt=null);!0===this.getU3d()&&(b=this.getOutlineWidth(),this.frm3dElmnt=a.createSVGRect_3dFrame_TextField(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,
b));this.drawRectShapeOutline();null!==c.name?this.updateDropDownArrowSourceElement(c):(this.hideImages(c),this.clearText(c));null!==this.arrowSvg&&(a.removeSVG(this.arrowSvg),this.arrowSvg=null);this.arrowSvg=a.createInnerSVG(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x+(this.w-this.h)+b,this.y+this.getOutlineWidth()+b,this.h-3*b-2,this.h-3*b-2);if("Microsoft Internet Explorer"===a.GetBrowserInfos().name||null===c.type)a.setSVGAttr(this.arrowSvg,"viewBox","0 0 40 40"),a.createSVGRect(this.svgDoc,
this.arrowSvg,0,0,40,40,"#C0C0C0","",0,!1),this.arrowSymbol=a.createSVGPolygon(this.svgDoc,this.arrowSvg,[30,20,10],[15,28,15],"#1D1D1B",0,"#1D1D1B"),a.setSVGAttr(this.arrowSymbol,"stroke-miterlimit","10"),a.setSVGAttr(this.arrowSymbol,"shape-rendering","geometricPrecision"),a.setSVGAttr(this.arrowSymbol,"stroke-linecap","butt");null!==d.name&&this.updateDropDownIndexSourceElement(d)}};this.notify=function(b,c){var d=0;if(!0===this.editModeFlag&&b!==a.CHANGE_DDL_VALUE&&b!==a.DRAW_OBJECT&&b!==a.MOUSE_UP)this.leaveEditMode(!1),
d=1;else switch(b){case a.VIEW_GAIN_FOCUS:this.initDDLFunc&&this.initDDLFunc();if(!1===this.instanceDisabled()&&!0===this.isVisible&&this.onGainActionFunc)this.onGainActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.checkIfListChanged();this.genericDraw();break;case a.MOUSE_DOWN:!0===a.OB_checkMouseCoordinates(this,c)?!1===this.instanceDisabled()?!0===this.isVisible&&(this.executeActionMouseDown(),c.consumedFlag=!0,c.consumedPainter=this,c.actionExecutedFlag=!0,d=1):
d=0:d=0;break;case a.MOUSE_UP:!0===c.consumedFlag&&(!0===a.OB_checkMouseCoordinates(this,a.g_MouseEventInfo)?(this.isPressed=!1,!1===this.instanceDisabled()&&!0===this.isVisible&&this.executeActionMouseUp&&this.executeActionMouseUp(),this.isPressed=!1):(2<=a.getDebugLevel()&&a.log_append_ln("hmi-dropdown Undo case"),this.scheduleFullRedrawPainter()));break;case a.REMOVE_SELECTION:case a.VIEW_LOST_FOCUS:this.editModeFlag&&(this.leaveEditMode(!1),d=1);break;case a.CHANGE_DDL_VALUE:this.editModeActionFlag=
!0,this.executeActionMouseDown(),this.leaveEditMode(!0),this.editModeActionFlag=!1,d=1}return d};b.initDDL&&(this.initDDLFunc=b.initDDL)};a.PainterType_DropDown.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function h(){this.x=0;this.v=!1;this.index=this.p=this.w=0;this.clipId=""}a.DEFAULT_SCROLLER_WIDTH=20;a.DEFAULT_SCROLLER_WIDTH_TOUCH=50;a.FVCOMMENTLINESTARTSTR="#!";a.FVLINESPECLINESTARTSTR="#sp;";a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR="#sfc;";a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR="#sbc;";a.FVCOLUMNCOLORSPECENDSTR="#";a.FVCOLUMNCOLORSPECRGBTOKENSEPSTR=",";a.FVLINESEPTOKEN="\u00a2";a.FVLINESEPTOKEN2="\\n";a.FVLINESEPTOKENCHAR="\u00a2";a.FVCOLSEPTOKEN="\u00a7";a.FVCOLSEPTOKEN2=
"\\t";a.FVCOLSEPTOKENCHAR="\u00a7";a.FVINDEXESSEPTOKEN="+";a.FVINDEXESSEPCHAR="+";a.FVMUTLILINESTRSEPTOKEN="\\l";a.PainterType_FileViewer=function(g){function b(b,c,d,e,f,g,n,k,m){b=b.createElementNS(a.SvgNs,"polygon");b.setAttributeNS(null,"points",d+","+e+" "+f+","+g+" "+n+","+k);b.setAttributeNS(null,"fill",m);return c.appendChild(b)}function d(a,c,d,e){var f="rgb(0, 0, 0)";!0===d?(I+1>p.getTotalNrOfRows()-2&&(f="rgb(162, 162, 162)"),b(a,c,e,e+p.h-C,C-e,e+p.h-C,C/2,p.h-e,f)):(0>I-1&&(f="rgb(162, 162, 162)"),
b(a,c,e,C-e,C-e,C-e,C/2,e,f))}function e(){var b=document.createElementNS(a.SvgNs,"svg");null!==b&&(a.setSvgAttrC(b,"x",p.x+p.w-C),a.setSvgAttrC(b,"y",p.y),a.setSvgAttrC(b,"width",C),a.setSvgAttrC(b,"height",p.h),0>C&&(C=0),0>p.h&&a.log_append_ln("that.h < 0"),b.setAttributeNS(null,"viewBox","0 0 "+C+" "+p.h),b.setAttributeNS(null,"version","1.1"),a.createSVGRect(document,b,0,0,C,p.h,"rgb(255,255,255)","rgb(0,0,0)",1),a.createSVGRect(document,b,0,0,C,C,"rgb(192,192,192)","rgb(0,0,0)",1),a.createSVGRect(document,
b,0,p.h-C,C,C,"rgb(192,192,192)","rgb(0,0,0)",1),d(document,b,!1,4),d(document,b,!0,4),p.getMainGroupElement().appendChild(b));return b}function f(b){var c=null;b=b.substring(5);null!==b&&(c=b.split(","),2<c.length&&(c[2]=c[2].substr(0,c[2].length-1)),0<c.length&&!0===isNaN(c[0])&&(c[0]=0,a.log_append_ln("invalid #sbc;/#scf color syntax (column 1)")),1<c.length&&!0===isNaN(c[1])&&(c[1]=0,a.log_append_ln("invalid #sbc;/#scf color syntax (column 2)")),0<c.length&&!0===isNaN(c[0])&&(c[2]=0,a.log_append_ln("invalid #sbc;/#scf color syntax (column 3)")));
return c}function c(){var a,b,c=p.w-p.getScrollerWidth();for(a=0;a<E.length;a++){lastIndex=0;var d=100;for(b=0;b<E.length;b++)b!==a&&E[a].p<=E[b].p&&E[b].p<d&&(d=E[b].p,lastIndex=b);E[a].w=(d-E[a].p)*c/100}}function n(){var a=1;null!==p.drawCellTxtOnXLinesSource&&null!==p.drawCellTxtOnXLinesSource.value&&(a=parseInt(p.drawCellTxtOnXLinesSource.value,10));1>a&&(a=1);return a}function k(a){var b=!1,c=n(),d=I*c;isNaN(c)||(c=parseInt(c,10));if(!0===H){if(0!==A.length)for(c=0;c<A.length&&!1===b;c++)A[c]===
a&&(b=!0)}else-1==c&&z===a&&-1!=z?b=!0:0<c&&z>=a*c+d&&z<=a*c+(c-1)+d&&-1!=z&&(b=!0);return b}function w(){var b=document.createElementNS(a.SvgNs,"svg"),c;if(null!==b){var d=p.w-(p.getScrollerWidth()+2*p.getOutlineWidth());var e=p.h-2*p.getOutlineWidth();0>d&&(d=0);0>e&&(e=0);d="0 0 "+d+" "+e;a.setSvgAttrC(b,"x",p.x+p.getOutlineWidth());a.setSvgAttrC(b,"y",p.y+p.getOutlineWidth());a.setSvgAttrC(b,"width",p.w-(p.getScrollerWidth()+2*p.getOutlineWidth()));a.setSvgAttrC(b,"height",p.h-2*p.getOutlineWidth());
b.setAttributeNS(null,"viewBox",d);b.setAttributeNS(null,"version","1.1");null==(c=p.getMainGroupElement())?console.log("createFileViewerSVG() group element is null"):c.appendChild(b)}return b}function m(){return p.getFontSize()+3}this.base=a.PainterType_MPainter;this.base(g);var p=this;this.alarmObj=null;this.useVScrollerT=this.useVScrollerM=!1;this.lastListFilesloadIndex=-1;this.lastListFilesloadContent="";var r=null,q=null,y=null,t=null,u=0,v=0,z=-1,x=-1,A=[],C=0,I=0,H=!1,T="",F=a.parseContentsAsMultiArray,
W=!1,M=!1,Q=0,E=[];this.drawCellTxtOnXLinesSource.value=null==this.drawCellTxtOnXLinesSource.value?0:this.drawCellTxtOnXLinesSource.value;this.setGridRow=function(a){W=a};this.setGridCol=function(a){M=a};this.typeDraw=function(){var a=this.getEditSource();null!==a&&(this.drawRectShapeInterior(),this.showFile(a.type,a.name),this.drawRectShapeOutline())};this.drawRectShapeInterior=function(){var b=this.getOutlineWidth(),c=0,d=this.getRepaintElement(this.frmOuterGroup),e=this.getRepaintElement(this.frmInnerGroup);
this.getRepaintElement(this.olnGroup);for(!0===this.checkIfInterior()&&(c=1);null!=d&&d.hasChildNodes();)d.removeChild(d.firstChild);for(;e&&e.hasChildNodes();)e.removeChild(e.firstChild);var f=a.isDefined(f=this.getInteriorColorPressed())?f:this.getInteriorColor();c=a.adjustColorStr(f,c.toString());f=a.adjustColorStr(this.getOutlineColor(),(0).toString());a.createEzSVGRect(this.svgDoc,e,this.x,this.y,this.w,this.h,c,f,b,this.getInnerFill(),null,this.checkPaintAsRoundedRect(),!1,d)};this.drawRectShapeOutline=
function(){var b="";var c=this.getOutlineWidth();var d=this.getRepaintElement(this.frmOuterGroup);var e=this.getRepaintElement(this.olnGroup),f=d.parentNode.parentNode;d=!0===this.checkIfOutline()?1:0;a.isDefined(e)||(f.appendChild(e=a.createSVGElement(this.svgDoc,"g")),e.setAttributeNS(null,"id",this.olnGroup));for(;null!=e&&e.hasChildNodes();)e.removeChild(e.firstChild);b=a.isDefined(b=this.getInteriorColorPressed())?b:this.getInteriorColor();b=a.adjustColorStr(b,(0).toString());d=a.adjustColorStr(this.getOutlineColor(),
d.toString());a.createEzSVGRect(this.svgDoc,e,this.x,this.y,this.w,this.h,b,d,c,this.getInnerFill(),this.getOutlineStyle(),this.checkPaintAsRoundedRect(),!0,null)};this.notify=function(b,c){var d=0;switch(b){case a.DRAW_OBJECT:!1===this.editModeFlag&&(this.instanceDraw&&this.instanceDraw(),this.genericDraw());break;case a.MOUSE_DOWN:!0===this.editModeFlag?(!1===a.OB_checkMouseCoordinates(this,c)&&this.leaveEditMode(!0),d=1):(!0===a.OB_checkMouseCoordinates(this,c)&&!1===this.instanceDisabled()&&(b=
this.instanceValidDownAction(),d=this.instanceValidUpAction(),!0===b||!0===d)&&(c.consumedFlag=!0,c.consumedPainter=this,!0===b&&(a.isDefined(a.g_MouseEventInfo)&&a.g_MouseEventInfo.x>=this.x+(this.w-this.getScrollerWidth())?this.execScrollerAction():this.executeActionMouseDown&&this.executeActionMouseDown(),c.actionExecutedFlag=!0)),d=0);break;case a.MOUSE_UP:!0===c.consumedFlag&&(!0===a.OB_checkMouseCoordinates(this,a.g_MouseEventInfo)?!1===this.instanceDisabled()?a.isDefined(a.g_MouseEventInfo)&&
a.g_MouseEventInfo.x<this.x+(this.w-this.getScrollerWidth())&&this.executeActionMouseUp&&this.executeActionMouseUp():2<=a.getDebugLevel()&&a.log_append_ln("hmi-fileviewer Disabled while down case"):2<=a.getDebugLevel()&&a.log_append_ln("hmi-fileviewer Undo case"),this.scheduleFullRedrawPainter());break;case a.ENTER:d=0;break;case a.ESCAPE:this.editModeFlag&&(this.leaveEditMode(!1),d=1);break;case a.REMOVE_SELECTION:this.editModeFlag&&(this.leaveEditMode(!0),d=1)}return d};this.resetScrollIndex=function(){I=
0};this.execScrollerAction=function(){this.scheduleFullRedrawPainter();if(a.isDefined(a.g_MouseEventInfo)){if(a.g_MouseEventInfo.y-this.y>this.h/2){var b=I;b++;b>p.getTotalNrOfRows()-2&&(b=p.getTotalNrOfRows()-2)}else b=I,b--,0>b&&(b=0);I=b}};this.getTableCell=function(a,b){return t[a][b]};this.showFile=function(b,d){var g=1,x=1,A=this.getReloadFilePeriode();if(void 0!==b&&void 0!==d&&null!==b&&null!==d&&(null==A||null==A.value||isNaN(A.value)||(x=A.value),0>x?0<=this.lastListFilesloadIndex&&(g=0):
1<x&&0!==a.SpecialCO.autoincr.value%x&&(g=0),b===a.INFO_T_CONTAINER&&!0===a.prefixicmp("@MACROALRDEFONAlarmsList.",d)?(null===p.alarmObj&&(x=d.substring(25),p.alarmObj=new a.AlarmDefOnlineType(x,p.getNrOfRowDisplayed(),p)),p.alarmObj.update()):b===a.INFO_T_CONTAINER&&!0===a.prefixicmp("@MACROALRHISONAlarmsList.",d)?(null===p.alarmObj&&(x=d.substring(25),p.alarmObj=new a.AlarmHisOnlineType(x,p.getNrOfRowDisplayed(),p)),p.alarmObj.update()):b===a.INFO_T_CONTAINER&&!0===a.prefixicmp("@MACROALRHISOFFAlarmsList.",
d)&&(null===p.alarmObj&&(x=d.substring(26),p.alarmObj=new a.AlarmHisOfflineType(x,p.getNrOfRowDisplayed(),p)),p.alarmObj.update()),b!==a.INFO_T_FILE||1===g?(d=a.RW_readSource(b,d),b===a.INFO_T_FILE&&(this.lastListFilesloadContent=d,this.lastListFilesloadIndex=a.SpecialCO.autoincr.value)):d=this.lastListFilesloadContent,this.isFullPainterRedrawRequired()||d!=T))if(T=d,0<d.length){if(null!==r&&r.parentNode.removeChild(r),null!==q&&q.parentNode.removeChild(q),r=w(),null!==r){b={hasColLayout:!1,containsColumns:!1,
autowrap:!1,height:0,width:0,fontFamily:"Arial",fontSize:10,innerSVGElmnt:null,svgFontStyle:null,svgFontWeight:null};b.width=p.w-(p.getScrollerWidth()+2*p.getOutlineWidth());b.height=p.h-2*p.getOutlineWidth();b.fontSize=p.getFontSize();b.fontFamily=p.getFontName();b.innerSVGElmnt=r;b.autowrap=p.getIsAutoAjust();b.svgFontStyle=p.getSvgFontStyle();b.svgFontWeight=p.getSvgFontWeight();t=F(d,b);u=t.length;E=[];if(void 0!==t[0]){if(!0===b.hasColLayout){v=t[0].length;for(d=0;d<v;d++)x=parseInt(t[0][d],
10),!1===isNaN(x)&&(g=new h,g.x=x/100*(p.w-p.getScrollerWidth()),g.x=parseInt(g.x.toFixed(0),10),g.p=x,g.index=d,g.clipId="sc_obj_"+p.objId+"_clip_"+g.index,E.push(g));c();Q=1}else Q=0;if(!1===b.hasColLayout&&!0===b.containsColumns&&0<b.maxCol){v=b.maxCol;g=1;x=0;A=p.w-p.getScrollerWidth();var H=parseInt(A,10);0!=v&&(g=parseInt(100/v,10),H=parseInt(A/v,10));for(b=0;b<v;b++)d=new h,d.x=x/100*A,d.x=parseInt(d.x.toFixed(0),10),d.p=x,d.w=H,d.index=b,d.clipId="sc_obj_"+p.objId+"_clip_"+d.index,E.push(d),
x+=g;c()}if(0<v)for(b=0;b<v;b++)a.createClipRect(document,r,E[b].x,0,E[b].w,p.h,E[b].clipId);b=p.getTotalNrOfRows()-(Q+I);b>p.getNrOfRowDisplayed()&&(b=p.getNrOfRowDisplayed());g=Q+I;H=0;for(d=g;d-g<b;d++,H++)b:{x=d;A=E;var z=null,G="",J=n();if(void 0!==t[x]&&void 0!==t[x][0]){var O=t[x][0];var P=null;!0===a.prefixicmp(a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR,O)&&(P=f(O));if(void 0!==t[x][0]){O=t[x][0];var L=null;!0===a.prefixicmp(a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR,O)&&(L=f(O));O=L;if(!0===k(H))P=
"255,255,255",2<a.getDebugLevel()&&a.log_append_ln("hmi-fileviewer isSelected: "+H);else{L=null!==P&&3===P.length?"rgb("+P[0]+","+P[1]+","+P[2]+")":a.adjustColorStr(p.getInteriorColor());if(null!==P&&3===P.length){P=H;var K=document.createElementNS(a.SvgNs,"rect"),U=n();K.setAttributeNS(null,"x",0);K.setAttributeNS(null,"y",U*m()*P);K.setAttributeNS(null,"height",U*m());K.setAttributeNS(null,"width",p.w-C);K.setAttributeNS(null,"fill",L);r.appendChild(K)}P=null!==O&&3===O.length?String(O[0])+","+
O[1]+","+O[2]:p.getTextColor()}if(0===v)z=a.createSVGTextExt(document,r,3,m()*(H+1)-3,a.adjustColorStr(P),"start",p.getFontName(),p.getFontSize(),t[x],p.getSvgFontStyle(),p.getSvgFontWeight()),100>aClmnArray[aColumn].p&&null!==z&&z.setAttribute("clip-path","url(#"+aClmnArray[aColumn].clipId+")");else for(O=0;O<v;O++){L=O;K=A;U=H*J;var N=k(H),R,S="";if(!(0>=K[L].w)){var ea=Math.floor(K[L].w-2*p.getOutlineWidth()),V=0;1==N&&0<K[L].w&&(N=document.createElementNS(a.SvgNs,"rect"),N.setAttributeNS(null,
"x",K[L].x),N.setAttributeNS(null,"y",m()*U),N.setAttributeNS(null,"height",J*m()),N.setAttributeNS(null,"width",Math.floor(K[L].w)),N.setAttributeNS(null,"fill","rgb(0,0,0)"),r.appendChild(N));if("undefined"===typeof(G=t[x][L])||void 0==G||null==G)G="";N=1<J?G.split(" "):G.split("");for(R=0;R<N.length;R++)if(0===R)S=N[R],z=a.createSVGTextExt(document,r,K[L].x+3,m()*(U+1)-3,a.adjustColorStr(P),"start",p.getFontName(),p.getFontSize(),S,p.getSvgFontStyle(),p.getSvgFontWeight()),100>K[L].p&&null!==z&&
z.setAttribute("clip-path","url(#"+K[L].clipId+")"),V++;else if(z.textContent=1<J?S+" "+N[R]:S+N[R],z.getComputedTextLength()<ea)S=1<J?S+(" "+N[R]):S+N[R];else if(z.textContent=S,V<J)S=N[R],U++,z=a.createSVGTextExt(document,r,K[L].x+3,m()*(U+1)-3,a.adjustColorStr(P),"start",p.getFontName(),p.getFontSize(),S,p.getSvgFontStyle(),p.getSvgFontWeight()),100>K[L].p&&null!==z&&z.setAttribute("clip-path","url(#"+K[L].clipId+")"),V++;else break;if(0<J&&V<J)for(S="",R=V;R<J;R++)U++,z=a.createSVGTextExt(document,
r,K[L].x+3,m()*(U+1)-3,a.adjustColorStr(P),"start",p.getFontName(),p.getFontSize(),S,p.getSvgFontStyle(),p.getSvgFontWeight()),100>K[L].p&&null!==z&&z.setAttribute("clip-path","url(#"+K[L].clipId+")")}}break b}}H=void 0}u=t.length;g=n();y=document.createElementNS(a.SvgNs,"g");if(null!==y){r.appendChild(y);if(1<p.getNrOfRowDisplayed()&&!0===W)for(b=0;b<p.getNrOfRowDisplayed();b++)d=a.createSVGSimpleRect(document,0,g*b*m(),p.w-C,1,a.adjustColorStr(p.getOutlineColor())),y.appendChild(d);if(1<p.geNrOfColumns()&&
!0===M&&1<p.getTotalNrOfRows())for(b=0;b<p.geNrOfColumns();b++)d=a.createSVGSimpleRect(document,E[b].x,0,1,p.h,a.adjustColorStr(p.getOutlineColor())),y.appendChild(d)}}if(this.useVScrollerM||this.useVScrollerT)q=e()}}else null!==r&&r.parentNode.removeChild(r),null!==q&&q.parentNode.removeChild(q),r=w(),null!==r&&(this.useVScrollerM||this.useVScrollerT)&&(q=e())};this.execFVAct=function(b,c,d,e,f){if(a.isDefined(a.g_MouseEventInfo)){var g=null,k=n(),h="";a.isDefined(d)&&""!=d&&(g=a.RW_readSource(c,
d),g=parseInt(g,10));var q=a.g_MouseEventInfo.y-p.y,r=m();c=p.getTotalNrOfRows();d=n();-1==d?(q+=I*r,0!=r?(q=q/r-q/r%1,q>c&&(q=-1)):q=-1):0!=r?(q=q/r-q/r%1+I*d,q>c*d&&(q=-1)):q=-1;c=q;p.changeSelection(c);b:{d=a.g_MouseEventInfo.x-p.x;if(!(0>=E.length))for(q=0;q<=E.length;q++)if(!(0>=E[q].w)&&d>E[q].x&&d<E[q].x+E[q].w){x=q;break b}x=-1}1==Q&&(c+=1);if(void 0!==b){switch(b){case 6:-1==k?a.RW_writeSource(e,f,z):a.RW_writeSource(e,f,Math.floor(z/k));break;case 7:if(-1==k)null!==t&&c<t.length&&void 0!==
t[c]&&void 0!==t[c][0]&&a.RW_writeSource(e,f,t[c][0]);else if(b=Math.floor(c/k),null!==t&&b<t.length&&void 0!==t[b]&&(k=t[b].length,0<k)){h=t[b][0];for(g=1;g<k;g++)h+=" "+t[b][g];a.RW_writeSource(e,f,h)}break;case 10:null==g?-1==k?null!==t&&c<t.length&&void 0!==t[c]&&void 0!==t[c][0]&&a.RW_writeSource(e,f,t[c][x]):(b=Math.floor(c/k),null!==t&&b<t.length&&void 0!==t[b]&&x<t[b].length&&void 0!==(h=t[b][x])&&a.RW_writeSource(e,f,h)):-1==k?null!==t&&c<t.length&&void 0!==t[c]&&void 0!==t[c][0]&&a.RW_writeSource(e,
f,t[c][g]):(b=Math.floor(c/k),null!==t&&b<t.length&&void 0!==t[b]&&g<t[b].length&&void 0!==(h=t[b][g])&&a.RW_writeSource(e,f,h))}p.scheduleFullRedrawPainter()}}};this.changeSelection=function(a){!0===H?A.push(a):z=a;this.scheduleFullRedrawPainter()};this.removeSelection=function(a){A=[];z=-1};this.checkIfMultiSelect=function(){return H};this.getSelectedRow=function(){var a=z;!0===H&&(a=A);return a};this.setSelectMode=function(a){a!=H&&(z=-1,A=[]);H=!0===a?!0:!1};this.getNrOfRowDisplayed=function(){var b=
0!=m()?parseInt(a.toFixedNotRound(this.h/m(),0),10):parseInt(a.toFixedNotRound(this.h,0),10);if(this.getDrawCellTxtOnXLinesSource){var c=this.getDrawCellTxtOnXLinesSource();null!==c&&null!==c.value&&void 0!==c.value&&0<c.value.length&&"0"!=c.value&&(c=parseInt(c.value,10),!1===isNaN(c)&&0<c&&(b=Math.floor(b/c)))}return b};this.getTotalNrOfRows=function(){return u};this.geNrOfColumns=function(){return v};this.showVScrollerM=function(b){this.useVScrollerM=b;C=a.DEFAULT_SCROLLER_WIDTH};this.showVScrollerT=
function(b){this.useVScrollerT=b;C=a.DEFAULT_SCROLLER_WIDTH_TOUCH};this.getScrollerWidth=function(){return C}};a.PainterType_FileViewer.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function h(a){a=a.replace("e","E");return-1!==a.indexOf("E")?!0:!1}a.TrendValueType=function(){this.t_s=this.y=0};a.TREND_LABEL_WIDTH=36;a.TREND_LABEL_HEIGHT=26;a.TREND_FILE_V4_MAX_TRENDS=20;a.trendBaseInitSvgHandlesIfRequired=function(){null===this.TrendControl_eGroup&&(this.TrendControl_eGroup=this.getRepaintElement("sc_obj_trend_control_"+this.objId+"_group"));null===this.TrendCurves_eGroup&&(this.TrendCurves_eGroup=this.getRepaintElement("trend_"+this.objId+"_curves_group"));
null===this.TrendCurves_eSvg&&(this.TrendCurves_eSvg=this.getRepaintElement("trend_"+this.objId+"_curves_svg"));null===this.TrendControl_eSvg&&(this.TrendControl_eSvg=this.getRepaintElement("trend_"+this.objId+"_control_svg"));null===this.TrendControl_eGroup&&a.err_append_ln("ERROR: Failed to create Online Trend's TrendControl_eGroup!");null===this.TrendControl_eSvg&&a.err_append_ln("ERROR: Failed to create Online Trend's TrendControl_eSvg!");null===this.TrendCurves_eGroup&&a.err_append_ln("ERROR: Failed to create Online Trend's TrendCurves_eGroup!")};
a.trendBaseRectangle=function(){var g=0,b=0;!0===this.checkIfInterior()&&(g=1);!0===this.checkIfOutline()&&(b=1);this.getOutlineWidth();g=a.adjustColorStr(this.getInteriorColor(),g.toString());b=a.adjustColorStr(this.getOutlineColor(),b.toString());var d=!0===this.checkIfOutline()?this.getOutlineWidth():!0===this.getInnerFill()?this.getOutlineWidth():0;var e=this.getOutlineStyle();null!==this.frmElmnt&&(a.removeSVG(this.frmElmnt),this.frmElmnt=null);switch(e){case a.SOLID:this.frmElmnt=a.createSVGRect(this.svgDoc,
this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,g,b,d);break;case a.DASHED:case a.DOTTED:this.frmElmnt=a.createSVGRectDashed(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,this.y,this.w,this.h,g,b,d,this.getInnerFill(),e);break;default:a.log_append_ln("ERROR sc.trendBaseRectangle Unknown outline style")}};a.trendBaseParseActiveTrends=function(){var g,b=0,d=!1;var e=a.ReadContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex);if(!1===a.stringcmp(this.activePrevious,
e)){d=!0;for(g=0;g<this.trendCurveListActive.length;g++)null!=this.trendCurveListActive[g]&&(this.trendCurveListActive[g].activeFlag=!1);var f=e.split(a.FVLINESEPTOKEN2);0<f.length&&(this.FileViewerColumns=f[0]);if(1<f.length){for(g=1;g<f.length;g++){var c=f[g].split(/\\t/);if(5<=c.length){var n=this.getActiveTrendCurve(c[1]);n=this.updateActiveList(n,c);b++;null!==n&&void 0!==n&&(n.activeFlag=!0)}}b=this.trendCurveListActive.length;for(g=1;g<f.length;g++)if(n=g-1,c=f[g].split(/\\t/),5<=c.length)if(c=
this.getActiveTrendCurveIndex(c[1]),null!=c)if(n<b){if(c!==n){var k=this.trendCurveListActive[n];this.trendCurveListActive[n]=this.trendCurveListActive[c];this.trendCurveListActive[c]=k}}else a.log_append_ln("ERROR sc.trendBaseParseActiveTrends active trend size not OK [ activeSize "+b+" <= userClickIndex "+n+" ] !");else a.log_append_ln("ERROR sc.trendBaseParseActiveTrends curveIndex not OK !")}this.activePrevious=e;for(e=g=0;e<this.trendCurveListActive.length;e++)!0===this.trendCurveListActive[e].activeFlag&&
g++;this.setNumActiveCrv(g)}return d};a.trendBaseUpdateDimensions=function(){this.getNumActiveCrv();var g=2,b=0,d=this.w-4,e=this.h,f=0;if(1===this.config.AutoyAxisLegend){var c=this.getNumActiveCrv();g=2;b=a.TREND_LABEL_HEIGHT/2;d=this.w-4;e=this.h-a.TREND_LABEL_HEIGHT;for(0<c&&(g+=a.TREND_LABEL_WIDTH);f<c;)d-=a.TREND_LABEL_WIDTH,f++}this.relPosSvg={rX:g,rY:b,rW:d,rH:e};this.updateYProp_AllCurves();0!==this.xRange&&(this.xProportionalityFactor=this.relPosSvg.rW/this.xRange);0!=this.xProportionalityFactor&&
(this.xPxRate=1/this.xProportionalityFactor)};a.trendBaseDrawYAxisLabels=function(){var g=this.getNumActiveCrv(),b,d=0,e=this.relPosSvg.rH/10,f={numDec:0,isExponential:!1};for(b=0;b<this.trendCurveListActive.length;b++)null!==this.trendCurveListActive[b].label_e&&!1===this.trendCurveListActive[b].activeFlag&&(a.removeSVG(this.trendCurveListActive[b].label_e),this.trendCurveListActive[b].label_e=null);for(b=0;b<g;b++){var c=10*(this.trendCurveListActive[b].yMax-this.trendCurveListActive[b].yMin)/100;
null!==this.trendCurveListActive[b].label_e&&a.removeSVG(this.trendCurveListActive[b].label_e);this.trendCurveListActive[b].label_e=a.createSVGElement(document,"g");a.setSVGAttr(this.trendCurveListActive[b].label_e,"id","trend_"+this.objId+"_curve_"+b+"_labels");null!==this.TrendCurves_eGroup&&this.TrendCurves_eGroup.appendChild(this.trendCurveListActive[b].label_e);0<b&&(d=1+this.relPosSvg.rX+this.relPosSvg.rW+(b-1)*a.TREND_LABEL_WIDTH);var n=0;var k=String(c);var w=k.split("e");0<w.length&&(k=w[0]);
w=k.split(".");1<w.length&&w[1]&&(n=w[1].length);f.numDec=n;n=f;k=this.trendCurveListActive[b].yMax;h(this.trendCurveListActive[b].yMin)||h(k)?n.isExponential=!0:n.isExponential=!1;for(n=0;11>n;n++){k=this.trendCurveListActive[b].yMax-c*n;!0===f.isExponential?(k=k.toExponential(f.numDec),k=k.replace("e","E"),k=k.replace("+","")):k=k.toFixed(f.numDec);w=a.TREND_LABEL_HEIGHT/2-this.getFontSize()/2+this.getFontSize()+e*n;var m=this.trendCurveListActive[b].colorRGB;a.createSVGTextExt(document,this.trendCurveListActive[b].label_e,
d,w,m,"start",this.getFontName(),this.getFontSize(),k,this.getSvgFontStyle(),this.getSvgFontWeight())}}};a.trendBaseDrawGrid=function(g,b){this.gridYSpacing=this.relPosSvg.rH/10;this.gridXSpacing=this.relPosSvg.rW/10;null!==this.eGrpGrid&&a.removeSVG(this.eGrpGrid);this.eGrpGrid=null;if(!0===g&&null===this.eGrpGrid)if(this.eGrpGrid=document.createElementNS(a.SvgNs,"g"),null!==this.eGrpGrid){this.eGrpGrid.setAttribute("visibility","visible");this.TrendControl_eSvg.appendChild(this.eGrpGrid);this.eGrpGrid.setAttributeNS(null,
"id","grid_"+this.trendIndex);for(b=0;10>=b;b++)g=a.createSVGSimpleRect(document,this.relPosSvg.rX,this.relPosSvg.rY+this.gridYSpacing*b,this.relPosSvg.rW,1,a.adjustColorStr(this.getOutlineColor())),this.eGrpGrid.appendChild(g);for(b=0;10>=b;b++)g=a.createSVGSimpleRect(document,this.relPosSvg.rX+this.gridXSpacing*b,this.relPosSvg.rY,1,this.relPosSvg.rH,a.adjustColorStr(this.getOutlineColor())),this.eGrpGrid.appendChild(g)}else a.log_append_ln("ERROR drawGrid(),  this.eGrpGrid === null");else!0===
g&&null!==this.eGrpGrid?this.eGrpGrid.setAttributeNS(null,"visibility",""):!1===g&&null!==this.eGrpGrid&&this.eGrpGrid.setAttributeNS(null,"visibility","hidden")};a.trendBaseDrawAllActiveCurves=function(){var g,b,d=this.trendCurveListActive.length,e="M 0 0";if(!1===this.emitter.stopLog)for(g=0;g<d;g++){if(null!==this.trendCurveListActive[g].valuesCBuffer){var f=this.trendCurveListActive[g].valuesCBuffer.level;var c=0;var n=!1;!0===this.config.xAutoScroll&&!0===this.config.FirstAutoSrollDraw&&(2<=
a.getDebugLevel()&&a.log_append_ln("this.config.FirstAutoSrollDraw: "+this.config.FirstAutoSrollDraw),n=!0,this.config.FirstAutoSrollDraw=!1);for(b=0;b<f;b++){var k=this.trendCurveListActive[g].valuesCBuffer.get(b);if(null!==k){if(this.ptId==a.JS_PT_ONLINE_TREND&&(!1===this.timeWindowInitialised&&(this.setXTimeRange(k.t_s,k.t_s+this.config.displayedTime_s),this.timeWindowInitialised=!0),k.t_s>this.xMaxTime_s&&(!0===this.config.xAutoScroll&&b===f-1||!0===n))){var h=k.t_s-this.xMaxTime_s;this.setXTimeRange(this.xMinTime_s+
h,this.xMaxTime_s+h)}k=this.computePointsInRange(this.trendCurveListActive[g].yMax,this.trendCurveListActive[g].yMin,this.trendCurveListActive[g].yProportionalityFactor,k.t_s,k.y);k.xPx<=this.relPosSvg.rX+this.relPosSvg.rW&&k.yPx<=this.relPosSvg.rY+this.relPosSvg.rH&&this.relPosSvg.rX<=k.xPx&&this.relPosSvg.rY<=k.yPx&&(0===c&&(e="M"+k.xPx+" "+k.yPx+" "),e+="L"+k.xPx+" "+k.yPx+" ",c++)}}0===c&&(e="M0 0 ",e+="L0 0 ")}!1===this.trendCurveListActive[g].activeFlag?this.remove_ePath(g):(null===this.trendCurveListActive[g].curve_ePath&&
this.initialise_ePath(g),null!==this.trendCurveListActive[g].curve_ePath&&(this.trendCurveListActive[g].curve_ePath.setAttributeNS(null,"stroke",a.adjustColorStr(this.trendCurveListActive[g].colorRGB)),this.trendCurveListActive[g].curve_ePath.setAttributeNS(null,"stroke-width",this.getOutlineWidth()),this.trendCurveListActive[g].curve_ePath.setAttributeNS(null,"fill","none")),null!==this.trendCurveListActive[g].curve_ePath&&this.trendCurveListActive[g].curve_ePath.setAttributeNS(null,"d",e))}};a.trendBaseUpdateScrollAction=
function(){var a=this.config.scroll;0<Math.abs(a)&&100>=Math.abs(a)&&0<this.displayedTime_s&&(a=this.displayedTime_s*a/100,this.setXTimeRange(this.xMinTime_s+a,this.xMaxTime_s+a));this.config.scroll=0};a.trendBaseUpdateZoomAction=function(){var a=this.config.zoom;0<Math.abs(a)&&100>=Math.abs(a)&&(0<this.displayedTime_s&&(a=this.displayedTime_s*a/200,this.setXTimeRange(this.xMinTime_s+a,this.xMaxTime_s-a)),this.config.zoom=0)};a.trendBaseSetXTimeRange=function(a,b){b>a&&(this.xMinTime_s=a,this.xMaxTime_s=
b,this.xRange=this.displayedTime_s=this.xMaxTime_s-this.xMinTime_s,0!==this.xRange&&(this.xProportionalityFactor=this.relPosSvg.rW/this.xRange),0!=this.xProportionalityFactor&&(this.xPxRate=1/this.xProportionalityFactor),this.xStep_s=this.xRange/10,this.updateXTimeLabels())};a.trendBaseUpdateYProp_AllCurves=function(){var a;for(a=0;a<this.trendCurveListActive.length;a++)this.trendCurveListActive[a].yMax!==this.trendCurveListActive[a].yMin&&(this.trendCurveListActive[a].yRange=this.trendCurveListActive[a].yMax-
this.trendCurveListActive[a].yMin,this.trendCurveListActive[a].yProportionalityFactor=this.relPosSvg.rH/this.trendCurveListActive[a].yRange)};a.trendBaseComputePointsInRange=function(a,b,d,e,f){var c={xPx:0,yPx:0};a=parseFloat(a);b=parseFloat(b);var g=a-b;c.xPx=Math.round((e-this.xOffsetTime_s-this.xMinTime_s)*this.xProportionalityFactor);c.yPx=Math.round((f<b?g:f>a?0:0<=f?a-f:g+b-f)*d);c.yPx+=this.relPosSvg.rY;c.xPx+=this.relPosSvg.rX;return c};a.trendBaseClear=function(){var g;this.clearActiveCurveRingBuffersOffline();
var b=this.trendCurveListActive.length;for(g=0;g<b;g++)null!==this.TrendCurves_eGroup?(null!==this.trendCurveListActive[g].curve_ePath&&this.TrendCurves_eGroup.removeChild(this.trendCurveListActive[g].curve_ePath),this.trendCurveListActive[g].curve_ePath=null,this.initialise_ePath(g)):a.log_append_ln("Error TrendCurves_eGroup not found")};a.trendBaseClearActiveCurveRingBuffersOffline=function(){var a,b=this.trendCurveListActive.length;for(a=0;a<b;a++)this.trendCurveListActive[a].valuesCBuffer.clear()};
a.trendBaseInitialise_ePath=function(g){null===this.trendCurveListActive[g].curve_ePath&&(this.trendCurveListActive[g].curve_ePath=document.createElementNS(a.SvgNs,"path"),null!==this.trendCurveListActive[g].curve_ePath?null!==this.TrendCurves_eGroup?this.TrendCurves_eGroup.appendChild(this.trendCurveListActive[g].curve_ePath):a.log_append_ln("Error TrendCurves_eGroup not found"):a.log_append_ln("Error could not create this.trendCurveListActive[c].curve_ePath"))};a.trendBaseRemove_ePath=function(g){null!==
this.trendCurveListActive[g].curve_ePath&&(a.removeSVG(this.trendCurveListActive[g].curve_ePath),this.trendCurveListActive[g].curve_ePath=null)};a.trendBaseGetPointAt=function(g,b){var d=null,e;if(null!==this.trendCurveListActive[g].valuesCBuffer&&0<b&&1==this.trendCurveListActive[g].activeFlag){var f=this.trendCurveListActive[g].valuesCBuffer.level;for(e=0;e<f;e++){var c=this.trendCurveListActive[g].valuesCBuffer.get(e);if(null!==c){if(c.t_s>b)break;d=c}}2<=a.getDebugLevel()&&(a.log_append_ln("Trend get mouse click value point for click ts["+
b+"]= "+a.getAlarmDateTimeByIntMSec(1E3*b)+" "+a.FVLINESEPTOKEN2),null!==d&&a.log_append_ln("Trend get mouse click value point found nearestPoint ts["+d.t_s+"]= "+a.getAlarmDateTimeByIntMSec(1E3*d.t_s)+" "+a.FVLINESEPTOKEN2))}return d};a.trendBaseGetRgb=function(a){return this.trendCurveListActive[a].colorRGB};a.trendBaseGetFViewerClicked=function(){var g="";var b=this.mouseDownHeader.split(a.FVLINESEPTOKEN2);var d=this.trendCurveListActive.length;0<b.length&&(g+=b[0]);g+=a.FVLINESEPTOKEN2;g+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+
"0,204,0#\\t";if(0<=this.sClicked)for(g=this.ptId===a.JS_PT_ONLINE_TREND?g+a.getAlarmDateTimeByIntMSecUTC(1E3*this.sClicked):g+a.getAlarmDateTimeByIntMSec(1E3*this.sClicked),g+=a.FVCOLSEPTOKEN2,g=g+"USER !"+a.FVLINESEPTOKEN2,b=0;b<d;b++){var e=this.getPointAt(b,this.sClicked);null!==e&&(g+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+this.getRgb(b)+"#\\t",g=this.ptId===a.JS_PT_ONLINE_TREND?g+a.getAlarmDateTimeByIntMSecUTC(1E3*e.t_s):g+a.getAlarmDateTimeByIntMSec(1E3*e.t_s),g+=a.FVCOLSEPTOKEN2,g+=e.y,g+=
a.FVLINESEPTOKEN2)}return g};a.trendBaseUpdateActiveList=function(g,b){var d=null;this.ptId===a.JS_PT_ONLINE_TREND?(null===g&&(g=new a.TrendCurveType,g.curveNr="0",g.colorRGB="0,0,0",g.yMin=0,g.yMax=0,this.trendCurveListActive.push(g)),null!==g&&null!==b&&4<b.length&&(g.curveNr=b[1],g.yMin=b[2],g.yMax=b[3],g.colorRGB=b[4]),d=this.emitter.getAvailableCurve(g.curveNr)):this.ptId===a.JS_PT_OFFLINE_TREND?(null===g&&(g=new a.TrendOfflineCurveType,g.curveNr="0",g.colorRGB="0,0,0",g.yMin=0,g.yMax=0,g.firstPoint=
0,g.lastPoint=0,g.beginDate="1970.01.01",g.beginTime="00:00:00 AM",g.endDate="1970.01.01",g.endTime="00:00:00 AM",this.trendCurveListActive.push(g)),null!==g&&null!==b&&10<b.length&&(g.curveNr=b[1],g.yMin=b[2],g.yMax=b[3],g.colorRGB=b[4],g.firstPoint=b[5],g.lastPoint=b[6],g.beginDate=b[7],g.beginTime=b[8],g.endDate=b[9],g.endTime=b[10]),d=this.emitter.getAvailableCurve(g.curveNr)):this.ptId===a.JS_PT_SAVED_TREND&&(null===g&&(g=new a.TrendSavedCurveType,g.curveNr="0",g.colorRGB="0,0,0",g.yMin=0,g.yMax=
0,g.firstPoint=0,g.lastPoint=0,g.beginDate="1970.01.01",g.beginTime="00:00:00 AM",g.endDate="1970.01.01",g.endTime="00:00:00 AM",this.trendCurveListActive.push(g)),null!==g&&null!==b&&4<b.length&&(g.curveNr=b[1],g.yMin=b[2],g.yMax=b[3],g.colorRGB=b[4]),d=this.emitter.getAvailableCurve(g.curveNr));null!==d&&null!==g&&(g.valuesCBuffer=d.valuesCBuffer);null!==g&&(g.activeFlag=!0);return g};a.trendBaseDrawVerticalClicked=function(){!1===a.stringcmp(this.mouseDownAction,"DISABLE")&&0<=this.sClicked&&(null!==
this.eClicked&&a.removeSVG(this.eClicked),this.sClicked>this.xMinTime_s&&this.sClicked<this.xMaxTime_s&&(this.xClicked=(this.sClicked-this.xMinTime_s)*this.xProportionalityFactor+this.relPosSvg.rX,this.eClicked=a.createSVGSimpleRect(document,this.xClicked,0,this.getOutlineWidth(),this.h,"rgb(0, 204, 0)"),null!==this.TrendCurves_eGroup&&this.TrendCurves_eGroup.appendChild(this.eClicked)))};a.trendBaseMouseDownActionFunc=function(){!1===a.stringcmp(this.mouseDownAction,"DISABLE")&&0!=this.xProportionalityFactor&&
a.isDefined(a.g_MouseEventInfo)?(this.sClicked=Math.round((a.g_MouseEventInfo.x-this.x-this.relPosSvg.rX)/this.xProportionalityFactor),this.sClicked+=this.xMinTime_s,a.WriteContainer("@MACROClickedRuler."+this.trendIndex,this.sClicked.toString())):this.sClicked=-1};a.trendBaseNotify=function(g,b){var d=0;switch(g){case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();break;case a.MOUSE_DOWN:!0===a.OB_checkMouseCoordinates(this,b)?(this.trendMouseDown(),d=1):d=0;break;case a.MOUSE_UP:!0===a.OB_checkMouseCoordinates(this,
a.g_MouseEventInfo)?(d=1,this.isPressed=!1):d=0}return d};a.trendBaseUpdateXTimeLabels=function(){var g;var b=this.ptId===a.JS_PT_ONLINE_TREND?!1:!a.SpecialCO.mbTmzEn.value;var d=this.macroPrefix;var e=new Date(0);e.setUTCSeconds(this.xMinTime_s);var f=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,b,e,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMinDate."+this.trendIndex,f);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMin."+this.trendIndex,this.xMinTime_s.toString());e=new Date(0);
e.setUTCSeconds(this.xMaxTime_s);f=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,b,e,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMaxDate."+this.trendIndex,f);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMax."+this.trendIndex,this.xMaxTime_s.toString());e=new Date(0);e.setUTCSeconds(this.xMinTime_s);f=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,b,e,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMinTime."+this.trendIndex,f);e=new Date(0);e.setUTCSeconds(this.xMaxTime_s);
f=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,b,e,null,!0);a.RW_writeSource(a.INFO_T_CONTAINER,d+"XMaxTime."+this.trendIndex,f);this.ptId===a.JS_PT_ONLINE_TREND&&(d="@MACROONT");for(g=0;10>g;g++)f=g*(this.xMaxTime_s-this.xMinTime_s)/10,e=new Date(0),e.setUTCSeconds(this.xMinTime_s+f),f=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,b,e,null,!0),a.RW_writeSource(a.INFO_T_CONTAINER,d+"XDate["+g+"]."+this.trendIndex,f);for(g=0;10>g;g++)f=g*(this.xMaxTime_s-
this.xMinTime_s)/10,e=new Date(0),e.setUTCSeconds(this.xMinTime_s+f),f=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,b,e,null,!0),a.RW_writeSource(a.INFO_T_CONTAINER,d+"XTime["+g+"]."+this.trendIndex,f)};a.CTrendCurveMngr=function(){var g="",b="",d=new Map,e=[],f=[],c=new Map,n="6_40_00",k="1.6.30.146";this.fileName="";var h=function(b,c,d,e,f){var g="";a.CTrendCurveMngr.IsDefined(c)&&(g=c());g+=d(e,f);return a.saveDataInFile(b,g)};this.getFileName=function(){$(a.g_HTMLControlFileBrowser).css("position",
"absolute").click().get(0);return""};this.addCurveNameValPair=function(a,b,d){var e;this.IsDefined(e=c.get(a))||(e={cn:a});e[b]=d;c.set(a,e);return e};this.setMBLibVersion=function(a){n=a};this.setHmiMinVersion=function(a){k=a};this.addTsValPair=function(a,b,c){var g;this.IsDefined(g=d.get(a))?g[b]=c:(g={t_s:a},g[b]=c,e.push(a));0>f.indexOf(b)&&f.push(b);d.set(a,g);return g};this.addTsObj=function(a){var b,c;if(!this.IsDefined(a)||!this.IsDefined(c=a.t_s))return 0;var d=Object.keys(a);for(b=0;b<d.length;b++)"t_s"!=
d[b]&&this.addTsValPair(c,d[b],a[d[b]]);return d.length};this.addTsValArr=function(a){var b;for(b=0;b<a.length;b++)this.addTsObj(a[b])};this.getTsVal=function(a){return this.ts_map.get(a)};this.getCsvHeaderStr=function(){var b="#!IMaster_SavedTrendFile;Version_4;IMaster",d;var e=new Date(Date.now());b+=n+";MB_Ver."+k+";\n";b=b+"#!SpiderControl Trends Log File generated on: "+(e.toLocaleDateString()+" "+e.toLocaleTimeString()+";\n"+f.length.toString()+";\n");for(e=0;e<f.length;e++)a.CTrendCurveMngr.IsDefined(d=
c.get(f[e]))&&(b+=d.cn+"\t"+d.min+"\t"+d.max+"\t"+d.rgb+";\n");b+="\n#!(s);Date;Time;";for(e=0;e<f.length;e++)b+=f[e]+";";return b+"\n"};this.getCsvStr=function(c,g){var n,k,h;e.sort(a.CTrendCurveMngr.Compare2Num);f.sort();b="";for(n=0;n<e.length;n++){b+=(k=e[n]).toString()+";";var m=new Date(1E3*k);b+=m.toLocaleDateString(c)+";"+m.toLocaleTimeString(g)+";";k=d.get(k);for(m=0;m<f.length;m++)b=a.CTrendCurveMngr.IsDefined(h=k[f[m]])?b+h.toString():b+" ",b+=";";b+="\n"}return b};this.getJsonStr=function(){var b;
e.sort(a.CTrendCurveMngr.Compare2Num);f.sort();g="[";for(b=0;b<e.length;b++){var c=d.get(e[b]);g+=JSON.stringify(c);g=b<e.length-1?g+",":g+"]"}return g};this.writeCsv=function(a,b,c){return h(a,this.getCsvHeaderStr,this.getCsvStr,b,c)};this.writeJson=function(a,b,c){return h(a,null,this.getJsonStr,b,c)}};a.CTrendCurveMngr.IsDefined=function(a){return"undefined"!==typeof a&&void 0!=a&&null!=a?!0:!1};a.CTrendCurveMngr.prototype.IsDefined=a.CTrendCurveMngr.IsDefined;a.CTrendCurveMngr.Compare2Num=function(a,
b){return a<b?-1:a>b?1:0};a.writeTrendsCsvFile=function(g){var b=new a.CTrendCurveMngr,d,e=new Date(Date.now());var f="";var c=!1;c=function(a){10>a&&(a="0"+a);return a};if(!a.CTrendCurveMngr.IsDefined(b))return!1;b.setHmiMinVersion(a.HMI_VERSION);if(!a.CTrendCurveMngr.IsDefined(g))return!1;for(f=0;f<g.length;f++)for(b.addCurveNameValPair(g[f].curveNr,"min",g[f].yMin),b.addCurveNameValPair(g[f].curveNr,"max",g[f].yMax),b.addCurveNameValPair(g[f].curveNr,"rgb",g[f].colorRGB),d=0;d<g[f].valuesCBuffer.bufferArr.length;d++)b.addTsValPair(g[f].valuesCBuffer.bufferArr[d].t_s,
g[f].curveNr,g[f].valuesCBuffer.bufferArr[d].y);f=$("#SC_View_001 iframe:first").attr("src");f=f.substring(0,f.indexOf("_teq"));b.fileName="Trd_"+f+"_";b.fileName+=e.getFullYear().toString()+c(e.getMonth()+1).toString()+c(e.getDate()).toString()+"_";b.fileName+=c(e.getHours()).toString()+c(e.getMinutes()).toString()+c(e.getSeconds()).toString()+".csv";return c=b.writeCsv(b.fileName,"de-DE","en-GB")};return a}(_SCIntern||{});_SCIntern=function(a){a.OnlineTrendEmitterType=function(h){this.trendIndex=h;this.lastLogged_s=0;this.trendCurveListAvailable=[];this.stopLog=!1;this.getAvailableCurve=function(a){var b,d=this.trendCurveListAvailable.length;for(b=0;b<d;b++)if(this.trendCurveListAvailable[b].curveNr===a)return this.trendCurveListAvailable[b];return null};this.refreshCurvePoints=function(){var g,b=this.trendCurveListAvailable.length;if(!1===this.stopLog){var d=a.getTimestamp_s();if(this.lastLogged_s!=d)for(this.lastLogged_s=
d,g=0;g<b;g++){var e=a.RW_readSource_parseFloat(a.INFO_T_PPO,this.trendCurveListAvailable[g].curveNr,0);if(!1===isNaN(e)){var f=new a.TrendValueType;f.t_s=d;f.y=e;this.trendCurveListAvailable[g].valuesCBuffer.add(f)}else a.log_append_ln("ERROR refreshCurvePoints: value isNaN() so not added")}}}};a.TrendCurveType=function(){this.curveNr="0";this.colorRGB="0,0,0";this.yRange=this.yProportionalityFactor=this.yMax=this.yMin=0;this.curve_ePath=this.valuesCBuffer=null;this.activeFlag=!1;this.label_e=null};
a.PainterType_OnlineTrend=function(h){this.base=a.PainterType_MPainter;this.base(h);this.trendIndex="";this.firstRedrawDone=!1;this.emitter=this.eGrpGrid=null;this.trendCurveListActive=[];this.config={gridFlag:!1,displayedTime_s:60,storedTime_s:3600,xAutoScroll:!0,FirstAutoSrollDraw:!1,AutoyAxisLegend:0,zoom:0,action:"0",scroll:0,trendArrayUpdate:"0"};this.displayedTime_s=this.xOffsetTime_s=this.xMaxTime_s=this.xMinTime_s=this.maxPoints=0;this.gridYSpacing=this.gridXSpacing=10;this.xRange=this.xPxRate=
this.xProportionalityFactor=0;this.yStep=this.xStep_s=10;this.FileViewerColumns="";this.TrendCurves_eGroup=this.TrendCurves_eSvg=this.TrendControl_eSvg=this.TrendControl_eGroup=null;this.timeWindowInitialised=!1;this.lastLogged_s=0;this.valuePickerName=this.mouseDownAction="";this.drawGrid=a.trendBaseDrawGrid;this.notify=a.trendBaseNotify;this.xClicked=0;this.sClicked=-1;this.eClicked=null;this.trendMouseDown=a.trendBaseMouseDownActionFunc;this.drawVerticalClicked=a.trendBaseDrawVerticalClicked;this.activePrevious=
this.mouseDownHeader="";this.macroPrefix="@MACRO";this.updateActiveList=a.trendBaseUpdateActiveList;this.parseActiveTrends=a.trendBaseParseActiveTrends;this.drawAllActiveCurves=a.trendBaseDrawAllActiveCurves;this.getRgb=a.trendBaseGetRgb;this.getFViewerClicked=a.trendBaseGetFViewerClicked;this.getPointAt=a.trendBaseGetPointAt;this.initialise_ePath=a.trendBaseInitialise_ePath;this.remove_ePath=a.trendBaseRemove_ePath;this.relPosSvg={rX:0,rY:0,rW:0,rH:0};this.clear=a.trendBaseClear;this.clearActiveCurveRingBuffersOffline=
a.trendBaseClearActiveCurveRingBuffersOffline;this.drawYAxisLabels=a.trendBaseDrawYAxisLabels;this.initSvgHandlesIfRequired=a.trendBaseInitSvgHandlesIfRequired;this.updateXTimeLabels=a.trendBaseUpdateXTimeLabels;this.updateDimensions=a.trendBaseUpdateDimensions;this.computePointsInRange=a.trendBaseComputePointsInRange;this.updateYProp_AllCurves=a.trendBaseUpdateYProp_AllCurves;this.updateScrollAction=a.trendBaseUpdateScrollAction;this.updateZoomAction=a.trendBaseUpdateZoomAction;this.setXTimeRange=
a.trendBaseSetXTimeRange;this.drawTrendRectShape=a.trendBaseRectangle;var g=0;this.getNumActiveCrv=function(){return g};this.setNumActiveCrv=function(a){g=a};this.getActiveTrendCurve=function(a){var b,e=this.trendCurveListActive.length;for(b=0;b<e;b++)if(this.trendCurveListActive[b].curveNr===a)return this.trendCurveListActive[b];return null};this.getActiveTrendCurveIndex=function(a){var b,e=this.trendCurveListActive.length;for(b=0;b<e;b++)if(this.trendCurveListActive[b].curveNr===a)return b;return null};
this.viewChangedUpdate=function(a){this.resetDOMHandles()};this.OnRedraw=function(b){this.trendIndex=b;this.initSvgHandlesIfRequired();this.drawTrendRectShape();null===this.emitter&&(this.emitter=a.getOnlineTrendEmitterInstance(this.trendIndex),null===this.emitter&&(this.emitter=new a.OnlineTrendEmitterType(this.trendIndex),a.registerOnlineTrendEmitter(this.emitter)));null!==this.emitter?(this.readConfigContainerVars(),this.calculateMaxPoints(),this.parseAvailableTrends(),b=this.parseActiveTrends(),
a.previousDrawDateTimeFormat===a.readDateTimeFormat()&&a.previousMBTmzEn===a.SpecialCO.mbTmzEn.value||this.setXTimeRange(this.xMinTime_s,this.xMaxTime_s),!0===b&&this.writeActiveTrendsContainerArray(),this.updateDimensions(),1===this.config.AutoyAxisLegend&&this.drawYAxisLabels(),this.config.gridFlag?this.drawGrid(!0,b):this.drawGrid(!1,b),this.drawAllActiveCurves(),this.drawVerticalClicked(),a.WriteContainer(this.valuePickerName,this.getFViewerClicked())):a.err_append_ln("ERROR: Failed to create Online Trend's emitter!")};
this.readConfigContainerVars=function(){this.mouseDownAction=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownAction."+this.trendIndex);this.valuePickerName=this.macroPrefix+"ActiveTrendsMouseDownVal."+this.trendIndex;this.mouseDownHeader=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownHeader."+this.trendIndex);this.config.gridFlag=parseInt(a.ReadContainer("@MACROShowGrid."+this.trendIndex),10);this.config.displayedTime_s=parseInt(a.ReadContainer("@MACRODisplayedTime."+this.trendIndex),
10);this.config.storedTime_s=parseInt(a.ReadContainer("@MACROMaxStoreTime."+this.trendIndex),10);var b=a.ReadContainer("@MACROXAutoUpdate."+this.trendIndex);"SETAUTO"==b&&(this.config.FirstAutoSrollDraw=!0,2<=a.getDebugLevel()&&a.log_append_ln("this.config.FirstAutoSrollDraw: "+this.config.FirstAutoSrollDraw),a.WriteContainer("@MACROXAutoUpdate."+this.trendIndex,"1"));"SETAUTO"==b||"1"==b?this.config.xAutoScroll=!0:0===b.length?this.config.xAutoScroll=!0:(this.config.xAutoScroll=!1,b=a.ReadContainer("@MACROXMinTime."+
this.trendIndex),b=a.ReadContainer("@MACROXMinDate."+this.trendIndex)+" "+b,b=parseInt(a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!1,null,b,!0),10),!1===isNaN(b)&&this.setXTimeRange(b,b+this.displayedTime_s));this.config.AutoyAxisLegend=parseInt(a.ReadContainer(this.macroPrefix+"AutoYAxeDescr."+this.trendIndex),10);this.config.action=a.ReadContainer("@MACROAvailableTrendsAction."+this.trendIndex);"CLEARNSTOPLOGS"==this.config.action?(this.emitter.stopLog=!0,this.clear(),
this.config.action="LOGSWAITING"):"STARTLOGGING"==this.config.action?(this.timeWindowInitialised=!1,this.emitter.stopLog=!1,this.config.action="0"):"SAVELOGSTOFILESHEDULED"==this.config.action?(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=2),a.writeTrendsCsvFile(this.trendCurveListActive),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.hideNDisableHTMLControlTextareaForMsgElmnt(),a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=
0,a.g_MouseEventInfo.ViewItem.TRDSaveToFilePainter=null),this.config.action="0"):"SAVELOGSTOFILE"==this.config.action?(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=1,a.g_MouseEventInfo.ViewItem.TRDSaveToFilePainter=this,a.scheduleRepaint()),this.config.action="SAVELOGSTOFILESHEDULED"):"CLEARLOGS"==this.config.action&&(this.clear(),this.config.action="0");a.WriteContainer("@MACROAvailableTrendsAction."+this.trendIndex,
this.config.action);this.config.scroll=a.ReadContainer("@MACROScroll."+this.trendIndex);this.updateScrollAction();a.WriteContainer("@MACROScroll."+this.trendIndex,this.config.scroll);this.config.zoom=parseInt(a.ReadContainer("@MACROZoom."+this.trendIndex),10);isNaN(this.config.zoom)?this.config.zoom=0:this.updateZoomAction();a.WriteContainer("@MACROZoom."+this.trendIndex,this.config.zoom);this.config.trendArrayUpdate=a.ReadContainer("@MACROActiveTrends[][]Update."+this.trendIndex);"UPDATE"==this.config.trendArrayUpdate&&
(this.readActiveTrendsContainerArray(),this.config.trendArrayUpdate="0",a.WriteContainer("@MACROActiveTrends[][]Update."+this.trendIndex,this.config.trendArrayUpdate))};this.writeActiveTrendsContainerArray=function(){var b,d=this.trendCurveListActive.length;for(b=1;b<=d;b++)a.WriteContainer("@MACROActiveTrends["+b+"][0]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer("@MACROActiveTrends["+b+"][1]."+this.trendIndex,this.trendCurveListActive[b-1].curveNr),a.WriteContainer("@MACROActiveTrends["+
b+"][2]."+this.trendIndex,this.trendCurveListActive[b-1].yMin),a.WriteContainer("@MACROActiveTrends["+b+"][3]."+this.trendIndex,this.trendCurveListActive[b-1].yMax),a.WriteContainer("@MACROActiveTrends["+b+"][4]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB)};this.readActiveTrendsContainerArray=function(){var b,d=this.trendCurveListActive.length;for(b=1;b<=d;b++)this.trendCurveListActive[b-1].colorRGB=a.ReadContainer("@MACROActiveTrends["+b+"][0]."+this.trendIndex),this.trendCurveListActive[b-
1].curveNr=a.ReadContainer("@MACROActiveTrends["+b+"][1]."+this.trendIndex),this.trendCurveListActive[b-1].yMin=a.ReadContainer("@MACROActiveTrends["+b+"][2]."+this.trendIndex),this.trendCurveListActive[b-1].yMax=a.ReadContainer("@MACROActiveTrends["+b+"][3]."+this.trendIndex),this.trendCurveListActive[b-1].colorRGB=a.ReadContainer("@MACROActiveTrends["+b+"][4]."+this.trendIndex)};this.calculateMaxPoints=function(){var b=(a.getRefreshPeriod()+999)/1E3;b=a.toFixedNotRound(b,0);0===b&&(b=1);this.maxPoints=
1+this.config.storedTime_s/b;2<=a.getDebugLevel()&&(a.log_append_ln("OT getRefreshPeriod: "+a.getRefreshPeriod()),a.log_append_ln("OT storedTime_s: "+this.config.storedTime_s),a.log_append_ln("OT Max Points: "+this.maxPoints))};this.parseAvailableTrends=function(){var b=a.ReadContainer("@MACROAvailableTrends."+this.trendIndex);var d=parseInt(a.ReadContainer("@MACROClickedRuler."+this.trendIndex));this.sClicked=isNaN(d)?-1:d;d=b.split(a.FVLINESEPTOKEN2);if(1<d.length)for(b=0;b<d.length;b++){var e=
new a.TrendCurveType;e.curveNr="0";e.colorRGB="0,0,0";e.yMin=0;e.yMax=0;var f=d[b].split(/\\t/);if(3<f.length){e.curveNr=f[0];var c=this.emitter.getAvailableCurve(e.curveNr);null===c&&(a.registerHMI_PPO(e.curveNr),e.yMin=f[1],e.yMax=f[2],e.colorRGB=f[3],e.valuesCBuffer=new a.CircularBuffer(this.maxPoints),this.emitter.trendCurveListAvailable.push(e))}}}};a.PainterType_OnlineTrend.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.OfflineTrendEmitterType=function(a){this.trendIndex=a||0;this.lastLogged_s=0;this.trendCurveListAvailable=[];this.stopLog=!1;this.getAvailableCurve=function(a){var b,d=this.trendCurveListAvailable.length;for(b=0;b<d;b++)if(this.trendCurveListAvailable[b].curveNr===a)return this.trendCurveListAvailable[b];return null};this.refreshCurvePoints=function(){}};a.TrendOfflineCurveType=function(){this.curveNr="0";this.yMax=this.yMin=0;this.colorRGB="0,0,0";this.numPoints=this.lastPoint=
this.firstPoint=0;this.beginDate="1970.01.01";this.beginTime="00:00:00 AM";this.beginTs_ms=0;this.endDate="1970.01.01";this.endTime="00:00:00 AM";this.endTs_ms=0;this.PPOName="0";this.yRange=this.yProportionalityFactor=0;this.curve_ePath=this.valuesCBuffer=null;this.activeFlag=!1;this.label_e=null};a.PainterType_OfflineTrend=function(h){function g(){var d=b.loadCurveInfos();b.writeActiveTrendsContainerArray();a.WriteContainer("@MACROOFTActiveTrendsTotalSamples."+b.trendIndex,d);return d}this.base=
a.PainterType_MPainter;this.base(h);var b=this;this.trendIndex="";this.firstRedrawDone=!1;this.emitter=this.eGrpGrid=null;this.trendCurveListActive=[];this.config={gridFlag:!1,displayedTime_s:60,storedTime_s:3600,xAutoScroll:"SETAUTO",AutoyAxisLegend:0,zoom:0,action:"0",loadDataState:"",scroll:0,version:"Version",listName:"ListName",maxBlockSize:1024,numCurves:1,trendArrayUpdate:"0"};this.displayedTime_s=this.xOffsetTime_s=this.xMaxTime_s=this.xMinTime_s=0;this.gridYSpacing=this.gridXSpacing=10;this.xRange=
this.xPxRate=this.xProportionalityFactor=0;this.yStep=this.xStep_s=10;this.FileViewerColumns="";this.TrendCurves_eGroup=this.TrendCurves_eSvg=this.TrendControl_eSvg=this.TrendControl_eGroup=null;this.timeWindowInitialised=!1;this.lastLogged_s=0;this.valuePickerName=this.mouseDownAction="";this.drawGrid=a.trendBaseDrawGrid;this.notify=a.trendBaseNotify;this.xClicked=0;this.sClicked=-1;this.eClicked=null;this.trendMouseDown=a.trendBaseMouseDownActionFunc;this.drawVerticalClicked=a.trendBaseDrawVerticalClicked;
this.activePrevious=this.mouseDownHeader="";this.macroPrefix="@MACROOFT";this.updateActiveList=a.trendBaseUpdateActiveList;this.parseActiveTrends=a.trendBaseParseActiveTrends;this.drawAllActiveCurves=a.trendBaseDrawAllActiveCurves;this.getRgb=a.trendBaseGetRgb;this.getFViewerClicked=a.trendBaseGetFViewerClicked;this.getPointAt=a.trendBaseGetPointAt;this.initialise_ePath=a.trendBaseInitialise_ePath;this.remove_ePath=a.trendBaseRemove_ePath;this.relPosSvg={rX:0,rY:0,rW:0,rH:0};this.rcvdSrvCfgFlag=!1;
this.clear=a.trendBaseClear;this.clearActiveCurveRingBuffersOffline=a.trendBaseClearActiveCurveRingBuffersOffline;this.drawYAxisLabels=a.trendBaseDrawYAxisLabels;this.initSvgHandlesIfRequired=a.trendBaseInitSvgHandlesIfRequired;this.updateXTimeLabels=a.trendBaseUpdateXTimeLabels;this.updateDimensions=a.trendBaseUpdateDimensions;this.computePointsInRange=a.trendBaseComputePointsInRange;this.updateYProp_AllCurves=a.trendBaseUpdateYProp_AllCurves;this.updateScrollAction=a.trendBaseUpdateScrollAction;
this.updateZoomAction=a.trendBaseUpdateZoomAction;this.setXTimeRange=a.trendBaseSetXTimeRange;this.drawTrendRectShape=a.trendBaseRectangle;var d=!1,e=0;this.getNumActiveCrv=function(){return e};this.setNumActiveCrv=function(a){e=a};this.getActiveTrendCurve=function(a){var b,d=this.trendCurveListActive.length;for(b=0;b<d;b++)if(this.trendCurveListActive[b].curveNr===a)return this.trendCurveListActive[b];return null};this.getActiveTrendCurveIndex=function(a){var b,d=this.trendCurveListActive.length;
for(b=0;b<d;b++)if(this.trendCurveListActive[b].curveNr===a)return b;return null};this.viewChangedUpdate=function(a){this.resetDOMHandles()};this.OnRedraw=function(b){this.trendIndex=b;this.initSvgHandlesIfRequired();this.drawTrendRectShape();null===this.emitter&&(this.emitter=a.getOfflineTrendEmitterInstance(this.trendIndex),null===this.emitter&&(this.emitter=new a.OfflineTrendEmitterType(this.trendIndex),a.registerOfflineTrendEmitter(this.emitter)));if(null!==this.emitter){this.readConfigContainerVars();
!1===this.rcvdSrvCfgFlag&&!0===this.loadTrendSrvConfig()&&(this.rcvdSrvCfgFlag=!0);this.parseAvailableTrends();b=this.parseActiveTrends();if(!0===b||!1===d||a.previousDrawDateTimeFormat!==a.readDateTimeFormat()||a.previousMBTmzEn!==a.SpecialCO.mbTmzEn.value)g(),this.clearBusyFlag();this.updateDimensions();1===this.config.AutoyAxisLegend&&this.drawYAxisLabels();this.config.gridFlag?this.drawGrid(!0,b):this.drawGrid(!1,b);this.drawAllActiveCurves();this.drawVerticalClicked();a.WriteContainer(this.valuePickerName,
this.getFViewerClicked())}else a.err_append_ln("ERROR: Failed to create Offline Trend's emitter!");d=!0};this.readConfigContainerVars=function(){this.mouseDownAction=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownAction."+this.trendIndex);this.valuePickerName=this.macroPrefix+"ActiveTrendsMouseDownVal."+this.trendIndex;this.mouseDownHeader=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownHeader."+this.trendIndex);this.config.gridFlag=parseInt(a.ReadContainer("@MACROOFTShowGrid."+this.trendIndex),
10);this.config.displayedTime_s=parseInt(a.ReadContainer("@MACROOFTDisplayedTime."+this.trendIndex),10);this.config.storedTime_s=parseInt(a.ReadContainer("@MACROOFTMaxStoreTime."+this.trendIndex),10);var b=a.ReadContainer("@MACROOFTXAutoUpdate."+this.trendIndex);"SETAUTO"==b&&a.WriteContainer("@MACROOFTXAutoUpdate."+this.trendIndex,"1");"SETAUTO"==b||"1"==b?this.config.xAutoScroll=!0:0===b.length?this.config.xAutoScroll=!0:(this.config.xAutoScroll=!1,b=a.ReadContainer("@MACROOFTXMinTime."+this.trendIndex),
b=a.ReadContainer("@MACROOFTXMinDate."+this.trendIndex)+" "+b,b=parseInt(a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,b,!0),10),this.setXTimeRange(b,b+this.displayedTime_s));this.config.AutoyAxisLegend=parseInt(a.ReadContainer(this.macroPrefix+"AutoYAxeDescr."+this.trendIndex),10);this.config.action=a.ReadContainer("@MACROOFTAvailableTrendsAction."+this.trendIndex);"CLEARNSTOPLOGS"==this.config.action?(this.emitter.stopLog=!0,this.clear(),
this.config.action="LOGSWAITING"):"STARTLOGGING"==this.config.action?(this.timeWindowInitialised=!1,this.emitter.stopLog=!1,this.config.action="0"):"SAVELOGSTOFILESHEDULED"==this.config.action?(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=2),a.writeTrendsCsvFile(this.trendCurveListActive),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.hideNDisableHTMLControlTextareaForMsgElmnt(),a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=
0,a.g_MouseEventInfo.ViewItem.TRDSaveToFilePainter=null),this.config.action="0"):"SAVELOGSTOFILE"==this.config.action?(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=1,a.g_MouseEventInfo.ViewItem.TRDSaveToFilePainter=this,a.scheduleRepaint()),this.config.action="SAVELOGSTOFILESHEDULED"):"CLEARLOGS"==this.config.action?(this.clear(),this.config.action="0"):"RESTARTTRGTRENDING"==this.config.action?(a.loadGeneralCGI("trend"+
a.getSrvExt()+"?action=reinitTrending"),this.config.action="0"):"CLEARTRGLOGFILES"==this.config.action&&(a.loadGeneralCGI("trend"+a.getSrvExt()+"?action=clearTrdLogFiles"),this.config.action="0");a.WriteContainer("@MACROOFTAvailableTrendsAction."+this.trendIndex,this.config.action);this.config.scroll=a.ReadContainer("@MACROOFTScroll."+this.trendIndex);this.updateScrollAction();a.WriteContainer("@MACROOFTScroll."+this.trendIndex,this.config.scroll);this.config.zoom=parseInt(a.ReadContainer("@MACROOFTZoom."+
this.trendIndex),10);isNaN(this.config.zoom)?this.config.zoom=0:this.updateZoomAction();a.WriteContainer("@MACROOFTZoom."+this.trendIndex,this.config.zoom);this.config.loadDataState=a.ReadContainer("@MACROOFTActiveTrendsLoadDatas."+this.trendIndex);"STARTLOADDATASSHEDULED"==this.config.loadDataState?(this.config.loadDataState="LOADINGDATAS",a.WriteContainer("@MACROOFTActiveTrendsLoadDatas."+this.trendIndex,this.config.loadDataState),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&
(a.g_MouseEventInfo.ViewItem.TRDLoadScheduled=2),this.loadActiveCurveData(),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.hideNDisableHTMLControlTextareaForMsgElmnt(),a.g_MouseEventInfo.ViewItem.TRDLoadScheduled=0,a.g_MouseEventInfo.ViewItem.TRDLoadPainter=null),this.config.loadDataState="0",this.clearBusyFlag()):"STARTLOADDATAS"==this.config.loadDataState&&(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDLoadScheduled=
1,a.g_MouseEventInfo.ViewItem.TRDLoadPainter=this,a.scheduleRepaint()),this.config.loadDataState="STARTLOADDATASSHEDULED");a.WriteContainer("@MACROOFTActiveTrendsLoadDatas."+this.trendIndex,this.config.loadDataState);this.config.action=a.ReadContainer("@MACROOFTActiveTrendsLoadInfos."+this.trendIndex);"LOADINFOS"==this.config.action?(g(),this.config.action="0",this.clearBusyFlag()):"STARTLOADDATASSHEDULED"==this.config.action?(this.config.action="LOADINGDATAS",a.WriteContainer("@MACROOFTActiveTrendsLoadInfos."+
this.trendIndex,this.config.action),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDLoadScheduled=2),this.loadActiveCurveData(),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.hideNDisableHTMLControlTextareaForMsgElmnt(),a.g_MouseEventInfo.ViewItem.TRDLoadScheduled=0,a.g_MouseEventInfo.ViewItem.TRDLoadPainter=null),this.config.action="0",this.clearBusyFlag()):"LOADINFONSTARTDATA"==this.config.action&&(this.config.action=
"STARTLOADDATAS",b=this.loadCurveInfos(),2<=a.getDebugLevel()&&a.log_append_ln("LOADINFONSTARTDATA/activePts: "+b),a.WriteContainer("@MACROOFTActiveTrendsTotalSamples."+this.trendIndex,b),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDLoadScheduled=1,a.g_MouseEventInfo.ViewItem.TRDLoadPainter=this,a.scheduleRepaint()),this.config.action="STARTLOADDATASSHEDULED");a.WriteContainer("@MACROOFTActiveTrendsLoadInfos."+this.trendIndex,this.config.action);
this.config.trendArrayUpdate=a.ReadContainer("@MACROOFTActiveTrends[][]Update."+this.trendIndex);"UPDATE"==this.config.trendArrayUpdate&&(this.readActiveTrendsContainerArray(),this.config.trendArrayUpdate="0",a.WriteContainer("@MACROOFTActiveTrends[][]Update."+this.trendIndex,this.config.trendArrayUpdate))};this.clearBusyFlag=function(){a.WriteContainer("_TREND_BUSY","0")};this.parseAvailableTrends=function(){var b=a.ReadContainer("@MACROOFTAvailableTrendsColored."+this.trendIndex);var c=parseInt(a.ReadContainer("@MACROClickedRuler."+
this.trendIndex));this.sClicked=isNaN(c)?-1:c;c=b.split(a.FVLINESEPTOKEN2);if(1<c.length)for(b=0;b<c.length;b++){var d=new a.TrendOfflineCurveType;d.curveNr="0";d.yMin=0;d.yMax=0;d.colorRGB="0,0,0";d.firstPoint=0;d.lastPoint=0;d.beginDate="1970.01.01";d.beginTime="00:00:00 AM";d.endDate="1970.01.01";d.endTime="00:00:00 AM";var e=c[b].split(/\\t/);if(10<e.length){d.curveNr=e[1];var g=this.emitter.getAvailableCurve(d.curveNr);null===g&&(d.curveNr=e[1],d.yMin=e[2],d.yMax=e[3],d.colorRGB=e[4],d.firstPoint=
e[5],d.lastPoint=e[6],d.beginDate=e[7],d.beginTime=e[8],d.endDate=e[9],d.endTime=e[10],d.valuesCBuffer=new a.CircularBuffer(-1),this.emitter.trendCurveListAvailable.push(d))}}};this.writeActiveTrendsContainerArray=function(){var b,c=this.trendCurveListActive.length;for(b=1;b<=c;b++)a.WriteContainer("@MACROOFTActiveTrends["+b+"][0]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer("@MACROOFTActiveTrends["+b+"][1]."+this.trendIndex,this.trendCurveListActive[b-1].curveNr),a.WriteContainer("@MACROOFTActiveTrends["+
b+"][2]."+this.trendIndex,this.trendCurveListActive[b-1].yMin),a.WriteContainer("@MACROOFTActiveTrends["+b+"][3]."+this.trendIndex,this.trendCurveListActive[b-1].yMax),a.WriteContainer("@MACROOFTActiveTrends["+b+"][4]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer("@MACROOFTActiveTrends["+b+"][5]."+this.trendIndex,this.trendCurveListActive[b-1].firstPoint),a.WriteContainer("@MACROOFTActiveTrends["+b+"][6]."+this.trendIndex,this.trendCurveListActive[b-1].lastPoint),a.WriteContainer("@MACROOFTActiveTrends["+
b+"][7]."+this.trendIndex,this.trendCurveListActive[b-1].beginDate),a.WriteContainer("@MACROOFTActiveTrends["+b+"][8]."+this.trendIndex,this.trendCurveListActive[b-1].beginTime),a.WriteContainer("@MACROOFTActiveTrends["+b+"][9]."+this.trendIndex,this.trendCurveListActive[b-1].endDate),a.WriteContainer("@MACROOFTActiveTrends["+b+"][10]."+this.trendIndex,this.trendCurveListActive[b-1].endTime),a.WriteContainer("@MACROOFTActiveTrends["+b+"][11]."+this.trendIndex,this.trendCurveListActive[b-1].numPoints)};
this.readActiveTrendsContainerArray=function(){var b,c=this.trendCurveListActive.length;for(b=1;b<=c;b++){this.trendCurveListActive[b-1].colorRGB=a.ReadContainer("@MACROOFTActiveTrends["+b+"][0]."+this.trendIndex);this.trendCurveListActive[b-1].curveNr=a.ReadContainer("@MACROOFTActiveTrends["+b+"][1]."+this.trendIndex);this.trendCurveListActive[b-1].yMin=a.ReadContainer("@MACROOFTActiveTrends["+b+"][2]."+this.trendIndex);this.trendCurveListActive[b-1].yMax=a.ReadContainer("@MACROOFTActiveTrends["+
b+"][3]."+this.trendIndex);this.trendCurveListActive[b-1].colorRGB=a.ReadContainer("@MACROOFTActiveTrends["+b+"][4]."+this.trendIndex);this.trendCurveListActive[b-1].firstPoint=a.ReadContainer("@MACROOFTActiveTrends["+b+"][5]."+this.trendIndex);this.trendCurveListActive[b-1].lastPoint=a.ReadContainer("@MACROOFTActiveTrends["+b+"][6]."+this.trendIndex);this.trendCurveListActive[b-1].beginDate=a.ReadContainer("@MACROOFTActiveTrends["+b+"][7]."+this.trendIndex);this.trendCurveListActive[b-1].beginTime=
a.ReadContainer("@MACROOFTActiveTrends["+b+"][8]."+this.trendIndex);this.trendCurveListActive[b-1].endDate=a.ReadContainer("@MACROOFTActiveTrends["+b+"][9]."+this.trendIndex);this.trendCurveListActive[b-1].endTime=a.ReadContainer("@MACROOFTActiveTrends["+b+"][10]."+this.trendIndex);var d=this.trendCurveListActive[b-1].beginDate+" "+this.trendCurveListActive[b-1].beginTime;this.trendCurveListActive[b-1].beginTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,
null,d,!0);this.trendCurveListActive[b-1].beginTs_ms*=1E3;d=this.trendCurveListActive[b-1].endDate+" "+this.trendCurveListActive[b-1].endTime;this.trendCurveListActive[b-1].endTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,d,!0);this.trendCurveListActive[b-1].endTs_ms*=1E3}};this.loadTrendSrvConfig=function(){var b=a.loadGeneralCGI("trend"+a.getSrvExt()+"?trendsList=TrendsListName&action=config"),c=null,d=!1;null!==b?c=a.parseCGI_CSV_Content(b):
a.log_append_ln("ERROR Offline Trend : Failed to load trend info from server!");null!==c&&null!==c[0]&&(null!==c[0][0]&&(this.config.version=c[0][0]),null!==c[0][1]&&(this.config.listName=c[0][1]),null!==c[0][2]&&(this.config.maxBlockSize=c[0][2]),null!==c[0][3]?(this.config.numCurves=parseInt(this.config.numCurves,10),!1===isNaN(this.config.numCurves)?d=!0:(a.log_append_ln("ERROR Offline Trend : Failed to parse trend info from server (syntax error: Number of curves)!"),this.config.numCurves=0)):
a.log_append_ln("ERROR Offline Trend : Failed to parse trend info from server (syntax error)!"));return d};this.loadCurveInfos=function(){var b,c=this.trendCurveListActive.length,d=0,e=0,g=0;for(b=0;b<c;b++)if(!0===this.trendCurveListActive[b].activeFlag){var h=this.trendCurveListActive[b].curveNr;h=a.loadGeneralCGI("trend"+a.getSrvExt()+"?trendNr="+h+"&action=configNSta");if(null!==h){if(h=a.parseCGI_CSV_Content(h),null!==h[0][3]){var p=parseInt(h[0][6],10);!1===isNaN(p)?(this.trendCurveListActive[b].numPoints=
p,d+=p):this.trendCurveListActive[b].numPoints=0;this.trendCurveListActive[b].beginTs_ms=parseInt(h[0][7],16);!0===isNaN(this.trendCurveListActive[b].beginTs_ms)?this.trendCurveListActive[b].beginTs_ms=0:(this.trendCurveListActive[b].beginTs_ms*=1E3,p=this.trendCurveListActive[b].beginTs_ms,!1===isNaN(p)&&(p=new Date(p),this.trendCurveListActive[b].beginTime=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,p,null,!0),this.trendCurveListActive[b].beginDate=
a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,!a.SpecialCO.mbTmzEn.value,p,null,!0)));this.trendCurveListActive[b].endTs_ms=parseInt(h[0][8],16);!0===isNaN(this.trendCurveListActive[b].endTs_ms)?this.trendCurveListActive[b].endTs_ms=0:(this.trendCurveListActive[b].endTs_ms*=1E3,h=this.trendCurveListActive[b].endTs_ms,!1===isNaN(h)&&(h=new Date(h),this.trendCurveListActive[b].endTime=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,
h,null,!0),this.trendCurveListActive[b].endDate=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.dateLocalNow.name,!a.SpecialCO.mbTmzEn.value,h,null,!0)));0===b?(e=this.trendCurveListActive[b].beginTs_ms,g=this.trendCurveListActive[b].endTs_ms):(this.trendCurveListActive[b].beginTs_ms<e&&(e=this.trendCurveListActive[b].beginTs_ms),this.trendCurveListActive[b].endTs_ms>g&&(g=this.trendCurveListActive[b].endTs_ms))}}else a.log_append_ln("Offline Trend Error: Failed to load trend info from server!")}this.setXTimeRange(e/
1E3,g/1E3);return d};this.parseTrendData=function(b,c,d){var e=0,f=0,g=0,n=!1;c.cnt=0;c.newesTs_s=0;c.oldesTs_s=0;c.doneFlag=!1;var h=c.endFlag=!1;if(0<b.length){if(null!==c)for(b=a.parseCGI_CSV_Content(b),e=0;null!==b[e]&&void 0!==b[e]&&!0!==c.endFlag&&!0!==c.doneFlag;)if(!1===a.prefixicmp("End",b[e][0])&&!1===a.prefixicmp("Done",b[e][0])){var q=new a.TrendValueType,y=parseInt(b[e][0],16);if(!1===isNaN(y)&&(q.t_s=y,y=parseFloat(b[e][1],10),!1===isNaN(y))){q.y=y;this.trendCurveListActive[d].valuesCBuffer.add(q);
if(0===g||g>q.t_s)g=q.t_s;f<q.t_s&&(f=q.t_s)}e++}else!0===a.prefixicmp("End",b[e][0])?(c.endFlag=!0,2<=a.getDebugLevel()&&a.log_append_ln("End")):!0===a.prefixicmp("Done",b[e][0])&&(c.doneFlag=!0,2<=a.getDebugLevel()&&a.log_append_ln("Done"));else a.log_append_ln("EROOR parseTrendData byRef === null"),n=!0;c.cnt=e;c.newesTs_s=f;c.oldesTs_s=g}else a.log_append_ln("ERROR Offline Trend parseTrendData error: no data"),n=!0;!0!==n&&(h=!0);return h};this.loadTrendData=function(b,c,d,e,g){return a.loadGeneralCGI("trend"+
a.getSrvExt()+"?trendNr="+b+"&action=loadTrend&loadType=0&startTimestamp="+c+"&endTimestamp="+d+"&nbrOfPoints="+this.config.maxBlockSize+"&lastLoadedTimestamp="+e,g)};this.loadActiveCurveData=function(){var b,c=this.trendCurveListActive.length,d={cnt:0,oldesTs_s:0,newesTs_s:0,doneFlag:!1,endFlag:!1},e=-1,g=-1;var h=a.ReadContainer("@MACROOFTLoadStartTimestampSet."+this.trendIndex);var p=a.ReadContainer("@MACROOFTLoadEndTimestampSet."+this.trendIndex);for(b=0;b<c;b++){d.cnt=0;d.oldesTs_s=0;d.newesTs_s=
0;d.doneFlag=!1;var r=d.endFlag=!1;var q=this.trendCurveListActive[b].curveNr;var y=this.trendCurveListActive[b].beginTs_ms/1E3;var t=this.trendCurveListActive[b].endTs_ms/1E3;if(""!==h)if(a.prefixcmp("START+",h)){var u=h.substring(6,h.length);y+=u}else a.prefixcmp("END-",h)?(u=h.substring(4,h.length),y=t-u):(u=parseInt(h,10),!1===isNaN(u)&&(y=u));""!==p&&(a.prefixcmp("START+",p)?(u=p.substring(6,h.length),t=y+u):a.prefixcmp("END-",p)?(u=p.substring(4,h.length),t-=u):(u=parseInt(p,10),!1===isNaN(u)&&
(t=u)));2<=a.getDebugLevel()&&(a.log_append_ln(y),a.log_append_ln(t),a.log_append_ln("Diff.: "+(t-y)/60));null===this.trendCurveListActive[b].valuesCBuffer&&(this.trendCurveListActive[b].valuesCBuffer=new a.CircularBuffer(-1));if(0!==this.trendCurveListActive[b].numPoints)for(;!1===d.endFlag&&!1===r;)if(u=this.loadTrendData(q,y.toString(16),t.toString(16),d.newesTs_s.toString(16)),null!==u){this.parseTrendData(u,d,b);2<=a.getDebugLevel()&&a.log_append_ln("byRef.cnt: "+d.cnt);if(this.trendCurveListActive[b].valuesCBuffer.bufferArr[0].t_s<
e||-1===e)e=this.trendCurveListActive[b].valuesCBuffer.bufferArr[0].t_s;if(this.trendCurveListActive[b].valuesCBuffer.bufferArr[this.trendCurveListActive[b].valuesCBuffer.bufferArr.length-1].t_s>g||-1===g)g=this.trendCurveListActive[b].valuesCBuffer.bufferArr[this.trendCurveListActive[b].valuesCBuffer.bufferArr.length-1].t_s}else r=!0,a.err_append_ln("ERROR Offline Trend : Failed to load trend data from server!")}this.setXTimeRange(e,g);2<=a.getDebugLevel()&&(a.log_append_ln("Offline Trend : loadActiveCurveData activeSize: "+
c),a.log_append_ln("Offline Trend : loadActiveCurveData cnt (total): "+d.cnt))}};a.PainterType_OfflineTrend.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.SavedTrendEmitterType=function(a){this.trendIndex=a||0;this.lastLogged_s=0;this.trendCurveListAvailable=[];this.stopLog=!1;this.getAvailableCurve=function(a){var b,d=this.trendCurveListAvailable.length;for(b=0;b<d;b++)if(this.trendCurveListAvailable[b].curveNr===a)return this.trendCurveListAvailable[b];return null};this.refreshCurvePoints=function(){}};a.TrendSavedCurveType=function(){this.curveNr="0";this.yMax=this.yMin=0;this.colorRGB="0,0,0";this.numPoints=this.lastPoint=
this.firstPoint=0;this.beginDate="1970.01.01";this.beginTime="00:00:00 AM";this.beginTs_ms=0;this.endDate="1970.01.01";this.endTime="00:00:00 AM";this.endTs_ms=0;this.PPOName="0";this.yRange=this.yProportionalityFactor=0;this.curve_ePath=this.valuesCBuffer=null;this.activeFlag=!1;this.label_e=null};a.PainterType_SavedTrend=function(h){this.base=a.PainterType_MPainter;this.base(h);this.trendIndex="";this.firstRedrawDone=!1;this.emitter=this.eGrpGrid=null;this.trendCurveListActive=[];this.config={gridFlag:!1,
displayedTime_s:60,storedTime_s:3600,xAutoScroll:"SETAUTO",AutoyAxisLegend:0,zoom:0,action:"0",loadDataState:"",scroll:0,numCurves:1,trendArrayUpdate:"0",loadIsRemote:"0",remoteFileName:"",availableTrendsHeaderStr:"",activeTrendsHeaderStr:"",lastReadRemoteFileContent:""};this.displayedTime_s=this.xOffsetTime_s=this.xMaxTime_s=this.xMinTime_s=0;this.gridYSpacing=this.gridXSpacing=10;this.xRange=this.xPxRate=this.xProportionalityFactor=0;this.yStep=this.xStep_s=10;this.FileViewerColumns="";this.TrendCurves_eGroup=
this.TrendCurves_eSvg=this.TrendControl_eSvg=this.TrendControl_eGroup=null;this.timeWindowInitialised=!1;this.lastLogged_s=0;this.valuePickerName=this.mouseDownAction="";this.drawGrid=a.trendBaseDrawGrid;this.notify=a.trendBaseNotify;this.xClicked=0;this.sClicked=-1;this.eClicked=null;this.trendMouseDown=a.trendBaseMouseDownActionFunc;this.drawVerticalClicked=a.trendBaseDrawVerticalClicked;this.activePrevious=this.mouseDownHeader="";this.macroPrefix="@MACROOFST";this.updateActiveList=a.trendBaseUpdateActiveList;
this.parseActiveTrends=a.trendBaseParseActiveTrends;this.drawAllActiveCurves=a.trendBaseDrawAllActiveCurves;this.getRgb=a.trendBaseGetRgb;this.getFViewerClicked=a.trendBaseGetFViewerClicked;this.getPointAt=a.trendBaseGetPointAt;this.initialise_ePath=a.trendBaseInitialise_ePath;this.remove_ePath=a.trendBaseRemove_ePath;this.relPosSvg={rX:0,rY:0,rW:0,rH:0};this.clear=a.trendBaseClear;this.clearActiveCurveRingBuffersOffline=a.trendBaseClearActiveCurveRingBuffersOffline;this.drawYAxisLabels=a.trendBaseDrawYAxisLabels;
this.initSvgHandlesIfRequired=a.trendBaseInitSvgHandlesIfRequired;this.updateXTimeLabels=a.trendBaseUpdateXTimeLabels;this.updateDimensions=a.trendBaseUpdateDimensions;this.computePointsInRange=a.trendBaseComputePointsInRange;this.updateYProp_AllCurves=a.trendBaseUpdateYProp_AllCurves;this.updateScrollAction=a.trendBaseUpdateScrollAction;this.updateZoomAction=a.trendBaseUpdateZoomAction;this.setXTimeRange=a.trendBaseSetXTimeRange;this.drawTrendRectShape=a.trendBaseRectangle;var g=0;this.getNumActiveCrv=
function(){return g};this.setNumActiveCrv=function(a){g=a};this.getActiveTrendCurve=function(a){var b,e=this.trendCurveListActive.length;for(b=0;b<e;b++)if(this.trendCurveListActive[b].curveNr===a)return this.trendCurveListActive[b];return null};this.getActiveTrendCurveIndex=function(a){var b,e=this.trendCurveListActive.length;for(b=0;b<e;b++)if(this.trendCurveListActive[b].curveNr===a)return b;return null};this.viewChangedUpdate=function(a){this.resetDOMHandles()};this.OnRedraw=function(b){this.trendIndex=
b;this.initSvgHandlesIfRequired();this.drawTrendRectShape();null===this.emitter&&(this.emitter=a.getSavedTrendEmitterInstance(this.trendIndex),null===this.emitter&&(this.emitter=new a.SavedTrendEmitterType(this.trendIndex),a.registerSavedTrendEmitter(this.emitter)));null!==this.emitter?(this.readConfigContainerVarsNLoadSavedTrendIfNeeded(),b=this.parseActiveTrends(),a.previousDrawDateTimeFormat===a.readDateTimeFormat()&&a.previousMBTmzEn===a.SpecialCO.mbTmzEn.value||this.setXTimeRange(this.xMinTime_s,
this.xMaxTime_s),!0===b&&this.writeActiveTrendsContainerArray(),this.updateDimensions(),1===this.config.AutoyAxisLegend&&this.drawYAxisLabels(),this.config.gridFlag?this.drawGrid(!0,b):this.drawGrid(!1,b),this.drawAllActiveCurves(),this.drawVerticalClicked(),a.WriteContainer(this.valuePickerName,this.getFViewerClicked())):a.err_append_ln("ERROR: Failed to create Saved Trend's emitter!")};this.readConfigContainerVarsNLoadSavedTrendIfNeeded=function(){this.config.activeTrendsHeaderStr=a.ReadContainer(this.macroPrefix+
"ActiveTrendsHeaderSP."+this.trendIndex);this.config.availableTrendsHeaderStr=a.ReadContainer(this.macroPrefix+"AvailableTrendsHeadered."+this.trendIndex);if(0<this.config.availableTrendsHeaderStr.length){var b=this.config.availableTrendsHeaderStr.split(a.FVLINESEPTOKEN2);0<b.length&&(this.config.availableTrendsHeaderStr=b[0],a.StrEndWith(this.config.availableTrendsHeaderStr,a.FVLINESEPTOKEN)||a.StrEndWith(this.config.availableTrendsHeaderStr,a.FVLINESEPTOKEN2)||(this.config.availableTrendsHeaderStr+=
a.FVLINESEPTOKEN2))}if(0>=this.config.activeTrendsHeaderStr.length||!a.prefixicmp(a.FVLINESPECLINESTARTSTR,this.config.activeTrendsHeaderStr))this.config.activeTrendsHeaderStr="#sp;120,0,120,120,120,120,120"+a.FVLINESEPTOKEN2;if(0>=this.config.availableTrendsHeaderStr.length||!a.prefixicmp(a.FVLINESPECLINESTARTSTR,this.config.availableTrendsHeaderStr))this.config.activeTrendsHeaderStr="#sp;0,120,120,120,120"+a.FVLINESEPTOKEN2;this.config.loadDataState=a.ReadContainer(this.macroPrefix+"ActiveTrendsLoadDatas."+
this.trendIndex);"STARTLOADDATAS"==this.config.loadDataState&&(this.config.loadIsRemote="",this.config.remoteFileName="",this.config.loadIsRemote=a.ReadContainer(this.macroPrefix+"ActiveTrendsLoadRemoteMode."+this.trendIndex),this.config.remoteFileName=a.ReadContainer(this.macroPrefix+"ActiveTrendsLoadRemoteFile."+this.trendIndex),"1"===this.config.loadIsRemote&&0<this.config.remoteFileName.length?(this.config.loadDataState="LOADINGDATAS",this.loadActiveCurvesDataNUpdateInfos(),this.config.loadDataState=
"0",this.clearBusyFlag()):a.err_append_ln(a.LoadFileError),action="0",a.WriteContainer(this.macroPrefix+"ActiveTrendsLoadDatas."+this.trendIndex,"0"));this.mouseDownAction=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownAction."+this.trendIndex);this.valuePickerName=this.macroPrefix+"ActiveTrendsMouseDownVal."+this.trendIndex;this.mouseDownHeader=a.ReadContainer(this.macroPrefix+"ActiveTrendsMouseDownHeader."+this.trendIndex);this.config.gridFlag=parseInt(a.ReadContainer(this.macroPrefix+"ShowGrid."+
this.trendIndex),10);this.config.displayedTime_s=parseInt(a.ReadContainer(this.macroPrefix+"DisplayedTime."+this.trendIndex),10);this.config.storedTime_s=parseInt(a.ReadContainer(this.macroPrefix+"MaxStoreTime."+this.trendIndex),10);b=a.ReadContainer(this.macroPrefix+"XAutoUpdate."+this.trendIndex);"SETAUTO"==b&&a.WriteContainer(this.macroPrefix+"XAutoUpdate."+this.trendIndex,"1");"SETAUTO"==b||"1"==b?this.config.xAutoScroll=!0:0===b.length?this.config.xAutoScroll=!0:(this.config.xAutoScroll=!1,b=
a.ReadContainer(this.macroPrefix+"XMinTime."+this.trendIndex),b=a.ReadContainer(this.macroPrefix+"XMinDate."+this.trendIndex)+" "+b,b=parseInt(a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,b,!0),10),this.setXTimeRange(b,b+this.displayedTime_s));this.config.AutoyAxisLegend=parseInt(a.ReadContainer(this.macroPrefix+"AutoYAxeDescr."+this.trendIndex),10);this.config.action=a.ReadContainer(this.macroPrefix+"AvailableTrendsAction."+this.trendIndex);
"SAVELOGSTOFILESHEDULED"==this.config.action?(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=2),a.writeTrendsCsvFile(this.trendCurveListActive),a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.hideNDisableHTMLControlTextareaForMsgElmnt(),a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=0,a.g_MouseEventInfo.ViewItem.TRDSaveToFilePainter=null),this.config.action="0"):"SAVELOGSTOFILE"==this.config.action?
(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&(a.g_MouseEventInfo.ViewItem.TRDSaveToFileScheduled=1,a.g_MouseEventInfo.ViewItem.TRDSaveToFilePainter=this,a.scheduleRepaint()),this.config.action="SAVELOGSTOFILESHEDULED"):"CLEARLOGS"==this.config.action?(this.clear(),this.config.action="0"):void 0!=this.config.action&&0<this.config.action.length&&"0"!==this.config.action&&(a.err_append_ln("offline Saved Trend Action ["+this.config.action+"] not supported in the HTML5 client !"),
this.config.action="0");a.WriteContainer(this.macroPrefix+"AvailableTrendsAction."+this.trendIndex,this.config.action);this.config.scroll=a.ReadContainer(this.macroPrefix+"Scroll."+this.trendIndex);this.updateScrollAction();a.WriteContainer(this.macroPrefix+"Scroll."+this.trendIndex,this.config.scroll);this.config.zoom=parseInt(a.ReadContainer(this.macroPrefix+"Zoom."+this.trendIndex),10);isNaN(this.config.zoom)?this.config.zoom=0:this.updateZoomAction();a.WriteContainer(this.macroPrefix+"Zoom."+
this.trendIndex,this.config.zoom);this.config.trendArrayUpdate=a.ReadContainer(this.macroPrefix+"ActiveTrends[][]Update."+this.trendIndex);"UPDATE"==this.config.trendArrayUpdate&&(this.readActiveTrendsContainerArray(),this.config.trendArrayUpdate="0",a.WriteContainer(this.macroPrefix+"ActiveTrends[][]Update."+this.trendIndex,this.config.trendArrayUpdate))};this.loadActiveCurvesDataNUpdateInfos=function(){var b,d,e=0,f=0,c=0,g="",k="";for(b=0;b<this.trendCurveListActive.length;b++)if(null!==this.trendCurveListActive[b].valuesCBuffer){var h=
this.trendCurveListActive[b].valuesCBuffer.level;if(0<h){var m=this.trendCurveListActive[b].valuesCBuffer.get(0);if(null!==m){if(0===c||c>m.t_s)c=m.t_s;f<m.t_s&&(f=m.t_s)}m=this.trendCurveListActive[b].valuesCBuffer.get(h-1);if(null!==m){if(0===c||c>m.t_s)c=m.t_s;f<m.t_s&&(f=m.t_s)}}}if("1"===this.config.loadIsRemote&&0<this.config.remoteFileName.length){2<=a.getDebugLevel()&&a.log_append_ln("SavedTrend loadActiveCurvesDataNUpdateInfos for file "+this.config.remoteFileName);h=a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?
a.loadFileSource("plc?"+this.config.remoteFileName):a.loadFileSource(this.config.remoteFileName);if(null!==h&&0<h.length&&""!==h){2<=a.getDebugLevel()&&a.log_append_ln("SavedTrend loadActiveCurvesDataNUpdateInfos for file "+this.config.remoteFileName+" returned "+h);var p=h.split("\n");for(d=b=0;d<p.length&&0==b;d++)if(0!=p[d].indexOf(a.FVCOMMENTLINESTARTSTR)){b=1;var r=p[d].split(";");0<r.length&&(r=parseInt(r[0],10),!1===isNaN(r)&&(e=r))}if(1==b&&0<e){if(e!=this.emitter.trendCurveListAvailable.length){if(0<
this.emitter.trendCurveListAvailable.length)for(a.log_append_ln("while parsing header part of SavedTrend file "+this.config.remoteFileName+" nbrOfCurves = "+e+" is defferent from this.trendCurveListAvailable.length [ "+this.emitter.trendCurveListAvailable.length+" ] so clear the trendCurveListAvailable current list and updates with file's one ");0<this.emitter.trendCurveListAvailable.length;)this.emitter.trendCurveListAvailable.pop();if(0<this.trendCurveListActive.length)for(a.log_append_ln("while parsing header part of SavedTrend file "+
this.config.remoteFileName+" nbrOfCurves = "+e+" is defferent from this.trendCurveListAvailable.length [ "+this.emitter.trendCurveListAvailable.length+" ] so clear the trendCurveListActive current list and updates with file's one ");0<this.trendCurveListActive.length;)this.trendCurveListActive.pop()}else{for(r=b=k=0;d+r<p.length&&r<e&&0==b;r++)if(0==p[d+r].indexOf(a.FVCOMMENTLINESTARTSTR))a.log_append_ln("ERROR while parsing header part of SavedTrend file "+this.config.remoteFileName+" should find "+
e+" curves but found comment line at index "+r),b=1;else{var q=p[d+r].split(";");if(0<q.length){var y=q[0].split("\t");if(0<y.length){var t=y[0];0<t.length?(y=this.emitter.trendCurveListAvailable[r],null===y||y.curveNr!==t?(a.log_append_ln("ERROR while parsing header part of SavedTrend file "+this.config.remoteFileName+" could not find the available curve from list for curveNrStr  "+t+" at the right index "+r),b=1):k++):b=1}}}if(k!=e){if(0<this.emitter.trendCurveListAvailable.length)for(a.log_append_ln("while parsing header part of SavedTrend file "+
this.config.remoteFileName+" foundAvailableCurves = "+k+" is different nbrOfCurves to find [ "+e+" ] so clear the trendCurveListAvailable current list and updates with file's one ");0<this.emitter.trendCurveListAvailable.length;)this.emitter.trendCurveListAvailable.pop();if(0<this.trendCurveListActive.length)for(a.log_append_ln("while parsing header part of SavedTrend file "+this.config.remoteFileName+" foundAvailableCurves = "+k+" is different nbrOfCurves to find [ "+e+" ] so clear the trendCurveListActive current list and updates with file's one ");0<
this.trendCurveListActive.length;)this.trendCurveListActive.pop()}}for(r=b=0;d+r<p.length&&r<e&&0==b;r++)0==p[d+r].indexOf(a.FVCOMMENTLINESTARTSTR)?(a.log_append_ln("ERROR while parsing header part of SavedTrend file "+this.config.remoteFileName+" should find "+e+" curves but found comment line at index "+r),b=1):(q=p[d+r].split(";"),0<q.length&&(y=q[0].split("\t"),3<y.length&&(t=y[0],k=y[1],q=y[2],m=y[3],0<t.length&&(y=this.emitter.getAvailableCurve(t),null===y&&(y=new a.TrendSavedCurveType,y.curveNr=
t,y.yMin=0,y.yMax=0,y.colorRGB="0,0,0",y.firstPoint=0,y.lastPoint=0,y.beginDate="1970.01.01",y.beginTime="00:00:00 AM",y.endDate="1970.01.01",y.endTime="00:00:00 AM",y.valuesCBuffer=new a.CircularBuffer(-1),this.emitter.trendCurveListAvailable.push(y)),y=this.emitter.getAvailableCurve(t),null!==y&&(y.curveNr=t,y.yMin=k,y.yMax=q,y.colorRGB=m)))));k="";for(l=0;l<this.emitter.trendCurveListAvailable.length;l++)t=this.emitter.trendCurveListAvailable[l],void 0!=t&&0<t.curveNr.length&&0<t.yMin.length&&
0<t.yMax.length&&0<t.colorRGB.length&&(k+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+t.colorRGB+a.FVCOLUMNCOLORSPECENDSTR+a.FVCOLSEPTOKEN2+t.curveNr+a.FVCOLSEPTOKEN2+t.yMin+a.FVCOLSEPTOKEN2+t.yMax+a.FVCOLSEPTOKEN2+t.colorRGB+a.FVLINESEPTOKEN2);a.WriteContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex,this.config.activeTrendsHeaderStr+k);k="";for(this.parseActiveTrends();d+r<p.length;){if(0==p[d+r].indexOf(a.FVCOMMENTLINESTARTSTR))2<=a.getDebugLevel()&&a.log_append_ln("skips comment line while parsing curves points part of SavedTrend file "+
this.config.remoteFileName);else if(!1===a.prefixicmp("End",p[d+r])&&!1===a.prefixicmp("Done",p[d+r])&&0<p[d+r].length)if(q=p[d+r].split(";"),3<q.length){var u=parseInt(q[0],10);if(!1===isNaN(u)&&0<=u)for(b=0;b<this.emitter.trendCurveListAvailable.length&&b+3<q.length;b++){if(t=parseFloat(q[3+b],10),!1===isNaN(t)){m=new a.TrendValueType;m.t_s=u;m.y=t;t=this.emitter.trendCurveListAvailable[b].curveNr;null!==t&&0<t.length&&(y=this.getActiveTrendCurve(t),null!==y&&y.valuesCBuffer.add(m));if(0===c||c>
m.t_s)c=m.t_s;f<m.t_s&&(f=m.t_s)}}else a.log_append_ln("ERROR while parsing curve's points part of SavedTrend file "+this.config.remoteFileName+" error in timestamp for index ["+(d+r)+"]lineStr = ["+p[d+r]+"] ")}else a.log_append_ln("ERROR while parsing curve's points part of SavedTrend file "+this.config.remoteFileName+" error for index ["+(d+r)+"]lineStr = ["+p[d+r]+"] for contents = \n["+h+"]");r++}}}for(d=0;d<this.emitter.trendCurveListAvailable.length;d++)t=this.emitter.trendCurveListAvailable[d],
void 0!=t&&0<t.curveNr.length&&0<t.yMin.length&&0<t.yMax.length&&0<t.colorRGB.length&&(g+=t.curveNr+a.FVCOLSEPTOKEN2+t.yMin+a.FVCOLSEPTOKEN2+t.yMax+a.FVCOLSEPTOKEN2+t.colorRGB+a.FVLINESEPTOKEN2,k+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+t.colorRGB+a.FVCOLUMNCOLORSPECENDSTR+a.FVCOLSEPTOKEN2+t.curveNr+a.FVCOLSEPTOKEN2+t.yMin+a.FVCOLSEPTOKEN2+t.yMax+a.FVCOLSEPTOKEN2+t.colorRGB+a.FVLINESEPTOKEN2);a.WriteContainer(this.macroPrefix+"AvailableTrends."+this.trendIndex,g);a.WriteContainer(this.macroPrefix+"AvailableTrendsHeadered."+
this.trendIndex,this.config.availableTrendsHeaderStr+g);a.WriteContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex,this.config.activeTrendsHeaderStr+k)}for(d=0;d<this.trendCurveListActive.length;d++)0==d?(oldestTs_s=this.trendCurveListActive[d].valuesCBuffer.bufferArr[0].t_s,f=this.trendCurveListActive[d].valuesCBuffer.bufferArr[this.trendCurveListActive[d].valuesCBuffer.bufferArr.length-1].t_s):(c>this.trendCurveListActive[d].valuesCBuffer.bufferArr[0].t_s&&(oldestTs_s=this.trendCurveListActive[d].valuesCBuffer.bufferArr[0].t_s),
f<this.trendCurveListActive[d].valuesCBuffer.bufferArr[this.trendCurveListActive[d].valuesCBuffer.bufferArr.length-1].t_s&&(f=this.trendCurveListActive[d].valuesCBuffer.bufferArr[this.trendCurveListActive[d].valuesCBuffer.bufferArr.length-1].t_s));this.setXTimeRange(c,f);2<=a.getDebugLevel()&&a.log_append_ln("SavedTrend loadActiveCurvesDataNUpdateInfos nbrOfCurves: "+e)};this.clearBusyFlag=function(){a.WriteContainer("_TREND_BUSY","0")};this.writeActiveTrendsContainerArray=function(){var b,d=this.trendCurveListActive.length;
for(b=1;b<=d;b++)a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][0]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][1]."+this.trendIndex,this.trendCurveListActive[b-1].curveNr),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][2]."+this.trendIndex,this.trendCurveListActive[b-1].yMin),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][3]."+this.trendIndex,this.trendCurveListActive[b-1].yMax),a.WriteContainer(this.macroPrefix+
"ActiveTrends["+b+"][4]."+this.trendIndex,this.trendCurveListActive[b-1].colorRGB),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][5]."+this.trendIndex,this.trendCurveListActive[b-1].firstPoint),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][6]."+this.trendIndex,this.trendCurveListActive[b-1].lastPoint),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][7]."+this.trendIndex,this.trendCurveListActive[b-1].beginDate),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][8]."+this.trendIndex,
this.trendCurveListActive[b-1].beginTime),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][9]."+this.trendIndex,this.trendCurveListActive[b-1].endDate),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][10]."+this.trendIndex,this.trendCurveListActive[b-1].endTime),a.WriteContainer(this.macroPrefix+"ActiveTrends["+b+"][11]."+this.trendIndex,this.trendCurveListActive[b-1].numPoints)};this.readActiveTrendsContainerArray=function(){var b,d=this.trendCurveListActive.length,e="";for(b=1;b<=d;b++){this.trendCurveListActive[b-
1].colorRGB=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][0]."+this.trendIndex);this.trendCurveListActive[b-1].curveNr=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][1]."+this.trendIndex);this.trendCurveListActive[b-1].yMin=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][2]."+this.trendIndex);this.trendCurveListActive[b-1].yMax=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][3]."+this.trendIndex);this.trendCurveListActive[b-1].colorRGB=a.ReadContainer(this.macroPrefix+"ActiveTrends["+
b+"][4]."+this.trendIndex);this.trendCurveListActive[b-1].firstPoint=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][5]."+this.trendIndex);this.trendCurveListActive[b-1].lastPoint=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][6]."+this.trendIndex);this.trendCurveListActive[b-1].beginDate=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][7]."+this.trendIndex);this.trendCurveListActive[b-1].beginTime=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][8]."+this.trendIndex);this.trendCurveListActive[b-
1].endDate=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][9]."+this.trendIndex);this.trendCurveListActive[b-1].endTime=a.ReadContainer(this.macroPrefix+"ActiveTrends["+b+"][10]."+this.trendIndex);var f=this.trendCurveListActive[b-1].beginDate+" "+this.trendCurveListActive[b-1].beginTime;this.trendCurveListActive[b-1].beginTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,f,!0);this.trendCurveListActive[b-1].beginTs_ms*=1E3;f=this.trendCurveListActive[b-
1].endDate+" "+this.trendCurveListActive[b-1].endTime;this.trendCurveListActive[b-1].endTs_ms=a.DateTime_ReadDT(a.readDateTimeFormat(),a.SpecialCO.timeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,f,!0);this.trendCurveListActive[b-1].endTs_ms*=1E3;e+=a.FVCOLUMNFOREGROUNDCOLORSPECSTARTSTR+this.trendCurveListActive[b-1].colorRGB+a.FVCOLUMNCOLORSPECENDSTR+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-1].curveNr+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-1].yMin+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-
1].yMax+a.FVCOLSEPTOKEN2+this.trendCurveListActive[b-1].colorRGB+a.FVLINESEPTOKEN2}a.WriteContainer(this.macroPrefix+"ActiveTrends."+this.trendIndex,this.config.activeTrendsHeaderStr+e)}};a.PainterType_SavedTrend.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function h(b){var c=!0;try{if(0>=b.trim().length)c=!1;else if(a.TARGET_TYPE_NR===a.TARGET_TYPE_WAGO){c=!1;var d=b.substring(0,1);if(d===a.WAGO_VALIDPPONAMESTR1_1||d===a.WAGO_VALIDPPONAMESTR1_2||d===a.WAGO_VALIDPPONAMESTR1_3)if(d=b.substring(1,2),d===a.WAGO_VALIDPPONAMESTR2_1||d===a.WAGO_VALIDPPONAMESTR2_2||d===a.WAGO_VALIDPPONAMESTR2_3||d===a.WAGO_VALIDPPONAMESTR2_4)c=!0}}catch(I){a.log_append_ln("Error in isValidPPORequestName( "+b+" ) : "+I)}!1===c&&2<=a.getDebugLevel()&&a.log_append_ln("isValidPPORequestName( "+
b+" ) : returned false ! ");return c}function g(b){var c="",d=0;a.isDefined(b)&&0<b.length&&(a.Link.SrvInfo_UTF8Activ&&(c="text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?b.overrideMimeType(c):!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,timeout:a.AjaxTimeout,cache:!0,url:b,dataType:"text",complete:function(){d=1},success:function(c){a.g_ConnectFail=0;2<=a.getDebugLevel()&&a.log_append_ln("Ajax succes for sc.sl_sendOrderVal_GETRequest( "+
b+" ) \ncgi returned = "+c);d=1},error:function(){a.g_ConnectFail=1;null!==a.g_WriteValWorker&&void 0!==a.g_WriteValWorker&&1===a.g_WriteValWorkerUse&&(a.log_append_ln("sc.sl_sendOrderVal connection error so sc.g_WriteValWorker is now terminated and will be renewed when needed current sc.g_WriteValWorkerPendingWriteValsListSize = "+a.g_WriteValWorkerPendingWriteValsListSize),a.g_WriteValWorker.terminate(),a.g_WriteValWorker=null,a.g_WriteValWorkerIsInit=0,a.g_WriteValWorkerPendingWriteValsListSize=
0);a.log_append_ln("Ajax Error for sc.sl_sendOrderVal_GETRequest( "+b+" ) ");d=0}}));return d}function b(b){var c="";if(a.isDefined(b)&&0<b)for(a.RefreshCGIPending=!0,i=0;i<b;i++)c="cgi-bin/ReadFile"+a.getSrvExt()+"?"+a.cgiOrderFileRandomStr+"_"+i.toString(),a.isDefined(a.cgiHost)&&0<a.cgiHost.length&&(c=a.cgiHost+c),2<=a.getDebugLevel()&&a.log_append_ln(" sl_send_AsynchReadFiles reqStr = "+c),a.OrderValReadFilesPending++,$.ajax({url:c,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?b.overrideMimeType("text/csv;charset="+
a.UNICODEFILE_UTF8_ENCODINGSTR):!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},global:!1,cache:!0,type:"GET",contentType:"text/xml",dataType:"text",timeout:a.AjaxTimeout,async:!0,complete:e,success:d,error:f})}function d(b){a.g_ConnectFail=0;if(a.isDefined(b)&&0<b.length||!0===a.FullRedraw){var c="",d,e={};if(a.isDefined(b)&&0<b.length){b=b.split("\n");for(d=0;d<b.length;d++)if(c="",offset=b[d].indexOf("="),0<=offset){var f=b[d].split("=");2<=f.length&&(c=f[0],f=f[1],
a.TARGET_TYPE_NR===a.TARGET_TYPE_WAGO?(f=f.trim(),e[c]=f):a.sl_updatePPOList(c,f))}if(a.TARGET_TYPE_NR===a.TARGET_TYPE_WAGO&&0<Object.keys(e).length)for(c in e){var g="";b=d=0;if(a.prefixicmp("MD",c)&&a.isDefined(a.g_CurrentPPOUpdateAskedNameToOrgNameMap)&&a.isDefined(a.g_CurrentPPOUpdateAskedNameToOrgNameMap[c])&&(f=a.g_CurrentPPOUpdateAskedNameToOrgNameMap[c],a.isDefined(f))){var n="";for(n in f)if(a.isDefined(a.g_PPOList)&&a.isDefined(a.g_PPOList[n])&&(g=a.g_PPOList[n].format,"string"===g.toLowerCase())){b=
parseInt(c.replace(/[^0-9\.]/g,""),10);isNaN(b)&&(b=0);d=parseInt(a.g_PPOList[n].max,10);isNaN(d)&&(d=a.WAGOSTRDEFAULTLENGT);d>a.WAGOSTRMAXLENGT&&(d=a.WAGOSTRMAXLENGT);break}}f=e[c];if("string"===g.toLowerCase()&&0<d){f="";for(g=d/4;4*g<d;)g++;for(d=0;d<g;d++)if(n="MD"+(d+b).toString(),void 0!=e[n]&&(n=parseInt(e[n]),!isNaN(n)&&0<n)){if(0==(n&255))break;f+=String.fromCharCode(n&255);if(0==(n>>8&255))break;f+=String.fromCharCode(n>>8&255);if(0==(n>>16&255))break;f+=String.fromCharCode(n>>16&255);if(0==
(n>>24&255))break;f+=String.fromCharCode(n>>24&255)}}a.sl_updatePPOList(c,f)}}a.scheduleRepaint();a.scheduleOnlineTrendRefresh()}0==a.OrderValReadFilesPending&&!0===a.RefreshCGIPending&&(a.RefreshCGIPending=!1,a.ViewList.doViewGainIfRequired());a.Link.cgiFailConsecutive=0}function e(){a.OrderValReadFilesPending--;0==a.OrderValReadFilesPending&&!0===a.RefreshCGIPending&&(a.RefreshCGIPending=!1,a.ViewList.doViewGainIfRequired())}function f(b,c,d){a.g_ConnectFail=1;null!==a.g_WriteValWorker&&void 0!==
a.g_WriteValWorker&&1===a.g_WriteValWorkerUse&&(a.log_append_ln("OrderValReadFile connection error so sc.g_WriteValWorker is now terminated and will be renewed when needed current sc.g_WriteValWorkerPendingWriteValsListSize = "+a.g_WriteValWorkerPendingWriteValsListSize),a.g_WriteValWorker.terminate(),a.g_WriteValWorker=null,a.g_WriteValWorkerIsInit=0,a.g_WriteValWorkerPendingWriteValsListSize=0);a.log_append_ln("on_OrderValReadFile_Error("+b+" , "+c+" , "+d+")");a.scheduleRepaint();a.Link.cgiFailConsecutive++;
a.Link.cgiFailConsecutive>=a.Link.cgiFailMax&&(a.err_append_ln("ERROR Failed to update PPOs!"),a.Link.cgiFailConsecutive=0);0==a.OrderValReadFilesPending&&!0===a.RefreshCGIPending&&(a.RefreshCGIPending=!1,a.ViewList.doViewGainIfRequired())}function c(a,b,c,d,e){e.content="";b=a.indexOf(c,b);if(-1==b)return-1;b+=c.length;if(b>=a.length)return-1;c=a.indexOf(d,b);if(-1==c)return-1;e.content=a.substring(b,c);c+=d.length;return c>=a.length?-1:c}function n(b,c,d){a.log_append_ln("on_CodeSysV2ReadValues_Error("+
b+" , "+c+" , "+d+")");a.g_ConnectFail=1;a.scheduleRepaint();a.Link.cgiFailConsecutive++;a.Link.cgiFailConsecutive>=a.Link.cgiFailMax&&(a.err_append_ln("CodeSysV2: ERROR, Failed to update PPOs!"),a.Link.cgiFailConsecutive=0);a.RefreshCGIPending=!1}function k(){a.RefreshCGIPending=!1}function w(b){a.g_ConnectFail=0;3<=a.getDebugLevel()&&(u=a.getTimestamp_ms(),v=u-t,a.log_append_ln("ILRStop: "+v));if(b!==a.PreviousILR||!0===a.FullRedraw){var c=b;var d;var e=new Uint8Array(c.length);for(d=0;d<c.length;d++)e[d]=
c.charCodeAt(d);c="";for(d=0;d<e.length;d++)c+=String.fromCharCode(e[d]);e=c.split("|");if(!(2>=e.length))for(e.splice(0,1),e.splice(e.length-1,1),c=0;c<e.length;c++)a.g_CurrentPPOUpdateAskedNameToOrgNameMap[Object.keys(a.g_CurrentPPOUpdateAskedNameToOrgNameMap)[c]].value=e[c];a.scheduleRepaint();a.scheduleOnlineTrendRefresh()}a.ViewList.doViewGainIfRequired();a.PreviousILR=b;a.RefreshCGIPending=!1;a.Link.cgiFailConsecutive=0}function m(b){a.g_ConnectFail=0;3<=a.getDebugLevel()&&(u=a.getTimestamp_ms(),
v=u-t,a.log_append_ln("ILRStop: "+v));if(b!==a.PreviousILR||!0===a.FullRedraw){var d={content:""},e=0;do if(e=c(b,e,"<i>","</i>",d),""!==d.content){var f=d.content;c(f,0,"<n>","</n>",d);if(""!==d.content){var g=d.content;c(f,0,"<v>","</v>",d);f=d.content;a.sl_updatePPOList(g,f)}}while(-1!==e);a.scheduleRepaint();a.scheduleOnlineTrendRefresh()}a.ViewList.doViewGainIfRequired();a.PreviousILR=b;a.RefreshCGIPending=!1;a.Link.cgiFailConsecutive=0}function p(b){var c="cgi-bin/ILRReadValues"+a.getSrvExt();
null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(c=a.cgiHost+"cgi-bin/ILRReadValues"+a.getSrvExt());a.RefreshCGIPending=!0;2<=a.getDebugLevel()&&a.log_append_ln(" send_AsynchILRReadValues url = "+c);$.ajax({url:c,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?b.overrideMimeType("text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR):!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},global:!1,cache:!1,type:"POST",contentType:"text/xml",data:b,dataType:"text",timeout:a.AjaxTimeout,
async:!0,complete:r,success:m,error:q})}function r(){a.RefreshCGIPending=!1}function q(b,c,d){a.g_ConnectFail=1;null!==a.g_WriteValWorker&&void 0!==a.g_WriteValWorker&&1===a.g_WriteValWorkerUse&&(a.log_append_ln("ILRReadValues connection error so sc.g_WriteValWorker is now terminated and will be renewed when needed current sc.g_WriteValWorkerPendingWriteValsListSize = "+a.g_WriteValWorkerPendingWriteValsListSize),a.g_WriteValWorker.terminate(),a.g_WriteValWorker=null,a.g_WriteValWorkerIsInit=0,a.g_WriteValWorkerPendingWriteValsListSize=
0);a.scheduleRepaint();a.Link.cgiFailConsecutive++;a.Link.cgiFailConsecutive>=a.Link.cgiFailMax&&(a.err_append_ln("ERROR Failed to update PPOs!"),a.Link.cgiFailConsecutive=0);a.RefreshCGIPending=!1}function y(b){var c=0,d=0,e;a.g_ConnectFail=0;if(0<b.length){var f=b.split("\n");for(e=0;e<f.length;e++)if(a.prefixicmp("#",f[e])){var g=f[e].search("N =");-1<g&&(g=f[e].substring(g,f[e].length).split(" = "),1<g.length&&(g=parseInt(g[1],10),isNaN(g)||void 0===g||(c=g)))}else{var n=f[e].split("=");2==n.length&&
(g=n[0],n=n[1].trim(),""!==g||void 0!==n)&&((a.sl_updatePPOListByName(g,n)||!0===a.FullRedraw)&&a.scheduleRepaint(),d++)}b===a.PreviousILR&&!0!==a.FullRedraw||a.scheduleOnlineTrendRefresh()}c!=d&&a.err_append_ln("Shoud have "+c+" PPO's on server but found "+d+"!");a.ViewList.doViewGainIfRequired();a.PreviousILR=b}a.GETSRVINFO_CGISTR="cgi-bin/GetSrvInfo.exe";a.LSWEBSERVERINFONAMESTARTSTR="Server:";a.LSWEBSERVERINFOLSSRVACTIVSTARTSTR="LSWEBSERVER=1";a.LSWEBSERVERINFOCGIACTIVSTARTSTR="CGI=1";a.LSWEBSERVERINFOILRACTIVSTARTSTR=
"ILR=1";a.LSWEBSERVERINFOTRDACTIVSTARTSTR="TRD=1";a.LSWEBSERVERINFOALRACTIVSTARTSTR="ALR=1";a.LSWEBSERVERINFOALR2ACTIVSTARTSTR="ALR2=1";a.LSWEBSERVERINFOTRD2ACTIVSTARTSTR="TRD2=1";a.LSWEBSERVERINFOSEPSTR=",";a.LSWEBSERVERINFOVERSIONSTARTSTR="V.";a.LSWEBSERVERINFOILR2ACTIVSTARTSTR="ILR2=1";a.LSWEBSERVERINFOILR3ACTIVSTARTSTR="ILR3=1";a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR="charset=utf-8";a.RefreshCGIPending=!1;a.OrderValReadFilesPending=0;a.AjaxTimeout=1E4;a.PreviousILR=null;a.Link={xmlsrvinfo:!1,SrvInfo_Name:"",
SrvInfo_LSSrvActiv:!1,SrvInfo_LSSrvVersion:0,SrvInfo_UTF8Activ:!1,SrvInfo_CGIActiv:!0,SrvInfo_CGIVersion:1,SrvInfo_ILRActiv:!1,SrvInfo_ILRVersion:0,SrvInfo_ILR2Activ:!1,SrvInfo_ILR2Version:0,SrvInfo_ILR3Activ:!1,SrvInfo_ILR3Version:0,SrvInfo_TRDActiv:!1,SrvInfo_TRDVersion:0,SrvInfo_ALRActiv:!1,SrvInfo_ALRVersion:0,SrvInfo_ALR2Activ:!1,SrvInfo_ALR2Version:0,SrvInfo_TRD2Activ:!1,SrvInfo_TRD2Version:0,cgibinsrvinfo:!1,cgiArr:null,cgiFailMax:1,cgiFailConsecutive:0,cgiOverrideMimetypeFlag:!0,cgiOverrideMimeTypeFunction:function(a){a.overrideMimeType("text/csv;charset=ISO-8859-1")}};
var t=0,u=0,v=0;a.getSrvExt=function(){var b=".exe";!0===a.Link.SrvInfo_ILR3Activ&&(b=".cgi");return b};a.loadSrvXML=function(){$.ajax({type:"GET",global:!1,async:!1,cache:!0,beforeSend:function(b){!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},url:"getsrvinfo.xml",dataType:"xml",timeout:a.AjaxTimeout,complete:function(){},success:function(b){a.Link.cgibinsrvinfo=!0;$(b).find("websrv > servicelist > service").each(function(){a.log_append_ln($(this).attr("name"));$(this).find("url").each(function(){a.log_append_ln($(this).text())})})},
error:function(){a.Link.cgibinsrvinfo=!0}});return a.Link.xmlsrvinfo};a.dontNeedEncoding=function(a){a=parseInt(a,10);return 97<=a&&122>=a||65<=a&&90>=a||48<=a&&57>=a||45==a||95==a||46==a||42==a?!0:!1};a.encode=function(b){b=String(b);a.Link.SrvInfo_UTF8Activ&&(b=unescape(encodeURIComponent(b)));return a.urlEncode(b)};a.urlEncode=function(b){var c="",d;b=String(b);for(d=0;d<b.length;d++){var e=parseInt(b.charCodeAt(d),10);var f=0>e?!0:a.dontNeedEncoding(e)?!1:!0;!1===f?c+=b.charAt(d):(c+="%",c+=e.toString(16))}return c};
a.loadData=function(b,c,d){var e="";a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?(e=b,null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(e=a.cgiHost+b)):(e="cgi-bin/"+b,null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(e=a.cgiHost+"cgi-bin/"+b));null!==b&&(2<=a.getDebugLevel()&&a.log_append_ln(" sc.loadData cgi call url = "+e),$.ajax({type:"GET",global:!1,beforeSend:function(b){!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},async:d,cache:!0,url:e,dataType:"text",
timeout:a.AjaxTimeout,complete:function(){},success:function(a){void 0!==c&&null!==c&&c(a)},error:function(c,d,e){a.err_append_ln("HTTP CGI error (loadData, "+b+"): "+c.status+" "+d+" "+e)}}))};a.userCGIAction=function(b){var c=null,d=b;null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(d=a.cgiHost+b);null!==b&&(2<=a.getDebugLevel()&&a.log_append_ln(" sc.userCGIAction cgi call url = "+d),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?b.overrideMimeType("text/csv;charset="+
a.UNICODEFILE_UTF8_ENCODINGSTR):!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,cache:!0,url:d,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(b){a.g_ConnectFail=0;c=b},error:function(d,e,f){a.g_ConnectFail=1;null!==a.g_WriteValWorker&&void 0!==a.g_WriteValWorker&&1===a.g_WriteValWorkerUse&&(a.log_append_ln("sc.userCGIAction connection error so sc.g_WriteValWorker is now terminated and will be renewed when needed current sc.g_WriteValWorkerPendingWriteValsListSize = "+
a.g_WriteValWorkerPendingWriteValsListSize),a.g_WriteValWorker.terminate(),a.g_WriteValWorker=null,a.g_WriteValWorkerIsInit=0,a.g_WriteValWorkerPendingWriteValsListSize=0);a.err_append_ln("HTTP CGI error (loadGeneralCGI, "+b+"): "+d.status+" "+e+" "+f);c=null}}));return c};a.loadGeneralCGI=function(b){var c="";a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC?(c=b,null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(c=a.cgiHost+b)):(c="cgi-bin/"+b,null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&
(c=a.cgiHost+"cgi-bin/"+b));var d=null;null!==b&&(2<=a.getDebugLevel()&&a.log_append_ln(" sc.loadGeneralCGI cgi call url = "+c),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?b.overrideMimeType("text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR):!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,cache:!0,url:c,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(b){a.g_ConnectFail=0;d=b},error:function(c,e,f){a.g_ConnectFail=
1;null!==a.g_WriteValWorker&&void 0!==a.g_WriteValWorker&&1===a.g_WriteValWorkerUse&&(a.log_append_ln("loadGeneralCGI connection error so sc.g_WriteValWorker is now terminated and will be renewed when needed current sc.g_WriteValWorkerPendingWriteValsListSize = "+a.g_WriteValWorkerPendingWriteValsListSize),a.g_WriteValWorker.terminate(),a.g_WriteValWorker=null,a.g_WriteValWorkerIsInit=0,a.g_WriteValWorkerPendingWriteValsListSize=0);a.err_append_ln("HTTP CGI error (loadGeneralCGI, "+b+"): "+c.status+
" "+e+" "+f);d=null}}));return d};a.loadFileSource=function(b){var c=null;null!==b&&$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?b.overrideMimeType("text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR):!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,cache:!0,url:b,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(a){c=a},error:function(d,e,f){a.err_append_ln("File Not Found! '"+b+"' (HTTP Status Code: '"+
d.status+"')");c=null}});return c};a.loadSrvInfoCGI=function(){try{var b=a.GETSRVINFO_CGISTR;null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(b=a.cgiHost+a.GETSRVINFO_CGISTR);2<=a.getDebugLevel()&&a.log_append_ln("sc.loadSrvInfoCGI  cgi call url = "+b);$.ajax({type:"GET",global:!1,beforeSend:function(b){!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,cache:!0,url:b,dataType:"text",timeout:a.AjaxTimeout,complete:function(){},success:function(b){2<=a.getDebugLevel()&&
a.log_append_ln("loadSrvInfoCGI() GetSrvInfo cgi returned = "+b);a.Link.cgiArr=a.parseCGI_CSV_Content(b);var c=b=0,d="",e=0,f="";try{if(null!==a.Link.cgiArr)for(c=a.Link.cgiArr.length,b=0;b<c;b++)if(e=0,f="",d=a.Link.cgiArr[b][0],0<=d.indexOf(a.LSWEBSERVERINFONAMESTARTSTR))try{a.Link.SrvInfo_Name=d.substring(a.LSWEBSERVERINFONAMESTARTSTR.length),a.Link.SrvInfo_Name=a.Link.SrvInfo_Name.trim()}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets Server name Info : "+F)}else if(0<=d.indexOf(a.LSWEBSERVERINFOLSSRVACTIVSTARTSTR)){a.Link.SrvInfo_LSSrvActiv=
!0;try{e=d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOLSSRVACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_LSSrvVersion=parseFloat(f),isNaN(a.Link.SrvInfo_LSSrvVersion)&&(a.Link.SrvInfo_LSSrvVersion=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_LSSrvVersion Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOCGIACTIVSTARTSTR)){a.Link.SrvInfo_CGIActiv=!0;try{e=d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,
a.LSWEBSERVERINFOCGIACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_CGIVersion=parseFloat(f),isNaN(a.Link.SrvInfo_CGIVersion)&&(a.Link.SrvInfo_CGIVersion=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_CGIVersion Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOILRACTIVSTARTSTR)){a.Link.SrvInfo_ILRActiv=!0;0<d.indexOf(a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR)&&(a.Link.SrvInfo_UTF8Activ=!0);try{e=d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,
a.LSWEBSERVERINFOILRACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_ILRVersion=parseFloat(f),isNaN(a.Link.SrvInfo_ILRVersion)&&(a.Link.SrvInfo_ILRVersion=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ILRVersion Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOILR2ACTIVSTARTSTR)){a.Link.SrvInfo_ILR2Activ=!0;0<d.indexOf(a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR)&&(a.Link.SrvInfo_UTF8Activ=!0);try{e=
d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOILR2ACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_ILR2Version=parseFloat(f),isNaN(a.Link.SrvInfo_ILR2Version)&&(a.Link.SrvInfo_ILR2Version=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ILR2Version Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOILR3ACTIVSTARTSTR)){a.Link.SrvInfo_ILR3Activ=!0;0<d.indexOf(a.LSWEBSERVERINFOUTF8ACTIVSTARTSTR)&&
(a.Link.SrvInfo_UTF8Activ=!0);try{e=d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOILR3ACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_ILR3Version=parseFloat(f),isNaN(a.Link.SrvInfo_ILR3Version)&&(a.Link.SrvInfo_ILR3Version=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ILR3Version Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOALRACTIVSTARTSTR)){a.Link.SrvInfo_ALRActiv=!0;try{e=
d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOALRACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_ALRVersion=parseFloat(f),isNaN(a.Link.SrvInfo_ALRVersion)&&(a.Link.SrvInfo_ALRVersion=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ALRVersion Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOALR2ACTIVSTARTSTR)){a.Link.SrvInfo_ALR2Activ=!0;try{e=d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,
a.LSWEBSERVERINFOALR2ACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_ALR2Version=parseFloat(f),isNaN(a.Link.SrvInfo_ALR2Version)&&(a.Link.SrvInfo_ALR2Version=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_ALR2Version Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOTRDACTIVSTARTSTR)){a.Link.SrvInfo_TRDActiv=!0;try{e=d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOTRDACTIVSTARTSTR.length),
0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),f=f.trim(),0<f.length&&(a.Link.SrvInfo_TRDVersion=parseFloat(f),isNaN(a.Link.SrvInfo_TRDVersion)&&(a.Link.SrvInfo_TRDVersion=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_TRDVersion Info : "+F)}}else if(0<=d.indexOf(a.LSWEBSERVERINFOTRD2ACTIVSTARTSTR)){a.Link.SrvInfo_TRD2Activ=!0;try{e=d.indexOf(a.LSWEBSERVERINFOVERSIONSTARTSTR,a.LSWEBSERVERINFOTRD2ACTIVSTARTSTR.length),0<e&&(f=d.substring(e+a.LSWEBSERVERINFOVERSIONSTARTSTR.length),
f=f.trim(),0<f.length&&(a.Link.SrvInfo_TRD2Version=parseFloat(f),isNaN(a.Link.SrvInfo_TRD2Version)&&(a.Link.SrvInfo_TRD2Version=0)))}catch(F){a.log_append_ln("Error in parseGetSrvInfo() while gets SrvInfo_TRD2Version Info : "+F)}}}catch(F){a.log_append_ln("Error in parseGetSrvInfo() : "+F)}a.Link.cgibinsrvinfo=!0},error:function(){a.Link.cgibinsrvinfo=!1}})}catch(A){a.log_append_ln("Error in loadSrvInfoCGI(): "+A)}2<=a.getDebugLevel()&&(a.log_append_ln("After loadSrvInfoCGI(): sc.Link.xmlsrvinfo = "+
a.Link.xmlsrvinfo),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.cgibinsrvinfo = "+a.Link.cgibinsrvinfo),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_Name = "+a.Link.SrvInfo_Name),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_LSSrvActiv = "+a.Link.SrvInfo_LSSrvActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_LSSrvVersion = "+a.Link.SrvInfo_LSSrvVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_UTF8Activ = "+a.Link.SrvInfo_UTF8Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_CGIActiv = "+
a.Link.SrvInfo_CGIActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_CGIVersion = "+a.Link.SrvInfo_CGIVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILRActiv = "+a.Link.SrvInfo_ILRActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILRVersion = "+a.Link.SrvInfo_ILRVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR2Activ = "+a.Link.SrvInfo_ILR2Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR2Version = "+a.Link.SrvInfo_ILR2Version),
a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR3Activ = "+a.Link.SrvInfo_ILR3Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ILR3Version = "+a.Link.SrvInfo_ILR3Version),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRDActiv = "+a.Link.SrvInfo_TRDActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRDVersion = "+a.Link.SrvInfo_TRDVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALRActiv = "+a.Link.SrvInfo_ALRActiv),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALRVersion = "+
a.Link.SrvInfo_ALRVersion),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALR2Activ = "+a.Link.SrvInfo_ALR2Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_ALR2Version = "+a.Link.SrvInfo_ALR2Version),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRD2Activ = "+a.Link.SrvInfo_TRD2Activ),a.log_append_ln("After loadSrvInfoCGI(): sc.Link.SrvInfo_TRD2Version = "+a.Link.SrvInfo_TRD2Version));return a.Link.cgibinsrvinfo};a.getServerInfo=function(){switch(a.TARGET_TYPE_NR){case a.TARGET_TYPE_PANASONIC:case a.TARGET_TYPE_WAGO:case a.TARGET_TYPE_CODESYSV2:break;
default:!1===a.Link.xmlsrvinfo?(a.loadSrvInfoCGI(),!1===a.Link.cgibinsrvinfo?a.log_append_ln("ERROR getServerInfo CGI failed."):a.log_append_ln("getServerInfo CGI made.")):a.log_append_ln("getServerInfo XML OK.")}};a.initSpiderLink=function(){var b="",c=-1;location?(a.host=location.origin,b=location.pathname):a.log_append_ln(" location urlOrigin is not supported by this browser.");var d=b;a.cgiHost=a.host;null!==d&&void 0!==d&&(c=d.lastIndexOf("/"));d=0<c?d.substring(0,c):"";a.host+=d;if(a.TARGET_TYPE_NR===
a.TARGET_TYPE_WAGO||a.TARGET_TYPE_NR===a.TARGET_TYPE_SAIA||a.HMI_CGI_RELATIVTOROOT===a.CGI_RELATIVTOROOT_DOCBASE)a.cgiHost=a.host;else{c=-1;d=b;null!==d&&void 0!==d&&(c=d.indexOf("/remote/",0));0<=c&&(c=d.indexOf("/",c+8));var e=0<c?d.indexOf("relay/",c):d.indexOf("relay/",0);0<e&&(e=d.indexOf("/",e+6));e>c?a.cgiHost+=d.substring(0,e):0<c?a.cgiHost+=d.substring(0,c):0<e&&(a.cgiHost+=d.substring(0,e))}a.HMI_CGI_RELATIVTOROOT&&void 0!=a.HMI_CGI_RELATIVTOROOT&&0<a.HMI_CGI_RELATIVTOROOT.length&&a.HMI_CGI_RELATIVTOROOT!=
a.CGI_RELATIVTOROOT_WEBROOT&&a.HMI_CGI_RELATIVTOROOT!=a.CGI_RELATIVTOROOT_DOCBASE&&a.HMI_CGI_RELATIVTOROOT!=a.CGI_RELATIVTOROOT_WEBROOT&&(null!==a.cgiHost&&void 0!==a.cgiHost&&a.cgiHost.lastIndexOf("/",a.cgiHost.length-1)!=a.cgiHost.length-1&&a.cgiHost.lastIndexOf("\\",a.cgiHost.length-1)!=a.cgiHost.length-1&&(a.cgiHost+="/"),a.cgiHost+=a.HMI_CGI_RELATIVTOROOT);null!==a.cgiHost&&void 0!==a.cgiHost&&a.cgiHost.lastIndexOf("/",a.cgiHost.length-1)!=a.cgiHost.length-1&&a.cgiHost.lastIndexOf("\\",a.cgiHost.length-
1)!=a.cgiHost.length-1&&(a.cgiHost+="/");a.log_append_ln("sc.initSpiderLink  docBaseFile = "+b);a.log_append_ln("sc.initSpiderLink  dir = "+d);a.log_append_ln("sc.initSpiderLink  sc.HMI_CGI_RELATIVTOROOT = "+a.HMI_CGI_RELATIVTOROOT);a.log_append_ln("sc.initSpiderLink  sc.host = "+a.host);a.log_append_ln("sc.initSpiderLink  sc.cgiHost = "+a.cgiHost);a.getServerInfo();if("undefined"!==typeof Worker){b="hmi_worker.js";a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&(b="archivereader?hmi_worker.js");try{var f=
new XMLHttpRequest;f.open("GET",b,!1);f.send();404!=f.status&&(a.g_WriteValWorkerUse=1)}catch(T){}}};a.sl_psc_writeValue=function(a,b){if(-1<=a.indexOf("_4109_%s")){var c=b.length;a=a.replace("_4109_%s","_"+(4096+c)+"_%s")}$.ajax({type:"POST",url:"plcpost",contentType:"text/xml",dataType:"text/xml",data:a+"="+b})};a.sl_writeCodesysV2Value=function(b,c){if(!a.isDefined(b)||!a.isDefined(c))return!1;var d=b.split(",");if(4!=d.length||"number"!==typeof parseInt(d[0])||"number"!==typeof parseInt(d[1])||
"number"!==typeof parseInt(d[2])||"number"!==typeof parseInt(d[3]))return!1;b="|1|1|0|"+b.replace(/,/g,"|")+"|"+c.toString()+"|";z(b,{method:"POST",asynch:!0,direction:"write"});return!0};a.sl_writeValue=function(b,c){var d="",e="";2<=a.getDebugLevel()&&(t=a.getTimestamp_ms());if(a.TARGET_TYPE_NR!==a.TARGET_TYPE_WAGO||h(a.encode(b)))if(a.TARGET_TYPE_NR===a.TARGET_TYPE_CODESYSV2)a.sl_writeCodesysV2Value(b,c);else if(a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC)d=a.sl_getPPOWriteAddress(b),a.isDefined(d)&&
0<d.length?a.sl_psc_writeValue(d,c):a.log_append_ln("ERROR sc.sl_writeValue can't find Panasonic Write address for "+b);else{!0===a.Link.SrvInfo_ILR3Activ?(d="cgi-bin/writeVal.cgi?"+a.encode(b)+"="+a.encode(c),null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(d=a.cgiHost+"cgi-bin/writeVal.cgi?"+a.encode(b)+"="+a.encode(c))):(d="cgi-bin/writeVal.exe?"+a.encode(b)+"+"+a.encode(c),null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(d=a.cgiHost+"cgi-bin/writeVal.exe?"+a.encode(b)+"+"+
a.encode(c)));a.Link.SrvInfo_UTF8Activ&&(e="text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR);2<=a.getDebugLevel()&&a.log_append_ln("sc.sl_writeValue( "+b+" , "+c+" ) \nrequestURLWriteVal =  "+d);if(null===a.g_WriteValWorker&&1===a.g_WriteValWorkerUse&&0===a.g_ConnectFail&&"undefined"!==typeof Worker){var f="hmi_worker.js";a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&(f="archivereader?hmi_worker.js");try{var g=new XMLHttpRequest;g.open("GET",f,!1);g.send();404!=g.status?a.g_WriteValWorker=new Worker(f):
a.log_append_ln(" sc.g_WriteValWorker null since hmi_worker.js not found ")}catch(F){a.log_append_ln(" sc.g_WriteValWorker null since error in hmi_worker.js loading err =  "+F)}}null!==a.g_WriteValWorker&&void 0!==a.g_WriteValWorker&&1===a.g_WriteValWorkerUse?(a.g_WriteValWorker.onerror=function(b){a.log_append_ln(" sc.g_WriteValWorker on error in ["+b.filename+"] line ["+b.lineno+"] error: [ "+b.message+" ]")},a.g_WriteValWorker.onmessage=function(b){b=b.data;if("isInit"===b.cmd){var c=b.value;c=
parseInt(c,10);!1===isNaN(c)&&(a.g_WriteValWorkerIsInit=c)}"writeVal"===b.cmd&&(c=b.ret,0<=c.indexOf("Done")&&(0<a.g_WriteValWorkerPendingWriteValsListSize&&a.g_WriteValWorkerPendingWriteValsListSize--,2<=a.getDebugLevel()&&0<=c.indexOf("succes")&&a.log_append_ln(" sc.g_WriteValWorker succes : "+c)),0<=c.indexOf("failed")&&(a.log_append_ln(" sc.g_WriteValWorker failed : "+c),a.log_append_ln(" sc.g_WriteValWorker is now terminated and will be renewed when needed current sc.g_WriteValWorkerPendingWriteValsListSize = "+
a.g_WriteValWorkerPendingWriteValsListSize),a.g_WriteValWorker.terminate(),a.g_WriteValWorker=null,a.g_WriteValWorkerIsInit=0,a.g_WriteValWorkerPendingWriteValsListSize=0,a.g_ConnectFail=1));2<=a.getDebugLevel()&&a.log_append_ln(" sc.g_WriteValWorker onmessage [ "+b.cmd+" , "+b.value+" ] sc.g_WriteValWorkerPendingWriteValsListSize = ["+a.g_WriteValWorkerPendingWriteValsListSize+"]")},2<=a.getDebugLevel()&&a.log_append_ln("sc.initSpiderLink sc.g_WriteValWorker = "+a.g_WriteValWorker)):0===a.g_WriteValWorkerUse&&
a.log_append_ln(" Browser does not supports the Worker api so the write val requests will be done in a Blocking way in GUI thread ");if(null!==a.g_WriteValWorker&&1===a.g_WriteValWorkerUse&&0===a.g_ConnectFail)try{1!==a.g_WriteValWorkerIsInit&&(a.g_WriteValWorker.postMessage({cmd:"init",ajaxTimeout:a.AjaxTimeout.toString()}),a.g_WriteValWorker.postMessage({cmd:"isInit"})),a.g_WriteValWorker.postMessage({cmd:"writeVal",requestURLWriteVal:d}),a.g_WriteValWorkerPendingWriteValsListSize++}catch(F){a.log_append_ln("Exception in sc.sl_writeValue( "+
b+" , "+c+" ) \nerr =  "+F)}else 0===a.g_WriteValWorkerUse&&(2<=a.getDebugLevel()&&a.log_append_ln(" sc.g_WriteValWorker null so the write val requests will be done in a Blocking way in GUI thread "),$.ajax({type:"GET",global:!1,beforeSend:function(b){a.Link.SrvInfo_UTF8Activ?b.overrideMimeType(e):!0===a.Link.cgiOverrideMimetypeFlag&&a.Link.cgiOverrideMimeTypeFunction(b)},async:!1,timeout:a.AjaxTimeout,cache:!0,url:d,dataType:"text",complete:function(){},success:function(d){a.g_ConnectFail=0;2<=a.getDebugLevel()&&
a.log_append_ln("Ajax succes for sc.sl_writeValue( "+b+" , "+c+" ) \ncgi returned = "+d)},error:function(){a.g_ConnectFail=1;a.log_append_ln("Ajax Error for sc.sl_writeValue( "+b+" , "+c+" ) ")}}))}else a.log_append_ln("ERROR sc.sl_writeValue the ppo to write address is not a valid WAGO Address for "+b)};var z=function(b,c){var d=!0,e="POST",f="read",g;a.isDefined(c)&&(a.isDefined(c.method)&&(e=c.method),a.isDefined(c.asynch)&&(d=c.asynch),a.isDefined(c.direction)&&(f=c.direction));!a.isDefined(a.cgiHost)||
0>=(g=a.cgiHost.length)?a.log_append_ln("CodeSysV2: Error sc.cgiHost not defined!"):(a.RefreshCGIPending=!0,2<=a.getDebugLevel()&&a.log_append_ln(" send POST to url = "+g),$.ajax({url:g,beforeSend:function(a){a.overrideMimeType("text/plain; charset=x-user-defined")},global:!1,cache:!1,type:e,contentType:"text/plain; charset=x-user-defined",data:b,dataType:"text",timeout:a.AjaxTimeout,async:d,complete:k,success:"read"==f?w:null,error:n}))};a.SL_refreshPPO=function(){var c;if(1===a.co_readSkipRefreshCO()||
!0===a.RefreshCGIPending)!0===a.FullRedraw&&a.scheduleRepaint();else if(a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC){var d=!1;a.RefreshCGIPending=!0;for(c=0;c<a.ViewList.getNumViews();c++)if(null!==a.ViewList.getViewByIndex(c).SVGPPOArray||0<a.g_OnlineTrendEmitter.length&&!1===a.stringcmp(a.ViewList.getViewByIndex(c).ViewName,a.MsgBox)){d=a.ViewList.getViewByIndex(c).ViewName;var e="/plc?"+d;a.TARGET_TYPE_NR===a.TARGET_TYPE_PANASONIC&&null!==a.cgiHost&&void 0!==a.cgiHost&&0<a.cgiHost.length&&(e=a.cgiHost+
"plc?"+d);$.ajax({url:e,type:"GET",cache:!0,global:!1,contentType:"text",dataType:"text",timeout:a.AjaxTimeout,async:!0,complete:r,success:y,error:q});d=!0}d||(a.RefreshCGIPending=!1,!0===a.FullRedraw&&a.scheduleRepaint())}else if(a.TARGET_TYPE_NR===a.TARGET_TYPE_CODESYSV2){c=0;d="";e=0;if(a.isDefined(a.g_PPOList))for(c in e=0,d="",a.g_PPOList){var f=a.getMergedExtendedPPOForPPOName(a.g_PPOList[c].name);a.isDefined(f)?a.g_PPOList[c].resolved=f.resolved:a.g_PPOList[c].resolved=a.rl_resolveInfoName(a.g_PPOList[c].address);
a.sl_isPPOScheduled(c)?(f=a.g_PPOList[c].resolved.split(","),4==f.length&&"number"===typeof parseInt(f[0])&&"number"===typeof parseInt(f[1])&&"number"===typeof parseInt(f[2])&&"number"===typeof parseInt(f[3])&&(f=a.g_PPOList[c].resolved,f=f.replace(/,/g,"|"),d+="|"+e.toString()+"|"+f,e++,a.isDefined(a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[c].name])||(a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[c].name]=a.g_PPOList[c]))):delete a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[c].name]}c=
0<e?"|0|"+e.toString()+d+"|":d;""===c?!0===a.FullRedraw&&a.scheduleRepaint():z(c,{method:"POST",asynch:!0,direction:"read"})}else if(!0===a.Link.SrvInfo_ILRActiv||!0===a.Link.SrvInfo_ILR2Activ||!0===a.Link.SrvInfo_ILR3Activ){e="";d=0;f="";if(a.isDefined(a.g_PPOList)){c="";for(orderedNamei in a.g_CurrentPPOUpdateAskedNameToOrgNameMap){var n=a.g_CurrentPPOUpdateAskedNameToOrgNameMap[orderedNamei];if(a.isDefined(n))for(orgNamej in n)delete n[orgNamej]}for(f in a.g_PPOList)a.sl_isPPOScheduled(f)&&(n=
a.getMergedExtendedPPOForPPOName(a.g_PPOList[f].name),a.isDefined(n)?a.g_PPOList[f].resolved=n.resolved:a.g_PPOList[f].resolved=a.rl_resolveInfoName(a.g_PPOList[f].address),c+="<i><n>"+a.g_PPOList[f].resolved+"</n></i>",d++,void 0===a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[f].resolved]&&(n={},a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[f].resolved]=n),void 0!==a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[f].resolved]&&(n=a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[f].resolved],
void 0===n[a.g_PPOList[f].name]&&(n[a.g_PPOList[f].name]=a.g_PPOList[f].name)));0<d&&(e="<body><version>"+a.ILR_VERSION+"</version>",e+="<client>"+a.CLIENT+"</client><client_ver>"+a.HMI_VERSION+"</client_ver>",e=e+"<file_name>vRhz1</file_name><action>Read</action>"+("<item_list_size>"+d+"</item_list_size><item_list>")+c+"</item_list></body>")}c=e;""===c?!0===a.FullRedraw&&a.scheduleRepaint():p(c)}else{2<=a.getDebugLevel()&&a.log_append_ln(" SL_refreshPPO with default orderValReadfile API ");c=0;e=
d="";f=0;var k=n="";if(a.isDefined(a.g_PPOList)){items="";for(n in a.g_CurrentPPOUpdateAskedNameToOrgNameMap){var m=a.g_CurrentPPOUpdateAskedNameToOrgNameMap[n];if(a.isDefined(m))for(k in m)delete m[k]}for(e in a.g_PPOList)if(a.sl_isPPOScheduled(e)){n=0;k=a.getMergedExtendedPPOForPPOName(a.g_PPOList[e].name);a.isDefined(k)?a.g_PPOList[e].resolved=k.resolved:a.g_PPOList[e].resolved=a.rl_resolveInfoName(a.g_PPOList[e].address);if(a.TARGET_TYPE_NR===a.TARGET_TYPE_WAGO&&h(a.encode(a.g_PPOList[e].resolved))||
a.TARGET_TYPE_NR!==a.TARGET_TYPE_WAGO)if(0>=d.length&&(a.isDefined(a.cgiHost)&&0<a.cgiHost.length&&(d=a.cgiHost),d+="cgi-bin/OrderValues"+a.getSrvExt()+"?"+a.cgiOrderFileRandomStr+"_"+c.toString()+"+dummy+200"),m=!1,a.TARGET_TYPE_NR===a.TARGET_TYPE_WAGO&&(a.isDefined(k)?"string"===k.format.toLowerCase()&&a.isDefined(k.max)&&0<k.max.length&&a.prefixicmp("MD",a.g_PPOList[e].resolved)&&(m=!0):"string"===a.g_PPOList[e].format.toLowerCase()&&a.isDefined(a.g_PPOList[e].max)&&0<a.g_PPOList[e].max.length&&
a.prefixicmp("MD",a.g_PPOList[e].resolved)&&(m=!0)),m&&(f=parseInt(a.g_PPOList[e].resolved.replace(/[^0-9\.]/g,""),10),isNaN(f)&&(f=0),n=a.isDefined(k)?parseInt(k.max,10):parseInt(a.g_PPOList[e].max,10),isNaN(n)&&(n=a.WAGOSTRDEFAULTLENGT),n>a.WAGOSTRMAXLENGT&&(n=a.WAGOSTRMAXLENGT)),0<n){for(k=n/4;4*k<n;)k++;for(n=0;n<k;n++)m="MD"+(n+f).toString(),d.length+1+a.encode(m).length<a.cgiOrderListMaxSize?d+="+"+a.encode(m):(g(d),c++,a.isDefined(a.cgiHost)&&0<a.cgiHost.length&&(d=a.cgiHost),d+="cgi-bin/OrderValues"+
a.getSrvExt()+"?"+a.cgiOrderFileRandomStr+"_"+c.toString()+"+dummy+200+"+a.encode(m))}else d.length+1+a.encode(a.g_PPOList[e].resolved).length<a.cgiOrderListMaxSize?d+="+"+a.encode(a.g_PPOList[e].resolved):(g(d),c++,a.isDefined(a.cgiHost)&&0<a.cgiHost.length&&(d=a.cgiHost),d+="cgi-bin/OrderValues"+a.getSrvExt()+"?"+a.cgiOrderFileRandomStr+"_"+c.toString()+"+dummy+200+"+a.encode(a.g_PPOList[e].resolved));void 0===a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[e].resolved]&&(m={},a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[e].resolved]=
m);void 0!==a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[e].resolved]&&(m=a.g_CurrentPPOUpdateAskedNameToOrgNameMap[a.g_PPOList[e].resolved],void 0===m[a.g_PPOList[e].name]&&(m[a.g_PPOList[e].name]=a.g_PPOList[e].name))}a.isDefined(d)&&0<d.length&&(g(d),c++)}0>=c?(!0===a.FullRedraw&&a.scheduleRepaint(),a.RefreshCGIPending=!1,a.ViewList.doViewGainIfRequired()):b(c)}};return a}(_SCIntern||{});_SCIntern=function(a){a.Sha256_hash=function(h){h=h.utf8Encode();var g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,
2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],b=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];h+=String.fromCharCode(128);for(var d=Math.ceil((h.length/4+2)/16),e=Array(d),f=0;f<d;f++){e[f]=Array(16);for(var c=0;16>c;c++)e[f][c]=h.charCodeAt(64*
f+4*c)<<24|h.charCodeAt(64*f+4*c+1)<<16|h.charCodeAt(64*f+4*c+2)<<8|h.charCodeAt(64*f+4*c+3)}e[d-1][14]=8*(h.length-1)/Math.pow(2,32);e[d-1][14]=Math.floor(e[d-1][14]);e[d-1][15]=8*(h.length-1)&4294967295;h=Array(64);for(f=0;f<d;f++){for(var n=0;16>n;n++)h[n]=e[f][n];for(n=16;64>n;n++)h[n]=a.Sha256_sigma1(h[n-2])+h[n-7]+a.Sha256_sigma0(h[n-15])+h[n-16]&4294967295;c=b[0];var k=b[1];var w=b[2];var m=b[3];var p=b[4];var r=b[5];var q=b[6];var y=b[7];for(n=0;64>n;n++){var t=y+a.Sha256_Sigma1(p)+a.Sha256_Ch(p,
r,q)+g[n]+h[n],u=a.Sha256_Sigma0(c)+a.Sha256_Maj(c,k,w);y=q;q=r;r=p;p=m+t&4294967295;m=w;w=k;k=c;c=t+u&4294967295}b[0]=b[0]+c&4294967295;b[1]=b[1]+k&4294967295;b[2]=b[2]+w&4294967295;b[3]=b[3]+m&4294967295;b[4]=b[4]+p&4294967295;b[5]=b[5]+r&4294967295;b[6]=b[6]+q&4294967295;b[7]=b[7]+y&4294967295}g=a.Sha256_toHexStr(b[0]);d=a.Sha256_toHexStr(b[1]);e=a.Sha256_toHexStr(b[2]);f=a.Sha256_toHexStr(b[3]);h=a.Sha256_toHexStr(b[4]);c=a.Sha256_toHexStr(b[5]);k=a.Sha256_toHexStr(b[6]);b=a.Sha256_toHexStr(b[7]);
return g+d+e+f+h+c+k+b};a.Sha256_ROTR=function(a,g){return g>>>a|g<<32-a};a.Sha256_Sigma0=function(h){var g=a.Sha256_ROTR(2,h),b=a.Sha256_ROTR(13,h);h=a.Sha256_ROTR(22,h);return g^b^h};a.Sha256_Sigma1=function(h){var g=a.Sha256_ROTR(6,h),b=a.Sha256_ROTR(11,h);h=a.Sha256_ROTR(25,h);return g^b^h};a.Sha256_sigma0=function(h){var g=a.Sha256_ROTR(7,h),b=a.Sha256_ROTR(18,h);return g^b^h>>>3};a.Sha256_sigma1=function(h){var g=a.Sha256_ROTR(17,h),b=a.Sha256_ROTR(19,h);return g^b^h>>>10};a.Sha256_Ch=function(a,
g,b){return a&g^~a&b};a.Sha256_Maj=function(a,g,b){return a&g^a&b^g&b};a.Sha256_toHexStr=function(a){for(var g="",b,d=7;0<=d;d--)b=a>>>4*d&15,g+=b.toString(16);return g=g.toUpperCase()};"undefined"==typeof String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))});"undefined"==typeof String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(h){return this}});a.ACT_executeAction=function(h,
g,b,d,e){var f=0;f=0;var c="",n="",k=0;null!==g&&null!==b&&(f=a.RW_readSource(g,b));switch(h){case 14:k=function(a){for(var b=0;a%1;)a*=10,b++;return b};f=parseFloat(f);!0===isNaN(f)&&(f=0);null!==d&&null!==e&&(n=a.RW_readSource(d,e),n=parseFloat(n));!0===isNaN(n)&&(n=0);c=k(n);k=k(f);c=(n+f).toFixed(c>k?c:k);a.RW_writeSource(d,e,c.toString());break;case 17:a.log_append_ln("todo REMOVESOURCEFROMDEST");break;case 18:f=parseInt(f,10);if(!0!==isNaN(f))for(n=String(a.RW_readSource(d,e)),n=n.split(/\\n/),
k=0;k<n.length;k++)!0===a.prefixicmp(a.FVLINESPECLINESTARTSTR,n[k])&&f++,f!==k&&(c+=n[k],k<n.length-1&&(c+=a.FVLINESEPTOKEN2));a.RW_writeSource(d,e,c);break;case 40:f=parseInt(f,10);!0===isNaN(f)&&(f=0);a.Sleep(f);break;case 202:a.closeMsgBox();break;default:a.log_append_ln("Unkown action id: "+h)}};a.ACT_executeOperation=function(h,g,b,d,e,f,c,n,k,w){var m=null,p=null,r=null,q=null,y=!1,t=0,u=0;try{var v=null;if(void 0!==h&&null!==h&&void 0!==g&&null!==g&&void 0!==b&&null!==b&&void 0!==d&&null!==
d){r=a.RW_readSource(h,g);void 0!==e&&null!==e&&void 0!==f&&null!==f&&(m=a.RW_readSource(e,f));void 0!==c&&null!==c&&void 0!==n&&null!==n&&(p=a.RW_readSource(c,n));void 0!==k&&null!==k&&void 0!==w&&null!==w&&a.RW_readSource(k,w);if("+"==r&&null!==m&&null!==p)q=parseFloat(m)+parseFloat(p);else if("-"==r&&null!==m&&null!==p)q=parseFloat(m)-parseFloat(p);else if("*"==r&&null!==p)q=parseFloat(m)*parseFloat(p);else if("/"==r&&null!==m&&null!==p)0!==parseFloat(p)&&(q=parseFloat(m)/parseFloat(p));else if("%"==
r&&null!==m&&null!==p)0!==parseFloat(p)&&(q=parseFloat(m)%parseFloat(p));else if(a.stringcmp("ADD",r)&&null!==m&&null!==p)y=!0,q=parseInt(m,10)+parseInt(p,10);else if(a.stringcmp("SUB",r)&&null!==m&&null!==p)y=!0,q=parseInt(m,10)-parseInt(p,10);else if(a.stringcmp("MULT",r)&&null!==m&&null!==p)y=!0,q=parseInt(m,10)*parseInt(p,10);else if(a.stringcmp("DIV",r)&&null!==m&&null!==p)y=!0,0!==parseInt(p,10)&&(q=parseInt(m,10)/parseInt(p,10));else if(a.stringcmp("AND",r)&&null!==m&&null!==p)q=m&p;else if(a.stringcmp("OR",
r)&&null!==m&&null!==p)q=m|p;else if(a.stringcmp("XOR",r)&&null!==m&&null!==p)q=m^p;else if(a.stringcmp("NAND",r)&&null!==m&&null!==p)q=!(m&p);else if(a.stringcmp("NOR",r)&&null!==m&&null!==p)q=!(m|p);else if(a.stringcmp("XNOR",r)&&null!==m&&null!==p)q=!(m^p);else if(a.stringcmp("NOT",r)&&null!==m)q=~m;else if(a.stringcmp("LSL",r)&&null!==m&&null!==p)q=m>>>0<<(p>>>0),q>>>=0;else if(a.stringcmp("LSR",r)&&null!==m&&null!==p)a.log_append_ln("ERROR LSR Operation not implemented in HTML5 !");else if(a.stringcmp("ASR",
r)&&null!==m&&null!==p)q=m>>(p>>>0);else if(a.stringcmp(r,"STRLEN")&&null!==m)q=m.length;else if(a.stringcmp(r,"GETCHAR2STR")&&null!==m&&null!==p)q=m[parseInt(p,10)];else if(a.stringcmp(r,"GETCHAR2INT")&&null!==m&&null!==p)y=!0,q=m[parseInt(p,10)].charCodeAt(0);else if(a.stringcmp(r,"GETINDEXOF")&&null!==m&&null!==p)y=!0,q=m.indexOf(p);else if(a.stringcmp(r,"SIN")&&null!==m)q=Math.sin(m);else if(a.stringcmp(r,"COS")&&null!==m)q=Math.cos(m);else if(a.stringcmp(r,"TAN")&&null!==m)q=Math.tan(m);else if(a.stringcmp(r,
"ASIN")&&null!==m)q=Math.asin(m);else if(a.stringcmp(r,"ACOS")&&null!==m)q=Math.acos(m);else if(a.stringcmp(r,"ATAN")&&null!==m)q=Math.atan(m);else if(a.stringcmp(r,"SINH")&&null!==m)q=Math.sinh(m);else if(a.stringcmp(r,"COSH")&&null!==m)q=Math.cosh(m);else if(a.stringcmp(r,"TANH")&&null!==m)q=Math.tanh(m);else if(a.stringcmp(r,"ASINH")&&null!==m)q=Math.asinh(m);else if(a.stringcmp(r,"ACOSH")&&null!==m)q=Math.acosh(m);else if(a.stringcmp(r,"ATANH")&&null!==m)q=Math.atanh(m);else if(a.stringcmp(r,
"SQRT")&&null!==m)q=Math.sqrt(m);else if(a.stringcmp(r,"EXP")&&null!==m)q=Math.exp(m);else if(a.stringcmp(r,"LOG")&&null!==m)q=Math.log(m);else if(a.stringcmp(r,"LOG10")&&null!==m)q=Math.log10(m);else if(a.stringcmp("POW",r)&&null!==m&&null!==p)q=Math.pow(m,p);else if(a.stringcmp("CONVERT_UTS2TXT",r)&&null!==p)q="";else if(a.stringcmp("CONVERT_TXT2UTS",r)&&null!==p)q="";else if(a.stringcmp("UTS2TXT",r)&&null!==m){null===p&&(p=a.readDateTimeFormat());var z=parseInt(m,10);!1===isNaN(z)&&(q=a.DateTime_ReadDT(p,
a.SpecialCO.dateTimeLocalNow.name,!a.SpecialCO.mbTmzEn.value,new Date(1E3*z),null,!0))}else a.stringcmp("TXT2UTS",r)&&null!==m?(null===p&&(p=a.readDateTimeFormat()),q=a.DateTime_ReadDT(p,a.SpecialCO.dateTimeLocalNow.name,!a.SpecialCO.mbTmzEn.value,null,m,!0)):a.stringcmp("SHA256",r)&&null!==m?q=a.Sha256_hash(m):a.stringcmp("BASE64ENC",r)&&null!==m?q=a.Base64.encode(m):a.stringcmp("BASE64HENC",r)&&null!==m?(h={buffer:"",nByte:0},a.str_ascii2byte(m,h),0<h.nByte&&(q=a.Base64.encode(h.Buffer))):a.stringcmp("BASE64DEC",
r)&&null!==m?q=a.Base64.decode(m):a.stringcmp("BSET",r)&&null!==m?(q="",u=parseInt(m),t=a.RW_readSource(b,d),t=parseInt(t,10),q=a.BIT_setBit(t,u)):a.stringcmp("BCLR",r)&&null!==m&&(q="",u=parseInt(m),t=a.RW_readSource(b,d),t=parseInt(t,10),q=a.BIT_clearBit(t,u));null!==q&&!1===isNaN(q)?!0===y?(q=parseInt(q,10),a.RW_writeSource(b,d,q)):!1===isNaN(q)&&(v=parseFloat(q),isNaN(v)||(q=a.toFixed(v,6)),a.RW_writeSource(b,d,q)):null!==q&&!0===isNaN(q)&&a.RW_writeSource(b,d,q)}}catch(x){b="hmi.js/sc.ACT_executeOperationThere was an error on this page.\n\n"+
("Error description: "+x.message+"\n\n"),b+="Click OK to continue.\n\n",1<=a.getDebugLevel()&&window.alert(b)}};return a}(_SCIntern||{});_SCIntern=function(a){function h(b,d){var e=new XMLHttpRequest;e.open("GET",b,!0);e.responseType="arraybuffer";e.onreadystatechange=function(){e.readyState==e.DONE&&(200==e.status&&e.response?(2<=a.getDebugLevel()&&a.log_append_ln(" getServerTCRFileToArrayBuffer downloaded : "+b+"\n xhr.status "+e.status+"\n xhr.statusText "+e.statusText),d(e.response)):(a.log_append_ln(" getServerTCRFileToArrayBuffer Failed to download: "+b+"\n xhr.status "+e.status+"\n xhr.statusText "+e.statusText),d(null)))};
e.send()}function g(b){var d="";h(b,function(e){if(null==e||void 0==e)d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,a.g_FileEncodeStrList[b]=d;else{2<=a.getDebugLevel()&&a.log_append_ln("after getSrvTCRFileBOMEncodeStr2 "+b+" m.byteLength = "+e.byteLength);var f=new Uint8Array(e);for(i=0;i<e.byteLength&&4>i;i++)2<=a.getDebugLevel()&&a.log_append_ln("sc.getSrvTCRFileBOMEncodeStr2 bufView ["+i+"] = "+f[i]);2<=e.byteLength&&((f[0]&255)==a.UNICODEFILE_UTF16LE_BOM0&&(f[1]&255)==a.UNICODEFILE_UTF16LE_BOM1?
(d="text/csv;charset="+a.UNICODEFILE_UTF16LE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d):(f[0]&255)==a.UNICODEFILE_UTF16BE_BOM0&&(f[1]&255)==a.UNICODEFILE_UTF16BE_BOM1&&(d="text/csv;charset="+a.UNICODEFILE_UTF16BE_ENCODINGSTR,a.g_FileEncodeStrList[b]=d));3<=e.byteLength&&(f[0]&255)==a.UNICODEFILE_UTF8_BOM0&&(f[1]&255)==a.UNICODEFILE_UTF8_BOM1&&(f[2]&255)==a.UNICODEFILE_UTF8_BOM2&&(d="text/csv;charset="+a.UNICODEFILE_UTF8_ENCODINGSTR,a.g_FileEncodeStrList[b]=d);0>=d.length&&(d="text/csv;charset="+a.UNICODEFILE_ISO8859_ENCODINGSTR,
a.g_FileEncodeStrList[b]=d);a.loadAndParseTCRFile(b)}});return d}a.MsgBoxErrorFlag=!1;a.MsgBoxScheduled=!1;a.TCR_outOfRange=function(b,d,e){a.MsgBoxErrorFlag=!0;a.err_append_ln("Value is out of Range!\n- Value: "+b+"\n- Min: "+d+"\n- Max: "+e)};a.VM_getAndResetMsgBoxErrorFlag=function(){var b=!1;!0===a.MsgBoxErrorFlag&&(a.scheduleMsgBoxOpen(),a.MsgBoxErrorFlag=!1,b=!0);return b};a.scheduleMsgBoxOpen=function(){a.MsgBoxScheduled=!0};a.isMsgBoxScheduled=function(){return a.MsgBoxScheduled};a.resetMsgBoxScheduled=
function(){a.MsgBoxScheduled=!1};a.openMsgBox=function(){a.hideInputField();if(0>=a.MsgBox.length){var b=a.RW_readSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name);window.alert(b);a.initMsgBoxVars()}else $("#SC_MsgBox").css("z-index","1").fadeIn(),a.unlockInstance("#SC_MsgBox"),a.lockInstance("#SC_View_001"),a.doInstanceRepaint("#SC_MsgBox")||($("#SC_MsgBox").fadeOut().css("z-index","-1"),a.lockInstance("#SC_MsgBox"),a.unlockInstance("#SC_View_001"),a.doInstanceRepaint("#SC_View_001"))};a.initMsgBoxVars=
function(){a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name,"");a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBoxNr.name,"0")};a.closeMsgBox=function(){a.initMsgBoxVars();0<a.MsgBox.length&&($("#SC_MsgBox").fadeOut().css("z-index","-1"),a.lockInstance("#SC_MsgBox"),a.unlockInstance("#SC_View_001"),a.doInstanceRepaint("#SC_View_001"))};a.err_append_ln=function(b){a.log_append_ln(b+"\n");var d=a.RW_readSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name);d=0<d.length||100<d.length?
d+(a.FVLINESEPTOKEN2+b):b;a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBox.name,d);b=a.RW_readSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBoxNr.name);b=parseInt(b,10);!0===isNaN(b)?(a.log_append_ln("ERROR in sc.err_append_ln invalid read sc.SpecialCO.mbMsgBoxNr.value = "+b),b=1):b++;b=b.toString();a.RW_writeSource(a.INFO_T_CONTAINER,a.SpecialCO.mbMsgBoxNr.name,b)};a.getSrvTCRFileBOMEncodeStr=function(b){var d="";null!==b&&void 0!==b&&(void 0===a.g_FileEncodeStrList[b]&&g(b),void 0!==a.g_FileEncodeStrList[b]&&
(d=a.g_FileEncodeStrList[b]));return d};a.loadTCRFileBlocking=function(b){var d=null,e="";2<=a.getDebugLevel()&&a.log_append_ln("Start loadTCRFileBlocking "+b);d=a.getSrvTCRFileBOMEncodeStr(b);void 0==d||null==d||0==d.length?1<=a.getDebugLevel()&&a.log_append_ln("loadTCRFileBlocking waits for encoding check ... for "+b):(1<=a.getDebugLevel()&&a.log_append_ln("loadTCRFileBlocking encoding found : "+d+" for "+b),$.ajax({type:"GET",global:!1,beforeSend:function(a){a.overrideMimeType(d)},async:!1,cache:!0,
url:b,complete:function(a,b){},success:function(a){e=a},error:function(){e=""}}));return e};a.parse_TCR_CSV_File=function(b){b=b.split(/\n/);var d,e=!1,f=!1,c;var g=b.length;for(d=0;d<g;d++){var k=b[d].trim().split(";");var h=k.length;for(c=0;c<h;c++){var m=k[c];m=m.trim();0>=m.length&&(k[c]="")}if(null!==k)if(!0===a.prefixicmp("#!--",k[0])){!0===a.prefixicmp("#!-- PPO FILE",k[0])&&(e=!0);if(a.prefixicmp("#!-- Start PPO",k[0])||!0===a.prefixicmp("#!-- TYPE = 1",k[0]))f=e=!0;!0===a.prefixicmp("#!-- N = ",
k[0])&&(nPPO=parseInt(k[0].substr(8),10),2<=a.getDebugLevel()&&a.log_append_ln("sc.parse_TCR_CSV_File nPPO: "+nPPO))}else if(!0===e&&!0===f)if(99<=a.TARGET_TYPE_NR&&200>a.TARGET_TYPE_NR)0<k[0].length&&(void 0===a.g_PPOList[k[0]]&&(c=new a.PPOListItemType,c.name=k[0],c.address=k[0],c.regView=0,c.regHMI=!1,c.resolved="",c.value="",a.g_PPOList[k[0]]=c,2<=a.getDebugLevel()&&a.log_append_ln("sc.parse_TCR_CSV_File fields[0] = "+k[0]+" sc.g_PPOList add PPO: "+c.name)),a.g_PPOList[k[0]]&&(k[0]&&(a.g_PPOList[k[0]].name=
k[0]),k[1]&&(a.g_PPOList[k[0]].address=k[1]),k[2]&&(a.g_PPOList[k[0]].min=k[2]),k[3]&&(a.g_PPOList[k[0]].max=k[3]),k[4]&&(a.g_PPOList[k[0]].format=k[4]),k[5]&&(a.g_PPOList[k[0]].unit=k[5]),k[6]&&(a.g_PPOList[k[0]].writeAddr=k[6]),k[7]&&(a.g_PPOList[k[0]].scale_Fact=k[7]),k[8]&&(a.g_PPOList[k[0]].scale_Offset=k[8]),k[9]&&(a.g_PPOList[k[0]].scale_Min=k[9]),k[10]&&(a.g_PPOList[k[0]].scale_Max=k[10]),void 0===a.g_PPOAdressToNameMap[a.g_PPOList[k[0]].address]&&(a.g_PPOAdressToNameMap[a.g_PPOList[k[0]].address]=
a.g_PPOList[k[0]].name)));else{a.showCriticalErrorScreen(3,"Unsupported *.tcr file type (PPO Initialisation File)<br>Unbekannter *.tcr Dateityp (PPO Initialisierung)");return}}2<=a.getDebugLevel()&&a.log_append_ln("sc.parse_TCR_CSV_File after sc.g_PPOList size "+Object.keys(a.g_PPOList).length);a.tcrparsed=1};a.loadAndParseTCRFile=function(b){b=a.loadTCRFileBlocking(b);0<b.length?a.parse_TCR_CSV_File(b):2<=a.getDebugLevel()&&a.log_append_ln("Warning Empty or missing or to reload(due to encoding) TCR file")};
a.PPOListItemType=function(){this.offset=this.gain=this.maxvalue=this.minvalue=this.unit=this.scale_Max=this.scale_Min=this.scale_Offset=this.scale_Fact=this.writeAddr=this.format=this.max=this.min=this.address=this.resolved=this.name=this.value="";this.regView=0;this.regHMI=!1};a.Flt32_2_Flt64=function(b,d){var e=new ArrayBuffer(4);e=new DataView(e);if(isNaN(b))return 0;a.isDefined(d)&&0!=d?(e.setFloat32(0,b),b=e.getUint32(0)):(e.setUint32(0,b),b=e.getFloat32(0));return b};a.TCR_convertToValueFormat=
function(b,d){var e=!1;var f=[];if(!a.isDefined(b)||!a.isDefined(d))return!0;if(a.prefixicmp("dec.",b)){d.rValue=d.rValue.toString();var c=d.rValue.indexOf(".");-1!=c&&(d.rValue=d.rValue.substring(0,c));c=parseInt(b.substring(4,b.len),10);if(0<c){if("-"==d.rValue[0]||"+"==d.rValue[0])"-"==d.rValue[0]&&(e=!0),d.rValue=d.rValue.substring(1,d.rValue.len);b=a.strlen(d.rValue);if(b<=c)for(f=c-b+1,b=c+1;f--;)a.util_insertChar("0",d);a.insertStr(b-c,".",d);!0===e&&a.insertStr(0,"-",d)}}else if(a.prefixicmp("flt2dec",
b)){c=b.substring(7,b.len);"."==c[0]&&(c=c.slice(1));c=parseInt(c,10);if(e=!1===isNaN(c)){e=c;if(a.isDefined(d)&&a.isDefined(d.rValue))if(c=parseFloat(d.rValue),a.isDefined(e)||(e=0),isNaN(e)||isNaN(c))d=!1;else{if(7<e||0>e)e=0;b=Math.pow(10,e);d.rValue=(Math.round(c*b)/b).toFixed(e);d=!0}else d=!1;e=!1===d}if(e)return!1}else a.prefixicmp("int2hex",b)?(c=parseInt(d.rValue,10),!1===isNaN(c)&&(d.rValue="H "+c.toString(16).toUpperCase())):a.prefixicmp("hex2int",b)?(c=d.rValue,c=c.replace(/\s+/g,""),
c=c.replace(/[hH]/g,"0x"),valOff=parseInt(c),d.rValue=valOff):a.prefixicmp("DEC",b)?(c=parseInt(d.rValue),e="",isNaN(c)||(e=c.toString()),d.rValue=e):a.prefixicmp("BIN",b)&&"string"===typeof d.rValue&&d.rValue.doesContainOnlyCharFrom("01")?(c=parseInt(d.rValue,2),e="",!isNaN(c)&&0<=c&&(e=c.toString(2)),d.rValue=e):a.prefixicmp("HEX",b)&&"string"===typeof d.rValue&&d.rValue.doesContainOnlyCharFrom("0123456789abcdef",!0)?(c=parseInt(d.rValue,16),e="",!isNaN(c)&&0<=c&&(e=c.toString(16).toUpperCase()),
d.rValue=e):a.prefixicmp("HH:MM:SS",b)&&(d.rValue=a.isDefined(d.rValue)?d.rValue.toString():"")&&(d.rValue.hasPattern("#####[#]")||"0"==d.rValue)?"0"!=d.rValue?(5==d.rValue.length&&(d.rValue="0"+d.rValue),f[0]=d.rValue.slice(0,2),f[1]=d.rValue.slice(2,4),f[2]=d.rValue.slice(4,6),c=1E4*(f[0]=parseInt(f[0]))+100*(f[1]=parseInt(f[1]))+(f[2]=parseInt(f[2])),!isNaN(c)&&0<=c&&6>=Math.log10(c)&&23>=f[0]&&59>=f[1]&&59>=f[2]&&(d.rValue=(1>Math.log10(f[0])?"0":"")+f[0].toString()+":"+(1>Math.log10(f[1])?"0":
"")+f[1].toString()+":"+(1>Math.log10(f[2])?"0":"")+f[2].toString())):d.rValue="00:00:00":a.prefixicmp("HH:MM",b)&&(d.rValue=a.isDefined(d.rValue)?d.rValue.toString():"")&&(d.rValue.hasPattern("###[#]")||"0"==d.rValue)?"0"!=d.rValue?(3==d.rValue.length&&(d.rValue="0"+d.rValue),f[0]=d.rValue.slice(0,2),f[1]=d.rValue.slice(2,4),c=100*(f[0]=parseInt(f[0]))+(f[1]=parseInt(f[1])),(!isNaN(c)&&0<=c||4>=Math.log10(c))&&23>=f[0]&&59>=f[1]&&(d.rValue=(1>Math.log10(f[0])?"0":"")+f[0].toString()+":"+(1>Math.log10(f[1])?
"0":"")+f[1].toString())):d.rValue="00:00":a.prefixicmp("DD.MM.YY",b)&&(d.rValue=a.isDefined(d.rValue)?d.rValue.toString():"")&&(d.rValue.hasPattern("#####[###]")||"0"==d.rValue)?"0"!=d.rValue?(5==d.rValue.length&&(d.rValue="0"+d.rValue),6<d.rValue.length&&(d.rValue=d.rValue.slice(-6)),f[0]=d.rValue.slice(0,2),f[1]=d.rValue.slice(2,4),f[2]=d.rValue.slice(4,6),c=1E4*(f[0]=parseInt(f[0]))+100*(f[1]=parseInt(f[1]))+(f[2]=parseInt(f[2])),!isNaN(c)&&0<=c&&6>=Math.log10(c)&&31>=f[2]&&12>=f[1]&&99>=f[0]&&
(d.rValue=(1>Math.log10(f[2])?"0":"")+f[2].toString()+"."+(1>Math.log10(f[1])?"0":"")+f[1].toString()+"."+(1>Math.log10(f[0])?"0":"")+f[0].toString())):d.rValue="00.00.00":a.prefixicmp("DD.MM",b)&&(d.rValue=a.isDefined(d.rValue)?d.rValue.toString():"")&&(d.rValue.hasPattern("###[#]")||"0"==d.rValue)?"0"!=d.rValue?(3==d.rValue.length&&(d.rValue="0"+d.rValue),f[0]=d.rValue.slice(0,2),f[1]=d.rValue.slice(2,4),c=100*(f[0]=parseInt(f[0]))+(f[1]=parseInt(f[1])),!isNaN(c)&&0<=c&&4>=Math.log10(c)&&31>=f[1]&&
12>=f[0]&&(d.rValue=(1>Math.log10(f[1])?"0":"")+f[1].toString()+"."+(1>Math.log10(f[0])?"0":"")+f[0].toString())):d.rValue="00.00":a.prefixicmp("M_INT",b)?(c=parseInt(d.rValue,10),!1===isNaN(c)&&(e=c,!1===isNaN(e)&&32767<e&&(e-=65536),d.rValue=e)):a.prefixicmp("M_DINT",b)?(c=parseInt(d.rValue,10),!1===isNaN(c)&&(e=c,!1===isNaN(e)&&2147483647<e&&(e-=4294967296),d.rValue=e)):a.prefixicmp("M_REAL",b)?11>d.rValue.length&&-1==d.rValue.indexOf(".")&&-1==d.rValue.indexOf("-")&&-1==d.rValue.indexOf("E")&&
-1==d.rValue.indexOf("e")&&!1===isNaN(c=parseInt(d.rValue,10))&&(c=a.Flt32_2_Flt64(c,!1),e=c.toExponential(),c=(c*(lNumber=Math.pow(10,8))).toFixed()/lNumber,e=e.replace("e","E"),d.rValue=e.length>=c.toString().length?c:e):a.prefixicmp("time_",b)?(e=b.substring(5,b.length),e=parseInt(e,10),!1===isNaN(e)&&(d.rValue=a.getTimeFormatInt(d.rValue,e,!1))):a.prefixicmp("date_",b)?(e=b.substring(5,b.length),e=parseInt(e,10),!1===isNaN(e)&&(d.rValue=a.getTimeFormatInt(d.rValue,e,!0))):a.prefixicmp("ADD",b)&&
(c=/^ADD(\d*):GAIN(\d*)/.exec(b),null!==c&&(e=parseFloat(c[1]),c=parseFloat(c[2]),b=parseFloat(d.rValue),!1===isNaN(e)&&!1===isNaN(c)&&!1===isNaN(b)&&(d.rValue=b*c+e)))};a.TCR_convertToRawValueByFormat=function(b,d){a.TCR_getUnFormatedValueAndCheckMinMax(d,b,"","",0)};a.TCR_readFormatedPPO=function(b,d){var e=b.format.trim(),f=1,c=0;" "!==b.scale_Fact&&!1===isNaN(parseFloat(b.scale_Fact))&&(f=parseFloat(b.scale_Fact));" "!==b.scale_Offset&&!1===isNaN(parseFloat(b.scale_Offset))&&(c=parseFloat(b.scale_Offset));
if(1!=f||0!==c)b=parseFloat(d.rValue),!1===isNaN(b)&&(d.rValue=b*f+c);a.TCR_convertToValueFormat(e,d)};a.TCR_invalidEntry=function(){a.MsgBoxErrorFlag=!0;a.err_append_ln("Invalid entry ! ")};a.TCR_getPPOStruct=function(b){return a.g_PPOList[b]};a.TCR_getUnformatedValue=function(b,d,e){if(d&&b.rValue)if(a.prefixicmp("dec.",d)){if(d=parseInt(d.substring(4,d.length),10),0<d&&10>d&&(e=parseFloat(b.rValue),!1===isNaN(e))){for(;0<d--;)e*=10;b.rValue=e.toString()}}else e&&(a.prefixicmp("int2hex",d)||a.prefixicmp("hex",
d))&&(d=0,a.prefixicmp("h ",b.rValue)&&(d=2),b.rValue=b.rValue.substring(d,d.len),d=parseInt(b.rValue,16),!0===isNaN(d)?a.TCR_invalidEntry():b.rValue=d)};a.TCR_getUnFormatedValueAndCheckMinMax=function(b,d,e,f,c){var g=0;if(a.prefixicmp("STRING",d))if(g=b.rValue,"string"!==typeof g){if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else c=parseInt(e),!1===isNaN(c)&&g.length<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseInt(f),!1===isNaN(c)&&g.length>c&&a.TCR_outOfRange(b.rValue,e,f);else if(a.prefixicmp("dec.",
d)||"hex"==d||a.prefixicmp("int2hex",d)){if(a.prefixicmp("dec.",d)){if(d=parseInt(d.substring(4,d.length),10),0<d&&10>d)if(g=parseFloat(b.rValue),!1===isNaN(g)){for(;0<d--;)g*=10;b.rValue=g.toString()}else a.TCR_invalidEntry()}else a.prefixicmp("int2hex",d)?(g=0,a.prefixicmp("h ",b.rValue)&&(g=2),b.rValue=b.rValue.substring(g,g.len),g=parseInt(b.rValue,16),!0===isNaN(g)?a.TCR_invalidEntry():b.rValue=g):a.prefixicmp("hex2int",d)&&(g=b.rValue,g=g.replace(/\s+/g,""),g=g.replace(/[hH]/g,"0x"),g=parseInt(g),
g=(1>Math.log10(g)/Math.log10(16)?"0x0":"0x")+g.toString(16).toUpperCase(),b.rValue=g);if(!c&&(g=parseFloat(b.rValue),!1===isNaN(g)?(c=parseFloat(e),!1===isNaN(c)&&g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseFloat(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,e,f)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag()))return!1}else if(a.prefixicmp("int",d)||a.prefixicmp("unsignedint",d)||a.prefixicmp("UDINT",d)||a.prefixicmp("DWORD",d)||a.prefixicmp("short",d)||a.prefixicmp("unsignedshort",d)||
a.prefixicmp("UINT",d)||a.prefixicmp("WORD",d)||a.prefixicmp("byte",d)){if(g=parseFloat(b.rValue),!1===isNaN(g)?(c=parseFloat(e),!1===isNaN(c)&&g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseFloat(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,e,f)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("long",d)){if(g=parseFloat(b.rValue),!1===isNaN(g)?(c=parseFloat(e),!1===isNaN(c)&&g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseFloat(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,
e,f)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("unsignedlong",d)){if(g=parseFloat(b.rValue),!1===isNaN(g)?(c=parseFloat(e),!1===isNaN(c)&&g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseFloat(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,e,f)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("float",d)||a.prefixicmp("double",d)||a.prefixicmp("flt2dec",d)){if(g=parseFloat(b.rValue),!1===isNaN(g)?(c=parseFloat(e),!1===isNaN(c)&&
g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseFloat(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,e,f)):a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("DEC",d))if(g=parseInt(b.rValue),!1===isNaN(g))c=parseInt(e),!1===isNaN(c)&&g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseInt(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,e,f);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("BIN",d)&&"string"===typeof b.rValue&&b.rValue.doesContainOnlyCharFrom("01"))if(g=
parseInt(b.rValue,2),!1===isNaN(g))c=parseInt(e),!1===isNaN(c)&&g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseInt(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,e,f);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if("HEX"==d.trim()&&"string"===typeof b.rValue&&b.rValue.doesContainOnlyCharFrom("0123456789abcdef",!0))if(g=parseInt(b.rValue,16),!1===isNaN(g))c=parseInt(e),!1===isNaN(c)&&g<c&&a.TCR_outOfRange(b.rValue,e,f),c=parseInt(f),!1===isNaN(c)&&g>c&&a.TCR_outOfRange(b.rValue,
e,f);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("HH:MM:SS",d)&&"string"===typeof b.rValue&&b.rValue.doesContainOnlyCharFrom("0123456789:")&&b.rValue.hasPattern("#[#]:#[#]:#[#]"))if(e=b.rValue.split(":"),3!=e.length||0>(g=parseInt(e[0]))||23<g||0>(g=parseInt(e[1]))||59<g||0>(g=parseInt(e[2]))||59<g){if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else b.rValue=(2>e[0].length?"0":"")+e[0]+(2>e[1].length?"0":"")+e[1]+(2>e[2].length?
"0":"")+e[2];else if(a.prefixicmp("HH:MM",d)&&"string"===typeof b.rValue&&b.rValue.doesContainOnlyCharFrom("0123456789:")&&b.rValue.hasPattern("#[#]:#[#]"))if(e=b.rValue.split(":"),2!=e.length||0>(g=parseInt(e[0]))||23<g||0>(g=parseInt(e[1]))||59<g){if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else b.rValue=(2>e[0].length?"0":"")+e[0]+(2>e[1].length?"0":"")+e[1];else if(a.prefixicmp("DD.MM.YY",d)&&"string"===typeof b.rValue&&b.rValue.doesContainOnlyCharFrom("0123456789.")&&b.rValue.hasPattern("#[#].#[#].#[#]")&&
b.rValue.isValidDate("DD.MM.YY"))if(e=b.rValue.split("."),3!=e.length||0>(g=parseInt(e[0]))||31<g||0>(g=parseInt(e[1]))||12<g||0>(g=parseInt(e[2]))||99<g){if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else b.rValue=(2>e[2].length?"0":"")+e[2]+(2>e[1].length?"0":"")+e[1]+(2>e[0].length?"0":"")+e[0];else if(a.prefixicmp("DD.MM",d)&&"string"===typeof b.rValue&&b.rValue.doesContainOnlyCharFrom("0123456789.")&&b.rValue.hasPattern("#[#].#[#]")&&b.rValue.isValidDate("DD.MM"))if(e=b.rValue.split("."),
2!=e.length||0>(g=parseInt(e[0]))||31<g||0>(g=parseInt(e[1]))||12<g){if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else b.rValue=(2>e[1].length?"0":"")+e[1]+(2>e[0].length?"0":"")+e[0];else if(a.prefixicmp("M_DINT",d))if(g=parseInt(b.rValue,10),!1===isNaN(g))e=g,!1===isNaN(e)&&0>e&&(e+=4294967296),b.rValue=e;else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("M_INT",d))if(g=parseInt(b.rValue,10),!1===isNaN(g))e=g,!1===isNaN(e)&&0>e&&(e+=
65536),b.rValue=e;else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("M_REAL",d))if(g=parseFloat(b.rValue),!1===isNaN(g))b.rValue=a.Flt32_2_Flt64(g,!0);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("time_",d))if(e=d.substring(5,d.length),e=parseInt(e,10),!1===isNaN(e))b.rValue=a.DateTime_ReadDT(e,a.SpecialCO.dateTimeLocalNow.name,!0,null,b.rValue,!1);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else if(a.prefixicmp("date_",
d))if(e=d.substring(5,d.length),e=parseInt(e,10),!1===isNaN(e))b.rValue=a.DateTime_ReadDT(e,a.SpecialCO.dateTimeLocalNow.name,!0,null,b.rValue,!0);else{if(a.TCR_invalidEntry(),a.VM_getAndResetMsgBoxErrorFlag())return!1}else a.prefixicmp("ADD",d)&&(f=/^ADD(\d*):GAIN(\d*)/.exec(d),null!==f&&(e=parseFloat(f[1]),f=parseFloat(f[2]),g=parseFloat(b.rValue),!1===isNaN(e)&&!1===isNaN(f)&&!1===isNaN(g)&&(g-=e,0!=f&&(g/=f),b.rValue=g)));return!0};a.TCR_writeFormatedPPOValue=function(b,d){var e,f=1,c=0,g=e=0,
k,h;d.writeEnabled=!0;if(null!==b){if(h=b.scale_Min)e=parseFloat(h),isNaN(e)&&(h=null);if(k=b.scale_Max)g=parseFloat(k),isNaN(g)&&(k=null);if(null!==h||null!==k)if(0<h.length||0<k.length){a.TCR_getUnformatedValue(d,b.format,1);var m=parseFloat(d.rValue);!1===isNaN(m)?(h&&m<e&&(a.TCR_outOfRange(d.rValue,h,k),d.writeEnabled=!1),k&&m>g&&(a.TCR_outOfRange(d.rValue,h,k),d.writeEnabled=!1)):(d.writeEnabled=!1,a.TCR_invalidEntry())}if(!1===d.writeEnabled)return a.VM_getAndResetMsgBoxErrorFlag(),1;" "!==
b.scale_Fact&&!1===isNaN(parseFloat(b.scale_Fact))&&(f=parseFloat(b.scale_Fact));" "!==b.scale_Offset&&!1===isNaN(parseFloat(b.scale_Offset))&&(c=parseFloat(b.scale_Offset));if(1!==f||0!==c)e=parseFloat(d.rValue),!1===isNaN(0)&&(e-=c,0!==f&&(e/=f),d.rValue=e);b.format&&(h=b.min," "!==h&&(e=parseFloat(h),isNaN(e)&&(h=null)),k=b.max," "!==k&&(g=parseFloat(k),isNaN(g)&&(k=null)),d.writeEnabled=a.TCR_getUnFormatedValueAndCheckMinMax(d,b.format,h,k,0));return 1}return 0};return a}(_SCIntern||{});window.onload=function(){FluidFrame.IsDefined(_SCIntern.ZoomMode)&&""!=_SCIntern.ZoomMode&&("No Auto Zoom"==_SCIntern.ZoomMode?lKeepAspectRatio=FluidFrame.lDoFluid=!1:"Auto Zoom & No Keep Ratio"==_SCIntern.ZoomMode?(FluidFrame.lDoFluid=!0,lKeepAspectRatio=!1):lKeepAspectRatio="Auto Zoom & Keep Ratio"==_SCIntern.ZoomMode?FluidFrame.lDoFluid=!0:FluidFrame.lDoFluid=!1,1==FluidFrame.lDoFluid&&(FluidFrame.IsDefined(FluidFrame.lViewFrame)||FluidFrame.IsDefined(FluidFrame.lViewFrame=new FluidFrame("#SC_View_001",
lKeepAspectRatio)))&&(FluidFrame.IsDefined(FluidFrame.lMsgBoxframe)||FluidFrame.IsDefined(FluidFrame.lMsgBoxframe=new FluidFrame("#SC_MsgBox",lKeepAspectRatio)))&&(FluidFrame.lViewFrame.doOnLoad(),FluidFrame.lMsgBoxframe.doOnLoad()))};window.onresize=function(a){FluidFrame.IsDefined(FluidFrame.lDoFluid)&&1==FluidFrame.lDoFluid&&($("body").css("overflow","hidden"),FluidFrame.IsDefined(FluidFrame.lViewFrame)&&FluidFrame.lViewFrame.doOnResize(),FluidFrame.IsDefined(FluidFrame.lMsgBoxframe)&&FluidFrame.lMsgBoxframe.doOnResize())};
function FluidFrame(a,h,g){this.frameRef=null;this.scalingRatio=this.yRatio=this.xRatio=0;this.cpySvgTag=this.svgTopTag=this.currentDoc=this.cpySvgTag=this.ifrmTag=this.svgTopTag=this.lLowerRight=this.lClickable=null;this.divId=a.slice(1);this.divClickId=this.divId+this.clickablDivStr;this.divTag=$(a).get(0);this.lHeight=this.lWidth=this.divClickTag=null;this.lNoIframe=null!=g&&1==g?!0:!1;this.lKeepAspectRatio=null==h||1==h?!0:!1;this.updateSize=function(a,d){this.lWidth=a;this.lHeight=d};this.isFluidInjected=
function(){if(!this.IsDefined(this.lWidth)||!this.IsDefined(this.lHeight))return!1;if(0==this.lNoIframe){var a=$("#"+this.divId).children("iframe")[0];if(!this.IsDefined(a))return!1;a=a.contentWindow.document;if(!this.IsDefined(a))return!1;a=a.getElementsByTagNameNS(this.NS,"svg")[0]}else a=$("#"+this.divId).children("svg")[0];return this.IsDefined(this.frameRef)?this.IsDefined(a)&&this.topTagStr==a.getAttribute("id")?!0:!1:!1};this.injectFluid=function(){var a=null,d;if(1==this.isFluidInjected())return!0;
this.ifrmTag=$("#"+this.divId).children("iframe")[0];if(!this.IsDefined(this.ifrmTag))return!1;var e=this.ifrmTag.contentWindow.document;if(!this.IsDefined(e))return!1;e=e.getElementsByTagNameNS(this.NS,"svg")[0];if(!this.IsDefined(e))return!1;for(d=0;d<e.childNodes.length&&(a=e.childNodes[d],!this.IsDefined(a)||"rect"!=a.tagName);d++);if(d>=e.childNodes.length||!this.IsDefined(this.lWidth=a.getAttribute("width")))return!1;this.lWidth=parseInt(this.lWidth,10);if(!this.IsDefined(this.lHeight=a.getAttribute("height")))return!1;
this.lHeight=parseInt(this.lHeight,10);this.ifrmTag.removeAttribute("width");this.ifrmTag.removeAttribute("height");this.currentDoc=this.ifrmTag.contentWindow.document;if(!this.IsDefined(this.currentDoc))return!1;this.svgTopTag=this.currentDoc.getElementsByTagNameNS(this.NS,"svg")[0];if(!this.IsDefined(this.svgTopTag))return!1;this.svgTopTag.setAttribute("width",this.lWidth.toString());this.svgTopTag.setAttribute("height",this.lHeight.toString());this.svgTopTag.removeAttribute("viewBox");this.cpySvgTag=
this.svgTopTag.cloneNode(!1);if(!this.IsDefined(this.cpySvgTag))return!1;this.cpySvgTag.setAttribute("id",this.topTagStr);this.cpySvgTag.setAttribute("xmlns",this.svgTopTag.getAttribute("xmlns"));this.parentTag=this.svgTopTag.parentNode;if(!this.IsDefined(this.parentTag))return!1;this.frameRef=this.currentDoc.createElementNS(this.NS,"g");if(!this.IsDefined(this.frameRef))return!1;this.frameRef.setAttribute("id",this.scalingTagStr);this.frameRef.setAttribute("x","0");this.frameRef.setAttribute("y",
"0");this.frameRef.setAttribute("width",this.lWidth.toString());this.frameRef.setAttribute("height",this.lHeight.toString());this.frameRef.appendChild(this.svgTopTag);this.cpySvgTag.appendChild(this.frameRef);this.parentTag.appendChild(this.cpySvgTag);1==this.lNoIframe&&this.ridIframe();0>$("#"+this.divId).css("z-index")&&$("#"+this.divId).hide();return!0};this.ridIframe=function(){this.divTag.appendChild(this.cpySvgTag);(this.divClickTag=$("#"+this.divClickId).get(0))&&this.divTag.appendChild(this.divClickTag);
this.divTag.removeChild(this.ifrmTag)};this.doFluid=function(){var a;if(!(0!=this.isFluidInjected()&&this.IsDefined(this.frameRef)&&this.IsDefined(this.lWidth)&&this.IsDefined(this.lHeight)&&this.IsDefined(this.xRatio=window.innerWidth/this.lWidth)&&this.IsDefined(this.yRatio=window.innerHeight/this.lHeight)&&this.IsDefined(this.lKeepAspectRatio)))return!1;1==this.lKeepAspectRatio?(this.scalingRatio=this.xRatio<this.yRatio?this.xRatio:this.yRatio,this.frameRef.setAttribute("transform","scale("+this.scalingRatio+
")")):this.frameRef.setAttribute("transform","scale("+this.xRatio+","+this.yRatio+")");var d=$(this.divTag).css("z-index");if(!this.IsDefined(d)||0<=d)if(!this.IsDefined(_SCIntern.CTM=this.frameRef.getScreenCTM())||!this.IsDefined(_SCIntern.inverseCTM=_SCIntern.CTM.inverse()))return!1;if(!this.IsDefined(this.lClickable=$("#"+this.divClickId).get(0)))return!1;if(1==this.lKeepAspectRatio){d=this.lWidth*this.scalingRatio;var e=this.lHeight*this.scalingRatio}else d=this.lWidth*this.xRatio,e=this.lHeight*
this.yRatio;if(!this.IsDefined(a=$("#"+this.divClickId).css("z-index")))return!1;this.lClickable.setAttribute("style",this.lStyleString+d+"px; height: "+e+"px;");0!=a&&$("#"+this.divClickId).css("z-index",a);if(!this.IsDefined(a=$("#"+this.divId).css("z-index")))return!1;this.divTag.setAttribute("style",this.lStyleString+d+"px; height: "+e+"px;");0!=a&&$("#"+this.divId).css("z-index",a);0>a&&$("#"+this.divId).hide();this.cpySvgTag.setAttribute("width",d);this.cpySvgTag.setAttribute("height",e);this.IsDefined(this.lNoIframe)&&
0==this.lNoIframe&&this.ifrmTag.setAttribute("style",this.lIfrmStyleString+d+"px; height: "+e+"px;");return!0};this.doOnLoad=function(){try{this.injectFluid()}catch(b){console.log("Injecting fluid error: "+b.message);return}if(1==this.isFluidInjected())try{this.doFluid()}catch(b){console.log("Doing fluid error: "+b.message)}};this.doOnResize=function(){if(0>=_SCIntern.ViewList.list.length)return!1;if(1==this.isFluidInjected()){if(!$("input").is(":focus"))try{this.doFluid()}catch(b){console.log("Doing fluid error: "+
b.message)}}else{try{this.injectFluid()}catch(b){return console.log("Injecting fluid error: "+b.message),!1}if(1==this.isFluidInjected()){if(!$("input").is(":focus"))try{this.doFluid()}catch(b){console.log("Doing fluid error: "+b.message)}}else return!1}return!0}}FluidFrame.prototype.lStyleString="margin: 0px; padding: 0px; position: absolute; background-color: rgba(128, 128, 128, 0); width: ";FluidFrame.prototype.lIfrmStyleString="position: absolute; width: ";FluidFrame.prototype.NS="http://www.w3.org/2000/svg";
FluidFrame.prototype.topTagStr="top_svg";FluidFrame.prototype.scalingTagStr="ScalingTag";FluidFrame.prototype.clickablDivStr="_clickableDiv";FluidFrame.prototype.coupler="-";FluidFrame.IsDefined=function(a){return"undefined"!==typeof a&&void 0!=a&&null!=a?!0:!1};FluidFrame.lViewFrame=null;FluidFrame.lMsgBoxframe=null;FluidFrame.lDoFluid=!1;FluidFrame.prototype.IsDefined=FluidFrame.IsDefined;_SCIntern=function(a){a.PainterType_Bargraph=function(h){function g(){var a=c.stopAngle-c.startAngle;if(!0===c.invertGrowing){for(;0<a;)a-=360;0===a&&(a=-360)}else{for(;0>a;)a+=360;0===a&&(a=360)}return a}function b(a,b,d){b>=d&&(a=c.baseValue);a<b&&(a=b);a>d&&(a=d);b>c.baseValue&&(c.baseValue=b);d<c.baseValue&&(c.baseValue=d);return a}function d(b,c,d,e,f,g,k){c=c*Math.PI/180;a.createSVGLine(document,b,d,e,d+f*Math.cos(c),e-f*Math.sin(c),a.adjustColorStr(g),k).setAttributeNS(null,"shape-rendering",
"geometricPrecision")}function e(d,e,f,g){var k=c.minValue;var h=c.maxValue;if(!0===c.invertGrowing){var n=h;h=-k;k=-n;e=-e}n=h-k;if(0!=n){e=b(e,k,h);if(!0===c.horizontal){0<c.h-g-2*(m+0)?(h=m+0,!0===c.invertScalePos&&(h=g+m+0+1),g=c.h-g-2*(m+0)):(h=0,g=c.h);var p=(c.w-2*m)/n;n=(c.baseValue-k)*p;k=Math.abs((e-k)*p);k=Math.min(k,n);var q=Math.abs((e-c.baseValue)*p);k+=m}else 0<c.w-g-2*(m+0)?(k=m+0,!0===c.invertScalePos&&(k=g+m+0+1),q=c.w-g-2*(m+0)):(k=0,q=c.w),p=(c.h-2*m)/n,n=(h-c.baseValue)*p,h=Math.abs((h-
e)*p),h=Math.min(h,n),g=Math.abs((e-c.baseValue)*p),h+=m;e=Math.round(q);g=Math.round(g);0<e&&0<g&&a.createSVGRect(document,d,Math.round(k),Math.round(h),e,g,a.adjustColorStr(f),null,0,!1)}}function f(b,d,e,f,g,k,h,n){g=1===h?"middle":2===h?"end":"start";b=a.createSVGText(document,b,e,f,a.adjustColorStr(n),g,c.getFontName(),c.getFontSize(),c.getSvgFontStyle(),c.getSvgFontWeight());a.createSVGTSpan(document,b,null,"0.9em",d)}this.base=a.PainterType_MPainter;this.base(h);this.minValue=0;this.rangeValue=
this.maxValue=100;this.stopAngle=this.startAngle=this.baseValue=0;this.maxValue=100;this.showScale=this.isGauge=this.invertGrowing=this.horizontal=!1;this.spacement=10;this.nScaleText=0;this.invertScalePos=!1;var c=this,n=null,k=!1,w=null,m=0;this.getUseBarColor=function(){return w};this.setUseBarColor=function(a){null===a?(!0===k&&this.scheduleFullRedrawPainter(),k=!1):(w!==a&&this.scheduleFullRedrawPainter(),k=!0);w=a};this.typeDraw=function(){if(this.isFullPainterRedrawRequired()){var a=this.getEditSource();
null!==a&&this.updateBar(a)}};this.notify=function(b,c){switch(b){case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw(),this.genericDraw()}return 0};this.updateMinMaxRangeBase=function(){if(this.minValue>this.maxValue){var a=this.maxValue;this.maxValue=this.minValue;this.minValue=a}this.rangeValue=this.maxValue-this.minValue};this.changeMin=function(b){var c=parseFloat(b);isNaN(c)?a.log_append_ln("Bargraph min. value not valid:'"+b+"' (Object ID: '"+this.objId+"')"):this.minValue!==c&&(this.minValue=
c,this.updateMinMaxRangeBase(),this.scheduleFullRedrawPainter())};this.changeMax=function(b){var c=parseFloat(b);isNaN(c)?a.log_append_ln("Bargraph max. value not valid:'"+b+"' (Object ID: '"+this.objId+"')"):this.maxValue!==c&&(this.maxValue=c,this.updateMinMaxRangeBase(),this.scheduleFullRedrawPainter())};this.setStartAngle=function(a){a=parseFloat(a);isNaN(a)||this.startAngle===a||(this.startAngle=a,this.scheduleFullRedrawPainter())};this.setStopAngle=function(a){a=parseFloat(a);isNaN(a)||this.stopAngle===
a||(this.stopAngle=a,this.scheduleFullRedrawPainter())};this.setSpacement=function(a){a=parseFloat(a);isNaN(a)||this.spacement===a||(this.spacement=a,this.scheduleFullRedrawPainter())};this.setInvertGrowing=function(a){this.invertGrowing!==a&&(this.invertGrowing=a,this.scheduleFullRedrawPainter())};this.setInvertScalePos=function(a){this.invertScalePos!==a&&(this.invertScalePos=a,this.scheduleFullRedrawPainter())};this.setPaintHorizontal=function(a){this.horizontal!==a&&(this.horizontal=a,this.scheduleFullRedrawPainter())};
this.setShowScale=function(a){this.showScale!==a&&(this.showScale=a,this.scheduleFullRedrawPainter())};this.setScaleText=function(a){a=parseInt(a,10);isNaN(a)||this.nScaleText===a||(this.nScaleText=a,this.scheduleFullRedrawPainter())};var p=0,r=0;this.updateBar=function(h){if(void 0!==h.type&&void 0!==h.name&&null!==h.type&&null!==h.name){var q=h.value;null!==n&&(n.parentNode.removeChild(n),n=null);if(0<c.w&&0<c.h){h=document.createElementNS(a.SvgNs,"svg");if(null!==h){var t="0 0 "+c.w+" "+c.h;h.setAttributeNS(null,
"x",c.x);h.setAttributeNS(null,"y",c.y);h.setAttributeNS(null,"width",c.w);h.setAttributeNS(null,"height",c.h);h.setAttributeNS(null,"viewBox",t);h.setAttributeNS(null,"version","1.1");c.getMainGroupElement().appendChild(h);t=parseFloat(q);!0===isNaN(t)&&(t=c.baseValue);c.minValue>c.maxValue&&(q=c.minValue,c.minValue=c.maxValue,c.maxValue=q);m=c.getOutlineWidth();if(!0===c.isGauge){var u=t,v=c.minValue,z=c.maxValue;if(z!=v){0!=(c.stopAngle-c.startAngle)%360&&(u=b(u,v,z));t=c.w/2;q=c.h/2;var x=Math.min(t,
q),A=x+(t-x),C=x+(q-x);u=c.startAngle+(u-v)*g()/(z-v);!0===c.checkIfInterior()&&a.createSVGPie(document,h,A,C,t,q,c.startAngle,u,c.invertGrowing,null,0,a.adjustColorStr(c.getInteriorColor()));if(c.showScale){v=c.getOutlineColor();z=c.minValue;var I=c.maxValue;if(I!=z&&0<c.spacement){var H=c.w/2,T=c.h/2,F=Math.min(c.w/2,c.h/2),W=Math.min(c.w/2,c.h/2)/10,M=g(),Q=c.minValue;for(W=Math.max(W,2);Q<=I;){var E=(c.startAngle+(Q-c.minValue)*M/(I-z))*Math.PI/180;a.createSVGLine(document,h,H+F*Math.cos(E),T-
F*Math.sin(E),H+(F-W)*Math.cos(E),T-(F-W)*Math.sin(E),a.adjustColorStr(v),1).setAttributeNS(null,"shape-rendering","geometricPrecision");Q+=c.spacement}}}!0===c.checkIfOutline()&&(v=c.getOutlineWidth()/2,a.createSVGEllipse(document,h,A,C,t-v,q-v,a.adjustColorStr(c.getOutlineColor()),c.getOutlineWidth(),null).setAttributeNS(null,"shape-rendering","geometricPrecision"));0<c.getOutlineWidth()&&(!0===c.checkIfInterior()&&d(h,c.startAngle,A,C,x,c.getOutlineColor(),c.getOutlineWidth()),d(h,u,A,C,x,c.getOutlineColor(),
c.getOutlineWidth()))}}else{q=t;x=c.showScale;t=c.nScaleText;A=c.w;C=c.h;m=c.getOutlineWidth();!0===c.horizontal?(C<2*(m+0)+1&&(m=0),!0===x&&C<=2*(m+0)+9&&(x=!1)):(A<2*(m+0)+1&&(m=0),x&&A<=2*(m+0)+9&&(x=!1));!1===x&&(t=0);p=!0===x?8:0;0<t&&(!0===c.horizontal?(r=16,r>=C-p-2*(m+0)-1&&(r=0)):(r=30,r>=A-p-2*(m+0)-1&&(r=0)),3>r&&(t=r=0),p+=r);!0===k?(!0===c.checkIfInterior()&&(!0===c.innerFillRect?(u=c.getOutlineWidth(),!0===c.horizontal?!0===c.invertScalePos?a.createSVGRect(document,h,u,u+p+1,A-2*u,C-
2*u-p-1,a.adjustColorStr(c.getInteriorColor()),null,0):a.createSVGRect(document,h,u,u,A-2*u,C-2*u-p-1,a.adjustColorStr(c.getInteriorColor()),null,0):!0===c.invertScalePos?a.createSVGRect(document,h,u+p+1,u,A-2*u-p-1,C-2*u,a.adjustColorStr(c.getInteriorColor()),null,0):a.createSVGRect(document,h,u,u,A-2*u-p-1,C-2*u,a.adjustColorStr(c.getInteriorColor()),null,0)):a.createSVGRect(document,h,0,0,A,C,a.adjustColorStr(c.getInteriorColor()),null,0)),e(h,q,w,p)):e(h,q,c.getInteriorColor(),p);if(!0===x){q=
c.getOutlineColor();x=p;if(0<c.spacement&&(A=c.maxValue-c.minValue,0!=A))if(C=c.minValue,!0===c.horizontal){A=(c.w-2*m)/A;u=(C-c.minValue)*A;u+=m;!0===c.invertScalePos?a.createSVGRect(document,h,m,x,c.w-2*m,2,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,m,c.h-x-2,c.w-2*m,2,a.adjustColorStr(q),null,0,!1);!0===c.invertScalePos?0<u&&u<c.w?a.createSVGRect(document,h,u-1,x-8,2,10,a.adjustColorStr(q),null,0,!1):u<c.w?a.createSVGRect(document,h,u,x-8,1,10,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,
h,u-1,x-8,1,10,a.adjustColorStr(q),null,0,!1):0<u&&u<c.w?a.createSVGRect(document,h,u-1,c.h-x-2,2,10,a.adjustColorStr(q),null,0,!1):u<c.w?a.createSVGRect(document,h,u,c.h-x-2,1,10,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,u-1,c.h-x-2,1,10,a.adjustColorStr(q),null,0,!1);v=u-c.spacement*A;for(C=1;0<=v;)0===C%5?!0===c.invertScalePos?0<v&&v<c.w?a.createSVGRect(document,h,v-1,x-8,2,8,a.adjustColorStr(q),null,0,!1):v<c.w?a.createSVGRect(document,h,v,x-8,1,8,a.adjustColorStr(q),null,0,!1):
a.createSVGRect(document,h,v-1,x-8,1,8,a.adjustColorStr(q),null,0,!1):0<v&&v<c.w?a.createSVGRect(document,h,v-1,c.h-x,2,8,a.adjustColorStr(q),null,0,!1):v<c.w?a.createSVGRect(document,h,v,c.h-x,1,8,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,v-1,c.h-x,1,8,a.adjustColorStr(q),null,0,!1):!0===c.invertScalePos?a.createSVGRect(document,h,v-1,x-4,2,4,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,v-1,c.h-x,2,4,a.adjustColorStr(q),null,0,!1),C++,v=u-c.spacement*C*A;v=u+c.spacement*
A;for(C=1;v<=c.w;)0===C%5?!0===c.invertScalePos?0<v&&v<c.w?a.createSVGRect(document,h,v-1,x-8,2,10,a.adjustColorStr(q),null,0,!1):v<c.w?a.createSVGRect(document,h,v,x-8,1,10,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,v-1,x-8,1,10,a.adjustColorStr(q),null,0,!1):0<v&&v<c.w?a.createSVGRect(document,h,v-1,c.h-x-2,2,10,a.adjustColorStr(q),null,0,!1):v<c.w?a.createSVGRect(document,h,v,c.h-x-2,1,10,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,v-1,c.h-x-2,1,10,a.adjustColorStr(q),
null,0,!1):!0===c.invertScalePos?a.createSVGRect(document,h,v-1,x-4,2,4,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,v-1,c.h-x,2,4,a.adjustColorStr(q),null,0,!1),C++,v=u+c.spacement*C*A}else{A=(c.h-2*m)/A;!0===c.invertScalePos?a.createSVGRect(document,h,x,m,2,c.h-2*m,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,c.w-x-2,m,2,c.h-2*m,a.adjustColorStr(q),null,0,!1);!0===c.invertScalePos?0<c.h?a.createSVGRect(document,h,x-8,0,10,1,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,
h,x-8,-1,10,1,a.adjustColorStr(q),null,0,!1):0<c.h?a.createSVGRect(document,h,c.w-x-2,0,10,1,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,c.w-x-2,-1,10,1,a.adjustColorStr(q),null,0,!1);u=0+c.spacement*A;for(C=1;u<=c.h;)0===C%5?!0===c.invertScalePos?0<u&&u<c.h?a.createSVGRect(document,h,x-8,u-1,8,2,a.adjustColorStr(q),null,0,!1):u<c.h?a.createSVGRect(document,h,x-8,u,8,1,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,x-8,u-1,8,1,a.adjustColorStr(q),null,0,!1):0<u&&u<c.h?a.createSVGRect(document,
h,c.w-x,u-1,8,2,a.adjustColorStr(q),null,0,!1):u<c.h?a.createSVGRect(document,h,c.w-x,u,8,1,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,c.w-x,u-1,8,1,a.adjustColorStr(q),null,0,!1):!0===c.invertScalePos?a.createSVGRect(document,h,x-4,u-1,4,2,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,c.w-x,u-1,4,2,a.adjustColorStr(q),null,0,!1),C++,u=0+c.spacement*C*A;u=0-c.spacement*A;for(C=1;0<=u;)0===C%5?!0===c.invertScalePos?0<u&&u<c.h?a.createSVGRect(document,h,x-8,u-1,10,2,a.adjustColorStr(q),
null,0,!1):u<c.h?a.createSVGRect(document,h,x-8,u,10,1,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,x-8,u-1,10,1,a.adjustColorStr(q),null,0,!1):0<u&&u<c.h?a.createSVGRect(document,h,c.w-x-2,u-1,10,2,a.adjustColorStr(q),null,0,!1):u<c.h?a.createSVGRect(document,h,c.w-x-2,u,10,1,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,h,c.w-x-2,u-1,10,1,a.adjustColorStr(q),null,0,!1):!0===c.invertScalePos?a.createSVGRect(document,h,x-4,u-1,4,2,a.adjustColorStr(q),null,0,!1):a.createSVGRect(document,
h,c.w-x,u-1,4,2,a.adjustColorStr(q),null,0,!1),C++,u=0-c.spacement*C*A}if(0<t&&(t=c.getOutlineColor(),q=0,A=c.minValue,u=c.maxValue,C=c.nScaleText,x=u-A,0!==x&&0<C))if(!0===c.horizontal){q=0;2<=C&&(v=A.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,c.w,0,q,16,2,t):f(h,v,c.w,c.h-16,q,16,2,t):!0===c.invertScalePos?f(h,v,0,0,q,16,0,t):f(h,v,0,c.h-16,q,16,0,t),v=u.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,0,0,q,16,0,t):f(h,v,0,c.h-16,q,16,0,t):!0===c.invertScalePos?f(h,
v,c.w,0,q,16,2,t):f(h,v,c.w,c.h-16,q,16,2,t));3==C&&(v=(A+x/2).toString(),!0===c.invertScalePos?f(h,v,c.w/2,0,q,16,1,t):f(h,v,c.w/2,c.h-16,q,16,1,t));if(6==C)for(u=2;10>u;u+=2)v=A+u*x/10,v=v.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,c.w-u*c.w/10,0,q,16,1,t):f(h,v,c.w-u*c.w/10,c.h-16,q,16,1,t):!0===c.invertScalePos?f(h,v,u*c.w/10,0,q,16,1,t):f(h,v,u*c.w/10,c.h-16,q,16,1,t);if(11==C)for(u=1;10>u;u++)v=A+u*x/10,v=v.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,c.w-u*c.w/
10,0,q,16,1,t):f(h,v,c.w-u*c.w/10,c.h-16,q,16,1,t):!0===c.invertScalePos?f(h,v,u*c.w/10,0,q,16,1,t):f(h,v,u*c.w/10,c.h-16,q,16,1,t)}else{2<=C&&(v=A.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,r,0,q,16,2,t):f(h,v,c.w-r,0,q,16,0,t):!0===c.invertScalePos?f(h,v,r,c.h-16,q,16,2,t):f(h,v,c.w-r,c.h-16,q,16,0,t),v=u.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,r,c.h-16,q,16,2,t):f(h,v,c.w-r,c.h-16,q,16,0,t):!0===c.invertScalePos?f(h,v,r,0,q,16,2,t):f(h,v,c.w-r,0,q,16,0,t));
3==C&&(v=(A+x/2).toString(),!0===c.invertScalePos?f(h,v,r,c.h/2-8,q,16,2,t):f(h,v,c.w-r,c.h/2-8,q,16,0,t));if(6==C)for(u=2;10>u;u+=2)v=A+u*x/10,v=v.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,r,u*c.h/10-8,q,16,2,t):f(h,v,c.w-r,u*c.h/10-8,q,16,0,t):!0===c.invertScalePos?f(h,v,r,c.h-u*c.h/10-8,q,16,2,t):f(h,v,c.w-r,c.h-u*c.h/10-8,q,16,0,t);if(11==C)for(u=1;10>u;u++)v=A+u*x/10,v=v.toString(),!0===c.invertGrowing?!0===c.invertScalePos?f(h,v,r,u*c.h/10-8,q,16,2,t):f(h,v,c.w-r,u*c.h/10-
8,q,16,0,t):!0===c.invertScalePos?f(h,v,r,c.h-u*c.h/10-8,q,16,2,t):f(h,v,c.w-r,c.h-u*c.h/10-8,q,16,0,t)}}!0===c.checkIfOutline()&&0<c.getOutlineWidth()&&(t=c.getOutlineColor(),q=p,x=0!=q?1:0,0<c.getOutlineWidth()&&(!0===c.horizontal?!0===c.invertScalePos?a.createEzSVGRect(document,h,0,q+x,c.w,c.h-q-x,null,a.adjustColorStr(t),c.getOutlineWidth(),!1,c.getOutlineStyle(),!1,!0):a.createEzSVGRect(document,h,0,0,c.w,c.h-q-x,null,a.adjustColorStr(t),c.getOutlineWidth(),!1,c.getOutlineStyle(),!1,!0):!0===
c.invertScalePos?a.createEzSVGRect(document,h,q+x,0,c.w-q-x,c.h,null,a.adjustColorStr(t),c.getOutlineWidth(),!1,c.getOutlineStyle(),!1,!0):a.createEzSVGRect(document,h,0,0,c.w-q-x,c.h,null,a.adjustColorStr(t),c.getOutlineWidth(),!1,c.getOutlineStyle(),!1,!0)))}}n=h}}}};a.PainterType_Bargraph.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_IGraphic=function(h){this.base=a.PainterType_MPainter;this.base(h);var g=this,b=null,d=null,e=0,f=0,c=0,n=0,k=0,w=0,m=0,p=0;this.typeDraw=function(){if(!0===this.isFullPainterRedrawRequired()){var h=0,q=0;!0===g.checkIfInterior()&&(h=1);!0===g.checkIfOutline()&&(q=1);g.getOutlineWidth();h=a.adjustColorStr(g.getInteriorColor(),h.toString());q=a.adjustColorStr(g.getOutlineColor(),q.toString());var y=!0===g.checkIfOutline()?g.getOutlineWidth():!0===g.getInnerFill()?
g.getOutlineWidth():0;var t=g.getOutlineStyle();null!==g.frmElmnt&&(a.removeSVG(g.frmElmnt),g.frmElmnt=null);switch(t){case a.SOLID:g.frmElmnt=a.createSVGRect(g.svgDoc,g.getMainGroupElement(),g.x,g.y,g.w,g.h,h,q,y);break;case a.DASHED:case a.DOTTED:g.frmElmnt=a.createSVGRectDashed(g.svgDoc,g.getMainGroupElement(),g.x,g.y,g.w,g.h,h,q,y,g.getInnerFill(),t);break;default:a.log_append_ln("Unknown outline style")}var u=this.getEditSource();if(null!==u.name){h="";q=0;t=null;y=[];var v=u.value,z;u=0;v=v.replace(/\n/gi,
a.FVLINESEPTOKEN2);v=v.replace(/\t/gi,a.FVCOLSEPTOKEN2);var x=a.parseCSV(v);if(1===x.length)for(v=x[0].length,z=u=0;z<v;z++)switch(u){case 0:-1!==x[0][z].toString().indexOf("#!crv\\n#r")&&(u=1);break;case 1:t=x[0][z].split(",");4===t.length?u=2:(a.log_append_ln("updateIGraphicByContent parse Error 1 (#r - dimension)"),u=-1);break;case 2:-1!==x[0][z].toString().indexOf("#c")&&(u=3);break;case 3:q=parseInt(x[0][z].toString(),10);!1===isNaN(q)?u=4:(a.log_append_ln("updateIGraphicByContent parse Error 2 (#c - num Points)"),
u=-1);break;case 4:if(y.length<q){var A=x[0][z].toString().split(",");0<A.length&&!0===isNaN(A[0])&&(A[0]=0);1<A.length&&!0===isNaN(A[1])&&(A[1]=0);y.push(A)}}if(4===u){for(z=0;z<t.length;z++)t[z]=parseInt(t[z],10),!0===isNaN(t[z])&&a.log_append_ln("updateIGraphicByContent parse Error 3 (numeric #r coordinates expected)");for(z=0;z<y.length;z++)y[z][0]=parseInt(y[z][0],10),!0===isNaN(y[z][0])&&a.log_append_ln("updateIGraphicByContent parse Error 4 (numeric #c coordinates expected)"),y[z][1]=parseInt(y[z][1],
10),!0===isNaN(y[z][1])&&a.log_append_ln("updateIGraphicByContent parse Error 5 (numeric #c coordinates expected)")}if(0<q){null!==d&&a.removeSVG(d);u=0;!0===g.checkIfOutline()&&(u=g.getOutlineWidth());v=document.createElementNS(a.SvgNs,"svg");null!==v&&(v.setAttributeNS(null,"x",g.xOrg+u),v.setAttributeNS(null,"y",g.yOrg+u),e=g.wOrg-2*u,v.setAttributeNS(null,"width",e),f=g.hOrg-2*u,v.setAttributeNS(null,"height",f),v.setAttributeNS(null,"viewbox","0 0 "+e+" "+f),v.setAttributeNS(null,"version","1.1"),
g.getMainGroupElement().appendChild(v));d=v;null!==b&&a.removeSVG(b);k=t[0];w=t[1];m=t[2];p=t[3];w!=k&&(c=e/(w-k));p!=m&&(n=f/(p-m));b=document.createElementNS(a.SvgNs,"path");for(t=0;t<q;t++)u=Math.round((y[t][0]-k)*c),v=Math.round((p-y[t][1])*n),h=0===t?"M"+u+" "+v+" ":h+("L"+u+" "+v+" ");b.setAttributeNS(null,"d",h);b.setAttributeNS(null,"stroke",a.adjustColorStr(g.getOutlineColor()));b.setAttributeNS(null,"stroke-width",g.getOutlineWidth());b.setAttributeNS(null,"fill","none");b.setAttributeNS(null,
"preserveAspectRatio","none");d.appendChild(b)}}}};this.notify=function(b,c){c=0;switch(b){case a.VIEW_GAIN_FOCUS:c=0;break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.genericDraw();break;case a.MOUSE_DOWN:c=0;break;case a.MOUSE_UP:c=0}return c}};a.PainterType_Bargraph.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function h(){this.type=0;this.typeStr="";this.y=this.x=0;this.ViewItem=null;this.consumedFlag=!1;this.consumedPainter=null;this.actionExecutedFlag=!1;this.jqEvent=null}function g(b,d){a.isDefined(d)&&a.isDefined(b)&&(d.x=b.x,d.y=b.y,d.ViewItem=b.ViewItem,d.consumedFlag=b.consumedFlag,d.consumedPainter=b.consumedPainter,d.actionExecutedFlag=b.actionExecutedFlag,d.jqEvent=b.jqEvent,d.typeStr=b.typeStr,d.type=b.type)}function b(b){a.isDefined(a.g_MouseEventInfo)&&a.isDefined(b)&&
!0===a.g_MouseEventInfo.consumedFlag&&null!==a.g_MouseEventInfo.consumedPainter&&(a.g_MouseEventInfo.type=b.type,a.g_MouseEventInfo.typeStr=b.typeStr,a.g_MouseEventInfo.jqEvent=b.jqEvent,!1===a.g_MouseEventInfo.actionExecutedFlag&&(a.g_MouseEventInfo.x=b.x,a.g_MouseEventInfo.y=b.y),a.isDefined(a.g_MouseEventInfo.consumedPainter)&&a.g_MouseEventInfo.consumedPainter.notify(b.type,a.g_MouseEventInfo),a.releaseDragIfRequired(),a.scheduleRepaint())}a.MOUSE_DOWN=216;a.MOUSE_DOWN_STR="HMI_MOUSE_DOWN";a.MOUSE_UP=
217;a.MOUSE_UP_STR="HMI_MOUSE_UP";a.MOUSE_OVER=502;a.MOUSE_OVER_STR="HMI_MOUSE_OVER";a.MOUSE_OUT=503;a.MOUSE_OUT_STR="HMI_MOUSE_OUT";a.MOUSE_MOVE=504;a.MOUSE_MOVE_STR="HMI_MOUSE_MOVE";a.inverseCTM=null;a.CTM=null;a.g_MouseEventInfo=new h;a.g_MouseMoveEventInfo=new h;var d=0,e=!1,f={phase:0,start:{pageX:0,pageY:0},move:{pageX:0,pageY:0}};a.ME_registerViewMouseEventHandler=function(b){a.getViewDOMHandles(b);$(b.ClickableDiv.handle).on("touchstart touchmove touchend",function(a){b.MouseEventDispatcher(a)});
$(b.ClickableDiv.handle).on("mousedown mouseup mousemove mouseout mouseover",function(a){b.MouseEventDispatcher(a)})};a.ME_destroyMouseEventHandler=function(a){$(a.ClickableDiv.handle).unbind()};a.ME_registerViewKeyDownEventListener=function(b){b.layers&&b.captureEvents(Event.KEYDOWN);b.onkeydown=function(b){if(a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)){var c=0;a.resetInactivity();a.isDefined(b)&&(c=b.which?b.which:b.keyCode);3<=a.getDebugLevel&&a.log_append_ln("documentHandle.onkeydown keyCode: "+
c);13==c?a.g_MouseEventInfo.ViewItem.NotifyFunc&&a.g_MouseEventInfo.ViewItem.NotifyFunc(a.ENTER,null):27==c?a.g_MouseEventInfo.ViewItem.NotifyFunc&&a.g_MouseEventInfo.ViewItem.NotifyFunc(a.ESCAPE,null):a.g_MouseEventInfo.ViewItem.NotifyFunc&&a.g_MouseEventInfo.ViewItem.NotifyFunc(c,null);a.scheduleRepaint()}}};a.ME_destroyViewKeyEventListener=function(a){null!==a&&(a.onkeydown=null)};a.ME_teq2screenCoord=function(b,d,e){a.isDefined(e)||a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&
a.isDefined(a.g_MouseEventInfo.ViewItem.SVGDocument)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGDocument.rootElement)&&(e=a.g_MouseEventInfo.ViewItem.SVGDocument.rootElement.createSVGPoint());a.isDefined(e)&&(e.x=b,e.y=d,a.inverseCTM&&(e=e.matrixTransform(a.inverseCTM)));return e};a.ME_screenCoord2Teq=function(b,d,e){a.isDefined(e)||a.isDefined(a.g_MouseEventInfo)&&a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGDocument)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGDocument.rootElement)&&
(e=a.g_MouseEventInfo.ViewItem.SVGDocument.rootElement.createSVGPoint());a.isDefined(e)&&(e.x=b,e.y=d,a.CTM&&(e=e.matrixTransform(a.CTM)));return e};a.ME_mouseEventDispatcher=function(c){var n={isUnknown:!1};if(0<a.g_ConnectFail)a.log_append_ln("!!!! sc.ME_mouseEventDispatcher no connection so skips events !!!!!");else if(!0!==this.locked&&!0!==this.unloadedFlag&&!0!==this.mouseDisabled&&(c.stopPropagation(),null!==this.NotifyFunc)){var k;if(k=!0===e)k=!1,!a.isDefined(c)||"mousedown"!==c.type&&"mouseup"!==
c.type&&"mousemove"!==c.type&&"mouseout"!==c.type&&"mouseover"!==c.type&&"dblclick"!=c.type||(k=!0),k=!0===k;if(!k){if(k=!1===e)k=!1,!a.isDefined(c)||"touchstart"!==c.type&&"touchend"!==c.type&&"touchmove"!==c.type||(k=!0);k&&(e=!0);a.isDefined(n)&&(n.isUnknown=!1);k=new h;k.x=0;k.y=0;k.ViewItem=this;k.consumedFlag=!1;k.consumedPainter=null;k.actionExecutedFlag=!1;k.jqEvent=c;if(!0===e)switch(c.type){case "touchstart":k.typeStr=a.MOUSE_DOWN_STR;k.type=a.MOUSE_DOWN;break;case "touchend":k.typeStr=
a.MOUSE_UP_STR;k.type=a.MOUSE_UP;break;case "touchmove":k.typeStr=a.MOUSE_MOVE_STR;k.type=a.MOUSE_MOVE;break;case "touchleave":k.typeStr=a.MOUSE_OUT_STR;a.type=a.MOUSE_OUT;break;default:k.typeStr=c.type,a.log_append_ln("Unknown event case 1: "+c.type),n.isUnknown=!0}else switch(c.type){case "mousedown":k.typeStr=a.MOUSE_DOWN_STR;k.type=a.MOUSE_DOWN;break;case "mouseup":k.typeStr=a.MOUSE_UP_STR;k.type=a.MOUSE_UP;break;case "mousemove":k.typeStr=a.MOUSE_MOVE_STR;k.type=a.MOUSE_MOVE;break;case "mouseout":k.typeStr=
a.MOUSE_OUT_STR;k.type=a.MOUSE_OUT;break;case "mouseover":k.typeStr=a.MOUSE_OVER_STR;k.type=a.MOUSE_OVER;break;default:k.typeStr=c.type,a.log_append_ln("Unknown event case 2: "+c.type),n.isUnknown=!0}if(!0!==n.isUnknown&&a.isDefined(k)&&(!1!==e||1===k.jqEvent.which||k.type!==a.MOUSE_DOWN&&k.type!==a.MOUSE_UP)){n=!1;if(a.isDefined(c)&&a.isDefined(k)&&a.isDefined(this)){if(!0===e&&a.isDefined(f))switch(c.type){case "touchstart":0===f.phase?(a.isDefined(c.originalEvent)&&a.isDefined(c.originalEvent.touches[0])&&
(k.x=c.originalEvent.touches[0].pageX,k.y=c.originalEvent.touches[0].pageY),f.start.pageX=k.x,f.start.pageY=k.y,f.phase=1,2<=a.getDebugLevel()&&a.log_append_ln("phase: 0, y: "+k.y)):n=!0;break;case "touchmove":0<f.phase?(a.isDefined(c.originalEvent)&&a.isDefined(c.originalEvent.touches[0])&&(k.x=c.originalEvent.touches[0].pageX,k.y=c.originalEvent.touches[0].pageY),f.move.pageX=k.x,f.move.pageY=k.y,f.phase=2,2<=a.getDebugLevel()&&a.log_append_ln("phase: 1 (touchmove), y: "+k.y)):n=!0;break;case "touchend":1===
f.phase?(k.x=f.start.pageX,k.y=f.start.pageY,f.phase=0,2<=a.getDebugLevel()&&a.log_append_ln("phase: 1 (touchend), y: "+k.y)):2===f.phase?(k.x=f.move.pageX,k.y=f.move.pageY,f.phase=0,2<=a.getDebugLevel()&&a.log_append_ln("phase: 2, y: "+k.y)):n=!0}else k.x=c.pageX,k.y=c.pageY;k.x-=a.getLeftPos(this.ClickableDiv.handle);k.y-=a.getTopPos(this.ClickableDiv.handle)}if(!0!==n){lPoint=a.ME_teq2screenCoord(k.x,k.y);a.isDefined(lPoint)&&(k.x=lPoint.x,k.y=lPoint.y);1<=a.getDebugLevel()&&(a.isDefined(a.g_MouseEventInfo)&&
a.isDefined(a.g_MouseEventInfo.ViewItem)&&a.isDefined(a.g_MouseEventInfo.ViewItem.SVGRootElmnt)&&"ScalingTag"==a.g_MouseEventInfo.ViewItem.SVGRootElmnt.id&&(a.g_MouseEventInfo.ViewItem.SVGRootElmnt=a.g_MouseEventInfo.ViewItem.SVGRootElmnt.firstElementChild),a.showMouseCirlce(this,k.x,k.y));(d!==a.MOUSE_MOVE||k.type!==a.MOUSE_MOVE)&&2<=a.getDebugLevel()&&a.log_append_ln(k.typeStr);if(a.isDefined(a.g_MouseEventInfo))switch(a.g_MouseEventInfo.ViewItem=this,k.type){case a.MOUSE_OUT:a.g_MouseEventInfo.type===
a.MOUSE_DOWN&&(2<=a.getDebugLevel()&&a.log_append_ln("sc.ME_mouseEventDispatcher Mouse Out with Pressed Button -> Simulate Mouse Up"),k.type=a.MOUSE_UP,k.typeStr=a.MOUSE_UP_STR,b(k));break;case a.MOUSE_OVER:g(k,a.g_MouseEventInfo);break;case a.MOUSE_DOWN:a.resetInactivity();c=document.activeElement;document.hasFocus()&&(null!==a.g_HTMLControlDropDownElmnt&&a.g_HTMLControlDropDownElmnt===c?(a.g_HTMLControlDropDownElmnt.blur(),3<=a.getDebugLevel()&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlDropDownElmnt has focus so send him the blur()")):
null!==a.g_HTMLControlInputElmnt&&a.g_HTMLControlInputElmnt===c?(a.g_HTMLControlInputElmnt.blur(),3<=a.getDebugLevel()&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlInputElmnt has focus so send him the blur()")):null!==a.g_HTMLControlPwInputElement&&a.g_HTMLControlPwInputElement===c?(a.g_HTMLControlPwInputElement.blur(),3<=a.getDebugLevel()&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlPwInputElement has focus so send him the blur()")):null!==a.g_HTMLControlTextareaElmnt&&
a.g_HTMLControlTextareaElmnt===c?(a.g_HTMLControlTextareaElmnt.blur(),3<=a.getDebugLevel()&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlTextareaElmnt has focus so send him the blur()")):3<=a.getDebugLevel()&&(null!==a.g_HTMLControlDropDownElmnt?a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlDropDownElmnt not found!"):null!==a.g_HTMLControlInputElmnt?a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlInputElmnt not found!"):null!==a.g_HTMLControlPwInputElement?
a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlPwInputElement not found!"):null!==a.g_HTMLControlTextareaElmnt&&a.log_append_ln(" sc.ME_mouseEventDispatcher sc.g_HTMLControlTextareaElmnt not found!")));g(k,a.g_MouseEventInfo);this.NotifyFunc(k.type,a.g_MouseEventInfo);a.scheduleRepaint();2<=a.getDebugLevel()&&console.log("Ready: MOUSE_DOWN");break;case a.MOUSE_UP:a.resetInactivity();b(k);break;case a.MOUSE_MOVE:n=a.g_MouseMoveNotificationList.length;var w=k.x;var m=k.y;2<=a.getDebugLevel()&&
$("#SC_MouseMove").text(w+" "+m);g(k,a.g_MouseMoveEventInfo);for(w=n-1;0<=w&&(!a.isDefined(a.g_MouseMoveNotificationList[w])||void 0===a.g_MouseMoveNotificationList[w].notify||(n=a.g_MouseMoveNotificationList[w].notify(k.type,a.g_MouseMoveEventInfo),1!=n));w--);a.isDefined(a.g_MouseDragObject)&&null!==a.g_MouseDragObject.onDrag&&(c.preventDefault(),a.resetInactivity(),a.g_MouseDragObject.onDrag(a.g_MouseMoveEventInfo))}d=k.type}}}}};return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_Rectangle=function(h){this.base=a.PainterType_MPainter;this.base(h);this.typeDraw=function(){if(!0===this.isFullPainterRedrawRequired()){var g=0,b=0;!0===this.checkIfInterior()&&(g=1);!0===this.checkIfOutline()&&(b=1);this.getOutlineWidth();g=a.adjustColorStr(this.getInteriorColor(),g.toString());b=a.adjustColorStr(this.getOutlineColor(),b.toString());var d=!0===this.checkIfOutline()?this.getOutlineWidth():!0===this.getInnerFill()?this.getOutlineWidth():0;var e=
this.getOutlineStyle();if(a.isDefined(this.frmElmnt))for(;this.frmElmnt.firstChild;)this.frmElmnt.removeChild(this.frmElmnt.firstChild);this.frmElmnt=a.createEzSVGRect(this.svgDoc,this.getMainGroupElement(),this.x,this.y,this.w,this.h,g,b,d,this.getInnerFill(),e,this.checkPaintAsRoundedRect())}}};a.PainterType_Rectangle.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.sprintf=function(){function h(a,b,d,e){b=a.length>=b?"":Array(1+b-a.length>>>0).join(d);return e?a+b:b+a}function g(a,b,d,e,f){var c=e-a.length;0<c&&(a=d||!f?h(a,e," ",d):a.slice(0,b.length)+h("",c,"0",!0)+a.slice(b.length));return a}function b(a,b,d,e,f,p,r){a>>>=0;d=d&&a&&{2:"0b",8:"0",16:"0x"}[b]||"";a=d+h(a.toString(b),p||0,"0",!1);return g(a,d,e,f,r)}function d(a,b,d,e,f){null!==e&&(a=a.slice(0,e));return g(a,"",b,d,f)}var e=arguments,f=0;return e[f++].replace(a.sprintf.regex,
function(a,n,k,w,m,p,r){m="";if("%%"==a)return"%";for(var c=!1,y="",t=!1,u=!1,v=0;k&&v<k.length;v++)switch(k.charAt(v)){case " ":y=" ";break;case "+":y="+";break;case "-":c=!0;break;case "0":t=!0;break;case "#":u=!0}w=w?"*"==w?+e[f++]:"*"==w.charAt(0)?+e[w.slice(1,-1)]:+w:0;0>w&&(w=-w,c=!0);if(!isFinite(w))throw Error("sprintf: (minimum-)width must be finite");p=p?"*"==p?+e[f++]:"*"==p.charAt(0)?+e[p.slice(1,-1)]:+p:-1<"fFeE".indexOf(r)?6:"d"==r?0:void 0;n=n?e[n.slice(0,-1)]:e[f++];switch(r){case "s":return d(String(n),
c,w,p,t);case "c":return d(String.fromCharCode(+n),c,w,p,t);case "b":return b(n,2,u,c,w,p,t);case "o":return b(n,8,u,c,w,p,t);case "x":return b(n,16,u,c,w,p,t);case "X":return b(n,16,u,c,w,p,t).toUpperCase();case "u":return b(n,10,u,c,w,p,t);case "i":case "d":return a=parseInt(n,10),!0!==isNaN(a)&&(m=0>a?"-":y,n=m+h(String(Math.abs(a)),p,"0",!1)),g(n,m,c,w,t);case "e":case "E":case "f":case "F":case "g":case "G":return a=+n,m=0>a?"-":y,y=["toExponential","toFixed","toPrecision"]["efg".indexOf(r.toLowerCase())],
r=["toString","toUpperCase"]["eEfFgG".indexOf(r)%2],n=m+Math.abs(a)[y](p),g(n,m,c,w,t)[r]();default:return a}})};a.sprintf.regex=/%%|%(\d+\$)?([-+#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuidfegEG])/g;return a}(_SCIntern||{});_SCIntern=function(a){Date.ext={};Date.ext.util={};Date.prototype.strftimeUTCMode=!1;Date.ext.util.xPad=function(a,g,b){for("undefined"==typeof b&&(b=10);parseInt(a,10)<b&&1<b;b/=10)a=g.toString()+a;return a.toString()};Date.prototype.locale="de-DE";document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang&&(Date.prototype.locale=document.getElementsByTagName("html")[0].lang);Date.ext.locales={};Date.ext.locales.en={a:"Sun Mon Tue Wed Thu Fri Sat".split(" "),A:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
b:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),B:"January February March April May June July August September October November December".split(" "),c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"};Date.ext.locales["en-US"]=Date.ext.locales.en;Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z";Date.ext.locales["en-US"].x="%D";Date.ext.locales["en-US"].X="%r";Date.ext.locales["en-GB"]=Date.ext.locales.en;Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"];Date.ext.formats=
{a:function(a){return Date.ext.locales[a.locale].a[a.getDay()]},A:function(a){return Date.ext.locales[a.locale].A[a.getDay()]},b:function(a){return Date.ext.locales[a.locale].b[a.getMonth()]},B:function(a){return Date.ext.locales[a.locale].B[a.getMonth()]},c:"toLocaleString",C:function(a){return Date.ext.util.xPad(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return Date.ext.util.xPad(parseInt(Date.ext.util.G(a)/100,10),0)},G:function(a){var g=a.getFullYear(),
b=parseInt(Date.ext.formats.V(a),10);a=parseInt(Date.ext.formats.W(a),10);a>b?g++:0===a&&52<=b&&g--;return g},H:["getHours","0"],I:function(a){a=a.getHours()%12;return Date.ext.util.xPad(0===a?12:a,0)},j:function(a){var g=a-new Date(""+a.getFullYear()+"/1/1 GMT");g+=6E4*a.getTimezoneOffset();a=parseInt(g/6E4/60/24,10)+1;return Date.ext.util.xPad(a,0,100)},m:function(a){return Date.ext.util.xPad(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return Date.ext.locales[a.locale].p[12<=a.getHours()?
1:0]},P:function(a){return Date.ext.locales[a.locale].P[12<=a.getHours()?1:0]},S:["getSeconds","0"],u:function(a){a=a.getDay();return 0===a?7:a},U:function(a){var g=parseInt(Date.ext.formats.j(a),10);a=6-a.getDay();g=parseInt((g+a)/7,10);return Date.ext.util.xPad(g,0)},V:function(a){var g=parseInt(Date.ext.formats.W(a),10),b=(new Date(""+a.getFullYear()+"/1/1")).getDay();g+=4<b||1>=b?0:1;53==g&&4>(new Date(""+a.getFullYear()+"/12/31")).getDay()?g=1:0===g&&(g=Date.ext.formats.V(new Date(""+(a.getFullYear()-
1)+"/12/31")));return Date.ext.util.xPad(g,0)},w:"getDay",W:function(a){var g=parseInt(Date.ext.formats.j(a),10);a=7-Date.ext.formats.u(a);g=parseInt((g+a)/7,10);return Date.ext.util.xPad(g,0,10)},y:function(a){return Date.ext.util.xPad(a.getFullYear()%100,0)},Y:"getFullYear",z:function(a){a=a.getTimezoneOffset();var g=Date.ext.util.xPad(parseInt(Math.abs(a/60),10),0),b=Date.ext.util.xPad(a%60,0);return(0<a?"-":"+")+g+b},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(a){return"%"}};
Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"\t",T:"%H:%M:%S",x:"locale",X:"locale"};Date.ext.aggregates.z=Date.ext.formats.z(new Date);Date.ext.aggregates.Z=Date.ext.formats.Z(new Date);Date.ext.unsupported={};Date.prototype.strftime=function(a){this.locale in Date.ext.locales||(this.locale.replace(/-[a-zA-Z]+$/,"")in Date.ext.locales?this.locale=this.locale.replace(/-[a-zA-Z]+$/,""):this.locale="en-GB");for(var g=this;a.match(/%[cDhnrRtTxXzZ]/);)a=a.replace(/%([cDhnrRtTxXzZ])/g,
function(a,d){a=Date.ext.aggregates[d];return"locale"==a?Date.ext.locales[g.locale][d]:a});a=a.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(a,d){a=Date.ext.formats[d];return"string"==typeof a?g[a]():"function"==typeof a?a.call(g,g):"object"==typeof a&&"string"==typeof a[0]?Date.ext.util.xPad(g[a[0]](),a[1]):d});g=null;return a};return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_TextField=function(h){var g="",b="";this.base=a.PainterType_MPainter;this.base(h);this.drawShape=a.drawRectShape;this.clearText=a.clearText;this.drawSourceText=a.drawSourceText;this.frmElmntOut=this.frmElmntInt=null;this.updateTextFieldSourceElement=function(b){if(a.isDefined(b)){var d=this.getOutlineWidth();!0===this.getU3d()&&(d+=2);(0>this.w||0>this.h)&&a.log_append_ln(" ERROR hmi_textfield this.w < 0 || this.h < 0");a.setSvgAttrC(b.e,"x",this.x+d);a.setSvgAttrC(b.e,
"y",this.y+d);a.setSvgAttrC(b.e,"width",this.w-2*d);a.setSvgAttrC(b.e,"height",this.h-2*d);this.clearText(b);this.drawSourceText(b)}};this.notify=function(b,e){var d=0;switch(b){case a.DRAW_OBJECT:!1===this.editModeFlag&&(this.instanceDraw&&this.instanceDraw(),this.genericDraw());break;case a.MOUSE_DOWN:if(!0===a.OB_checkMouseCoordinates(this,e))if(!1===this.instanceDisabled()){b=this.instanceValidDownAction();var c=this.instanceValidUpAction();if(!0===b||!0===c)a.isDefined(e)&&(e.consumedFlag=!0,
e.consumedPainter=this,this.scheduleFullRedrawPainter(),!0===b&&(this.executeActionMouseDown(),e.actionExecutedFlag=!0)),d=1}else d=0;else d=0;break;case a.MOUSE_UP:a.isDefined(e)&&!0===e.consumedFlag&&(!0===a.OB_checkMouseCoordinates(this,a.g_MouseEventInfo)?!1===this.instanceDisabled()?this.executeActionMouseUp&&this.executeActionMouseUp():2<=a.getDebugLevel()&&a.log_append_ln("hmi_textfield Disabled while down case"):2<=a.getDebugLevel()&&a.log_append_ln("hmi_textfield Undo case"),this.scheduleFullRedrawPainter());
break;case a.ENTER:this.editModeFlag&&(this.leaveEditMode(!0),d=1);break;case a.ESCAPE:this.editModeFlag&&(this.leaveEditMode(!1),d=1);break;case a.REMOVE_SELECTION:this.editModeFlag&&(this.leaveEditMode(!0),d=1);break;case a.VIEW_LOST_FOCUS:this.editModeFlag&&(this.leaveEditMode(!1),d=1)}return d};this.drawRectShapeInterior=function(){var b,e=this.getOutlineWidth(),f=this.getRepaintElement(this.frmOuterGroup),c=this.getRepaintElement(this.frmInnerGroup);this.getRepaintElement(this.olnGroup);for(b=
!0===this.checkIfInterior()?1:0;null!=f&&f.hasChildNodes();)f.removeChild(f.firstChild);for(;c&&c.hasChildNodes();)c.removeChild(c.firstChild);var g=a.isDefined(g=this.getInteriorColorPressed())?g:this.getInteriorColor();b=a.adjustColorStr(g,b.toString());g=a.adjustColorStr(this.getOutlineColor(),(0).toString());a.createEzSVGRect(this.svgDoc,c,this.x,this.y,this.w,this.h,b,g,e,this.getInnerFill(),null,this.checkPaintAsRoundedRect(),!1,f)};this.drawRectShapeOutline=function(){var d=this.getOutlineWidth(),
e=this.getRepaintElement(this.frmOuterGroup),f=this.getRepaintElement(this.olnGroup);e=e.parentNode.parentNode;a.isDefined(f)||(e.appendChild(f=a.createSVGElement(this.svgDoc,"g")),f.setAttributeNS(null,"id",this.olnGroup));for(;null!=f&&f.hasChildNodes();)f.removeChild(f.firstChild);a.createEzSVGRect(this.svgDoc,f,this.x,this.y,this.w,this.h,g,b,d,this.getInnerFill(),this.getOutlineStyle(),this.checkPaintAsRoundedRect(),!0,null)};this.typeDraw=function(){if(!0===this.isFullPainterRedrawRequired()){opacityInterior=
!0===this.checkIfInterior()?1:0;opacityOutline=!0===this.checkIfOutline()?1:0;g=a.adjustColorStr(this.getInteriorColor(),opacityInterior.toString());b=a.adjustColorStr(this.getOutlineColor(),opacityOutline.toString());this.getOutlineStyle();this.drawRectShapeInterior();null!==this.frm3dElmnt&&(a.removeSVG(this.frm3dElmnt),this.frm3dElmnt=null);if(!0===this.getU3d()){var d=this.getOutlineWidth();this.frm3dElmnt=a.createSVGRect_3dFrame_TextField(this.svgDoc,this.getRepaintElement(this.frmGroup),this.x,
this.y,this.w,this.h,d)}this.drawRectShapeOutline();d=this.getEditSource();null!==d.name?this.updateTextFieldSourceElement(d):this.clearText(d)}}};a.PainterType_TextField.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.PainterType_Oval=function(h){function g(d){a:{var e=a.getMPainterScreenCrd(b);if(a.isDefined(e)){var f=e.w/2,c=e.h/2,g=e.x+f,h=e.y+c;c=Math.sqrt(f*f-c*c);f=g-c;g+=c;e=f+g-2*e.x;f=Math.sqrt(Math.pow(d.x-f,2)+Math.pow(d.y-h,2));f+=Math.sqrt(Math.pow(d.x-g,2)+Math.pow(d.y-h,2));if(e>=f){d=!0;break a}}d=!1}return d}var b=this;this.base=a.PainterType_MPainter;this.base(h);this.notify=function(b,e){var d=0;switch(b){case a.VIEW_GAIN_FOCUS:if(!1===this.instanceDisabled()&&this.onGainActionFunc)this.onGainActionFunc();
break;case a.VIEW_LOST_FOCUS:if(!1===this.instanceDisabled()&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.genericDraw();break;case a.MOUSE_DOWN:if(!0===a.OB_checkMouseCoordinates(this,e)&&!0===g(e)&&!1===this.instanceDisabled()){var c=this.anyMouseDownExternalEventListener(),h=this.anyMouseUpExternalEventListener(),k=this.instanceValidDownAction(),w=this.instanceValidUpAction();if(!0===k||!0===w||!0===c||!0===h)e.consumedFlag=
!0,e.consumedPainter=this,this.scheduleFullRedrawPainter(),!0===k&&(this.executeActionMouseDown(),e.actionExecutedFlag=!0),!0===c&&(this.callExternalListener(b,e),e.actionExecutedFlag=!0),d=1}break;case a.MOUSE_UP:!0===e.consumedFlag&&(!0===a.OB_checkMouseCoordinates(this,e)?!0===g(e)&&(!1===this.instanceDisabled()?(this.executeActionMouseUp&&this.executeActionMouseUp(),this.anyMouseUpExternalEventListener()&&this.callExternalListener(b,e)):2<=a.getDebugLevel()&&a.log_append_ln("hmi_circle Disabled while down case"),
this.scheduleFullRedrawPainter()):(2<=a.getDebugLevel()&&a.log_append_ln("hmi_circle Undo case"),this.scheduleFullRedrawPainter()))}return d};this.typeDraw=function(){var b=0,e=this.getOutlineWidth();if(!0===this.isFullPainterRedrawRequired()){!0===this.checkIfInterior()&&(b=1);var f=!0===this.checkIfOutline()?1:0;b=a.adjustColorStr(this.getInteriorColor(),b.toString());f=a.adjustColorStr(this.getOutlineColor(),f.toString());var c=this.getOutlineStyle();if(a.isDefined(this.frmElmnt))for(;this.frmElmnt.firstChild;)this.frmElmnt.removeChild(this.frmElmnt.firstChild);
this.frmElmnt=a.createEzSVGEllipse(this.svgDoc,this.getMainGroupElement(),this.x,this.y,this.w,this.h,b,f,e,this.getInnerFill(),c)}}};a.PainterType_Oval.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){a.OB_checkMousePolygonCoordinates=function(h,g){var b=!1;a.isDefined(h)&&a.isDefined(g)&&(a.isDefined(h.x)&&a.isDefined(h.y)&&a.isDefined(h.w)&&a.isDefined(h.h)&&a.isDefined(h.svgDoc)?(h=a.getMPainterScreenCrd(h),a.isDefined(h)&&g.x>=h.x&&g.y>=h.y&&g.x<h.x+h.w&&g.y<h.y+h.h&&(b=!0)):a.log_append_ln("hmi_polygon OB_checkMouseCoordinates error"));return b};a.applyPolyWOffset=function(h){var g=-1,b=0,d;for(d=0;d<this.arrLen;d++)-1===g?g=this.arrXOrg[d]:this.arrXOrg[d]<g&&(g=this.arrXOrg[d]),
this.arrXOrg[d]>b&&(b=this.arrXOrg[d]);if(2===this.arrLen&&this.arrXOrg[0]===this.arrXOrg[1])this.arrX[1]=this.arrXOrg[1]+h.wOff,!0===isNaN(this.arrX[1])&&(a.log_append_ln("WARNING sc.applyPolyWOffset arrX[1] isNan so set to 0"),this.arrX[1]=0);else if(b!=g)for(d=0;d<this.arrLen;d++)this.arrX[d]=this.arrXOrg[d]+(this.arrXOrg[d]-g)*h.wOff/(b-g),!0===isNaN(this.arrX[d])&&(a.log_append_ln("WARNING sc.applyPolyWOffset arrX[i] isNan so set to 0"),this.arrX[d]=0)};a.applyPolyHOffset=function(h){var g=-1,
b=0,d;for(d=0;d<this.arrLen;d++)-1===g?g=this.arrYOrg[d]:this.arrYOrg[d]<g&&(g=this.arrYOrg[d]),this.arrYOrg[d]>b&&(b=this.arrYOrg[d]);if(2===this.arrLen&&this.arrYOrg[0]===this.arrYOrg[1])this.arrY[1]=this.arrYOrg[1]+h.hOff,!0===isNaN(this.arrY[1])&&(a.log_append_ln("WARNING sc.applyPolyHOffset arrY[1] isNan so set to 0"),this.arrY[1]=0);else for(d=0;d<this.arrLen;d++)b!=g&&(this.arrY[d]=this.arrYOrg[d]+(this.arrYOrg[d]-g)*h.hOff/(b-g),!0===isNaN(this.arrY[d])&&(a.log_append_ln("WARNING sc.applyPolyHOffset arrY[i] isNan so set to 0"),
this.arrY[d]=0))};a.applyXYOffset=function(h){var g;for(g=0;g<this.arrLen;g++)this.arrY[g]+=h.yOff,!0===isNaN(this.arrY[g])&&(a.log_append_ln("WARNING sc.applyXYOffset arrY[i] isNan so set to 0"),this.arrY[g]=0);for(g=0;g<this.arrLen;g++)this.arrX[g]+=h.xOff,!0===isNaN(this.arrX[g])&&(a.log_append_ln("WARNING sc.applyXYOffset arrX[i] isNan so set to 0"),this.arrX[g]=0)};a.applyPolyOffset=function(){if(!1!==this.hasAnyOffset()){this.arrX=a.cloneArray(this.arrXOrg);this.arrY=a.cloneArray(this.arrYOrg);
var h=this.getOffsetStruct();0!==h.wOff&&this.applyPolyWOffset(h);0!==h.hOff&&this.applyPolyHOffset(h);0===h.xOff&&0===h.yOff||this.applyXYOffset(h)}};a.PainterType_Polygon=function(h){function g(d){a.getMPainterScreenCrd(b);var e=0,f=0,c,g=!1;if(3<=b.arrLen){for(;0===e;){e=-1;for(c=0;c<b.arrLen;c++){var h=d.x;var w=d.y+f,m=b.arrX[c],p=b.arrY[c],r=b.arrX[0],q=b.arrY[0];c<b.arrLen-1&&(r=b.arrX[c+1],q=b.arrY[c+1]);if(w!=p||p!=q){if(p>q){var y=m,t=p;m=r;p=q;r=y;q=t}if(!(w==p&&h==m||w<=p||w>q)&&(h=(m-
h)*(q-w)-(p-w)*(r-h),h=0<h?-1:0>h?1:0,e*=h,0===e))break}}f++}1==e&&(g=!0)}return g}var b=this;this.base=a.PainterType_MPainter;this.base(h);this.arrLen=0;this.arrX=[];this.arrY=[];this.arrXOrg=[];this.arrYOrg=[];this.applyPolyOffset=a.applyPolyOffset;this.applyPolyWOffset=a.applyPolyWOffset;this.applyPolyHOffset=a.applyPolyHOffset;this.applyXYOffset=a.applyXYOffset;this.notify=function(b,e){var d=0;switch(b){case a.VIEW_GAIN_FOCUS:if(!1===this.instanceDisabled()&&this.onGainActionFunc)this.onGainActionFunc();
break;case a.VIEW_LOST_FOCUS:if(!1===this.instanceDisabled()&&this.onLostActionFunc)this.onLostActionFunc();break;case a.DRAW_OBJECT:this.instanceDraw&&this.instanceDraw();this.genericDraw();break;case a.MOUSE_DOWN:if(!0===a.OB_checkMouseCoordinates(this,e)&&!0===g(e)&&!1===this.instanceDisabled()){var c=this.anyMouseDownExternalEventListener(),h=this.anyMouseUpExternalEventListener(),k=this.instanceValidDownAction(),w=this.instanceValidUpAction();if(!0===k||!0===w||!0===c||!0===h)e.consumedFlag=
!0,e.consumedPainter=this,this.scheduleFullRedrawPainter(),!0===k&&(this.executeActionMouseDown(),e.actionExecutedFlag=!0),!0===c&&(this.callExternalListener(b,e),e.actionExecutedFlag=!0),d=1}break;case a.MOUSE_UP:!0===e.consumedFlag&&!0===a.OB_checkMouseCoordinates(this,e)&&(!0===g(e)?!1===this.instanceDisabled()?(this.executeActionMouseUp&&this.executeActionMouseUp(),this.anyMouseUpExternalEventListener()&&this.callExternalListener(b,e)):2<=a.getDebugLevel()&&a.log_append_ln("hmi_polygon Disabled while down case"):
2<=a.getDebugLevel()&&a.log_append_ln("hmi_polygon Undo case"),this.scheduleFullRedrawPainter())}return d};h.arrLen&&(this.arrLen=h.arrLen);h.arrX&&(this.arrXOrg=a.cloneArray(h.arrX),this.arrX=a.cloneArray(h.arrX));h.arrY&&(this.arrYOrg=a.cloneArray(h.arrY),this.arrY=a.cloneArray(h.arrY));this.typeDraw=function(){var b=0,e=this.getOutlineWidth();if(!0===this.isFullPainterRedrawRequired()){this.applyPolyOffset();!0===this.checkIfInterior()&&(b=1);var f=!0===this.checkIfOutline()?1:0;b=a.adjustColorStr(this.getInteriorColor(),
b.toString());f=a.adjustColorStr(this.getOutlineColor(),f.toString());var c=this.getOutlineStyle();null!==this.frmElmnt&&a.removeSVG(this.frmElmnt);this.frmElmnt=a.createSVGPolygon(this.svgDoc,this.getRepaintElement(this.frmGroup),this.arrX,this.arrY,f,e,b);switch(c){case a.DOTTED:a.setSVGAttr(this.frmElmnt,"stroke-dasharray",e+" "+e);break;case a.DASHED:b=e*a.DASHRECT_LENGTH_MULT,a.setSVGAttr(this.frmElmnt,"stroke-dasharray",b+" "+e)}}}};a.PainterType_Polygon.prototype=new a.PainterType_MPainter;
return a}(_SCIntern||{});_SCIntern=function(a){function h(a){a=a.trim();a=parseInt(a).toString(16);a=a.trim();return 1==a.length?"0"+a:a}var g=function(){var a=1;return function(){return a++}}();a.PainterType_Polyline=function(b){this.base=a.PainterType_MPainter;this.base(b);var d=new a.InfoType;this.arrLen=0;this.arrX=[];this.arrY=[];this.arrXOrg=[];this.arrYOrg=[];this.applyPolyOffset=a.applyPolyOffset;this.applyPolyWOffset=a.applyPolyWOffset;this.applyPolyHOffset=a.applyPolyHOffset;this.applyXYOffset=a.applyXYOffset;this.setEnd=
function(a){void 0!==a&&(this.updateSrcExt(d,a,{ppo:null}),d.value!==d.valuePrev&&(d.valuePrev=d.value,this.scheduleFullRedrawPainter()))};b.arrLen&&(this.arrLen=b.arrLen);b.arrX&&(this.arrXOrg=a.cloneArray(b.arrX),this.arrX=a.cloneArray(b.arrX));b.arrY&&(this.arrYOrg=a.cloneArray(b.arrY),this.arrY=a.cloneArray(b.arrY));this.typeDraw=function(){var b=0,f=this.getOutlineWidth(),c="polyline_",n=g(),k="0,0,";c+=n.toString();var w="ArrowL_"+c;n="ArrowR_"+c;if(!0===this.isFullPainterRedrawRequired()){this.applyPolyOffset();
!0===this.checkIfInterior()&&(b=1);var m=!0===this.checkIfOutline()?1:0;var p=a.adjustColorStr(this.getInteriorColor(),b.toString());var r=a.adjustColorStr(this.getOutlineColor(),m.toString());b=this.getOutlineStyle();null!==this.frmElmnt&&(a.removeSVG(this.frmElmnt),this.frmElmnt=null);var q=this.getOutlineColor().split(",");if(2<q.length){var y=q[1];var t=q[2];y="#"+h(q[0])+h(y)+h(t)}t=this.svgDoc.getElementsByTagName("defs");if(4<f){q=(f+6)/5;var u=11*q;k+=parseInt(15*q,10)+","+parseInt(u,10);
var v=this.svgDoc.createElementNS(a.SvgNs,"path");v.setAttribute("d","M0,5 L14,10 L14,0 Z");v.setAttribute("style","fill:"+y+"; fill-opacity: "+m.toString()+"; ");u=this.svgDoc.createElementNS(a.SvgNs,"marker");u.setAttribute("id",w);u.setAttribute("preserveAspectRatio","xMinYMin meet");u.setAttribute("viewBox",k);u.setAttribute("markerWidth","15");u.setAttribute("markerHeight","11");u.setAttribute("refX","14");u.setAttribute("refY","5");u.setAttribute("orient","auto");u.appendChild(v);t[0].appendChild(u);
arrowRpath=this.svgDoc.createElementNS(a.SvgNs,"path");arrowRpath.setAttribute("d","M0,0 L0,10 L14,5 Z");arrowRpath.setAttribute("style","fill:"+y+"; fill-opacity: "+m.toString()+"; ");m=this.svgDoc.createElementNS(a.SvgNs,"marker");m.setAttribute("id",n);m.setAttribute("preserveAspectRatio","xMinYMin meet");m.setAttribute("viewBox",k);m.setAttribute("markerWidth","15");m.setAttribute("markerHeight","11");m.setAttribute("refX","0");m.setAttribute("refY","5");m.setAttribute("orient","auto")}else q=
1,u=11*q,k+=parseInt(15*q,10)+","+parseInt(u,10),v=this.svgDoc.createElementNS(a.SvgNs,"path"),v.setAttribute("d","M0,5 L14,10 L14,0 Z"),v.setAttribute("style","fill:"+y+"; fill-opacity: "+m.toString()+"; "),u=this.svgDoc.createElementNS(a.SvgNs,"marker"),u.setAttribute("id",w),u.setAttribute("preserveAspectRatio","xMinYMin meet"),u.setAttribute("viewBox",k),u.setAttribute("markerWidth","15"),u.setAttribute("markerHeight","11"),u.setAttribute("refX","14"),u.setAttribute("refY","5"),u.setAttribute("orient",
"auto"),u.setAttribute("markerUnits","userSpaceOnUse"),u.appendChild(v),t[0].appendChild(u),arrowRpath=this.svgDoc.createElementNS(a.SvgNs,"path"),arrowRpath.setAttribute("d","M0,0 L0,10 L14,5 Z"),arrowRpath.setAttribute("style","fill:"+y+"; fill-opacity: "+m.toString()+"; "),m=this.svgDoc.createElementNS(a.SvgNs,"marker"),m.setAttribute("id",n),m.setAttribute("preserveAspectRatio","xMinYMin meet"),m.setAttribute("viewBox",k),m.setAttribute("markerWidth","15"),m.setAttribute("markerHeight","11"),
m.setAttribute("refX","0"),m.setAttribute("refY","5"),m.setAttribute("orient","auto"),m.setAttribute("markerUnits","userSpaceOnUse");m.appendChild(arrowRpath);t[0].appendChild(m);y=Math.atan2(this.arrX[1]-this.arrX[0],this.arrY[1]-this.arrY[0]);m=Math.atan2(this.arrX[this.arrLen-1]-this.arrX[this.arrLen-2],this.arrY[this.arrLen-1]-this.arrY[this.arrLen-2]);k=15*Math.sin(y)*q;y=11*Math.cos(y)*q;t=15*Math.sin(m)*q;q*=11*Math.cos(m);switch(parseInt(d.value,10)){case 1:this.arrX[0]+=k;this.arrY[0]+=y;
break;case 2:this.arrX[this.arrLen-1]-=t;this.arrY[this.arrLen-1]-=q;break;case 3:this.arrX[0]+=k,this.arrY[0]+=y,this.arrX[this.arrLen-1]-=t,this.arrY[this.arrLen-1]-=q}this.frmElmnt=a.createSVGPolyline(this.svgDoc,this.getRepaintElement(this.frmGroup),this.arrX,this.arrY,this.arrLen,p,r,f);w="url(#"+w+")";n="url(#"+n+")";a.setSVGAttr(this.frmElmnt,"id",c);switch(parseInt(d.value,10)){case 1:a.setSVGAttr(this.frmElmnt,"marker-start",w);break;case 2:a.setSVGAttr(this.frmElmnt,"marker-end",n);break;
case 3:a.setSVGAttr(this.frmElmnt,"marker-start",w),a.setSVGAttr(this.frmElmnt,"marker-end",n)}b===a.DOTTED?a.setSVGAttr(this.frmElmnt,"stroke-dasharray",f+" "+f):b===a.DASHED&&(f*=a.DASHRECT_LENGTH_MULT,a.setSVGAttr(this.frmElmnt,"stroke-dasharray",f+" "+f))}}};a.PainterType_Polyline.prototype=new a.PainterType_MPainter;return a}(_SCIntern||{});_SCIntern=function(a){function h(b){return g(18,b,!a.SpecialCO.mbTmzEn,"MB_LocalDateTime",!0)}function g(b,d,e,f){var c="";if(!0===e){e=d.getUTCFullYear();var g=parseInt(e.toString().slice(-2));var h=d.getUTCMonth()+1;var w=d.getUTCDate();var m=d.getUTCHours();var p=d.getUTCMinutes();var r=d.getUTCSeconds();d=d.getUTCMilliseconds()}else e=d.getFullYear(),g=parseInt(e.toString().slice(-2)),h=d.getMonth()+1,w=d.getDate(),m=d.getHours(),p=d.getMinutes(),r=d.getSeconds(),d=d.getMilliseconds();var q=12<=
m?"PM":"AM";var y=m%12;24!==b&&(10>h&&(h="0"+h),10>w&&(w="0"+w),10>m&&(m="0"+m),10>p&&(p="0"+p),10>r&&(r="0"+r));if(a.stringcmp("MB_LocalDateTime",f))switch(b){case 0:c=w+"."+h+"."+e+" "+m+":"+p+":"+r;break;case 1:c=e+"."+h+"."+w+" "+y+":"+p+":"+r+" "+q;break;case 2:c=w+"."+h+"."+g+" "+m+":"+p+":"+r;break;case 3:c=g+"."+h+"."+w+" "+y+":"+p+":"+r+" "+q;break;case 4:c=w+"-"+h+"-"+e+" "+m+":"+p+":"+r;break;case 5:c=e+"-"+h+"-"+w+" "+m+":"+p+":"+r;break;case 6:c=w+"-"+h+"-"+g+" "+m+":"+p+":"+r;break;
case 7:c=g+"-"+h+"-"+w+" "+m+":"+p+":"+r;break;case 8:c=w+"/"+h+"/"+e+" "+m+":"+p+":"+r;break;case 9:c=e+"/"+h+"/"+w+" "+m+":"+p+":"+r;break;case 10:c=w+"/"+h+"/"+g+" "+m+":"+p+":"+r;break;case 11:c=g+"/"+h+"/"+w+" "+m+":"+p+":"+r;break;case 12:c=h+"/"+w+"/"+e+" "+y+":"+p+":"+r+" "+q;break;case 13:c=h+"/"+w+"/"+g+" "+y+":"+p+":"+r+" "+q;break;case 14:c=w+"."+h+"."+e+" "+m+":"+p;break;case 15:c=w+"."+h+"."+e;break;case 16:c=w+"."+h+"."+e+" "+m+":"+p;break;case 17:c=w+"."+h+"."+g;break;case 18:c=m+
":"+p+":"+r;break;case 19:c=y+":"+p+":"+r+" "+q;break;case 20:c=m+":"+p;break;case 21:c=y+":"+p+" "+q;break;case 22:0<d&&(c=a.pad(d,3),c="."+c);c=m+":"+p+":"+r+c;break;case 23:0<d&&(c=a.pad(d,3),c="."+c);c="TOD#"+m+":"+p+":"+r+c;break;case 24:c="T#";p+=60*m;0<p&&(c+=p+"m");c=c+(r+"s")+(d+"ms");break;case 25:c=w+"-"+h+"-"+e;break;case 26:c="D#"+e+"-"+h+"-"+w;break;case 27:c="D#"+e+"-"+h+"-"+w+" "+m+":"+p+":"+r;break;default:c=""}else if(a.stringcmp(a.SpecialCO.dateLocalNow.name,f))switch(b){case 0:c=
w+"."+h+"."+e;break;case 1:c=e+"."+h+"."+w;break;case 2:c=w+"."+h+"."+g;break;case 3:c=g+"."+h+"."+w;break;case 4:c=w+"-"+h+"-"+e;break;case 5:c=e+"-"+h+"-"+w;break;case 6:c=w+"-"+h+"-"+g;break;case 7:c=g+"-"+h+"-"+w;break;case 8:c=w+"/"+h+"/"+e;break;case 9:c=e+"/"+h+"/"+w;break;case 10:c=w+"/"+h+"/"+g;break;case 11:c=g+"/"+h+"/"+w;break;case 12:c=h+"/"+w+"/"+e;break;case 13:c=h+"/"+w+"/"+g;break;case 14:c=w+"."+h+"."+e;break;case 15:c=w+"."+h+"."+e;break;case 16:c=w+"."+h+"."+e;break;case 17:c=
w+"."+h+"."+g;break;case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:c="";break;default:c=""}else if(a.stringcmp(a.SpecialCO.timeLocalNow.name,f))switch(b){case 0:c=m+":"+p+":"+r;break;case 1:c=y+":"+p+":"+r+" "+q;break;case 2:c=m+":"+p+":"+r;break;case 3:c=y+":"+p+":"+r+" "+q;break;case 4:c=m+":"+p+":"+r;break;case 5:c=m+":"+p+":"+r;break;case 6:c=m+":"+p+":"+r;break;case 7:c=m+":"+p+":"+r;break;case 8:c=m+":"+p+":"+r;break;case 9:c=m+":"+p+":"+r;break;case 10:c=m+
":"+p+":"+r;break;case 11:c=m+":"+p+":"+r;break;case 12:c=y+":"+p+":"+r+" "+q;break;case 13:c=y+":"+p+":"+r+" "+q;break;case 14:c=m+":"+p;break;case 15:c="";break;case 16:c=m+":"+p;break;case 17:c="";break;case 18:c=m+":"+p+":"+r;break;case 19:c=y+":"+p+":"+r+" "+q;break;case 20:c=m+":"+p;break;case 21:c=y+":"+p+" "+q;break;case 22:case 23:case 24:case 25:case 26:case 27:c="";break;default:c=""}return c}a.mb_calendarReadVal=function(b,d){var e=a.strstr(b,"_INDCO."),f="",c=0,g=1970;e?a.prefixcmp("daysInMonth",
b)||a.prefixcmp("Wday1InMonth",b)?(18>a.strlen(e)&&(f=a.sprintf("MB_Calendar.month%s",e),f=a.directReadContainer(f),f!==a.CONTAINER_INITIAL_VALUE&&(c=parseInt(f,10)),f=a.sprintf("MB_Calendar.year%s",e),f=a.directReadContainer(f),f!==a.CONTAINER_INITIAL_VALUE&&(g=parseInt(f,10))),a.prefixcmp("daysInMonth",b)?f=a.sprintf("%d",(new Date(g,c+1,0)).getDate()):a.prefixcmp("Wday1InMonth",b)&&(f="0",1970<=g&&2100>=g&&(f=a.sprintf("%d",(new Date(g,c,1)).getDay()))),b=1):b=0:b=0;0===b&&(f=a.directReadContainer(d));
return f};a.mb_calendarWriteVal=function(b,d){var e=0,f=a.strstr(b,"_INDCO."),c,g,k=g=c=0,w=0,m=0;if(f)if(a.prefixcmp("timestamp",b)&&18>a.strlen(f)&&2<=a.getDebugLevel()&&a.log_append_ln("calendar timetamp: '"+d+"'"),a.prefixcmp("action",b)&&18>a.strlen(f)){if(a.stringcmp(d,"SET_TS")){b=a.sprintf("MB_Calendar.time%s",f);d=a.directReadContainer(b);if(d!==a.CONTAINER_INITIAL_VALUE&&(b=/^(\d*):(\d*):(\d*)/.exec(d),null!==b)){m=parseInt(b[1],10);var p=parseInt(b[2],10);w=parseInt(b[3],10)}b=a.sprintf("MB_Calendar.day%s",
f);d=a.directReadContainer(b);d!==a.CONTAINER_INITIAL_VALUE&&(k=parseInt(d,10));b=a.sprintf("MB_Calendar.month%s",f);d=a.directReadContainer(b);d!==a.CONTAINER_INITIAL_VALUE&&(g=parseInt(d,10));b=a.sprintf("MB_Calendar.year%s",f);d=a.directReadContainer(b);d!==a.CONTAINER_INITIAL_VALUE&&(c=parseInt(d,10));1===a.SpecialCO.mbTmzEn.value?(c=new Date(c,g,k,m,p,w,0),c=c.getTime()/1E3):c=Date.UTC(c,g,k,m,p,w,0)/1E3;b=a.sprintf("MB_Calendar.timestamp%s",f);d=a.sprintf("%i",c);a.directWriteContainer(b,d)}else a.stringcmp(d,
"GET_TS")?(c=0,b=a.sprintf("MB_Calendar.timestamp%s",f),d=a.directReadContainer(b),d!==a.CONTAINER_INITIAL_VALUE&&(c=parseInt(d,10)),g=new Date(0),1===a.SpecialCO.mbTmzEn.value?g.setUTCSeconds(c):g.setSeconds(c),g&&(b=a.sprintf("MB_Calendar.day%s",f),d=a.sprintf("%d",g.getDate()),a.directWriteContainer(b,d),b=a.sprintf("MB_Calendar.month%s",f),d=a.sprintf("%d",g.getMonth()),a.directWriteContainer(b,d),b=a.sprintf("MB_Calendar.year%s",f),d=a.sprintf("%d",g.getFullYear()),a.directWriteContainer(b,d),
b=a.sprintf("MB_Calendar.time%s",f),d=h(g),a.directWriteContainer(b,d))):a.stringcmp(d,"GET_DATETIME")&&(g=new Date,b=a.sprintf("MB_Calendar.day%s",f),d=a.sprintf("%d",g.getDate()),a.directWriteContainer(b,d),b=a.sprintf("MB_Calendar.month%s",f),d=a.sprintf("%d",g.getMonth()),a.directWriteContainer(b,d),b=a.sprintf("MB_Calendar.year%s",f),d=a.sprintf("%d",g.getFullYear()),a.directWriteContainer(b,d),b=a.sprintf("MB_Calendar.time%s",f),d=h(g),a.directWriteContainer(b,d));e=1}else e=0,(a.prefixcmp("day_",
b)||a.prefixcmp("month_",b)||a.prefixcmp("year_",b)||a.prefixcmp("time_",b)||a.prefixcmp("timestamp_",b))&&a.scheduleRepaint();1==e&&a.scheduleRepaint();return e};a.executeCalendarAction=function(b,d){2<=a.getDebugLevel()&&a.log_append_ln("executeCalendarAction name: "+b+"value: "+d)};a.DateTime_ReadDT=function(b,d,e,f,c,h){var k="";if(null===b||null===d)return k;var n=parseInt(b,10);if(!0===isNaN(n))return k;if(null!==c){var m=1970;f=d=1;var p=0,r=0,q=0,y=0;k="";b=null;var t=0,u=0,v=0,z=(new Date).getFullYear();
z=parseInt(z.toString().slice(-2));switch(n){case 0:b=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),m=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10));break;case 1:b=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(c);null!==b&&(m=parseInt(b[1],10),d=parseInt(b[2],10),f=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),k=b[7]);break;case 2:b=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)/.exec(c);
if(null!==b){f=parseInt(b[1],10);d=parseInt(b[2],10);var x=parseInt(b[3],10);p=parseInt(b[4],10);r=parseInt(b[5],10);q=parseInt(b[6],10);m=x+(x>z)?1900:2E3}break;case 3:b=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(c);null!==b&&(x=parseInt(b[1],10),d=parseInt(b[2],10),f=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),k=b[7],m=x+(x>z)?1900:2E3);break;case 4:b=/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),m=
parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10));break;case 5:b=/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(m=parseInt(b[1],10),d=parseInt(b[2],10),f=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10));break;case 6:b=/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),x=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),m=x+(x>z)?1900:2E3);break;case 7:b=
/^(\d*)-(\d*)-(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(x=parseInt(b[1],10),d=parseInt(b[2],10),f=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),m=x+(x>z)?1900:2E3);break;case 8:b=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),m=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10));break;case 9:b=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(m=parseInt(b[1],10),d=parseInt(b[2],
10),f=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10));break;case 10:b=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),x=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),m=x+(x>z)?1900:2E3);break;case 11:b=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)/.exec(c);null!==b&&(x=parseInt(b[1],10),d=parseInt(b[2],10),f=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),m=
x+(x>z)?1900:2E3);break;case 12:b=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(c);null!==b&&(d=parseInt(b[1],10),f=parseInt(b[2],10),m=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),k=b[7]);break;case 13:b=/^(\d*)\/(\d*)\/(\d*)\s(\d*):(\d*):(\d*)\s(\w*)/.exec(c);null!==b&&(d=parseInt(b[1],10),f=parseInt(b[2],10),x=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10),k=b[7],m=x+(x>z)?1900:2E3);break;case 14:b=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*)/.exec(c);
null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),m=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10));break;case 15:b=/^(\d*)\.(\d*)\.(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),m=parseInt(b[3],10));break;case 16:b=/^(\d*)\.(\d*)\.(\d*)\s(\d*):(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),x=parseInt(b[3],10),p=parseInt(b[4],10),r=parseInt(b[5],10),m=x+(x>z)?1900:2E3);break;case 17:b=/^(\d*)\.(\d*)\.(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=
parseInt(b[2],10),x=parseInt(b[3],10),m=x+(x>z)?1900:2E3);break;case 18:b=/^(\d*):(\d*):(\d*)/.exec(c);null!==b&&(p=parseInt(b[1],10),r=parseInt(b[2],10),q=parseInt(b[3],10));break;case 19:b=/^(\d*):(\d*):(\d*)\s(\w*)/.exec(c);null!==b&&(p=parseInt(b[1],10),r=parseInt(b[2],10),q=parseInt(b[3],10),k=b[4]);break;case 20:b=/^(\d*):(\d*)/.exec(c);null!==b&&(p=parseInt(b[1],10),r=parseInt(b[2],10));break;case 21:b=/^(\d*):(\d*)\s(\w*)/.exec(c);null!==b&&(p=parseInt(b[1],10),r=parseInt(b[2],10),k=b[3]);
break;case 22:b=/^(\d*):(\d*):(\d*)\.?(\d*)?/.exec(c);if(null!==b&&(p=parseInt(b[1],10),r=parseInt(b[2],10),q=parseInt(b[3],10),3<b.length&&void 0!==b[4])){for(;3>b[4].length;)b[4]+="0";y=parseInt(b[4],10)}break;case 23:b=/^TOD#(\d*):(\d*):(\d*)\.?(\d*)?/.exec(c);if(null!==b&&(p=parseInt(b[1],10),r=parseInt(b[2],10),q=parseInt(b[3],10),3<b.length&&void 0!==b[4])){for(;3>b[4].length;)b[4]+="0";y=parseInt(b[4],10)}break;case 24:c=b=c;n=0;for(p=c.length;n<=p;){if(!1===isNaN(c[n])){for(r=parseInt(c.substring(n,
p),10);!1===isNaN(c[n]);)n++;"s"==c[n]?t=r:"m"==c[n]&&"s"!=c[n+1]?u=r:"m"==c[n]&&"s"==c[n+1]?(x=r,n++):"h"==c[n]&&(v=r)}n++}p=v;r=u;q=t;y=x;break;case 25:b=/^(\d*)-(\d*)-(\d*)/.exec(c);null!==b&&(f=parseInt(b[1],10),d=parseInt(b[2],10),m=parseInt(b[3],10));break;case 26:b=/^D#(\d*)-(\d*)-(\d*)/.exec(c);null!==b&&(m=parseInt(b[1],10),d=parseInt(b[2],10),f=parseInt(b[3],10));break;case 27:b=/^D#(\d*)-(\d*)-(\d*) (\d*):(\d*):(\d*)/.exec(c),null!==b&&(m=parseInt(b[1],10),d=parseInt(b[2],10),f=parseInt(b[3],
10),p=parseInt(b[4],10),r=parseInt(b[5],10),q=parseInt(b[6],10))}null!==b?(a.stringcmp(k,"PM")&&(p+=12),!0===e?e=Date.UTC(m,d-1,f,p,r,q,y):(e=new Date(m,d-1,f,p,r,q,y),e=e.getTime()),h&&(e/=1E3),h=a.toFixed(e,0)):h="";k=h}else{d!=a.SpecialCO.dateTimeLocalNow.name&&d!=a.SpecialCO.dateLocalNow.name&&d!=a.SpecialCO.timeLocalNow.name||null!==f||(f=new Date);if(null===f)return a.err_append_ln("No date obj given!"),"";k=g(n,f,e,d,h)}return k};return a}(_SCIntern||{});_SCIntern=function(a){a.BACnet_Alarming=function(b){this.TextFlags={id:!1,instance:!1,type:!1,from:!1,to:!1};this.readTextFlags=function(){var d=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam10.name),10);!1===isNaN(d)&&(this.TextFlags.id=0<d?!0:!1);d=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam20.name),10);!1===isNaN(d)&&(this.TextFlags.instance=0<d?!0:!1);d=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam30.name),10);!1===isNaN(d)&&(this.TextFlags.type=0<d?!0:!1);d=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam40.name),
10);!1===isNaN(d)&&(this.TextFlags.from=0<d?!0:!1);d=parseInt(a.ReadContainer(b.co.AlarmTextExtraParam50.name),10);!1===isNaN(d)&&(this.TextFlags.to=0<d?!0:!1)};this.readTextFlags();2<=a.getDebugLevel()&&a.log_append_ln("BACnet instance created")};a.BACnet_HisLineType=function(b,e,f){var c=!1,d=parseInt(f.Version.value,10);!0===isNaN(d)&&(d=1);var g=parseInt(f.ColorMode.value,10);!0===isNaN(g)&&(g=0);this.setStateColor=function(b){if(void 0===b||0>=b.length)b="255,255,255";this.color=a.FVCOLUMNBACKGROUNDCOLORSPECSTARTSTR+
b+"#"};this.setStateColor(f.StateNoStateColor.value);this.itemId=parseInt(b[0],10);!0===isNaN(this.itemId)&&(this.itemId=b[0]);this.typeId=parseInt(b[1],10);!0===isNaN(this.typeId)&&(this.typeId=b[1]);this.TID_HtmlTag=e+"_"+this.typeId;if(20<=d&&a.Link.SrvInfo_ALR2Activ){this.Grp1=parseInt(b[2],10);!0===isNaN(this.Grp1)&&(this.Grp1=b[2]);this.Grp1_HtmlTag=e+"_GRP1_"+this.Grp1;this.Grp2=parseInt(b[3],10);!0===isNaN(this.Grp2)&&(this.Grp2=b[3]);this.Grp2_HtmlTag=e+"_GRP2_"+this.Grp2;this.Grp3=parseInt(b[4],
10);!0===isNaN(this.Grp3)&&(this.Grp3=b[4]);this.Grp3_HtmlTag=e+"_GRP3_"+this.Grp3;this.Prio=parseInt(b[5],10);!0===isNaN(this.Prio)&&(this.Prio=b[5]);this.Prio_HtmlTag=e+"_PRIO_"+this.Prio;var h=parseInt(b[6],16);!0===isNaN(h)&&(h=0);var m=parseInt(b[7],16);!0===isNaN(m)&&(m=0);this.on=1E3*h+m;h=parseInt(b[8],16);!0===isNaN(h)&&(h=0);m=parseInt(b[9],16);!0===isNaN(m)&&(m=0);this.off=1E3*h+m;0<this.on&&0>=this.off&&(c=!0);this.state=parseInt(b[10],10);isNaN(this.state)&&(this.state=b[10]);0===this.state?
(this.state="NAK",0===g&&(!0===c?this.setStateColor(f.StateOnNackedColor.value):this.setStateColor(f.StateOffNackedColor.value))):1==this.state&&(this.state="ACK",0===g&&(!0===c?this.setStateColor(f.StateOnAckedColor.value):this.setStateColor(f.StateOffAckedColor.value)));22<=d&&a.Link.SrvInfo_ALR2Activ&&2.01<=a.Link.SrvInfo_ALR2Version&&(this.Grp4=parseInt(b[11],10),!0===isNaN(this.Grp4)&&(this.Grp4=b[11]),this.Grp4_HtmlTag=e+"_GRP4_"+this.Grp4,this.Grp5=parseInt(b[12],10),!0===isNaN(this.Grp5)&&
(this.Grp5=b[12]),this.Grp5_HtmlTag=e+"_GRP5_"+this.Grp5,this.Grp6=parseInt(b[13],10),!0===isNaN(this.Grp6)&&(this.Grp6=b[13]),this.Grp6_HtmlTag=e+"_GRP6_"+this.Grp6,this.Grp7=parseInt(b[14],10),!0===isNaN(this.Grp7)&&(this.Grp7=b[14]),this.Grp7_HtmlTag=e+"_GRP7_"+this.Grp7,this.Grp8=parseInt(b[15],10),!0===isNaN(this.Grp8)&&(this.Grp8=b[15]),this.Grp8_HtmlTag=e+"_GRP8_"+this.Grp8,this.Grp9=parseInt(b[16],10),!0===isNaN(this.Grp9)&&(this.Grp9=b[16]),this.Grp9_HtmlTag=e+"_GRP9_"+this.Grp9,this.Grp10=
parseInt(b[17],10),!0===isNaN(this.Grp10)&&(this.Grp10=b[17]),this.Grp10_HtmlTag=e+"_GRP10_"+this.Grp10,this.AlrTxt=b[18]);e="";1==g&&0<=this.Grp1?(e=f.AlrCoPrefix.name+"Grp1Color["+this.Grp1+"]."+f.AlrCoIndex.name,this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,e))):2==g&&0<=this.Grp2?(e=f.AlrCoPrefix.name+"Grp2Color["+this.Grp2+"]."+f.AlrCoIndex.name,this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,e))):3==g&&0<=this.Grp3?(e=f.AlrCoPrefix.name+"Grp3Color["+this.Grp3+"]."+f.AlrCoIndex.name,
this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,e))):4==g&&0<=this.Prio&&(e=f.AlrCoPrefix.name+"PrioColor["+this.Prio+"]."+f.AlrCoIndex.name,this.setStateColor(a.RW_readSource(a.INFO_T_CONTAINER,e)))}else this.on=parseInt(b[2],16),this.off=parseInt(b[3],16),0!==this.on&&0===this.off&&(c=!0),this.state=parseInt(b[4],10),isNaN(this.state)&&(this.state=b[4]),0===this.state?(this.state="NAK",!0===c?this.setStateColor(f.StateOnNackedColor.value):this.setStateColor(f.StateOffNackedColor.value)):1==
this.state&&(this.state="ACK",!0===c?this.setStateColor(f.StateOnAckedColor.value):this.setStateColor(f.StateOffAckedColor.value));this.BACnetEvent={typeId:0,instance:0,type:0,from:0,to:0,description:""};this.BACnetEvent.typeId=parseInt(b[6],10);this.BACnetEvent.instance=parseInt(b[7],10);this.BACnetEvent.type=parseInt(b[8],10);this.BACnetEvent.from=parseInt(b[9],10);this.BACnetEvent.to=parseInt(b[10],10);this.BACnetEvent.description=b[11];!0!==isNaN(this.BACnetEvent.typeId)&&!0!==isNaN(this.BACnetEvent.instance)&&
!0!==isNaN(this.BACnetEvent.type)&&!0!==isNaN(this.BACnetEvent.from)&&!0!==isNaN(this.BACnetEvent.to)||a.err_append_ln("BACnet_HisLineType error invalid IDs");0===this.state?(this.state="NAK",!0===c?this.setStateColor(f.StateOnNackedColor.value):this.setStateColor(f.StateOffNackedColor.value)):1==this.state&&(this.state="ACK",!0===c?this.setStateColor(f.StateOnAckedColor.value):this.setStateColor(f.StateOffAckedColor.value))};var h="Analog Input;Analog Output;Analog Value;Binary Input;Binary Output;Binary Value;Calendar;Command;Device;Event Enrollment;File;Group;Loop;Multi State Input;Multi State Output;Notification Class;Program;Schedule;Averaging;Multi State Value;Trend Log;Life Safety Point;Life Safety Zone;Accumulator;Pulse Converter;Event Log;Global Group;Trendlog Multiple;Load Control;Structured View".split(";"),
g="Change Of Bit String;Change Of State;Change Of Value;Command Failure;Floating Limit;Out Of Range;Complex Event Type;Deprecated;Change Of Life Safety;Enumeration;Buffer Ready;Unsigned Range".split(";"),b="State Normal;Fault;Off Normal;High Limit;Low Limit;Life Safety Alarm".split(";");a.BACnet_generateHistoryAlarmContainerValue=function(d,e){var f,c="";if(null===d.rArrayHistory)return"";for(f=0;f<d.rArrayHistory.length;f++){c+=d.rArrayHistory[f].color;c+=a.FVCOLSEPTOKEN2;c+=d.rArrayHistory[f].itemId;
c+=a.FVCOLSEPTOKEN2;c+=d.rArrayHistory[f].typeId;c+=a.FVCOLSEPTOKEN2;var n=d.rArrayHistory[f],k="";0<n.BACnetEvent.description.length&&(k=n.BACnetEvent.description,k+=" ; ");!0===e.id&&(k=30>n.BACnetEvent.typeId&&0<=n.BACnetEvent.typeId?k+h[n.BACnetEvent.typeId]:k+n.BACnetEvent.typeId,k+=" ; ");!0===e.instance&&(k+=n.BACnetEvent.instance,k+=" ; ");!0===e.type&&(k=6>n.BACnetEvent.type&&0<=n.BACnetEvent.type?k+g[n.BACnetEvent.type]:k+n.BACnetEvent.instance,k+=" ; ");!0===e.from&&(k=6>n.BACnetEvent.from&&
0<=n.BACnetEvent.from?k+b[n.BACnetEvent.from]:k+n.BACnetEvent.from,k+=" ; ");!0===e.to&&(k=6>n.BACnetEvent.to&&0<=n.BACnetEvent.to?k+b[n.BACnetEvent.to]:k+n.BACnetEvent.to,k+=" ; ");c+=k;c+=a.FVCOLSEPTOKEN2;c+=a.getAlarmDateTimeByIntMSec(1E3*d.rArrayHistory[f].on);c+=a.FVCOLSEPTOKEN2;c+=a.getAlarmDateTimeByIntMSec(1E3*d.rArrayHistory[f].off);c+=a.FVCOLSEPTOKEN2;c+=d.rArrayHistory[f].state;c+=a.FVLINESEPTOKEN2}return c};return a}(_SCIntern||{});
